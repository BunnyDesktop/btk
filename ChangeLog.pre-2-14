2008-09-17  Matthias Clasen  <mclasen@redhat.com>

	* configure.in: Bump version

	* === Released 2.14.2 ===

	* NEWS: Updates

2008-09-17  Matthias Clasen  <mclasen@redhat.com>

	Bug 346903 – btk_enumerate_printers needs events to complete

	* btk/btkprintbackend.h:
	* btk/btkprintbackend.c: Add a BtkPrintBackend::status property.

	* modules/printbackends/cups/btkcupsutils.h:
	* modules/printbackends/cups/btkcupsutils.c: Turn the connection
	test into a tristate available/unavailable/in progress.
	
	* modules/printbackends/cups/btkprintbackendcups.c: Use a single
	connection test instance for getting the default printer and for
	getting the printer list. Set the BtkPrintBackend::status property
	according to the result of the connection test. Use the printer-type
	attribute to find the default printer, if cups supports it.

	* btk/btkprinter.c: When enumerating printers, give up when
	the backend status is 'unavailable'.

	* btk/btkprintunixdialog.c (printer_status_cb): Select the printer
	when it is the default and nothing else has been selected yet.

	Patch by Marek Kasik.

2008-09-17  Christian Persch  <chpe@bunny.org>

	Bug 552668 – format not a string literal and no format arguments in
	btkimmodule

	* btk/btkimmodule.c: (btk_im_module_load): Use %s with g_warning here.

2008-09-17  Christian Persch  <chpe@bunny.org>

	Bug 552667 – btkimage containing gicon leaks memory

	* btk/btkimage.c: (ensure_pixbuf_for_gicon): Fix critical warnings
	when looking up the icon fails. Plug a mem leak.

2008-09-17  Matthias Clasen  <mclasen@redhat.com>

	Bug 329593 – Entering characters on a line very cpu intensive and 
	slow

	* btk/btknotebook.c (btk_notebook_page_allocate): Return a boolean
	that indicates whether the tab allocation has changed.
	(btk_notebook_pages_allocate): Only redraw the tabs if their
	allocation has changed.
	(btk_notebook_calculate_tabs_allocations): Remove unused return value.
	Patch by Owen Taylor

2008-09-17  Matthias Clasen  <mclasen@redhat.com>

	Bug 408154 – [PATCH] Change BtkEntryCompletion max-items to style
	property

	* btk/btkentrycompletion.c (_btk_entry_completion_resize_popup): 
	Take actions into account when finding the available space for
	matches. Patch by Ross Burton

2008-09-17  Matthias Clasen  <mclasen@redhat.com>

	Bug 552500 – BtkPrintSettings API doc not precise enough

	* btk/btkprintsettings.c: Documentation improvements. Suggested
	by Guillaume Cottenceau

2008-09-17  Matthias Clasen  <mclasen@redhat.com>

	Bug 552107 – Small libtool fixes

	* configure.in: Regenerate libtool early, quote $deplibs_check_method.
	Patch by Patryk Zawadzki

2008-09-17  Matthias Clasen  <mclasen@redhat.com>

	Bug 551722 – btk_widget_set_scroll_adjustments() should check the
	signal signature

	* btk/btkwidget.c (btk_widget_set_scroll_adjustments): Check the
	signature of the signal. Patch by Christian Persch

2008-09-16  Michael Natterer  <mitch@imendio.com>

	* btk/btkwidget.c (_btk_widget_set,get_pointer_window): don't
	access widget->window if the widget is not realized.

2008-09-16  Matthias Clasen  <mclasen@redhat.com>

	Bug 551987 – BtkPaned redrawing problem

	* btk/btkpaned.c: Remove excess invalidations. Patch by Owen Taylor

2008-09-16  Matthias Clasen  <mclasen@redhat.com>

	Bug 551987 – BtkPaned redrawing problem

	* btk/btkhpaned.c:
	* btk/btkvpaned.c: Queue invalidations when the handle is moved 
	due to child changes. Patch by Owen Taylor

2008-09-16  Matthias Clasen  <mclasen@redhat.com>

	Bug 552001 – btkimcontextsimple.c: variable is declared at middle of
	block

	* btk/btkimcontextsimple.c: Fix a C99ism, pointed out by Kazuki
	Iwamoto.

2008-09-13  Tor Lillqvist  <tml@novell.com>

	* btk/btkmain.c: Don't use the deprectated
	g_win32_get_package_installation_directory() and
	g_win32_get_package_installation_subdirectory() functions. Use
	g_win32_get_package_installation_directory_of_module()
	instead. Also, don't use the deprecated silly
	G_WIN32_DLLMAIN_FOR_DLL_NAME() macro, but an explicit minimal
	DllMain() that just saves the DLL handle.

2008-09-13  Cosimo Cecchi  <cosimoc@bunny.org>

	Bug 552153 – BtkModules loading with XSettings doesn't work if the
	BTK_MODULES env var isn't set.

	* btk/btkmain.c: (do_post_parse_initialization):
	* btk/btkmodules.c: (_btk_modules_init):
	Call _btk_modules_init () even if btk_modules_string is NULL, so
	that BtkModules specified with XSettings could be loaded.

2008-09-11  Cosimo Cecchi  <cosimoc@bunny.org>

	Bug 536542 – btk_list_store_set() documentation doesn't say whether
	values are copied.

	* btk/btkliststore.c:
	* btk/btktreestore.c:
	Explicitly mention in the docs that btk_[list,tree]_store_set copies
	or keep	a reference of the values.

2008-09-11  Marek Kasik  <mkasik@redhat.com>

	Bug 551378 - Print dialog: should try UDS when fetching PPD for
	localhost

	* modules/printbackends/cups/btkprintbackendcups.c: Add ability
	to get PPD file from CUPS through Unix domain socket

2008-09-11  Christian Dywan  <christian@imendio.com>

	Bug 551567 – DND mark broken

	* btk/btktextbtree.c (redisplay_mark): invalidate mark properly
        Patch by Yevgen Muntyan.

2008-09-10  Björn Lindqvist  <bjourne@gmail.com>

	Bug 551699 – btk_scrolled_window_destroy() is broken

	* btk/btkscrolledwindow.c (btk_scrolled_window_destroy,
	btk_scrolled_window_finalize): Check that the [hv]scrollbar
	attributes are not-NULL before destroying and unparenting them.

2008-09-10  Simos Xenitellis  <simos@bunny.org>

	Bug 550676 – Memory leak, update keyboard layout data structure 

	* btk/btkimcontextsimple.c (check_normalize_nfc): Added 
	function that checks if unicode sequence can be normalised (NFC)
	to single character. Fixed memory leaks.
	(check_algorithmically): Moved code to check_normalize_nfc, 
	updated switch statement for dead keys.
	(btk_im_context_simple_filter_keypress): Changed order; first
	check_algorithmically() is attempted, then check_compact_table().

	* btk/btkimcontextsimpleseqs.c: Updated compose sequence table
	btk_compose_seqs_compac[].

	* btk/compose-parse.py: Updated compose table generation script,
	matches output to btk/btkimcontextsimpleseqs.c.

Wed Sep 10 06:18:25 2008  Søren Sandmann  <sandmann@redhat.com>

	* bdk/x11/bdkscreen-x11.c (init_multihead): Don't use
	XRRGetScreenResources() as there are performance issues with
	it. Instead rely on the fact that the RandR information is
	propagated through Xinerama as well.

2008-09-09  Marek Kasik  <mkasik@redhat.com>

	Bug 551386 – btk_printer_set_is_default() always sets TRUE

	* btk/btkprinter.c: sets the is_default parameter to the value
	given by caller

2008-09-08  Cosimo Cecchi  <cosimoc@bunny.org>

	Bug 551325 - Reference to wrong parameter in btk_editable_insert_text

	* btk/btkeditable.c: Fix a reference to an invalid parameter in the
	docs.

2008-09-08  Paolo Borelli  <pborelli@katamail.com>

	* btk/btkfilechooserentry.c (install_start_autocompletion_idle):
	use bdk_threads_add_idle so that the handler acquires the lock
	since it calls btk functions.

2008-09-08  Tor Lillqvist  <tml@novell.com>

	* configure.in (debug_default): Correct help string for
	--disable-gdiplus.

2008-09-07  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkfilechooserdefault.c: Actually use mime types, not content
	types, for mimetype-based filtering, so it may work on win32.

2008-09-07  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkfilechooserdefault.c (search_selected_foreach_get_file_cb): 
	Ref the files, to make btk_file_chooser_get_files() behave as
	documented.

	* btk/btkfilechooserdefault.c (search_clear_model): Don't leak
	the content of the search model.
	
	* btk/btkfilechooserdefault.c (search_hit_get_info_cb): Don't leak
	the content here, either.

2008-09-07  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkfilechooserdefault.c (search_add_hit): Don't unref the
	GFile we just put into the search_model. This adds a new memory
	leak...

2008-09-07  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkfilechooserdefault.c (shortcuts_append_bookmarks): Plug
	a memory leak.

2008-09-06  Matthias Clasen  <mclasen@redhat.com>

	Bug 550062 – Small update in bdk/bdkkeysyms.h

	* bdk/bdkkeysyms.h: Add dead_perspomeni and fix dead_dasia.
	Patch by Simos Xenitellis

2008-09-06  Matthias Clasen  <mclasen@redhat.com>

	Bug 550989 – bdk_display_put_event() should call
	g_main_context_wakeup()

	* bdk/bdkdisplay.c (bdk_display_put_event): Wake up the main loop
	after queueing the event. Patch by Owen Taylor

2008-09-07  Yair Hershkovitz  <yairhr@gmail.com>

	Bug 319849 - btkcalendar look in RTL locales

	* btk/btkcalendar.c (calendar_realize_week_numbers),
	(btk_calendar_realize): added missing RTL code to handle week numbers
	from btk_calendar_size_alloc.

2008-09-06  Sven Herzberg  <sven@imendio.com>

	Bug 551063 – deprecated marking without a link to what new code should
	use

	* bdk/bdkevents.c: added inline documentation for bdk_input_add() and
	bdk_input_add_full(); added replacement hints into the deprecation
	message

2008-09-05  Michael Natterer  <mitch@imendio.com>

	* btk/btkfilechooserdefault.c (file_list_drag_data_received_cb):
	stop the emission of the signal also when we bail out early
	because we don't accept drops from ourselves. Keeps the code from
	running into a warning in btktreeview.c.

2008-09-05  Tor Lillqvist  <tml@novell.com>

	* btk-zip.sh.in: Fetch manpages from share/man where they get
	installed. Don't include pointless entries for directories in the
	zip files. Add etc/btk-2.0/im-multipress.conf.

2008-09-04  Matthias Clasen  <mclasen@redhat.com>

	* configure.in: Bump version

	* === Released 2.14.1 ===

2008-09-04  Matthias Clasen  <mclasen@redhat.com>

	* configure.in: Bump version

	* === Released 2.14.0 ===

2008-09-04  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkenums.h: Add nicks for the BtkNumberUpLayout values.

	* btk/btkprintunixdialog.c:
	* btk/btkprintsettings.c: Simplify the handling of BtkNumberUpLayout
	values. Followup on #535158, proposed by Christian Persch.

2008-09-04  Matthias Clasen  <mclasen@redhat.com>

	* INSTALL.in: Update required versions

2008-09-04  Michael Natterer  <mitch@imendio.com>

	* btk/btkhandlebox.c: events return bboolean not bint.
	Change misnamed btk_handle_box_button_changed() to
	btk_handle_box_button_press(). Reindent static prototypes.

2008-09-04  Michael Natterer  <mitch@imendio.com>

	* btk/btkwidget.c (btk_widget_get_draw_rectangle): when extending
	the draw rectangle by the "draw-border" style property, subtract
	"left" from "x" and "top" from "y", not the other way around.

2008-09-03  Matthias Clasen  <mclasen@redhat.com>
	
	* bdk/bdkwindow.c:
	* btk/btkbindings.c:
	* btk/btkcolorseldialog.c: More doc fixes

	* btk/btktestutils.c: Fix a typo in the docs.

2008-09-03  Matthias Clasen  <mclasen@redhat.com>

	* NEWS: Updates

	* configure.in: Bump version to 2.14.0

2008-09-03  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkcolorsel.c: Set page_size to 0 for the spinbuttons
	in the color selector.

	* README.in: Add a note about the BtkAdjustment clamping change

2008-09-03  Matthias Clasen  <mclasen@redhat.com>

	Bug 550528 - IconView DND interface does not work if only used as
	source

	* btk/btkiconview.c: Make source-only DND work. 
	Found by Alex Simon

2008-09-03  Matthias Clasen  <mclasen@redhat.com>

	* btk/btk.symbols: Add some missing symbols

2008-09-03  Matthias Clasen  <mclasen@redhat.com>
	
	* btk/btkprintsettings.c: Fix order of includes to avoid unwanted
	PLT entries.

2008-09-03  Michael Natterer  <mitch@imendio.com>

	* btk/btkmenu.c
	* btk/btkmenuitem.c: remove unused macro cruft. Also remove some
	unneeded includes.

2008-09-03  Michael Natterer  <mitch@imendio.com>

	* btk/btkarrow.c: expose-event returns bboolean not bint,
	reindented static prototypes and did some minor cleanups.

2008-09-03  Michael Natterer  <mitch@imendio.com>

	* btk/btkmenu.c: some more trivial cosmetic fixes.

2008-09-03  Christian Dywan  <christian@imendio.com>

	Bug 547449 – Entry/ Combo popup misplaced after resize

	* btk/btkcombobox.c (btk_combo_box_menu_position),
	(btk_combo_box_size_allocate): reposition the combo popup when the
        allocation changes
	* btk/btkentry.c (btk_entry_size_allocate): reposition the
        completion popup when the allocation changes

2008-09-03  Michael Natterer  <mitch@imendio.com>

	* btk/btkmenu.c (get_arrows_visible_area): proper function header
	formatting.

2008-09-02  Michael Natterer  <mitch@imendio.com>

	* btk/btkdialog.c (btk_dialog_delete_event_handler): return
	bboolean instead of bint. Reindent static prototypes.

2008-09-02  Michael Natterer  <mitch@imendio.com>

	* btk/btkwidget.c (btk_widget_get_allocation): removed this
	function because there is massive disagreement about how to
	implement it. Needs some general discussion in the next
	development cycle about how our C api should evolve.

	* btk/btk.symbols: changed accordingly.

2008-09-01  Wouter Bolsterlee  <wbolster@svn.bunny.org>

	* btk/btkselection.c:
	Update documentation for btk_selection_data_get_data to
	match the changes introduced in -r21232 (the length
	parameter was removed).

2008-08-30  Matthew Barnes  <mbarnes@redhat.com>

	Bug 549943 – btk_tool_shell_get_relief_style() always returns
	BTK_RELIEF_NONE

	* btk/btktoolshell.c (btk_tool_shell_get_relief_style): Return
	the correct relief style.

2008-08-29  Björn Lindqvist  <bjourne@gmail.com>

	Bug 437791 – Animation is played at the wrong speed

	* bdk-pixbuf/io-gif.c (gif_get_lzw): Better 100 ms timeout for
	broken GIFs with 0 frame timeout.

2008-08-29  Christian Dywan  <christian@imendio.com>

	Bug 549810 – Memory leaks in printing code

	* btk/btkprintjob.c (btk_print_job_set_property):
	* modules/printbackends/file/btkprintbackendfile.c
	(output_file_from_settings):
	* modules/printbackends/test/btkprintbackendtest.c
	(output_test_from_settings): free some temporary strings.
	Patch by Yevgen Muntyan.

2008-08-29  Michael Natterer  <mitch@imendio.com>

	* btk/btkwidget.h: move the btk_widget_get_parent() and
	btk_widget_get_parent_window() prototypes together with their
	respective setters.

	* btk/btkwidget.c: move btk_widget_get_parent_window() together
	with its setter.

2008-08-29  Michael Natterer  <mitch@imendio.com>

	* btk/btkscrolledwindow.c: events return bboolean not bint,
	reindent prototypes.

2008-08-29  Michael Natterer  <mitch@imendio.com>

	* configure.in: remove -DBANGO_DISABLE_SINGLE_INCLUDES from
	CPPFLAGS, I committed that accidentially.

2008-08-29  Michael Natterer  <mitch@imendio.com>

	* btk/btkpaned.c: minor indentation / coding style fixes.

2008-08-29  Matthias Clasen  <mclasen@redhat.com>

	Bug 549262 – BtkScrolledWindow should not accept focus unless
	BTK_CAN_FOCUS is set

	* btk/btkscrolledwindow.c (btk_scrolled_window_focus): only grab the
	focus, if BTK_WIDGET_CAN_FOCUS() returns TRUE. Patch by Sven 
	Herzberg

2008-08-29  Matthias Clasen  <mclasen@redhat.com>

	* btk/btk.symbols:
	* btk/btkselection.[hc]: Split btk_selection_data_get_data into
	btk_selection_data_get_data and btk_selection_data_get_length.
	Proposed by Owen Taylor.

2008-08-28  Christian Dywan  <christian@imendio.com>

	Bug 549734 – btk_selection_data_get_data prototype is wrong

	* btk/btkselection.[ch] (btk_selection_data_get_data): make the
	'length' argument of btk_selection_data_get_data a 'bint', that's
	what it should be.

2008-08-27  Cody Russell  <bratsche@bunny.org>

	* bdk/win32/bdkevents-win32.c:
	* bdk/win32/bdkwindow-win32.c (show_window_recurse): Check if 
	the window's state has BDK_WINDOW_STATE_MAXIMIZED set before
	calling ShowWindow (), and show using SW_SHOWMAXIMIZED or
	SW_RESTORE accordingly.  This fixes an issue where maximized
	windows that are iconified do not restore back to maximized
	when you click the taskbar. (#528975)

2008-08-27  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkprintoperation.c: Documentation fixes.

2008-08-27  Matthias Clasen  <mclasen@redhat.com>

	* bdk/x11/bdkwindow-x11.c:
	* bdk/win32/bdkwindow-win32.c: Return FALSE from reparent
	implementations to avoid #548993. Patch by Ed Catmur.

2008-08-27  Matthias Clasen  <mclasen@redhat.com>

	* modules/printbackends/cups/btkprintbackendcups.c: Don't capitalize
	"per" in "Pages per Sheet".

2008-08-26  Matthias Clasen  <mclasen@redhat.com>

	Bug 549354 – Crash trying to open a file on a remote folder

	* btk/btkfilechooserdefault.c (error_message_with_parent): Handle
	the fact that parent may be NULL without crashing. 

2008-08-25  Matthias Clasen  <mclasen@redhat.com>

	* modules/printbackends/cups/btkprintbackendcups.c: Replace 
	a long timeout with a second-granularity timeout.

2008-08-25  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkprintunixdialog.c:
	* modules/printbackends/cups/btkprintbackendcups.c: Add translator
	hints to many strings.

2008-08-25  Gian Mario Tagliaretti  <gianmt@bunny.org>

	Bug 549236 – missing Since 2.14 in btk_file_chooser_get_file
	
	* btk/btkmountoperation.c:
        * btk/btkfontsel.c:
        * btk/btkfilechooser.c: Fix the docs, missing Since 2.14.

2008-08-21  Matthias Clasen  <mclasen@redhat.com>

	* btk/btksettings.c: When reconstructing the color hash, try
	harder to avoid unnecessary notification, since this can lead
	to infinite reloading of rc files in some situations.

2008-08-21  Cody Russell  <bratsche@bunny.org>

	* bdk/win32/bdkevents-win32.c (doesnt_want_key): Remove the checks
	to see if the window is modally blocked.  This doesn't get us anything,
	and it confuses the search window in BtkTreeView (and potentially other
	utility windows in other apps).  (#520165)

2008-08-21  Michael Natterer  <mitch@imendio.com>

	* btk/btktreeview.c (btk_tree_view_realize): small formatting fix.

2008-08-21  Marek Kasik  <mkasik@redhat.com>

	Bug 545875 – evo crashed when trying to print pages 6-7 of a 1 page
	email

	* btk/btkprintoperation.c: Clamp page ranges to correct ranges

2008-08-21  Marek Kasik  <mkasik@redhat.com>

	* ChangeLog: changelog update for previous commit

2008-08-21  Marek Kasik  <mkasik@redhat.com>

	Bug 535158 – can't rearrange the order of multi pages per side

	* btk/btkprinter.c
	* btk/btkprinter.h
	* btk/btkprintunixdialog.c
	* btk/btkprintsettings.c
	* btk/btkprintsettings.h
	* btk/btkenums.h
	* modules/printbackends/cups/btkprintbackendcups.c: Allow user to
	specify layout of pages per sheet in number-up mode

Wed Aug 20 18:16:29 2008  Søren Sandmann  <sandmann@redhat.com>

	* bdk/x11/bdkscreen-x11.c (_bdk_x11_screen_size_changed): Emit the
	monitors changed signal when the screen size changes.

2008-08-20  Torsten Schoenfeld  <kaffeetisch@gmx.de>

	Bug 548346 – btk_color_selection_dialog_get_color_selection always
	returns NULL

	* btk/btkcolorseldialog.c
	(btk_color_selection_dialog_get_color_selection): Use the correct
	macro to test the validity of the passed-in dialog.

2008-08-05  Milan Crha  <mcrha@redhat.com>

	* btk/btknotebook.c: (btk_notebook_do_arrow): Allow changing page with
	arrows even on non-focusable notebook. (#528091)

2008-08-19  Federico Mena Quintero  <federico@novell.com>

	http://bugzilla.bunny.org/show_bug.cgi?id=543308 - The file
	chooser in "compact" mode uses the same size as in "open" mode.

	* btk/btkfilechooserdialog.c (btk_file_chooser_dialog_map): Don't
	force the default size here.  Let BtkFileChooserDefault be solely
	in charge of default sizing.
	(set_default_size): Removed obsolete code.

	* btk/btkfilechooserdefault.c (emit_default_size_changed): New
	helper function, to avoid dupliated code.  Only emits the signal
	if the widget is mapped, because that is when we actually know the
	size we'll want.
	(update_preview_widget_visibility): Use emit_default_size_changed()
	(update_appearance): Likewise.
	(btk_file_chooser_default_style_set): Likewise.
	(btk_file_chooser_default_screen_changed): Likewise.
	(btk_file_chooser_default_map): Likewise.
	(find_good_size_from_style): Unconditionally compute a good
	default size for the "OPEN" modes; don't store it in internal fields.
	(btk_file_chooser_default_get_default_size): Only compute the
	font-based size if we are in one of the "OPEN" modes or in
	expanded mode.

	* btk/btkfilechooserprivate.h (struct _BtkFileChooserDefault):
	Removed default_width/default_height; we don't store these
	anymore.  This will make recycled file choosers (like in the GIMP)
	not "remember" their size across invocations.  However, this
	prepares the way for actually remembering the user's size globally
	in the settings file.

2008-08-19  Björn Lindqvist  <bjourne@gmail.com>

	Bug 548354 – Remove repeated code in btk_cell_view_size_allocate

	* btk/btkcellview.c (btk_cell_view_size_allocate): Remove some
	code duplication, no need for separate loops for BTK_PACK_START
	and BTK_PACK_END.

2008-08-19  Johan Dahlin  <johan@bunny.org>

	* btk/btk-builder-convert (BtkBuilderConverter._parse): 
	Remove the requres-version tag as well

2008-08-18  Matthias Clasen  <mclasen@redhat.com>

	* configure.in: Bump version

	* ==== Released 2.13.7 ===

2008-08-19  Mathias Hasselmann  <mathias@openismus.com>

	Bug 541600 – BtkCalendar segfault for certain values of detail-with-chars

	* btk/btkcalendar.c (btk_calendar_class_init()): Limit the "year"
	  property to B_MAXINT >> 9, instead of B_MAXINT >> 8: year_to_days()
	  multiplies the year property with 365 and returns the result as
	  blong. Therefore ceil(log(365, 2)) = 9 bits must be available,
	  not just 8 bits.

2008-08-18  Björn Lindqvist  <bjourne@gmail.com>

	Bug 541315 – Segfault when selecting a BtkMenuItem with submenu
	and no parent

	* btk/btkmenuitem.c (btk_menu_item_real_popup_submenu): Ensure
	that the menu item has a parent before popping it up.

2008-08-18  Johan Dahlin  <johan@bunny.org>

	Bug 548196 – btk-builder-convert doesn't properly convert BtkTextView

	* btk/btk-builder-convert: Rename the text property to buffer.

2008-08-16  Matthias Clasen  <mclasen@redhat.com>

	* btk/btksizegroup.c: Use g_quark_from_static_string() where possible.

2008-08-16  Matthias Clasen  <mclasen@redhat.com>

	* NEWS: Updates

2008-08-16  Torsten Schoenfeld  <kaffeetisch@gmx.de>

	* bdk/bdkwindow.c: Fix small issues in the documentation of
	bdk_window_remove_redirection and bdk_window_redirect_to_drawable.

2008-08-15  Richard Hult  <richard@imendio.com>

	* bdk/quartz/bdkdrawable-quartz.c (bdk_quartz_draw_drawable): Some
	aftermath of the fix of bug #543868. Clip and flip to the source,
	not the destination. Don't save/restore the gstate, it's already
	done when getting/releasing the context.

2008-08-15  Richard Hult  <richard@imendio.com>

	* btk/btkclipboard-quartz.c (btk_clipboard_wait_is_uris_available):
	Add another missing symbol.

2008-08-15  Behdad Esfahbod  <behdad@bunny.org>

	Bug 547680 – fontconfig monitoring can crash apps

	* btk/btksettings.c (settings_update_fontconfig): Clear bango cache
	before recreating fontconfig config.

2008-08-15  Sven Herzberg  <sven@imendio.com>

	Use the g_test_*() API for this test
	reviewed by: Richard Hult

	* bdk/tests/check-bdk-bairo.c: use the g_test_*() API to permit adding
	new tests

2008-08-15  Sven Herzberg  <sven@imendio.com>

	Prepare for using the g_test_*() API
	reviewed by: Richard Hult

	* bdk/tests/check-bdk-bairo.c: use assertions instead of returning an
	error code

2008-08-15  Claudio Saavedra  <csaavedra@igalia.com>

	Bug 547944 – Self-reference in btk_page_setup_load_file's docs

	* btk/btkpagesetup.c: Fix the reference in btk_page_setup_load_file()
	documentation. Pointed out by Torsten Schoenfeld.

2008-08-15  Matthias Clasen  <mclasen@redhat.com>

	Bug 547655 – bunnyio_can_sniff configure test can fail if not installed
	with prefix {/usr,/usr/local} and XDG_DATA_DIRS env not set

	* README.in: Add a note about shared-mime-info and XDG_DATA_DIRS.

2008-08-15  Christian Dywan  <christian@imendio.com>

	Bug 547846 – btktestutils functions lack Since: tags

	* btk/btktestutils.c: Add missing Since tags

2008-08-15  Christian Dywan  <christian@imendio.com>

        Bug 547775 – Documentation of btk-button-images is not correct

	* btk/btkbutton.c (btk_button_class_init): Improve documentation
        of "btk-button-images" setting

2008-08-13  Matthias Clasen  <mclasen@redhat.com>

	Bug 547673 – Accessors for BtkFileSelection.font_entry and
	font_style_entry

	* btk/btk.symbols:
	* btk/btkfontsel.[hc]: Don't add getters for widgets that are not
	actually part of the font selection dialog in standard builds.
	Pointed out by Torsten Schoenfeld

2008-08-13  Matthias Clasen  <mclasen@redhat.com>

	Bug 547516 – Add comments for translators in btkprintbackendcups.c

	* modules/printbackends/cups/btkprintbackendcups.c: Add translator
	hints. Patch by Leonardo Ferreira Fontenelle

2008-08-13  Michael Natterer  <mitch@imendio.com>

	* btk/btkmarshalers.list: get rid of the deprecated aliases NONE
	and BOOL.

	* btk/btkdialog.c
	* btk/btkentrycompletion.c
	* btk/btkmenuitem.c
	* btk/btkoldeditable.c
	* btk/btkrange.c
	* btk/btktreeview.c
	* btk/btkwidget.c: changed accordingly.

2008-08-13 Erwann Chenede - <erwann.chenede@sun.com>

	Bug 547456 - bdk/x11/bdkscreen-x11.c : init_solaris_xinerama 
	doesn't compile on Solaris

	* bdk/x11/bdkscreen-x11.c: make init_solaris_xinerama () compile 
	when HAVE_SOLARIS_XINERAMA is defined.

2008-08-13  Michael Natterer  <mitch@imendio.com>

	* btk/btkstock.c (btk_stock_lookup): cast the return value of
	g_dgettext() to fix warning about discarded qualifier.

2008-08-12  Paolo Borelli  <pborelli@katamail.com>

	* btk/btkclipboard.c (btk_clipboard_store):
	use canonical signal name.

2008-08-12  Paolo Borelli  <pborelli@katamail.com>

	Bug 526234 - make shift+ctrl+del delete till the end of line

	* btk/btktextview.c: add shift+ctrl+del and shift+ctrl+backspace
	keyboard shortcuts to delete to the end/start of the current line.

2008-08-12  Michael Natterer  <mitch@imendio.com>

	* btk/btklinkbutton.c (set_link_color): bail out if there is no
	label to set the color on.

	(btk_link_button_add): call set_link_color() so the label gets
	the right color no matter how the link button is created.

2008-08-12  Michael Natterer  <mitch@imendio.com>

	* btk/btkassistant.c: remove unused variable and fix formatting of
	some function headers.

2008-08-12  Michael Natterer  <mitch@imendio.com>

	* configure.in: define -DBDK_PIXBUF_DISABLE_DEPRECATED in the
	global CFLAGS.

	* bdk-pixbuf/Makefile.am: make the contents bdk-pixbuf-marshal.h
	visible for BDK_PIXBUF_COMPILATION.

	* contrib/bdk-pixbuf-xlib/Makefile.am
	* demos/Makefile.am
	* demos/btk-demo/Makefile.am
	* bdk-pixbuf/pixops/Makefile.am
	* bdk/Makefile.am
	* bdk/x11/Makefile.am
	* btk/Makefile.am
	* btk/tests/Makefile.am
	* btk/theme-bits/Makefile.am
	* modules/engines/ms-windows/Makefile.am
	* modules/engines/pixbuf/Makefile.am
	* modules/input/Makefile.am
	* perf/Makefile.am
	* tests/Makefile.am: remove -DDBDK_PIXBUF_DISABLE_DEPRECATED here.

2008-08-12  Michael Natterer  <mitch@imendio.com>

	* btk/btkstatusicon.c (btk_status_icon_get_gicon): use
	g_return_val_if_fail() now that the function has a return value.

2008-08-12  Sven Neumann  <sven@gimp.org>

	* btk/btkaccellabel.c
	* btk/btkaction.c
	* btk/btkclist.c
	* btk/btkcolorbutton.c
	* btk/btkctree.c
	* btk/btkdialog.c
	* btk/btkdnd-quartz.c
	* btk/btkdnd.c
	* btk/btkentry.c
	* btk/btkfilechooserdefault.c
	* btk/btkfilesel.c
	* btk/btkgamma.c
	* btk/btkiconview.c
	* btk/btkkeyhash.c
	* btk/btklabel.c
	* btk/btkmenu.c
	* btk/btkmenubar.c
	* btk/btkpaned.c
	* btk/btkrecentchooserdialog.c
	* btk/btkrecentchooserutils.c
	* btk/btkselection.c
	* btk/btksizegroup.c
	* btk/btktextbtree.c
	* btk/btktextbuffer.c
	* btk/btktextview.c
	* btk/btktoolbar.c
	* btk/btktreemodel.c
	* btk/btkuimanager.c
	* btk/btkwindow-decorate.c
	* btk/btkwindow.c: use canonical signal names in some more places
	that I missed earlier. Also changed this in the documentation and
	comments.

2008-08-12  Sven Neumann  <sven@gimp.org>

	* btk/btknotebook.c
	* btk/btkradiotoolbutton.c: property nick and blurb should be
	marked with P_(), not _().

2008-08-12  Michael Natterer  <mitch@imendio.com>

	* examples/btkdial/btkdial.c
	* bdk/bdkapplaunchcontext.c
	* bdk/bdkbango.c
	* btk/btkcellrendererpixbuf.c
	* btk/btkcellrenderertext.c
	* btk/btkcellview.c
	* btk/btkcombobox.c
	* btk/btkfontsel.c
	* btk/btkinvisible.c
	* btk/btkliststore.c
	* btk/btktexttag.c
	* btk/btktexttagtable.c: remove dereferencing from some function
	pointers i missed before.

2008-08-12  Michael Natterer  <mitch@imendio.com>

	* btk/btkaccellabel.c
	* btk/btkcalendar.c
	* btk/btkclist.c
	* btk/btkentry.c
	* btk/btkeventbox.c
	* btk/btkfilechooserbutton.c
	* btk/btkfilechooserdefault.c
	* btk/btkhandlebox.c
	* btk/btkhsv.c
	* btk/btkiconview.c
	* btk/btkimage.c
	* btk/btklayout.c
	* btk/btklistitem.c
	* btk/btkmenuitem.c
	* btk/btkmessagedialog.c
	* btk/btknotebook.c
	* btk/btkpaned.c
	* btk/btkpathbar.c
	* btk/btkplug.c
	* btk/btkprintunixdialog.c
	* btk/btkrange.c
	* btk/btkrecentchooserdefault.c
	* btk/btkruler.c
	* btk/btksocket.c
	* btk/btktext.c
	* btk/btktextview.c
	* btk/btktoolbar.c
	* btk/btktreeitem.c
	* btk/btktreeview.c
	* btk/btkviewport.c
	* btk/btkwin32embedwidget.c: chain up unconditionally in
	realize(), unrealize(), map(), unmap(), style_set(),
	key_press_event() and size_request()

2008-08-12  Michael Natterer  <mitch@imendio.com>

	* btk/btkwidget.c: change names of default implementations of
	our own signals to consistently contain "real":

	btk_widget_style_set -> btk_widget_real_style_set
	btk_widget_direction_changed -> btk_widget_real_direction_changed

2008-08-12  Michael Natterer  <mitch@imendio.com>

	* btk/*.c: consistently chain up using
	BTK_FOO_CLASS(parent_class)->bar(instance) instead of
	(*BTK_FOO_CLASS(parent_class))->bar(instance).

2008-08-12  Matthias Clasen  <mclasen@redhat.com>

	Bug 546730 – btk_status_icon_get_gicon() should use a return instead
	of an ouput parameter

	* btk/btkstatusicon.[hc]: Change btk_status_icon_get_gicon to
	return the GIcon directly.
	Complaint by Murray Cumming

2008-08-11  Michael Natterer  <mitch@imendio.com>

	Bug 546754 – 2.13.6 update create rendering issue in the evolution
	composer

	* btk/btkadjustment.c: instead of CLAMP(), use

	value = MIN (value, upper - page_size);
	value = MAX (value, lower);

	so we don't end up below lower if upper - page_size is smaller
	than lower.

2008-08-11  Matthias Clasen  <mclasen@redhat.com>

	Bug 546616 – CUPS print backend uses 1.2 API without guards

	* modules/printbackends/cups/btkcupsutils.[hc]: Make use
	of cups 1.2 api dependent on the HAVE_CUPS_1_2 define.
	Patch by Sven Herzberg and Richard Hult

2008-08-11  Michael Natterer  <mitch@imendio.com>

	Bug 547270 – Make BtkHSV public

	* btk/Makefile.am
	* btk/btk.h: install btkhsv.h as public header (its symbols were
	always public anyway).

	* btk/btkhsv.h: add single-include guards, add class struct padding,
	seal the instance member, cleanup.

	* btk/btkhsv.c: center the widget in its allocation,
	add "Since: 2.14", cleanup.

2008-08-11  Torsten Schoenfeld  <kaffeetisch@gmx.de>

	* btk/btkcalendar.h: Fix the Since: tag of BtkCalendarDetailFunc
	to correctly state 2.14, not 2.16.

2008-08-11  Sven Neumann  <sven@gimp.org>

	* demos/btk-demo/changedisplay.c
	* demos/btk-demo/clipboard.c
	* demos/btk-demo/drawingarea.c
	* demos/btk-demo/iconview.c
	* demos/btk-demo/images.c
	* demos/btk-demo/pixbufs.c: use canonical signal names in the demos.

2008-08-11  Matthias Clasen  <mclasen@redhat.com>

	Bug 547211 – Duplicated mnemonic

	* btk/btkmountoperation.c: Change mnemonics around in 
	the password dialog to avoid a conflict.
	Reported by Gil Forcada

2008-08-11  Sven Neumann  <sven@gimp.org>

	* bdk-pixbuf/bdk-pixbuf-loader.c: use canonical signal names.

2008-08-11  Sven Neumann  <sven@gimp.org>

	* examples/*: updated the (quite outdated) examples to use
	canonical signal names as well. Removed some unneeded casts and
	trailing whitespace while I was on it...

2008-08-11  Sven Neumann  <sven@gimp.org>

	* modules/input/btkimcontextime.c
	* modules/input/btkimcontextmultipress.c
	* modules/input/btkimcontextxim.c: use canonical signal names.

2008-08-11  Sven Neumann  <sven@gimp.org>

	* btk/btkdnd-quartz.c
	* btk/btkdnd.c
	* btk/btkentry.c
	* btk/btkfilesel.c
	* btk/btkimcontextsimple.c
	* btk/btkimmulticontext.c
	* btk/btkoptionmenu.c
	* btk/btkplug.c
	* btk/btkrecentchooserdefault.c
	* btk/btkscrolledwindow.c
	* btk/btksocket-x11.c: use canonical signal names in some more
	places that I missed earlier.

2008-08-11  Sven Neumann  <sven@gimp.org>

	* btk/btkaccelgroup.c
	* btk/btkactiongroup.c
	* btk/btkcalendar.c
	* btk/btkcelleditable.c
	* btk/btkclipboard-quartz.c
	* btk/btkclipboard.c
	* btk/btkcolorbutton.c
	* btk/btkcolorsel.c
	* btk/btkcontainer.c
	* btk/btkcurve.c: use canonical signal names.

2008-08-11  Sven Neumann  <sven@gimp.org>

	* btk/btkentry.c
	* btk/btkentrycompletion.c
	* btk/btkhandlebox.c
	* btk/btkiconview.c
	* btk/btkimcontext.c
	* btk/btkinputdialog.c
	* btk/btktreeview.c: use canonical signal names.

2008-08-11  Sven Neumann  <sven@gimp.org>

	* btk/btklabel.c
	* btk/btklayout.c
	* btk/btklist.c
	* btk/btklistitem.c: use canonical signal names.

2008-08-11  Sven Neumann  <sven@gimp.org>

	* btk/btkmenu.c
	* btk/btkmenuitem.c
	* btk/btkmenushell.c
	* btk/btknotebook.c
	* btk/btkoldeditable.c
	* btk/btkpaned.c: use canonical signal names.

2008-08-11  Michael Natterer  <mitch@imendio.com>

	* demos/btk-demo/textscroll.c (create_text_view): don't use the
	deprecated btk_box_pack_start_defaults().

2008-08-11  Sven Neumann  <sven@gimp.org>

	* btk/btkaboutdialog.c
	* btk/btkcellrendereraccel.c
	* btk/btkcellrenderercombo.c
	* btk/btkcellrendererspin.c
	* btk/btkcellrenderertext.c
	* btk/btkclipboard.c
	* btk/btkcolorsel.c
	* btk/btkcombo.c
	* btk/btkcombobox.c
	* btk/btkdnd-quartz.c
	* btk/btkdnd.c
	* btk/btkentry.c
	* btk/btkentrycompletion.c
	* btk/btkfilechooserbutton.c
	* btk/btkfilechooserdefault.c
	* btk/btkfilechooserentry.c
	* btk/btkfontsel.c
	* btk/btkinputdialog.c
	* btk/btkmenutoolbutton.c
	* btk/btkpathbar.c
	* btk/btktooltip.c: use canonical signal names in g_signal_connect().

2008-08-11  Sven Neumann  <sven@gimp.org>

	* bdk/bdkkeys.c
	* bdk/bdkscreen.c
	* bdk/bdkdisplaymanager.c: use canonical signal names.

2008-08-10  Richard Hult  <richard@imendio.com>

	* btk/btkclipboard-quartz.c: (btk_clipboard_wait_for_uris),
	(btk_clipboard_request_uris): Implement missing functions.

2008-08-09  Sven Herzberg  <sven@imendio.com>

	Bug 544863 – btkquartz.h not included in released 2.13.5 package

	* btk/Makefile.am: always add btkquartz.h to EXTRA_DIST

2008-08-08  Cody Russell  <bratsche@bunny.org>

	Bug 547027 – menus are broken

	* btk/btkmenushell.c
	* btk/btkmenu.c: In enter/leave notify events, check that the crossing
	mode is not BTK_GRAB, BTK_UNGRAB, or STATE_CHANGED.  Fixes regressions
	in menus caused by bug #56070.

2008-08-09  Sven Herzberg  <sven@imendio.com>

	Get the bdk+bairo test to pass distcheck, too

	* bdk/tests/Makefile.am: set BDK_PIXBUF_MODULE_FILE so the test can
	pick up the one created at build time
	* bdk/tests/check-bdk-bairo.c (main): delete the output files after a
	successful test run

2008-08-08  Sven Neumann  <sven@gimp.org>

	* btk/btkscale.c
	* btk/btkscrolledwindow.c
	* btk/btksocket.c
	* btk/btkspinbutton.c
	* btk/btkstatusbar.c
	* btk/btkstatusicon.c: use canonical signal names.

2008-08-08  Sven Neumann  <sven@gimp.org>

	* btk/btktext.c
	* btk/btktextbuffer.c
	* btk/btktextlayout.c
	* btk/btktexttagtable.c
	* btk/btktextview.c
	* btk/btktipsquery.c
	* btk/btktoolbar.c
	* btk/btktoolitem.c
	* btk/btktreeitem.c
	* btk/btktreemodelfilter.c
	* btk/btktreemodelsort.c
	* btk/btktreeviewcolumn.c: use canonical signal names.

2008-08-08  Sven Neumann  <sven@gimp.org>

	* btk/btktree.c
	* btk/btktreemodel.c
	* btk/btktreesortable.c
	* btk/btktreeview.c
	* btk/btkuimanager.c
	* btk/btkviewport.c: use canonical signal names.

2008-08-08  Sven Neumann  <sven@gimp.org>

	* btk/btkwidget.c:
	* btk/btkwindow.c: use canonical signal names.

2008-08-08  Sven Neumann  <sven@gimp.org>

	* btk/btkadjustment.c
	* btk/btkclist.c
	* btk/btkcolorsel.c
	* btk/btkiconview.c
	* btk/btklayout.c
	* btk/btkprogress.c
	* btk/btkrange.c
	* btk/btkspinbutton.c
	* btk/btktext.c
	* btk/btktextview.c
	* btk/btktreeview.c
	* btk/btkviewport.c: use the canonical signal name "value-changed"
	instead of "value_changed".

2008-08-08  Tor Lillqvist  <tml@novell.com>

	* btk/btk.symbols
	* btk/makebtkalias.pl
	* btk/btkaccelmap.c
	* btk/btkfilechooser.c
	* btk/btkfilesel.c
	* btk/btkiconfactory.c
	* btk/btkicontheme.c
	* btk/btkimage.c
	* btk/btkrc.c
	* btk/btkuimanager.c
	* btk/btkwindow.c: No need for the DLL ABI backward compatibility
	functions on Win64.

2008-08-07  Matthias Clasen  <mclasen@redhat.com>

	* configure.in: Its g_content_type_from_mime_type, not 
	g_content_type_for_mime_type. Noticed by Roger Brown

2008-08-07 16:19:16  Tim Janik  <timj@imendio.com>

	* bdk/bdkrgb.c (bdk_rgb_select_conv): use g_error() instead of a
	combination of g_warning+exit to avoid misleading the user.

2008-08-07  Michael Natterer  <mitch@imendio.com>

	* btk/btkactiongroup.c
	* btk/btkcellrendererspin.c
	* btk/btkfilechooserbutton.c
	* btk/btktoolitem.c: chain up unconditionally in finalize().

2008-08-07  Michael Natterer  <mitch@imendio.com>

	* btk/btkclist.c
	* btk/btkcontainer.c
	* btk/btkfilechooserbutton.c
	* btk/btkgamma.c
	* btk/btkmenutoolbutton.c
	* btk/btkoptionmenu.c
	* btk/btkradiobutton.c
	* btk/btkradiomenuitem.c
	* btk/btktipsquery.c
	* btk/btktree.c
	* btk/btktreeview.c: chain up unconditionally in destroy().

	* btk/btkhandlebox.c: remove empty destroy() implementation.

2008-08-07  Michael Natterer  <mitch@imendio.com>

	Bug 546756 – bunny-panel crashed with SIGSEGV in
	g_type_check_instance_cast()

	* btk/btkimagemenuitem.c: add BtkObject::destroy() implementation
	and remove the image now that it's an internal child and isn't
	destroyed by btk_container_destroy() any longer. Thanks to tml for
	helping bisecting this down.

2008-08-07  Sven Neumann  <sven@gimp.org>

	Bug 546771 - Add writable property "visited" to BtkLinkButton

	* btk/btk.symbols
	* btk/btklinkbutton.[ch]: expose the 'visited' state as a
	read-write property with getters and setters. Also move the nick
	and blurb of the "uri" property to the proper translation domain.

2008-08-07  Michael Natterer  <mitch@imendio.com>

	* btk/btkicontheme.c (apply_emblems): move variables to local
	scopes, fix indentation and silence bogus warning about using
	uninitialized variables.

2008-08-07  Richard Hult  <richard@imendio.com>

	Bug 535573 – Deadlock in bdkeventloop-quartz.c:poll_func()

	* bdk/quartz/bdkeventloop-quartz.c: (bdk_event_prepare),
	(select_thread_func), (poll_func): Patch by Yevgen Muntyan, fixes
	deadlock and missing events.

2008-08-07  Richard Hult  <richard@imendio.com>

	* bdk/quartz/bdkscreen-quartz.c: (bdk_screen_get_monitor_plug_name)
	(bdk_screen_get_monitor_height_mm, bdk_screen_get_monitor_width_mm):
	Implement those, fixes loading python bindings.

2008-08-07  Emmanuele Bassi  <ebassi@bunny.org>

	Bug 545031 – list of recently used files is created world-readable

	* btk/btkrecentmanager.c:
	(btk_recent_manager_real_changed): Set the recently-used.xbel
	file to 0600. (Guido Berhoerster)

2008-08-06  Michael Natterer  <mitch@imendio.com>

	* modules/printbackends/cups/btkcupsutils.c
	(btk_cups_connection_test_free): remove return value, this
	function returns void.

2008-08-06  Michael Natterer  <mitch@imendio.com>

	* btk/btkcombobox.c
	* btk/btkiconview.c
	* btk/btkrange.c
	* btk/btkscrolledwindow.c
	* btk/btktreeview.c: remove CLAMPing from values passed to
	btk_adjustment_set_value() since it does it right now.

2008-08-05  Matthias Clasen  <mclasen@redhat.com>

	* configure.in: Bump version

	* === Released 2.13.6 ===

	* bdk/tests/Makefile.am: Disable check-bdk-bairo test for now,
	since it breaks make distcheck.

2008-08-05  Michael Natterer  <mitch@imendio.com>

	* btk/btkcombobox.c (btk_combo_box_update_sensitivity): bail out
	early if priv->button is NULL to avoid zillions of warnings when
	destroying combo boxes that were working fine before the
	button sensitivity patch.

2008-08-05  Michael Natterer  <mitch@imendio.com>

	Bug 544858 – Seal BtkAdjustment

	* btk/btk.symbols
	* btk/btkadjustment.[ch] (struct BtkAdjustment): seal all struct
	members.

	Add accessors for all properties and additionally a new function
	btk_adjustment_configure() which sets all properties at
	once. Patch by Christian Dywan and myself.

2008-08-05  Michael Natterer  <mitch@imendio.com>

	* btk/btkadjustment.c (btk_adjustment_set_value): clamp the value
	to [lower...upper-page_size] instead of only [lower...upper].

	* README: add note about this change.

	While this fix is correct and should have been there forever, it
	has the potential to break some corner cases, however these cases
	would set page_size to a value != 0 which suggests they want it
	honored.

2008-08-05  Michael Natterer  <mitch@imendio.com>

	* tests/testiconview.c: don't use the deprecated
	btk_box_pack_start_defaults().

2008-08-04  Matthias Clasen  <mclasen@redhat.com>

	Bug 545982 – missing braces cause bogus warnings when using BtkBuilder

	* btk/btkcelllayout.c:
	* btk/btkdialog.c:
	* btk/btkcontainer.c: Add missing braces to some BtkBuildable
	implementations. Patch by Antti Kaijanmäki

2008-08-05  Tor Lillqvist  <tml@novell.com>

	* btk/btktext.c: Cast pointer to bintptr instead of bulong to
	avoid warning on Win64.

2008-08-05  Tor Lillqvist  <tml@novell.com>

	* btk/btkgc.c: Cast tile, stipple and clip_mask pointers to
	bintptr instead of long when calculating hash, so we get all of
	the pointer bits on Win64 where long is 32 bits.

2008-08-05  Tor Lillqvist  <tml@novell.com>

	* btk/btkprintoperation-win32.c: Don't need to declare
	IPrintDialogCallback with mingw64 either. It seems to be provided
	with the newer versions of the headers included with mingw64.

2008-08-05  Tor Lillqvist  <tml@novell.com>

	Bug 544684 - Win64 issue, window handles are assumed to be 32-bit

	* btk/btksocket-win32.c: Don't cast HWND to buint, pass it as such
	as the BdkNativeWindow parameter to
	btk_window_remove_embedded_xid(). Debugging printout format fixes.

	* btk/btkwin32embed.h
	* btk/btkwin32embed.c: Change the types of wparam and lparam
	parameters to actually be WPARAM and LPARAM.

	* btk/btkplug-win32.c: Adapt accordingly.

2008-08-04  Matthias Clasen  <mclasen@redhat.com>

	* btk/btksettings.c: Improve a setting nick: 'aureal' is not really
	a word, use 'audible' instead.

2008-08-05  Tor Lillqvist  <tml@novell.com>

	* btk/updateiconcache.c (write_bucket): Enclose ?: expression
	with parens so cast covers all of it.

2008-08-04  Matthias Clasen  <mclasen@redhat.com>

	Bug 382291 – Automatically dim the combobox when the model is empty

	* btk/btk.symbols:
	* btkcombobox.[hc]: Add a BtkComboBox::button-sensitivity
	property with getter and setter to control the sensitity of
	empty combo boxes. Patch by Carlos Garnacho, Sven Herzberg,
	Christian Dywan and others.

	* README.in: Add a note about automatic combobox sensitivity.
	
2008-08-04  Matthias Clasen  <mclasen@redhat.com>

	* btk/tests/Makefile.am: Skip crossingevents test when
	running make check, since it doesn't work on a naked
	X server.

2008-08-05  Tor Lillqvist  <tml@novell.com>

	Bug 544684 - Win64 issue, window handles are assumed to be 32-bit

	* bdk/bdkdnd.h
	* bdk/bdkdnd.c
	* bdk/win32/bdkdnd-win32.c
	* bdk/x11/bdkdnd-x11.c: Change return value and type of window id
	from buint32 to BdkNativeWindow for
	bdk_drag_get_protocol_for_display() and
	bdk_drag_get_protocol(). This is not an API break on existing
	platforms, as BdkNativeWindow has been buint32 for them
	already.

	* bdk/bdkselection.h
	* bdk/bdkselection.c
	* bdk/win32/bdkselection-win32.c
	* bdk/x11/bdkselection-x11.c: Ditto for the requestor window id
	parameter of bdk_selection_send_notify_for_display() and
	bdk_selection_send_notify().

	* bdk/win32/bdkcursor-win32.c
	* bdk/win32/xcursors.h: Change some bchar* to buchar* and vice
	versa to avoid gcc 4.4 signedness warnings.

	* bdk/win32/bdkevents-win32.c
	* bdk/win32/bdkproperty-win32.c
	* bdk/win32/bdkselection-win32.c: Add some buchar and char pointer
	casts to get rid of gcc 4.4 signedness warnings. Print BdkAtom
	values in debugging output using the %p format.
	
	* bdk/win32/bdkkeys-win32.c
	* bdk/win32/bdkfont-win32.c
	* bdk/win32/bdkmain-win32.c: Add some casts to avoid gcc warnings.
 
	* bdk/win32/bdkwindow-win32.c: Use SetWindowLongPtr() instead of
	SetWindowLong().

	* bdk/win32/bdkwin32id.c (bdk_handle_hash): Use all 64 bits of a
	HANDLE on Win64.

	* btk/btkwindow.h
	* btk/btkwindow.c: Change the type of the xid parameter of the
	internal btk_window_remove_embedded_xid() and
	btk_window_add_embedded_xid() functions from buint to
	BdkNativeWindow.

	* btk/btkwindow.c (send_client_message_to_embedded_windows):
	Instead of BPOINTER_TO_UINT(), just cast the bpointer to
	BdkNativeWindow. BPOINTER_TO_UINT() drops the upper 32 bits on
	Win64.

2008-08-05  Tor Lillqvist  <tml@novell.com>

	* bdk/bdkrgb.c: Cast pointers to buintptr, not unsigned long,
	before doing bit tests on them.

2008-08-05  Tor Lillqvist  <tml@novell.com>

	* configure.in: Define BDK_NATIVE_WINDOW_POINTER on 32-bit
	Windows, too. It just makes more sense, as a HWND *is* a kind of
	pointer.

	* bdk/bdkconfig.h.win32: Ditto here.

2008-08-04  Björn Lindqvist  <bjourne@gmail.com>

	Bug 534979 – BtkImageMenuItem is a bin but has two children.

	* btk/btkimagemenuitem.c (btk_image_menu_item_forall): Do not
	include the image widget when iterating over non-internal
	children. Patch by rainwoodman.

2008-08-04  Matthias Clasen  <mclasen@redhat.com>

	* NEWS: Updates

2008-08-04  Matthias Clasen  <mclasen@redhat.com>

	* configure.in: Bump bunnylib dependency to 2.17.6

2008-08-04  Michael Natterer  <mitch@imendio.com>

	* btk/btkclist.c
	* btk/btkctree.c
	* btk/btkpixmap.c
	* btk/btkpreview.c: get rid of using deprecated BDK APIs.

	* btk/btktext.c: ditto, apart from the text cruft APIs.

2008-08-04  Michael Natterer  <mitch@imendio.com>

	* bdk/bdk.c (bdk_parse_args): call bdk_rgb_set_verbose(TRUE) if
	"bdkrgb" is in the debug flags.

	* bdk/bdkrgb.c (bdk_rgb_init): remove setting the verbose flag
	here, this function is deprecated and the debug flag didn't work
	when using BDK properly.

2008-08-04  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkicontheme.c: Update to handle GEmblem.

2008-08-04  Michael Natterer  <mitch@imendio.com>

	* tests/prop-editor.c: undeprecate (apart from still using
	BtkOptionMenu).

2008-08-04  Michael Natterer  <mitch@imendio.com>

	* btk/btkseparatortoolitem.c
	* tests/testactions.c: remove pointless #undef BTK_DISABLE_DEPRECATED.

	* btk/btkcalendar.c (calendar_set_display_option): use
	btk_calendar_set_display_options() instead of the deprecated
	btk_calendar_display_options().

2008-08-04  Carlos Garnacho  <carlos@imendio.com>

	* btk/btkfilechooserbutton.c: Fix "/* within comment" warning.

2008-08-04  Carlos Garnacho  <carlos@imendio.com>

	* btk/btknotebook.c (btk_notebook_expose): Set drag window background
	to be the BtkNotebook background color. This is a workaround to
	prevent black pixels in rounded tabs when reordering. Improves
	#368234.

2008-08-04  Carlos Garnacho  <carlos@imendio.com>

	* btk/btk.symbols:
	* btk/btkfilechooserbutton.[ch]:
	* btk/btkfilechooserdefault.[ch]:
	* btk/btkfilechooserdialog.[ch]:
	* btk/btkfilechooserwidget.[ch]: Deprecate
	btk_file_chooser_*_new_with_backend(), since BUNNYIO is already used
	directly. Fixes #545976.

2008-08-04  Carlos Garnacho  <carlos@imendio.com>

	* btk/btk.symbols:
	* btk/btkfilechooser.[ch]: Make GFile-oriented API public. Fixes
	#545978.
	* btk/btkfilechooserbutton.c:
	* btk/btkfilechooserdefault.c:
	* btk/btkfilechooserutils.c: Update to use public GFile API.

2008-08-04  Michael Natterer  <mitch@imendio.com>

	* btk/Makefile.am: build with BTK_DISABLE_DEPRECATED again.

	Fix pltcheck.sh by restricting the visibility of deprecated
	symbols to the places where they are actually used:

	* btk/btkclist.c
	* btk/btkctree.c
	* btk/btklistitem.c
	* btk/btklist.c
	* btk/btkprogressbar.c
	* btk/btkpixmap.c
	* btk/btkprogress.c: #undef BTK_DISABLE_DEPRECATED and #define
	__BTK_FOO_C__ on top instead of before including btkaliasdef.c.

	* btk/btkclist.h
	* btk/btkctree.h
	* btk/btklistitem.h
	* btk/btklist.h
	* btk/btkpixmap.h
	* btk/btkprogress.h: make the headers visible if the respective
	__BTK_FOO_C__ are defined.

2008-08-04  Michael Natterer  <mitch@imendio.com>

	* btk/btkclist.c
	* btk/btklist.c
	* btk/btkoldeditable.c
	* btk/btkpixmap.c
	* btk/btktipsquery.c
	* btk/btktree.c
	* btk/btktreeitem.c: avoid using deprecated BtkWidget API.

2008-08-04  Michael Natterer  <mitch@imendio.com>

	* btk/btkclist.[ch]
	* btk/btkctree.[ch]
	* btk/btkitemfactory.[ch]
	* btk/btkobject.[ch]
	* btk/btksignal.[ch]: s/BtkDestroyNotify/GDestroyNotify/g

2008-08-04  Sven Neumann  <sven@gimp.org>

	* btk/btklinkbutton.c (btk_link_button_set_uri): update the link
	color when the "visited" state is changed.

2008-08-04  Michael Natterer  <mitch@imendio.com>

	* btk/btkwindow.c: move the code of the deprecated
	btk_window_set_policy() to a new private function
	btk_window_set_policy_internal() and call it from
	btk_window_set_policy().

	(btk_window_set_resizable): use the new internal function in order
	to avoid our own deprecated public API.

2008-08-04  Michael Natterer  <mitch@imendio.com>

	* btk/btkbindings.c: move the code of the deprecated
	btk_binding_entry_clear() to a new private function
	btk_binding_entry_clear_internal() and call it from
	btk_binding_entry_clear().

	(_btk_binding_entry_add_signall)
	(btk_binding_parse_bind): use the new internal function in order
	to avoid our own deprecated public API.

2008-08-04  Michael Natterer  <mitch@imendio.com>

	* btk/btkfontsel.c (btk_font_selection_dialog_get_font):
	avoid our own deprecated public API and use
	btk_font_selection_get_font_internal() instead of
	btk_font_selection_get_font().

	(btk_font_selection_get_font)
	(btk_font_selection_dialog_get_font): Add missing
	"Deprecated: 2.0" to the api doc comments.

2008-08-04  Michael Natterer  <mitch@imendio.com>

	* bdk/tests/Makefile.am: add the generated PNGs to CLEANFILES.

2008-08-04  Tor Lillqvist  <tml@novell.com>

	* configure.in: Set LIB_EXE_MACHINE_FLAG to either X86 or X64 on
	Windows. AC_SUBST it.

	* bdk/Makefile.am
	* btk/Makefile.am: Pass appropriate -machine flag to lib.exe.

2008-08-04  Tor Lillqvist  <tml@novell.com>

	Bug 544684 - Win64 issue, window handles are assumed to be 32-bit

	* configure.in: On Win64, define BDK_NATIVE_WINDOW_POINTER.

	* bdk/bdkconfig.h.win32: Ditto here.

2008-08-04  Tor Lillqvist  <tml@novell.com>

	* btk/btkstatusicon.c: Fix typo in Win32 and Quartz code:
	s/btk_icon_icon_info_load_icon/btk_icon_info_load_icon/ .

2008-08-04  Tor Lillqvist  <tml@novell.com>

	* configure.in: Don't bother with the test "if bunnyio can sniff png"
	if $bunnyio_can_sniff has been already set. Preset it to "no" for
	Win32. This helps cross-compilation from 32-bit Windows to 64-bit,
	or from Unix to Windows in general. No idea how this should be
	handled for cross-compilation in general.

2008-08-04  Tor Lillqvist  <tml@novell.com>

	* bdk/win32/bdkdisplay-win32.c: Don't bother looking up
	EnumDisplayMonitors and GetMonitorInfoA dynamically, they are
	present in NT-based Windows since Windows 2000.
	(enum_monitor): For some reason the MONITORINFOEX struct in
	mingw-win64 is different than the proper one as in MSDN and 32-bit
	mingw, so just copy the proper definition here.

2008-08-03  Björn Lindqvist  <bjourne@gmail.com>

	Bug 540379 – btk_tree_view_enable_model_drag_dest and
	btk_tree_view_enable_model_drag_source unsets reorderable property

	* btk/btktreeview.c: Improve docstrings regarding reorderable
	property.

2008-08-03  Matthias Clasen  <mclasen@redhat.com>

	* bdk/x11/bdkapplaunchcontext-x11.c: Support GEmblemedIcon.

2008-08-03  Matthias Clasen  <mclasen@redhat.com>

	Bug 546128 – Weirz string

	* btk/btksettings.c: Add a translator hint.
	Requested by Ignacio Casal Quinteiro

2008-08-02  Tor Lillqvist  <tml@novell.com>

	Bug 538686 - btkprintoperation-win32.c: devmode_from_settings

	* btk/btkprintoperation-win32.c (devmode_from_settings): Plug
	potential leak. Thanks to Morten Welinder.

2008-08-02  Tor Lillqvist  <tml@novell.com>

	* btk/btkprint-win32.c
	* btk/btkprint-win32.h
	* btk/btkprintoperation-win32.c: Cosmetic fixups after patch
	below.

2008-08-02  Tor Lillqvist  <tml@novell.com>

	Bug 339699 - implement btk_print_operation_set_show_dialog for
	Windows
	
	* btk/btkprint-win32.c
	* btk/btkprint-win32.h
	* btk/btkprintoperation-win32.c: Patch by ecyrbe@gmail.com.

2008-08-02  Matthias Clasen  <mclasen@redhat.com>
	
	Bug 544302 – BtkStatusIcon should support GIcon

	* btk/btk.symbols:
	* btk/btkstatusicon.[hc]: Add GIcon support to BtkStatusIcon.
	Patch by Christian Dywan

2008-08-02  Matthias Clasen  <mclasen@redhat.com>
	
	Bug 429427 – Add "arrow-spacing" style property to BtkRange

	* btk/btkrange.c: Add an arrow-spacing style property.
	Patch by Carlos Garnacho and Christian Dywan

2008-08-02  Matthias Clasen  <mclasen@redhat.com>

	Bug 429411 – add style properties to set minimum progressbar 
	width/height

	* btk/btkprogressbar.c: Add style properties for minimum size.
	Patch by Carlos Garnacho and Christian Dywan

2008-08-02  Matthias Clasen  <mclasen@redhat.com>

	Bug 526575 – Missing return type in btk_ui_manager_get_toplevels
	documentation

	* btk/btkuimanager.c (btk_ui_manager_get_toplevels): Improve
	the docs.

2008-08-02  Matthias Clasen  <mclasen@redhat.com>

	Bug 523950 – BtkTreeModelFilter's visible function may get an empty
	row

	* btk/btktreemodelfilter.c (btk_tree_model_filter_set_visible_func):
	Explain and show how iterators pointing to empty rows should be
	handled in the visible function. Patch by Björn Lindqvist

2008-08-02  Matthias Clasen  <mclasen@redhat.com>

	Bug 539733 – No way to control treeview separator height

	* btk/btktreeview.c: Respect the wide-separators and
	separator-height style properties when drawing separators.
	Patch by Christian Dywan

2008-08-02  Matthias Clasen  <mclasen@redhat.com>

	Bug 65818 – rename btk_window_set_default() and add getter for it

	* btk/btk.symbols:
	* btk/btkwindow.[hc]: Rename btk_window_get_default to
	btk_window_get_default_widget. Patch by Christian Dywan

2008-08-02  Matthias Clasen  <mclasen@redhat.com>

	Bug 344383 – use po/LINGUAS

	* po/LINGUAS: New file, to make translators happy.
	* configure.in: Use po/LINGUAS
	* po/Makefile.in.in: Add po/LINGUAS to DISTFILES
	Patch by Claude Paroz

2008-08-02  Matthias Clasen  <mclasen@redhat.com>

	* bdk/bdkapplaunchcontext.c: Improve the docs

2008-08-01  Claudio Saavedra  <csaavedra@igalia.com>

	Bug 545931 – small documentation typos

	* btk/btkcomboboxentry.c: Fix some typos in the documentation.

2008-08-01  Hans Breuer  <hans@breuer.org>

	* bdk/makefile.msc : build bdkwindowimpl

	* btk/btkwidget.c : fix c99ism - declaration needs to be at the
	start of a block

	* tests/makefile.msc : update

2008-07-31  Cody Russell  <bratsche@bunny.org>

	Bug 56070 – Can't click button after setting it sensitive.

	* btk/btkwidget.[ch]
	* btk/btkwindow.c
	* btk/btkmain.c
	* btk/btkbutton.c
	* btk/btkprivate.h
	* bdk/bdkevents.h: Synthesize crossing events events where necessary.

	* btk/tests/crossingevents.c: Add unit tests for crossing events.

	Big thanks to Ed Catmur, Matthias Clasen, and everyone else who
	has worked on and helped out with this.

2008-07-31  Matthias Clasen  <mclasen@redhat.com>

	Bug 424207 – printing hangs on unreachable cups server

	* modules/printbackends/cups/btkcupsutils.[hc]: Implement a
	non-blocking test for reachability of the cups server.

	* modules/printbackends/cups/btkprintbackendcups.c: Don't block
	while trying to get the default printer. Patch by Marek Kasik.

2008-07-31  Matthias Clasen  <mclasen@redhat.com>

	* modules/input/btkimcontextmultipress.c: Use a second-granularity
	timer for automatic commit.

	* btk/btkclipboard.c (btk_clipboard_store): Use a second-grandularity
	timer for the store timeout.

2008-07-31  Matthias Clasen  <mclasen@redhat.com>

	* bdk/bdk.[hc]:
	* bdk/bdk.symbols: Complete the set of thread-safe timeout function
	with second-granularity versions. Patch by Marek Kasik.

2008-07-30  Tor Lillqvist  <tml@novell.com>

	* btk/btkprintoperation-win32.c: Fix problems in handling custom
	paper sizes. The DEVMODE::dmPaperWidth and dmPaperLength are in
	tenths of a millimeter, and the RECT passed to CreateEnhMetaFile()
	is in hundredths of a millimeter. Patch by Sven Neumann.

2008-07-28  Matthias Clasen  <mclasen@redhat.com>

	* btk/btktreemodel.c: Small doc improvements.

2008-07-28  Matthias Clasen  <mclasen@redhat.com>

	* configure.in: Bump GLib requirement to 2.17.5 for GEmblemedIcon

	* btk/btkicontheme.c: Support rendering GEmblemedIcons.

2008-07-27  Sven Herzberg  <sven@imendio.com>

	Bug 544863 – btkquartz.h not included in released 2.13.5 package

	* btk/Makefile.am: explicitly include the moved header in EXTRA_DIST

2008-07-25  Murray Cumming  <murrayc@murrayc.com>

	* btk/btkstatusicon.c (btk_status_icon_class_init):
	Documented the activate and popup-menu signals as being for use 
	by applications and language bindings, though they are G_SIGNAL_ACTION, 
	as stated in bug #361561.

2008-07-24  Sebastien Bacher  <seb128@ubuntu.com>

	* modules/printbackends/cups/btkprintbackendcups.c:
	(cups_printer_get_options): don't try free gettext() values,
	fix a printing dialog crasher (bug 544390)

2008-07-24  Cody Russell  <bratsche@bunny.org>

	Bug 544510 – SetTimer callback signatures has the wrong type

	* bdk/win32/bdkevents-win32.c: Fix modal_timer_proc() and
	sync_timer_proc() to use UINT_PTR for the 'id' parameter
	instead of 'id'.  Patch by Richard Hult.

2008-07-23  Matthias Clasen  <mclasen@redhat.com>

	Bug 543915 – "Sole completion" translation issue

	* btk/btkfilechooserentry.c: Add translator hints to a
	bunch of strings. Requested by Andre Klapper

2008-07-23  Matthias Clasen  <mclasen@redhat.com>

	Bug 544265 – BDK assumes XFIXES extension

	* bdk/x11/bdkcursor-x11.c (_bdk_x11_cursor_update_theme):
	Only call XFixes functions if the server has the extension.
	Reported by Ian Turner.

2008-07-22  Matthias Clasen  <mclasen@redhat.com>

	* configure.in: Compare two content types, not content type
	and mime type.

2008-07-22  Sven Herzberg  <sven@imendio.com>

	Fix svn:ignore and the include condition

	* bdk/tests/check-bdk-bairo.c: ifndef => ifdef

2008-07-22  Tor Lillqvist  <tml@novell.com>

	* configure.in: Workaround for what apparently is a bug in MSYS:
	returning -1 from main() is misinterpreted as exit status 0, so
	make sure we return 0 or 1. (The net effect of the bug was that no
	image loading worked on Windows.)

2008-07-22  Sven Herzberg  <sven@imendio.com>

	Add a test for my fixes from July 20th.

	* configure.in: create bdk/tests/Makefile
	* bdk/Makefile.am: include the tests subfolder
	* bdk/tests/Makefile.am: create and run my test
	* bdk/tests/check-bdk-bairo.c (test), (main): the test that I wrote
	(passes at least for x11 and quartz backends)

2008-07-22  Frederic Crozat  <fcrozat@mandriva.com>

	* bdk/x11/bdkscreen-x11.c: Don't use RandR 1.2
	if driver is detected as randr12_compat (ie X driver
	is not RandR 1.2 compliant). Fixes multihead with 
	such drivers. Bug #543317.

2008-07-21  Matthias Clasen  <mclasen@redhat.com>

	* configure.in: Default to linking against Xinerama again,
	so that we can fallback to Xinerama when broken X drivers
	make Xrandr useless. Sigh.

2008-07-21  Matthias Clasen  <mclasen@redhat.com>

	* configure.in: Bump version

	* === Released 2.13.5 ===

2008-07-21  Matthias Clasen  <mclasen@redhat.com>

	* btk/btktestutils.c:
	* btk/btkscalebutton.c:
	* btk/btkmessagedialog.c:
	* btk/btkmenu.c:
	* btk/btkcontainer.c:
	* btk/btkcolorseldialog.c:
	* btk/btkaccelgroup.c:
	* btk/btkentry.c:
	* btk/btkfontsel.c: Fix some doc problems.

2008-07-21  Michael Natterer  <mitch@imendio.com>

	* btk/btkbox.c (btk_box_add): use btk_box_pack_start() instead of
	the deprecated btk_box_pack_start_defaults().

	* btk/btkbindings.c (btk_binding_entry_add_signal)
	(btk_binding_parse_signal): use _btk_binding_entry_add_signall()
	instead of the deprecated btk_binding_entry_add_signall().

2008-07-21  Emmanuele Bassi  <ebassi@bunny.org>

	* btk/btkrecentmanager.c:
	(recent_app_info_new), (recent_app_info_free): Use GSlice to
	allocate the application data for recently used resources;
	do not call time() to initialize the timestamp, as it will
	be overwritten anyway later. (#535223, Michael Meeks)

2008-07-21  Kristian Rietveld  <kris@btk.org>

	Bug 543989 - Crash in btk_tree_view_size_allocate_columns

	* btk/btktreeview.c (btk_tree_view_size_allocate_columns): check
	for width_changed != NULL.  (Patch by Josselin Mouette).

2008-07-21  Michael Natterer  <mitch@imendio.com>

	Bug 442042 – BtkScaleButton is too limited

	* tests/testvolumebutton.c: forgot to commit code that tests
	toggling the button's orientation. Also fixes the file's coding
	style.

2008-07-21  Cody Russell  <bratsche@bunny.org>

	Bug 153567 – Repaint glitches in widgets

	* bdk/win32/bdkevents-win32.c: Set a sync timer when
	we receive WM_SYNCPAINT, and RedrawWindow() once
	the timer expires.

2008-07-21  Michael Natterer  <mitch@imendio.com>

	* btk/btktoolbar.c (btk_toolbar_class_init): use the simpler
	g_signal_override_class_handler() instead of
	g_signal_override_class_closure().

	* btk/btktextview.c (btk_text_view_class_init): ditto.

	(btk_text_view_compat_move_focus): chain up using
	g_signal_chain_from_overridden_handler() instead of the generic
	g_signal_chain_from_overridden() which needs manual fiddling with
	millions of BValues.

2008-07-21  Michael Natterer  <mitch@imendio.com>

	* btk/btkuimanager.c: remove redundant include.

2008-07-21  Michael Natterer  <mitch@imendio.com>

	* btk/btkbindings.[ch]: remove _btk_binding_signal_new().

	* btk/btkfilechooserdefault.c
	* btk/btkmenu.c
	* btk/btkmenushell.c
	* btk/btkscalebutton.c
	* btk/btktextview.c
	* btk/btktoolbar.c
	* btk/btkwidget.c: use g_signal_new_class_handler() instead. Add
	some missing I_() to the signal names.

2008-07-21  Michael Natterer  <mitch@imendio.com>

	* btk/btkspinbutton.c: remove g_return_if_fail() from private
	functions and virtual function implementations. Some minor
	cleanups.

2008-07-20  Andre Klapper  <a9016009@gmx.de>

	Bug 543915 - translation issues

	* modules/printbackends/cups/btkprintbackendcups.c:
	Add translator comments for several strings.

2008-07-20  Sven Herzberg  <sven@imendio.com>

	reviewed by: Richard Hult

	Fixes #543868: BdkPixmap is upside down on quartz

	* bdk/quartz/bdkdrawable-quartz.c (bdk_quartz_draw_drawable): flip the
	coordinate space from BTK+ orientation to CoreGraphics orientation
	before calling CoreGraphics code
	* bdk/quartz/bdkgc-quartz.c (bdk_quartz_draw_tiled_pattern): drop the
	coordinate space flipping (we always get it right, now)
	* bdk/quartz/bdkpixmap-quartz.c
	(bdk_pixmap_impl_quartz_get_context): flip the coordinate space when
	creating the CGContextRef

2008-07-20  Sven Herzberg  <sven@imendio.com>

	reviewed by: Richard Hult

	Extracted the CGContextRef creation into a virtual function of
	BdkDrawableImplQuartz; implement get_context() for BdkPixmap and
	BdkWindow

	* bdk/quartz/bdkdrawable-quartz.c
	(bdk_quartz_drawable_get_context): dropped the different
	implementations; forward to the virtual function now
	* bdk/quartz/bdkdrawable-quartz.h: added the virtual function
	* bdk/quartz/bdkpixmap-quartz.c
	(bdk_pixmap_impl_quartz_get_context),
	(bdk_pixmap_impl_quartz_class_init): implemented get_context()
	* bdk/quartz/bdkwindow-quartz.c
	(bdk_window_impl_quartz_get_context),
	(bdk_window_impl_quartz_class_init): implemented get_context()

2007-08-19  Matthias Clasen  <mclasen@redhat.com>

	* NEWS: Updates

2007-08-18  Matthias Clasen  <mclasen@redhat.com>

	Bug 543545 – BtkAssistant crashes when btk_widget_hide() is called
	inside "apply" signal handler

	* btk/btkassistant.c: Don't emit signals with extra parameters.
	Patch by Antti Kaijanmäki

2007-08-18  Matthias Clasen  <mclasen@redhat.com>

	Bug 543217 – BTK application crashed with directfb backend

	*  bdk/directfb/bdkvisual-directfb.c: Avoid a crash in
	_bdk_visual_init().  Patch by Huimin He.

2008-07-18  Federico Mena Quintero  <federico@novell.com>

	* btk/updateiconcache.c (build_cache): If the resulting cache file
	would be empty, erase the old cache file as well as the temporary file.

2008-07-18  Federico Mena Quintero  <federico@novell.com>

	* demos/btk-demo/changedisplay.c (find_toplevel_at_pointer): Don't
	do funny casts to avoid compiler warnings.

	* demos/btk-demo/textview.c (easter_egg_callback): Likewise.

	* btk/btkmain.c (rewrite_event_for_grabs, btk_get_event_widget): Likewise.

	* btk/btkmodules.c (load_module): Likewise.

	* btk/btkselection.c (btk_selection_convert): Likewise.

	* btk/btktipsquery.c (btk_tips_query_event): Likewise.

	* btk/queryimmodules.c (query_module): Likewise.

	* tests/testbtk.c (create_gridded_geometry, create_key_lookup)
	(find_widget_at_pointer): Likewise.

2008-07-08  Matthias Clasen  <mclasen@redhat.com>

	* modules/printbackends/cups/btkprintbackendcups.c: Add a forgotten
	hunk of the previous commit.

2008-07-18  Sven Herzberg  <sven@imendio.com>

	Make aliasfilecheck.sh pass for the quartz backend, too.

	* btk/Makefile.am: don't include btkquartz.h in the list of c files

2008-07-17  Runa Bhattacharjee <runabh@gmail.com>

	* configure.in: Added Pashto (ps) to ALL_LINGUAS

2008-07-15  Paolo Borelli  <pborelli@katamail.com>

	Bug 447998 - BtkBuilder does not support building parts of the xml tree

	* btk/btkbuilder.c:
	* btk/btkbuilder.h:
	* btk/btkbuilderprivate.h:
	* btk/btkbuilderparser.c:
	* btk/btk.symbols:
	Add two new functions that allow cherry picking and construct
	objects from a ui description file or string.

	* btk/tests/builder.c: tests for the above.

2008-07-15  Paolo Borelli  <pborelli@katamail.com>

	* btk/tests/builder.c: fix up broken test (cellview has no "clicked"
	signal) case and plug a couple of leaks.

2008-07-15  Matthias Clasen  <mclasen@redhat.com>

	Bug 543244 – crashes when renaming a bookmark

	* btk/btkfilesystem.c (_btk_file_system_set_bookmark_label): Don't
	free a GFile. Reported by Sebastien Bacher

2008-07-15  Matthias Clasen  <mclasen@redhat.com>

	Bug 339591 – Detect list of availible cover pages

	Patch by Marek Kasik:
	* modules/printbackends/cups/btkprintbackendcups.c: Get the list of
	available cover pages and the default front and back cover pages 
	from the cups server.

2008-07-15  Matthias Clasen  <mclasen@redhat.com>

	Bug 384940 – handle rejecting jobs and authentication meaningfully

	Patch by Marek Kasik, icons by Mike Langlie:
	* btk/btk.symbols:
	* btk/btkprintbackend.h:
	* btk/btkprinter.[hc]: Add new paused and accepting-jobs properties
	and getters/setters.

	* btk/btkstock.h:
	* btk/btkiconfactory.c:
	* btk/Makefile.am:
	* btk/stock-icons/{16,24}/btk-print-paused.{png,svg}: New icon.

	* modules/printbackends/cups/btkprintbackendcups.c: 
	* btk/btkprintunixdialog.c: Handle paused and job-rejecting 
	printers.

2008-07-15  Matthias Clasen  <mclasen@redhat.com>

	* configure.in: Add a test to see if BUNNYIO can sniff image data,
	this should make bdk-pixbuf use its own sniffing again, on OS X.

2008-07-15  Xavier Claessens  <xclaesse@gmail.com>

	Bug 542523 – BtkTextTag should handle setting properties to NULL

	* btk/btktexttag.c (btk_text_tag_set_property): Unset the color when
	setting it to NULL instead of displaying a warning.

2008-07-15  Matthias Clasen  <mclasen@redhat.com>

	Bug 479780 – Bookmarks in left pane of FileChooser cannot be renamed

	* btk/btkfilechooserdefault.c (shortcuts_build_popup_menu):
	Call shortcuts_check_popup_sensitivity() every time the
	menu is popped up. Problem reported by Hong Jen Yee
	
2008-07-15  Matthias Clasen  <mclasen@redhat.com>

	Bug 488766 – BtkFileChooserButton doesn't clear icon after
	btk_file_chooser_unselect_all

	* btk/btkfilechooserbutton.c (update_label_and_image): Unset
	the image when the label is set to "(None)". Reported by
	Neil Roberts

	* tests/testfilechooserbutton.c: Add an "Unselect all" button.

2008-07-15  Matthias Clasen  <mclasen@redhat.com>

	Bug 507394 – mem leak from btk_selection_add_targets

	* btk/btkoldeditable.c: Free target lists in finalize.
	Reported by Christian Persch

2008-07-14  Matthias Clasen  <mclasen@redhat.com>

	* btk/btk.symbols:
	* btk/btktypeutils.[hc]: Complete the deprecation of btk_type_class.

2008-07-14  Matthias Clasen  <mclasen@redhat.com>

	* btk/btklabel.c: Trivial doc fix.

2008-07-14  Matthias Clasen  <mclasen@redhat.com>

	Bug 542853 – jasper test fails due to incomplete library arguments

	* configure.in: Add -ljpeg when checking for jasper.
	Reported by Mike Calmus

2008-07-14  Matthias Clasen  <mclasen@redhat.com>

	* btk/Makefile.am: Add some missing stock-icons. Noticed by Marek 
	Kasik.

2008-07-11  Kristian Rietveld  <kris@btk.org>

	Bug 316087 - Resizing columns is chaotic

	* btk/btktreeprivate.h: add new member fields.

	* btk/btktreeview.c (btk_tree_view_init), (validate_row): set post
	validation flag,
	(btk_tree_view_size_allocate_columns): rework the size allocation
	mechanism to only recalculate the expand values if the width of the
	widget, content or the column configuration has changed,
	(btk_tree_view_size_allocate): move call to size_allocate_columns()
	to before the adjustment updates so the proper width is used after
	we updated it,
	(btk_tree_view_button_press), (btk_tree_view_motion_resize_column):
	use the column width minus the expand value for the resized width,
	(btk_tree_view_move_column_after): update call to
	btk_tree_view_size_allocate_columns().

	* btk/btktreeviewcolumn.c (btk_tree_view_column_set_expand): set use
	resized width to FALSE.

	* tests/Makefile.am:
	* tests/testtreecolumnsizing.c: new interactive test program
	for testing column resizing with different column configurations.

2008-07-11  Simos Xenitellis  <simos@bunny.org>

	* btk/compose-parse.py:
	* btk/btkimcontextsimple.c:
	Fixed typo for the name of Markus Kuhn, issue mentioned 
	in bug #321896 (comment 61).
	
2008-07-11  Simos Xenitellis  <simos@bunny.org>	

	Bug 334418 – Support easy input of ellipsis

	* btk/btkimcontextsimpleseqs.h: Fixed 18 compose sequences
	that listed the wrong codepoint.  Reported by Wouter Bolsterlee.

2008-07-03  Murray Cumming  <murrayc@murrayc.com>

	* btk/btkwidget.c (btk_widget_set_property):  tooltip-text and 
	tooltip-markup properties: Interpret an empty string as a NULL 
	string because an empty tooltip is silly. This will help 
	language bindings that do not bother to have the two types of 
	empty/null strings.
	Bug #541399.

2008-07-10  Matthias Clasen  <mclasen@redhat.com>

	Bug 542234 – iconview a11y implementation segfaults

	* btk/btkiconview.c: Fix a segfault in the a11y code.
	Patch by Li Yuan.

2008-07-08  Christian Neumair  <cneumair@bunny.org>

	* btk/btkuimanager.c (update_node):
	Skip update of accelerator child node if it has no associated action.
	Fixes #541950.

2008-07-07  Cody Russell  <bratsche@bunny.org>

	Bug 541964 – [Win32] Setting modal hint to current value might confuse the stack

	* bdk/win32/bdkwindow-win32.c: Check if the value is the same as the
	existing modal hint value before setting it.

2008-07-07  Cody Russell  <bratsche@bunny.org>

	Bug 540994 – [Win32] Some windows don't appear at the top when created

	* bdk/win32/bdkwindow-win32.c: Raise the window when setting it modal.

	I actually already committed this one by accident, probably when I committed
	#541305, but just wanted to document it here in the ChangeLog.

2008-07-07  Johan Dahlin  <johan@bunny.org>

	* btk/tests/builder.c (test_cell_view):
	Add a test case for 528845.

2008-07-07  Tor Lillqvist  <tml@novell.com>

	* bdk/win32/bdkwindow-win32.c
	(bdk_window_foreign_new_for_display): Need to initialise
	private->impl here, too.

2008-07-07  Michael Natterer  <mitch@imendio.com>

	* btk/btkfilesystem.c: include the two needed headers instead of
	<btk/btk.h>.

2008-07-06  Matthias Clasen  <mclasen@redhat.com>

	Bug 528845 – segv from BtkBuilder on attempting <accelerator> under
	BtkCellView

	* btk/btkcellview.c: Don't blindly chain up in the buildable
	implementation.  Reported by Kevin Ryde.

2008-07-06  Matthias Clasen  <mclasen@redhat.com>

	Bug 469068 – clarify bdk_bairo_create()

	* bdk/bdkbairo.c (bdk_bairo_create): Add a note that bairo
	contexts cannot be cached for handling expose events.
	Proposed by Behdad Esfahbod.

2008-07-06  Matthias Clasen  <mclasen@redhat.com>

	Bug 507953 – btk_tree_view_set_tooltip_column() shows markups

	* btk/btktreeview.c (btk_tree_view_set_tooltip_column): Mention
	that the tooltip is set as markup. Proposed by Czirkos Zoltan.

2008-07-06  Matthias Clasen  <mclasen@redhat.com>

	Bug 510225 – btk_widget_get_composite_name retval should be freed

	* btk/btkwidget.c (btk_widget_get_composite_name): Clarify the
	docs. Pointed out by Wolfgang Oertl

2008-07-06  Matthias Clasen  <mclasen@redhat.com>

	Bug 531129 – btk_style_copy() does not include a return value or 
	description

	* btk/btkstyle.c: Document btk_style_copy.

2008-07-06  Matthias Clasen  <mclasen@redhat.com>

	Bug 541540 – Dead link to pkg-config site in BTK+ online FAQ
	Bug 513580 – Broken link in BTK+ FAQ

	* docs/faq/btk-faq.sgml: Remove or update some outdated links.

2008-07-07  Christian Dywan  <christian@imendio.com>

	* btk/btkcontainer.c (btk_container_add_with_properties): Remove
	erroneously added g_return_if_fail (bug #541811).

2008-07-06  Matthias Clasen  <mclasen@redhat.com>

	Bug 343663 – source-buffer highlighting highlights "char" in
	btk_text_iter_forward_char

	* demos/btk-demo/*.c: Fix up the handrolled hilighting a bit.

2008-07-06  Matthias Clasen  <mclasen@redhat.com>

	Bug 327582 – Incomplete docs for BtkSettings::btk-icon-sizes
	
	* btk/btksettings.c: Improve the documentation of the
	btk-icon-sizes setting. Proposed by Tommi Komulainen.

2008-07-06  Matthias Clasen  <mclasen@redhat.com>

	Bug 539248 – btk_calender_query_tooltip calls ->detail_func with
	invalid dates

	* btk/btkcalendar.c (btk_calendar_query_tooltip):
	Check that the cursor is over a valid date before retrieving
	its details.  Patch by Chris Wilson

2008-07-06  Matthias Clasen  <mclasen@redhat.com>

	Bug 493008 – bdk_screen_get_window_stack is not 64-bit-compatible

	* bdk/x11/bdkscreen-x11.c (bdk_screen_get_window_stack): Fix
	64-bit brokenness. Reported by Christian Hammond.

2008-07-06  Matthias Clasen  <mclasen@redhat.com>

	Bug 541645 – btkfilechooserdefault segfaults when bookmark does not
	contain ://

	* btk/btkfilechooserdefault.c (_btk_file_chooser_label_for_file):
	Be more robust. Reported by  Jelte van der Hoek

2008-07-06  Matthias Clasen  <mclasen@redhat.com>

	Bug 540917 – deprecate pack_start_defaults()

	* btk/btk.symbols:
	* btk/btkbox.[hc]: Deprecated btk_box_pack_{start,end}_defaults.
	Proposed by Owen Taylor

2008-07-05  Matthias Clasen  <mclasen@redhat.com>

	* configure.in: Bump version

2008-07-05  Matthias Clasen  <mclasen@redhat.com>

	* === Released 2.13.4 ===

2008-07-05  Michael Natterer  <mitch@imendio.com>

	* btk/btk.symbols: move btk_draw_insertion_cursor() out of the
	deprecated section because it isn't deprecated.

2008-07-05  Michael Natterer  <mitch@imendio.com>

	* btk/btkprogressbar.c: remove #if HAVE_CONFIG_H and clean up
	other include weirdness in this file.

2008-07-05  Matthias Clasen  <mclasen@redhat.com>

	* NEWS: Updates

2008-07-04  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkiconview.c:
	* btk/btkfontsel.c:
	* btk/btkscalebutton.c: Small doc fixes.

2008-07-04  Matthias Clasen  <mclasen@redhat.com>

	* bdk/bdkevents.c:
	* bdk/x11/bdktestutils-x11.c: Small doc fixes

2008-07-04  Matthias Clasen  <mclasen@redhat.com>

	* btk/tests/defaultvalue.c: Omit some more untestable properties.

	* btk/btkmenu.c: Fix the initial value of the monitor property.

	* btk/btkentry.c: Fix the property getter for text-length property.

	* btk/btkaccelgroup.c: Fix default value for modifier-mask property.

2008-07-04  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkmenu.c: Debork the attach-widget property.

2008-07-04  Michael Natterer  <mitch@imendio.com>

	Fix make check:

	* btk/Makefile.am: remove BTK_DISABLE_DEPRECATED from INCLUDES
	again :-(

	* btk/btkclist.c
	* btk/btkcombo.c
	* btk/btkctree.c
	* btk/btklist.c
	* btk/btklistitem.c
	* btk/btknotebook.c
	* btk/btkobject.c
	* btk/btkoldeditable.c
	* btk/btkpixmap.c
	* btk/btktext.c
	* btk/btktipsquery.c
	* btk/btktree.c
	* btk/btktreeitem.c: don't #define it again before including
	btkalias.h after it has been #undef'ed before.

2008-07-04  Michael Natterer  <mitch@imendio.com>

	* btk/btkentry.c (_btk_entry_reset_im_context): set need_im_reset
	to FALSE instead of 0.

2008-07-04  Michael Natterer  <mitch@imendio.com>

	Allocate with GSlice:

	* btk/btkassistant.c: BtkAssistantPage
	* btk/btkcellview.c: BtkCellViewCellInfo
	* btk/btkentry.c: BtkEntryPasswordHint, PopupInfo
	* btk/btkfilefilter.c: FilterRule
	* btk/btknotebook.c: BtkNotebookPage

2008-07-04  Michael Natterer  <mitch@imendio.com>

	* btk/btkcombobox.c: allocate ComboCellInfo with GSlice.

2008-07-04  Michael Natterer  <mitch@imendio.com>

	* btk/btkprintoperation.c (print_pages): change "error_dialog"
	variable to BtkWidget fo fix two warnings.

2008-07-04  Michael Natterer  <mitch@imendio.com>

	Bug 539944 – Add BtkScaleButton API so struct fields can be marked
	as private

	* btk/btk.symbols
	* btk/btkscalebutton.[ch]: add btk_scale_button_get_plus_button()
	and _get_minus_button(). Patch by Christian Dywan.

2008-07-04  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkscalebutton.c:
	* bdk/bdk.symbols: 
	* bdk/bdkwindowimpl.c: Fix make check.

2008-07-03  Matthias Clasen  <mclasen@redhat.com>

	Bug 540618 – btk_menu_shell_select_first prints warning on BtkMenubar
	constructed using BtkUIManager

	* btk/btkmenuitem.c: Fall back to the default positioning when
	the menuitem is not realized. Patch by Björn Lindqvist.

2008-07-03  Matthias Clasen  <mclasen@redhat.com>

	Bug 540612 – mem leak in filechooser

	* btk/btkfilesystem.c (get_volumes_list): Fix a memory leak.
	Patch by Christian Persch.

2008-07-04  Tor Lillqvist  <tml@novell.com>

	Bug 540861 - invalid UTF-8 in input device name

	* bdk/win32/bdkinput-win32.c: Fetch the device and cursor names in
	Unicode, and convert to UTF-8 for the BdkDevice's name field.

2008-07-03  Matthias Clasen  <mclasen@redhat.com>

	Bug 538863 – Fixes assertion on entering empty folder

	* btk/btkfilechooserdefault.c (browse_files_select_first_row): Don't
	select the first row if the folder is empty.
	Patch by Olle Bergkvist.

2008-07-03  Matthias Clasen  <mclasen@redhat.com>

	Bug 540915 – BtkBuilder sets properties in reverse order

	* btk/btkbuilderparser.c (parse_custom): Set properties in the order 
	in which they are specified in the xml file.  

2008-07-03  Matthias Clasen  <mclasen@redhat.com>
	
	Bug 539944 – Add BtkScaleButton API so struct fields can be marked as
	private

	* btk/btk.symbols:
	* btk/btkscalebutton.[hc] (btk_scale_button_get_popup): Add an
	accessor for the popup. Patch by Christian Dywan

2008-07-03  Matthias Clasen  <mclasen@redhat.com>

	Bug 535498 – Printing demo broken

	* demos/btk-demo/printing.c: Use monospace as font name, 
	not mono. Also use the right advance when moving from line to line.
	Patch by Yevgen Muntyan.

2008-07-03  Matthias Clasen  <mclasen@redhat.com>

	Bug 538547 – Update doc-shooter in btk documentation

	* docs/tools/Makefile.am:
	* docs/tools/folder.png:
	* docs/tools/bunny.png: New images

	* docs/tools/widgets.c: Use the new images.
	Patch by Baptiste Mille-Mathias.

2008-07-03  Michael Natterer  <mitch@imendio.com>

	* btk/btkscalebutton.c: remove "_from_bindings" suffix from the
	names of binding signal implementations.

2008-07-03  Li Yuan  <li.yuan@sun.com>

	* bail-uninstalled.pc.in:
	Bug #536430. Add libbailutil.la into bail-uninstalled.pc.in.

2008-07-03  Cody Russell  <bratsche@bunny.org>

	Bug 540529 – Remove all GIMP references

	* btk+-2.0.pc.in:
	* bdk-2.0.pc.in:
	* btk+-unix-print-2.0.pc.in:
	* btk+-2.0-uninstalled.pc.in:
	* bdk-2.0-uninstalled.pc.in: Changed GIMP Toolkit to say
	BTK+ Graphical UI Library in the pkg-config files.

2008-07-02  Cody Russell  <bratsche@bunny.org>

	Bug 541305 – [Win32] Scrolling was broken after BdkWindow refactoring

	* bdk/win32/bdkwindow-win32.c: Reverted some logic so that scrolling
	works again.

	* bdk/win32/bdkgeometry-win32.c: Removed some more unnecessary checks.
	* bdk/win32/bdkkeys-win32.c: Removed unused variable to fix compile-time
	warnings.

2008-07-02  Cody Russell  <bratsche@bunny.org>

	Bug 541249 – [Win32] Fix some internal static methods

	* bdk/bdkwindow-win32.c: Make the interface implementation methods
	static.

2008-07-02  Michael Natterer  <mitch@imendio.com>

	Bug 537591 – Don't hardcode minimum width of menuitems

	* btk/btkmenuitem.c: applied patch from Christian Dywan which
	introduces a "width-chars" style property which replaces the
	hardcoded minimum width of menuitems with submenu. Patch
	extracted from Maemo-BTK+.

2008-07-02  Michael Natterer  <mitch@imendio.com>

	* btk/btkfilechooserdefault.c: remove some of the million includes.

2008-07-02  Kristian Rietveld  <kris@imendio.com>

	* btk/btkcellrendererpixbuf.c (btk_cell_renderer_pixbuf_class_init):
	Since s/2.16/2.14/ for the new gicon property.

2008-07-02  Kristian Rietveld  <kris@imendio.com>

	Bug 455268 - Add btk-enable-tooltips BtkSetting

	* btk/btk.symbols:
	* btk/btktoolbar.[ch] (btk_toolbar_[gs]et_tooltips): deprecated.

	* btk/btksettings.c: introduce btk-enable-tooltips XSetting.

	* btk/btktooltip.c (_btk_tooltip_handle_event): take the newly
	introduced XSetting into account.

	* demos/btk-demo/appwindow.c: don't use the now deprecated
	btk_toolbar_set_tooltips().

2008-07-02  Cody Russell  <bratsche@bunny.org>

	Bug 541162 – [Win32] Update for the new BdkWindowImpl stuff

	* bdk/win32/bdkprivate-win32.h:
	* bdk/win32/bdkgeometry-win32.c:
	* bdk/win32/bdkevents-win32.c:
	* bdk/win32/bdkwindow-win32.c: Update Win32 backend according to
	the newly refactored BdkWindow code.
	
2008-07-01  Cody Russell  <bratsche@bunny.org>

	Bug 539164 – Windows' System Menu blocks main loop

	* bdk/win32/bdkevents-win32.c: Use a modal timer proc in between
	receiving WM_ENTERMENULOOP and WM_EXITMENULOOP and pump the
	GLib mainloop from there.

2008-07-01  Richard Hult  <richard@imendio.com>

	Some aftermath from the window impl cleanups:

	* bdk/quartz/bdkwindow-quartz.c:
	(bdk_window_merge_child_input_shapes): Rename and export again.
	(bdk_window_quartz_get_offsets): Make static.

2008-07-01  Michael Natterer  <mitch@imendio.com>

	* btk/btkscalebutton.h: forgot to commit the header, fixed now.

2008-07-01  Matthias Clasen  <mclasen@redhat.com>

	539790 – [PATCH] Please add three new settings to BtkSettings

	* bdk/x11/bdksettings.c: 
	* btk/btksettings.c: Add event sound settings.
	Patch by Lennart Poettering.

2008-07-01  Matthias Clasen  <mclasen@redhat.com>

	Bug 434535 – printoperation's create_surface doesn't check temp file
	creation for success

	Patch by Marek Kasik:

	* btk/btkprintoperation-unix.c
	(_btk_print_operation_platform_backend_create_preview_surface): 
	Handle failure to create temp file by returning NULL.

	* btk/btkprintoperation.c (btk_print_operation_preview_handler):
	Return FALSE if surface creation fails.

	(print_pages): If the preiew signal is not handled, show an
	error dialog.

2008-07-01  Michael Natterer  <mitch@imendio.com>

	Bug 442042 – BtkScaleButton is too limited

	* btk/btkscalebutton.[ch]: turn "orientation" into a normal
	property that can be changed at any time after widget
	creation. Add public API for it.

	* btk/btk.symbols: add btk_scale_button_get/set_orientation.

2008-06-30  Michael Natterer  <mitch@imendio.com>

	Some unrelated cleanups found while reviewing
	the offscreen window patch:

	* bdk/bdkwindow.c: add missing Since: 2.14 to the redirection
	functions, fix some function header indentation, update
	documentation of redirect_to_drawable().

	* bdk/x11/bdkwindow-x11.c
	* bdk/x11/bdkpixmap-x11.c: fix function header
	formatting/indentation.

	* btk/btkwidget.c: use I_() on "damage_event".

2008-06-30  Michael Natterer  <mitch@imendio.com>

	* bdk/bdkinternals.h: remove duplicate declaration of
	_bdk_window_new().

2008-06-30  Michael Natterer  <mitch@imendio.com>

	* bdk/Makefile.am: reorder source lists alphabetically.

2008-06-30  Matthias Clasen  <mclasen@redhat.com>

	Bug 540310 – Avoid unnecessary repaints when resizing BtkWindow

	* btk/btkwindow.c: Avoid unnecessary redraws when resizing.
	Patch by Owen Taylor

2008-06-29  Behdad Esfahbod  <behdad@bunny.org>

	Bug 530255 – BtkAboutDialog cuts off comments label
	Followup patch from  Jan Arne Petersen

	* btk/btklabel.c (btk_label_get_layout_offsets): Ensure layout.

2008-06-28  Michael Natterer  <mitch@imendio.com>

	* btk/btkselection.h: properly indent the newly added
	BtkSelectionData accessors. Some newlines can't hurt either.

2008-06-27  Mikael Hallendal  <micke@imendio.com>

	* btk/btkbox.c (btk_box_pack): Removed accidental empty row.

2008-06-27  Mikael Hallendal  <micke@imendio.com>

	* btk/btkbox.c (btk_box_pack, btk_box_pack_start, btk_box_pack_end):
	Factored out btk_box_pack from btk_box_pack_start and use it from both
	pack_start and pack_end in order to reduce the code duplication.

2008-06-27  Michael Natterer  <mitch@imendio.com>

	Bug 442042 – BtkScaleButton is too limited

	* btk/btkscalebutton.c (btk_scale_button_init): set the name
	"btk-scalebutton-popup-window" on the popup window so it is
	properly themeable.

2008-06-27  Kristian Rietveld  <kris@imendio.com>

	* bdk/quartz/bdkgeometry-quartz.c:
	* bdk/quartz/bdkwindow-quartz.c:
	* bdk/quartz/bdkprivate-quartz.h: adapt to use BdkWindowImpl
	interface.

2008-06-27  Carlos Garnacho  <carlos@imendio.com>

	* btk/btkrecentmanager.c (get_icon_for_mime_type): Fix two potential
	critical warnings. Bug #539470.

2008-06-27  Emmanuele Bassi  <ebassi@bunny.org>

	Abstract some BdkWindow API into an interface that the backends
	must implement. (based on a patch by Alex Larsson)

	* bdk/Makefile.am: Add bdkwindowimpl.[ch]

	* bdk/bdk.symbols: Move symbols around.

	* bdk/bdkinternals.h:
	* bdk/bdkwindowimpl.[ch]: Move some of the BdkWindow API we require
	from the backends to a GInterface that the backends should implement
	instead.

	* bdk/bdkwindow.c: Provide some of the BdkWindow public API as a
	wrapper call around the BdkWindowImpl interface vtable.

	* bdk/x11/bdkevents-x11.c:
	* bdk/x11/bdkgeometry-x11.c:
	* bdk/x11/bdkprivate-x11.h:
	* bdk/x11/bdkwindow-x11.c:
	* bdk/x11/bdkwindow-x11.h: Update the X11 backend to implement
	the BdkWindowImpl interface.

2008-06-27  Martyn Russell  <martyn@imendio.com>

	Bug 540318 - Invalid URL
	
	* btk/btkcontainer.c: (btk_container_add): Fixed the FAQ location
	in the warning produced here.

2008-06-27  Michael Natterer  <mitch@imendio.com>

	Bug 442042 – BtkScaleButton is too limited

	* btk/btkscalebutton.c: add "orientation" property. Make sure the
	stuff that is part of the public API continues to be created in
	init() to stay compatible. Move creating of the popup scale to
	constructor(). Add an internal HScale class. Changed popup
	positioning for horizontal scales accordingly.

2008-06-26  Michael Natterer  <mitch@imendio.com>

	* btk/btkscalebutton.c
	* btk/btkvolumebutton.c: remove redundant init() and class_init()
	prototypes, remove redundant includes, remove a little trailing
	whitespace.

2008-06-26  Richard Hult  <richard@imendio.com>

	* btk/btkclipboard-quartz.c: (btk_clipboard_wait_for_contents):
	* btk/btkquartz.c:
	(_btk_quartz_get_selection_data_from_pasteboard),
	(_btk_quartz_set_selection_data_for_pasteboard): Patch from
	Christian Dywan to clean up selection data setting.

2008-06-26  Richard Hult  <richard@imendio.com>

	* btk/btkdnd-quartz.c (btk_drag_begin_internal): Don't use
	deprecated function btk_widget_ref, replace with g_object_ref.

2008-06-26  Michael Natterer  <mitch@imendio.com>

	* btk/btkfilesystem.c: #include "config.h"

2008-06-26  Carlos Garnacho  <carlos@imendio.com>

	* btk/btkfilechooserdefault.c
	(btk_file_chooser_default_get_current_folder): current_folder can be
	NULL here, do not try to reference it (Bug #540235)
	(btk_file_chooser_default_get_files): Deal better with
	btk_file_chooser_default_get_current_folder() being able to return
	NULL.

2008-06-26  Michael Natterer  <mitch@imendio.com>

	* btk/btktextutil.c (_btk_text_util_append_special_char_menuitems):
	allocate the BtkTextUtilCallbackInfo structs with GSlice.

2008-06-25  Michael Natterer  <mitch@imendio.com>

	* btk/btktypeutils.h: there is no reason to include
	<btk/btktypebuiltins.h> in the middle of the file, move it to top,
	replacing the <bunnylib-object.h> include. Also move the remaining few
	non-deprecated things to the top and move some deprecated things
	around to clean up the mess with too many deprecated sections even
	more.

2008-06-24  Michael Natterer  <mitch@imendio.com>

	* btk/btktypeutils.h: deprecate btk_type_init() unconditionally
	(also for BTK_COMPILATION). Move some deprecated typedefs around
	to reduce the mess with zillions of deprecated sections.

	* btk/btkmain.c (do_post_parse_initialization): replace the call
	to btk_type_init() by g_type_init() and btk_object_get_type() even
	though the latter is probably completely pointless.

2008-06-24  Michael Natterer  <mitch@imendio.com>

	* btk/btkdialog.c (btk_dialog_init): also revert change in how
	the dialog's vbox was added (bug #539732).

2008-06-24  Carlos Garnacho  <carlos@imendio.com>

	* btk/btkdialog.[ch]: Remove container implementation, which isn't
	thought for handling non-direct children. Fixes #539732.
	(btk_dialog_pack_start) (btk_dialog_pack_end): Removed as well, it
	doesn't provide enough control to API users (removing, reordering...),
	this is better handled through:
	(btk_dialog_get_content_area): New function which just returns
	dialog->vbox.
	* btk/btk.symbols: Modify accordingly.
	* docs/reference/btk/tmpl/btkdialog.sgml: Update docs to recommend
	using btk_dialog_get_[action|content]_area() instead of accessing
	dialog struct members directly.

2008-06-24  Michael Natterer  <mitch@imendio.com>

	* btk/btkassistant.h
	* btk/btkcellrenderer.h
	* btk/btkfilechooserentry.h
	* btk/btkprivate.h
	* btk/btktooltip.h
	* btk/btktreeview.h
	* btk/btkwindow.h: no need to include btkwidget.h or btkobject.h
	if there is any other widget included, they all have to include
	their respective parent classes (the is-a relation works for
	includes too).

2008-06-24  Michael Natterer  <mitch@imendio.com>

	* btk/btktextutil.h: remove includes from this internal header.

	* btk/btktextutil.c: include btktextbuffer.h before btktextutil.h.

2008-06-23  Michael Natterer  <mitch@imendio.com>

	* btk/btkinvisible.h: formatting.

2008-06-23  Michael Natterer  <mitch@imendio.com>

	* btk/btkaction.h
	* btk/btkbuildable.h
	* btk/btkbuilderprivate.h
	* btk/btkcelllayout.h
	* btk/btkentrycompletion.h
	* btk/btkfilechoosersettings.h
	* btk/btkfilesystem.h
	* btk/btkfilesystemmodel.h
	* btk/btkicontheme.h
	* btk/btklinkbutton.h
	* btk/btkpagesetup.h
	* btk/btkpapersize.h
	* btk/btkprintcontext.h
	* btk/btkprintoperation.h
	* btk/btkprintoperationpreview.h
	* btk/btkprintsettings.h
	* btk/btkrecentchooserprivate.h
	* btk/btkrecentmanager.h
	* btk/btksearchengine.h
	* btk/btktexttag.h
	* btk/btktreeselection.h
	* btk/btktreeviewcolumn.h
	* btk/btkuimanager.h: remove redundant inclusion of <bunnylib.h> and
	<bunnylib-object.h>. There is no point in relying on them being pulled
	in by other headers in some places and placing them explicitly in
	other places, so choose the "as little includes as possible"
	approach and get rid of them.

2008-06-23  Kristian Rietveld  <kris@imendio.com>

	* bdk/bdkenumtypes.h.template:
	* bdk-pixbuf/bdk-pixbuf-enum-types.h.template:
	* btk/btktypebuiltins.h.template:
	* perf/typebuiltins.h.template: do not hard code the prefix of the
	enum, use @ENUMPREFIX@ instead (you need an up to date bunnylib for this).

2008-06-23  Michael Natterer  <mitch@imendio.com>

	* btk/btkmountoperation.h
	* btk/btktestutils.h
	* btk/btkshow.[ch]: remove as many includes as possible from these
	new files. They can't be included individually, so nothing can break.

2008-06-22  Michael Natterer  <mitch@imendio.com>

	* btk/btkaccelgroup.c: use g_param_spec_flags(), not enum() when
	registering the "modifier-mask" property.

2008-06-21  Johan Dahlin  <jdahlin@async.com.br>

    * *.[ch]: Include "config.h" instead of <config.h>
	Command used:
	find -name \*.[ch]|xargs perl -p -i -e 's/^#include <config.h>/#include "config.h"/g'
	Rubberstamped by Mitch and Tim

2008-06-21  Carlos Garnacho  <carlos@imendio.com>

	Bug 539466 – BtkMenuShell API/ABI break in trunk.

	* btk/btkmenushell.h: Fix API/ABI break, two buint fields had
	different name and packing width.

2008-06-21  Johan Dahlin  <jdahlin@async.com.br>

	* btk/btkiconcachevalidator.c (check_pixel_data): Cast to buint8* to avoid
	a compiler warning.

2008-06-21  Michael Natterer  <mitch@imendio.com>

	* bdk/bdkapplaunchcontext.h: remove redundant include, fix
	indentation, replace header by a BDK copyright header (don't say
	"The Bunny Library"), remove trailing whitespace.

2008-06-21  Hans Breuer  <hans@breuer.org>

	* btk/btkprintoperation-win32.c(1713) : fix 'function' : incompatible 
	types - from 'struct _bairo *' to 'struct _bairo_surface *' by
	passing the surface to bairo_surface_show_page(), not the context
	* btk/btkprintoperation-win32.c(866) : get rid of warning C4018: 
	'<' : signed/unsigned mismatch by using buint for the loop

	* btk/btkmenu.c(btk_menu_get_property) : property 'menu::active' is 
	an uint, btk_menu_get_active() returns the widget pointer. Convert
	the latter to the former by calculating the index in menu::children
	Also fix some occurences of g_return_if_fail() where 
	g_return_val_if_fail() was meant

2008-06-21  Björn Lindqvist  <bjourne@gmail.com>

	Bug 539363 – Segfault when creating BtkPlugs

	* btk/btkplug.c (btk_plug_class_init): Spaces not allowed in
	property names. "socket window" => "socket-window"

2008-06-20  Jody Goldberg <jody@bunny.org>

	* btk/btkprintoperation-win32.c (btk_print_run_page_setup_dialog) : 
	  Fix life cycle to avoid crash. [#536966]

2008-06-20  Hans Breuer  <hans@breuer.org>

	* btk/btkmenuitem.c btk/btkmessagedialog.c btk/btkplug.c : must return
	a value of the appropriate type with g_return_val_if_fail
	
	* bdk/bdkconfig.h.win32 : add the GSEAL definition here as well

	* btk/btkfilesystem.c : don't add the "File System" on win32

	* tests/makefile.msc : remove broken autotestfile(system|chooser) 
	from build

2008-06-20  Johan Dahlin  <jdahlin@async.com.br>

	* btk/btkbutton.c: Document a style property

	* btk/btkeditable.c: Document and use - instead of _ in signal names.

	* btk/btkbutton.c:
	* btk/btkcolorsel.c:
	* btk/btkentry.c:
	* btk/btkitemfactory.c:
	* btk/btknotebook.c:
	Fix up deprecated markup syntax. Add version numbers and
	a message on the remaning ones.

2008-06-20  Mikael Hallendal  <micke@imendio.com>

	* tests/testthreads.c: Use g_signal_connect instead of
	btk_signal_connect.

	* demos/testbtk/main.c: switched to use GSignal instead of BtkSignal.
	While the code is not built, people may still look at it.

2008-06-20  Kjartan Maraas  <kmaraas@bunny.org>

	reviewed by: <Carlos Garnacho <garnacho@bunny.org>

	* btk/btkbuilder.h:
	* btk/btkliststore.h:
	* btk/btkobject.h:
	* btk/btktextchild.h:
	* btk/btktreemodelfilter.h:
	* btk/btktreemodelsort.h:
	* btk/btktreestore.h:
	#include <bdkconfig.h> not <bdk/bdkconfig.h>

2008-06-20  Martyn Russell  <martyn@imendio.com>

	* btk/btkaccelgroup.c: Fix warnings from calling
	g_object_notify() on a BtkAccelGroup without casting to a
	BObject.

2008-06-20  Johan Dahlin  <jdahlin@async.com.br>

	* btk/btkcolorsel.c: Modernize and order things as most
	other objects. Defines at the top, class init before init
	before bobject methods before object method before widget
	methods. No changes to the logic done.

2008-06-20  Martyn Russell  <martyn@imendio.com>

	* btk/btkaccelgroup.c: Don't call g_object_notify() with
	properties that don't exist. Also, make sure we notify for
	the "is-locked" property.

2008-06-20  Johan Dahlin  <jdahlin@async.com.br>

	* btk/btklayout.c (enum): Remove left-over unused property enum.

2008-06-20  Johan Dahlin  <jdahlin@async.com.br>

	* btk/btkscalebutton.c: Fix btk-doc syntax, add missing trailing colon.

	* btk/btk.symbols: Add all newly added accessors so abicheck.sh passes

	* btk/btkwidget.c (btk_widget_get_allocation): Initialize the
	allocation to avoid compiler warnings

2008-06-20  Michael Natterer  <mitch@imendio.com>

	* btk/btkaccellabel.h
	* btk/btkactiongroup.h
	* btk/btkalignment.h
	* btk/btkarrow.h
	* btk/btkaspectframe.h
	* btk/btkbin.h
	* btk/btkhandlebox.h
	* btk/btkprogressbar.h
	* btk/btkrange.h
	* btk/btkscale.h
	* btk/btkscalebutton.h
	* btk/btkselection.h: fix some formatting and spacing uglyness
	that got merged from the GSEAL branch.

2008-06-20  Johan Dahlin  <jdahlin@async.com.br>

	* btk/btk.symbols:
	* btk/btkmessagedialog.c (btk_message_dialog_get_image):
	* btk/btkmessagedialog.h:
	Add missing accessor for sealed field BtkMessageDialog->image.

2008-06-20  Michael Natterer  <mitch@imendio.com>

	* btk/btkprinter.h: the GSEAL branch added two includes for no
	reason.

2008-06-20  Johan Dahlin  <jdahlin@async.com.br>

	* btk/btkaccelgroup.c:
	* btk/btkcolorseldialog.c:
	* btk/btkcontainer.c:
	* btk/btkdialog.c:
	* btk/btkentry.c (btk_entry_class_init):
	* btk/btkfontsel.c:
	* btk/btkhandlebox.c:
	* btk/btklayout.c:
	* btk/btkmenu.c (btk_menu_class_init):
	* btk/btkmenuitem.c (btk_menu_item_class_init):
	* btk/btkplug.c (btk_plug_class_init):
	* btk/btkselection.c:
	* btk/btksocket.c:
	* btk/btktreeselection.c:
	* btk/btkwidget.c (btk_widget_class_init):
	* btk/btkwindow.c:
	Add missing Since: btk-doc markup for newly added GSEAL API.
	Change all Since: GSEAL-branch to Since: 2.14.

2008-06-20  Michael Natterer  <mitch@imendio.com>

	* btk/btkaccelgroup.[ch]: fix some formatting and whitespace in
	the code merged from the GSEAL branch.

2008-06-20  Michael Natterer  <mitch@imendio.com>

	* btk/btkdialog.[ch] (btk_dialog_get_action_area): change return
	value from BtkHButtonBox to BtkWidget.

2008-06-20  Michael Natterer  <mitch@imendio.com>

	* btk/btkhandlebox.h (struct _BtkHandleBox): deuglify formatting
	of sealed fields.

2008-06-20  Michael Natterer  <mitch@imendio.com>

	* btk/btkwindow.[ch]
	* btk/btk.symbols: rename btk_window_group_get_windows() to
	btk_window_group_list_windows().

2008-06-20 12:35:20 +0200 Tim Janik

	* Fixed wrongly resolved merge conflicts.

2008-06-19 19:01:41 +0200 Carlos Garnacho

	Add btk_window_group_get_windows().

	* btk/btk.symbols:
	* btk/btkwindow.[ch] (btk_window_group_get_windows): New function.

2008-06-19 18:39:47 +0200 Carlos Garnacho

	Document btk_dialog_get_action_area(), btk_dialog_pack_start() and btk_dialog_pack_end()

	* btk/btkdialog.c: Add missing documentation for new fucntions.

2008-06-19 18:38:35 +0200 Carlos Garnacho

	Document btk_container_get_focus_child().

	* btk/btkcontainer.c: Add documentation for btk_container_get_focus_child().

2008-06-19 13:50:06 +0200 Christian Dywan

	Add btk_plug_get_socket_window

2008-06-19 13:11:52 +0200 Christian Dywan

	Remove superflous btkselection accessors and merge _get_data

2008-06-13 15:56:51 +0200 Christian Dywan

	Implement btk_selection_get_display, style fixes

2008-06-13 15:45:00 +0200 Christian Dywan

	Fix indentation of a comment.

2008-06-13 15:10:08 +0200 Christian Dywan

	Change docs and signature of btk_widget_get_allocation

2008-06-13 14:22:17 +0200 Christian Dywan

	Remove unneeded BtkColorSelectionDialog accessors

2008-06-13 12:57:54 +0200 Christian Dywan

	Fix documentaion of btk_menu_item_get_accel_path

2008-06-11 13:49:34 +0200 Christian Dywan

	Fix btk_widget_get_allocation

2008-06-07 15:37:18 +0200 Carlos Garnacho

	Switch to "buint GSEAL (foo) : width;" when packing fields in buints.

	* btk/btkbox.h:
	* btk/btkbutton.h:
	* btk/btkcellrenderer.h:
	* btk/btkcellrenderertext.h:
	* btk/btkcheckmenuitem.h:
	* btk/btkcontainer.h:
	* btk/btkentry.h:
	* btk/btkhandlebox.h:
	* btk/btkimcontextsimple.h:
	* btk/btklabel.h:
	* btk/btkliststore.h:
	* btk/btkmenu.h:
	* btk/btkmenuitem.h:
	* btk/btkmenushell.h:
	* btk/btknotebook.h:
	* btk/btkpaned.h:
	* btk/btkplug.h:
	* btk/btkprintjob.h:
	* btk/btkprogressbar.h:
	* btk/btkrange.h:
	* btk/btkscale.h:
	* btk/btkscrolledwindow.h:
	* btk/btksizegroup.h:
	* btk/btksocket.h:
	* btk/btkspinbutton.h:
	* btk/btkstatusbar.h:
	* btk/btktable.h:
	* btk/btktearoffmenuitem.h:
	* btk/btktextbuffer.h:
	* btk/btktextview.h:
	* btk/btktogglebutton.h:
	* btk/btktoolbar.h:
	* btk/btktreestore.h:
	* btk/btktreeviewcolumn.h:
	* btk/btkwindow.h: Do not specify width inside GSEAL() when packing fields in buints.

2008-06-06 19:02:17 +0200 Christian Dywan

	Seal BtkWidget

2008-06-06 17:58:21 +0200 Christian Dywan

	Seal BtkSelectionData

2008-06-06 17:57:23 +0200 Christian Dywan

	Fix BtkDialog, don't add vbox via btk_container_add.

2008-06-06 13:39:34 +0200 Kristian Rietveld

	Make BtkCellRenderer::editing read-only.  (Catched by Matthias)

2008-06-03 09:11:50 +0200 Kristian Rietveld

	Seal BtkTextView.

2008-05-30 16:48:12 +0100 Martyn Russell

	Seal BtkFontSelection & BtkFontSelectionDialog

2008-05-29 10:35:29 +0200 Kristian Rietveld

	Seal BtkTearoffMenuItem.

	(the torn_off field is for internal state keeping, you can retrieve
	the value from the parent menu's tearoff_state).

2008-05-27 18:34:12 +0200 Christian Dywan

	Seal BtkObject

2008-05-27 18:17:44 +0200 Christian Dywan

	Seal BtkRange

2008-05-27 15:10:02 +0200 Christian Dywan

	Seal BtkPlug

2008-05-27 14:17:45 +0200 Christian Dywan

	Seal BtkMenuItem

2008-05-27 14:04:31 +0200 Christian Dywan

	Seal BtkMenuShell

2008-05-27 12:40:08 +0200 Christian Dywan

	Seal BtkInputDialog

2008-05-27 12:39:49 +0200 Christian Dywan

	Seal BtkIMMultiContext

2008-05-27 12:39:17 +0200 Christian Dywan

	Seal BtkIMContextSimple

2008-05-27 12:14:53 +0200 Christian Dywan

	Seal BtkImage

2008-05-27 11:14:21 +0200 Christian Dywan

	Seal BtkSocket

2008-05-27 10:54:20 +0200 Christian Dywan

	Fix the build by including bdkconfig.h in btkprinter.h.

2008-05-27 10:38:02 +0200 Christian Dywan

	Seal BtkGammaCurve

2008-05-27 10:20:56 +0200 Christian Dywan

	Seal BtkHandleBox

2008-05-26 17:58:19 +0200 Kristian Rietveld

	Seal BtkInvisible.

2008-05-26 17:54:56 +0200 Kristian Rietveld

	Seal BtkPrintJob.

2008-05-26 17:48:23 +0200 Kristian Rietveld

	Seal BtkTextBuffer.

2008-05-26 17:39:38 +0200 Kristian Rietveld

	Seal BtkSpinButton.

2008-05-26 17:31:06 +0200 Kristian Rietveld

	Seal BtkTable.

2008-05-26 17:27:22 +0200 Kristian Rietveld

	Seal BtkRuler.

2008-05-26 17:07:43 +0200 Kristian Rietveld

	Seal BtkStatusBar.

2008-05-26 17:07:37 +0200 Kristian Rietveld

	Seal BtkTextMark.

2008-05-26 16:39:27 +0200 Kristian Rietveld

	Seal BtkTextTagTable.

2008-05-26 16:34:13 +0200 Kristian Rietveld

	Seal BtkViewPort.

2008-05-26 17:08:19 +0200 Christian Dywan

	Seal BtkSettings.h

2008-05-26 16:40:05 +0200 Christian Dywan

	Seal BtkMenu

2008-05-26 16:37:54 +0200 Christian Dywan

	Seal BtkLayout

2008-05-26 14:09:32 +0200 Kristian Rietveld

	Seal priv pointer in BtkToggleToolButton.

2008-05-26 14:04:51 +0200 Kristian Rietveld

	Seal priv pointer in BtkUIManager.

2008-05-26 14:01:32 +0200 Kristian Rietveld

	Seal priv pointer in BtkToolItem.

2008-05-26 14:01:12 +0200 Kristian Rietveld

	Seal priv pointer in BtkToolButton.

2008-05-26 14:00:24 +0200 Kristian Rietveld

	Seal priv pointer in BtkToggleAction.

2008-05-26 13:58:01 +0200 Kristian Rietveld

	Seal priv pointer in BtkStatusIcon.

2008-05-26 13:57:33 +0200 Kristian Rietveld

	Seal priv pointer in BtkSeparatorToolItem.

2008-05-26 13:56:33 +0200 Kristian Rietveld

	Seal priv pointer in BtkScaleButton.

2008-05-26 13:55:57 +0200 Kristian Rietveld

	Seal priv pointer in BtkRecentManager.

2008-05-26 13:55:25 +0200 Kristian Rietveld

	Seal priv pointer in BtkRecentChooserWidget.

2008-05-26 13:54:39 +0200 Kristian Rietveld

	Seal priv pointer in BtkRecentChooserMenu.

2008-05-26 13:54:15 +0200 Kristian Rietveld

	Seal priv pointer in BtkRecentChooserDialog.

2008-05-26 13:52:40 +0200 Kristian Rietveld

	Seal priv pointer in BtkRecentAction.

2008-05-26 13:51:47 +0200 Kristian Rietveld

	Seal priv pointer in BtkRadioAction.

2008-05-26 13:50:49 +0200 Kristian Rietveld

	Seal priv pointer in BtkPrintUnixDialog.

2008-05-26 13:50:08 +0200 Kristian Rietveld

	Seal priv pointer in BtkPrintOperation.

2008-05-26 13:49:41 +0200 Kristian Rietveld

	Seal priv pointer in BtkPrinter.

2008-05-26 13:48:49 +0200 Kristian Rietveld

	Seal priv pointer in  BtkPageSetupUnixDialog.

2008-05-26 13:47:39 +0200 Kristian Rietveld

	Seal priv pointer in BtkMenuToolButton.

2008-05-26 13:47:29 +0200 Kristian Rietveld

	Add bdkconfig.h include to BtkBuilder for GSEAL macro.

2008-05-26 13:23:45 +0200 Kristian Rietveld

	Seal priv pointer in BtkLinkButton.

2008-05-26 13:22:25 +0200 Kristian Rietveld

	Seal priv pointer in BtkIconView.

2008-05-26 13:22:04 +0200 Kristian Rietveld

	Seal priv pointer in BtkIconTheme.

2008-05-26 13:13:49 +0200 Kristian Rietveld

	Seal child_allocation field in BtkFrame.

2008-05-26 13:10:17 +0200 Kristian Rietveld

	Sealed priv pointer in BtkFontButton.

2008-05-26 13:07:14 +0200 Kristian Rietveld

	Seal priv pointer in BtkFileChooserButton.

2008-05-26 13:06:43 +0200 Kristian Rietveld

	Seal priv pointer in BtkExpander.

2008-05-26 13:03:24 +0200 Kristian Rietveld

	Sealed remaining (private) fields in BtkContainer.

2008-05-26 13:02:26 +0200 Kristian Rietveld

	Seal priv pointer in BtkComboBoxEntry.

2008-05-26 13:01:40 +0200 Kristian Rietveld

	Seal priv pointer in BtkComboBox.

2008-05-26 13:00:59 +0200 Kristian Rietveld

	Seal private_data pointer in BtkColorSel.

2008-05-26 12:57:50 +0200 Kristian Rietveld

	Seal 3 remaining fields in BtkButton.

2008-05-26 12:55:24 +0200 Kristian Rietveld

	Seal priv pointer in BtkBuilder.

2008-05-26 12:52:44 +0200 Kristian Rietveld

	Seal center_allocation field in BtkAspectFrame.

2008-05-26 12:48:18 +0200 Kristian Rietveld

	Seal priv pointer in BtkAction.

2008-05-26 12:46:11 +0200 Kristian Rietveld

	Seal priv pointer in BtkAboutDialog.

2008-05-26 12:41:46 +0200 Kristian Rietveld

	Seal BtkSizeGroup.

2008-05-26 12:39:54 +0200 Kristian Rietveld

	Seal BtkPaned.

2008-05-26 11:59:35 +0200 Kristian Rietveld

	Set the Since: values in the API docs to GSEAL-branch for the newly added accessors/properties.

2008-05-26 11:52:20 +0200 Kristian Rietveld

	Add new BtkColorSelectionDialog accessors to btk.symbols.

2008-05-26 11:41:47 +0200 Kristian Rietveld

	btklabel.h: include bit-size of fields inside GSEAL parens.

2008-05-26 11:40:07 +0200 Kristian Rietveld

	btktoolbar.h: include bit-size of fields inside GSEAL parens.

2008-05-26 11:39:35 +0200 Kristian Rietveld

	btkentry.h: include bit-size of fields inside GSEAL parens.

2008-05-26 11:34:14 +0200 Kristian Rietveld

	Add new accessors for BtkEntry to btk.symbols.

2008-05-26 11:23:56 +0200 Kristian Rietveld

	Also seal BtkWindowGroup in btkwindow.h

2008-05-26 10:48:48 +0200 Kristian Rietveld

	Fix the build by including bdkconfig.h in btktextchild.h.

2008-05-23 18:48:56 +0200 Christian Dywan

	Seal BtkLabel

2008-05-23 18:28:39 +0200 Christian Dywan

	Seal BtkToolbar

2008-05-23 18:28:07 +0200 Christian Dywan

	Seal BtkColorSelectionDialog

2008-05-23 18:03:44 +0200 Carlos Garnacho

	Seal BtkTextChildAnchor.

	* btk/btktextchild.h: Sealed private member.

2008-05-23 17:42:01 +0200 Carlos Garnacho

	Seal BtkWindow.

	* btk/btkwindow.h: Seal all fields.

2008-05-23 17:40:09 +0200 Carlos Garnacho

	Add btk_window_get_default()

	* btk/btkwindow.[ch]: Add btk_window_get_default().
	* btk/btk.symbols: same here.

2008-05-09 15:41:57 +0100 Martyn Russell

	Seal BtkAccelGroup - fixed some issues with the initial attempt thanks to comments from Tim

2008-05-02 16:31:40 +0200 Martyn Russell

	Seal BtkEntry

2008-05-02 16:30:09 +0200 Martyn Russell

	Seal BtkContainer - fixed Carlos' missing btk_container_get_focus_child() header declaration

2008-04-27 18:49:50 +0200 Kristian Rietveld

	Seal BtkToggleButton.

	* btk/btktogglebutton.h: Seal all member fields.

2008-04-27 18:41:46 +0200 Kristian Rietveld

	Seal BtkTreeViewColumn.

	* btk/btktreeviewcolumn.h: Seal all public member fields.  The button field is
	still troublesome.  We are probably going to need an accessor for this and
	deprecated it immediately in BTK+ 3.0.  Accessors for requested_width and
	resized_width can be useful, but I really consider them to be private and
	of not much use to applications.

2008-04-27 18:23:23 +0200 Kristian Rietveld

	Seal BtkRadioMenuItem.

	* btk/btkradiomenuitem.h: Seal member field.

2008-04-27 18:21:29 +0200 Kristian Rietveld

	Seal BtkRadioButton.

	* btk/btkradiobutton.h: seal member field.

2008-04-27 18:11:41 +0200 Kristian Rietveld

	Seal BtkTreeSelection.

	* btk/btktreeselection.h: Seal all member fields.

2008-04-27 18:09:46 +0200 Kristian Rietveld

	Add btk_tree_selection_get_select_function().

	* btk/btktreeselection.[ch] (btk_tree_selection_get_select_function): new
	function.
	* btk/btk.symbols: add new function.

2008-04-27 16:05:02 +0200 Kristian Rietveld

	Seal BtkScrolledWindow.

	* btk/btkscrolledwindow.h: Seal all object member fields.

2008-04-27 15:56:33 +0200 Kristian Rietveld

	Seal BtkCellRenderer.

	* btk/btkcellrenderer.h: seal all member fields.  All member fields are
	already accessible via BObject properties.

2008-04-27 15:56:01 +0200 Kristian Rietveld

	Add "editing" BObject property to BtkCellRenderer.

	* btk/btkcellrenderer.c (btk_cell_renderer_class_init),
	(btk_cell_renderer_get_property),
	(btk_cell_renderer_set_property): add the property and hook
	it up.

2008-04-27 15:42:08 +0200 Kristian Rietveld

	Seal BtkCellRendererText.

	* btk/btkcellrenderertext.h: seal all member fields (all of them were already
	marked as private).

2008-04-27 15:40:47 +0200 Kristian Rietveld

	Seal BtkCellRendererCombo.

	* btk/btkcellrenderercombo.h: seal all member fields.  The members fields
	that were not marked as private are already accessible via BObject properties.

2008-04-27 15:39:41 +0200 Kristian Rietveld

	Seal BtkCellRendererAccel.

	* btk/btkcellrendereraccel.h: seal all member fields that were already
	marked as private.

2008-04-18 16:55:44 +0200 Kristian Rietveld

	Seal BtkTreeView

	* btk/btktreeview.h: seal private pointer.

2008-04-18 16:52:54 +0200 Kristian Rietveld

	Seal BtkTreeModelFilter

	* btk/btktreemodelfilter.h: include bdkconfig.h for GSEAL, seal private
	pointer.

2008-04-18 16:50:55 +0200 Kristian Rietveld

	Seal BtkTreeModelSort

	* btk/btktreemodelsort.h: include bdkconfig.h to get GSEAL defined, seal
	all public member fields.

2008-04-18 16:42:28 +0200 Kristian Rietveld

	Seal BtkTreeStore

	* btk/btktreestore.h: include bdkconfig.h to get GSEAL defined, seal
	public member fields.

2008-04-18 16:37:43 +0200 Kristian Rietveld

	Seal BtkListStore

	* btk/btkliststore.h: include bdkconfig.h to get GSEAL defined; seal
	public member fields.

2008-04-18 18:26:31 +0200 Carlos Garnacho

	* btk/btkcontainer.c (btk_container_get_focus_child): add accessor.

2008-04-18 18:25:22 +0200 Carlos Garnacho

	* btk/btkcontainer.h: seal members.

2008-04-11 17:28:54 +0200 Carlos Garnacho

	* btk/btkmisc.h: seal members.

2008-04-11 17:28:05 +0200 Carlos Garnacho

	*btk/btkfixed.h: seal members.

2008-04-11 16:04:23 +0200 Michael Natterer

	* btk/btkcellrendererpixbuf.h: seal all members.

2008-04-11 16:01:19 +0200 Michael Natterer

	* btk/btkcellrendererprogress.h: seal private member.

2008-04-11 15:43:22 +0200 Michael Natterer

	* btk/btkcellrenderertoggle.h: seal all members.

2008-04-04 18:50:05 +0200 Carlos Garnacho

	* btk/btkfilechooserwidget.h: Seal the private member.

2008-04-04 18:46:47 +0200 Carlos Garnacho

	btk/btkfilechooserdialog.h: seal the private member.

2008-04-04 18:42:17 +0200 Carlos Garnacho

	* btk/btkentrycompletion.h: Seal private member.

2008-04-04 18:36:35 +0200 Carlos Garnacho

	* btk/btkcellview.h: Seal the private member.

2008-04-04 18:28:00 +0200 Carlos Garnacho

	* btk/btkcolorbutton.h: seal private member.

2008-04-04 18:27:26 +0200 Carlos Garnacho

	* btk/btkcheckmenuitem.h: seal public struct members.

2008-04-04 18:25:25 +0200 Carlos Garnacho

	* btk/btkcalendar.h: seal public struct members.

2008-04-04 18:24:15 +0200 Carlos Garnacho

	* btk/btkdialog.h: Also seal variables marked as private.

2008-04-04 17:35:48 +0200 Michael Natterer

	* btk/btkimagemenuitem.h: seal private member.

2008-04-04 17:28:56 +0200 Michael Natterer

	* btk/btkiconfactory.h: seal private member.

2008-03-28 16:56:53 +0000 Martyn Russell

	Seal BtkActionGroup

	* btk/btkactiongroup.[ch]: Use GSEAL macro on ->private_data public
	  member and clean up .c file to reflect this.

2008-03-28 15:00:09 +0100 Sven Herzberg

	Seal BtkAccelLabel

	btk/btkaccellabel.h: deprecate direct field access to BtkAccelLabel fields

2008-03-28 16:38:00 +0100 Michael Natterer

	* btk/btkdrawingarea.h: seal instance struct member.

2008-03-28 16:23:32 +0100 Christian Dywan

	Seal BtkScaleButton public fields

	* btk/btkscalebutton.h: Deprecate direct access through GSEAL().

2008-03-28 16:07:50 +0100 Christian Dywan

	Seal BtkScale public fields

	* btk/btkscale.h: Deprecate direct access through GSEAL().

2008-03-14 20:45:34 +0100 Christian Dywan

	Seal BtkProgressBar public fields


2008-03-14 20:32:12 +0100 Christian Dywan

	Seal BtkFrame public vars

2008-03-14 18:57:35 +0100 Carlos Garnacho

	Deprecate direct access to public variables in BtkButton.

	* btk/btkbutton.h: Deprecate direct access through GSEAL().

2008-03-14 18:56:23 +0100 Carlos Garnacho

	Deprecate direct access to public variables in BtkButtonBox.

	* btk/btkbbox.h: Deprecate direct access through GSEAL().

2008-03-14 18:54:35 +0100 Carlos Garnacho

	Deprecate direct access to public variables in BtkBox.

	* btk/btkbox.h: Deprecate direct access through GSEAL().

2008-03-09 11:50:41 +0100 Carlos Garnacho

	Seal BtkMessageDialog public vars

2008-03-09 11:38:00 +0100 Carlos Garnacho

	Seal BtkDialog public vars

2008-03-09 11:32:05 +0100 Carlos Garnacho

	Add accessors for BtkDialog public vars, also implement BtkContainer::add/remove

2008-03-09 11:31:46 +0100 Carlos Garnacho

	Seal BtkAssistant public fields

2008-03-09 11:31:30 +0100 Carlos Garnacho

	Seal BtkNotebook public fields

2008-03-07 20:29:47 +0100 Mikael Hallendal

	Deprecate direct access to child in BtkBin.

	* btk/btkbin.h: Deprecate direct access to child by GSEAL.

2008-03-07 18:25:59 +0000 Martyn Russell

	Sealed BtkAccelGroup and added

	* btk/btkaccelgroup.[ch]: Added BObject properties for lock_count,
	  modifier_mask, acceleratables, n_accels and priv_accels. Added seal
	  macro for public struct members which should be private.

2008-03-07 18:54:22 +0100 Mikael Hallendal

	Deprecate xalign, yalign, ratio and obey_child direct access in BtkAspectFrame.

	* btk/btkaspectframe.h: Deprecate public object fields by GSEAL.

2008-03-07 18:48:29 +0100 Mikael Hallendal

	Deprecate arrow_type and shadow_type direct access in BtkArrow.

	* btk/btkarrow.h: Deprecate public object fields by GSEAL.

2008-03-07 18:35:12 +0100 Mikael Hallendal

	Added GSEAL to BtkAlignment.

	* btk/btkalignment.h: Seal the object data with GSEAL.

2008-03-07 15:24:27 +0100 Tim Janik

	Introduce GSEAL() macro.

	* configure.in: define GSEAL() when generating bdkconfig.h

2008-06-20  Michael Natterer  <mitch@imendio.com>

	Bug 538395 – btk_combo_box_append_text() on non-compliant model
	segfaults

	* btk/btkcombobox.c (btk_combo_box_append_text)
	(btk_combo_box_insert_text)
	(btk_combo_box_prepend_text)
	(btk_combo_box_remove_text)
	(btk_combo_box_real_get_active_text): apply patch from Christian
	Dywan which adds the needed g_return_if_fail() to prevent the
	crashes.

2008-06-20  Cody Russell  <cody@jhu.edu>

	* bdk/directfb/bdkwindow-directfb.c:

	Rename bdk_window_new -> _bdk_window_new and
	bdk_window_reparent -> _bdk_window_reparent to fix
	the build.  (#539095, Sebastien Bacher)

2008-06-19  Johan Dahlin  <jdahlin@async.com.br>

	* btk/btkmenuitem.c: remove an unused variable and cast
	accel_path to bchar, just like in btkmenu.c

2008-06-19  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkrecentmanager.c (get_icon_for_mime_type): Use BUNNYIO
	for this.

2008-06-19  Johan Dahlin  <jdahlin@async.com.br>

	* btk/btkprintbackend.c: Fix a typo in a comment

	* btk/btkhsv.c (paint_ring, paint_triangle):
	Cast buf to unsigned char to avoid two compiler
	warnings.

	* btk/btkclist.c:
	* btk/btkstyle.c (btk_style_finalize):
	Do not ignore the return value of b_slist_remove.
	btkstyle.c changes rubberstamped by Owen.

2008-06-19  Johan Dahlin  <jdahlin@async.com.br>

	* btk/btktreeview.c (btk_tree_view_set_grid_lines),
	(btk_tree_view_set_enable_tree_lines):
	bdk_gc_set_dashes expects a list of bint8, not buint8.

2008-06-19  Johan Dahlin  <jdahlin@async.com.br>

	* btk/btkmenu.c (btk_menu_set_accel_path):
	Remove an unused variable and cast to bchar to avoid a compiler
	warning.

2008-06-19  Christian Persch  <chpe@bunny.org>

	* docs/reference/btk/btk-sections.txt:
	* btk/btk.symbols:
	* btk/btkclipboard.c:
	* btk/btkclipboard.h: Add clipboard convenience functions  for URI 
	targets. Bug #537639.

2008-06-19  Christian Persch  <chpe@bunny.org>

        * btk/btkfilechooserdefault.c: Use btk_drag_*_add_*_targets instead of
	hardcoded target tables. Bug #516092.

2008-06-19  Christian Persch  <chpe@bunny.org>

	* bdk-pixbuf/bdk-pixbuf-io.c:
	* bdk-pixbuf/bdk-pixdata.c:
	* bdk-pixbuf/io-ani.c:
	* bdk-pixbuf/io-bmp.c:
	* bdk-pixbuf/io-gdip-utils.c:
	* bdk-pixbuf/io-gif.c:
	* bdk-pixbuf/io-icns.c:
	* bdk-pixbuf/io-ico.c:
	* bdk-pixbuf/io-jasper.c:
	* bdk-pixbuf/io-jpeg.c:
	* bdk-pixbuf/io-pcx.c:
	* bdk-pixbuf/io-png.c:
	* bdk-pixbuf/io-pnm.c:
	* bdk-pixbuf/io-ras.c:
	* bdk-pixbuf/io-tga.c:
	* bdk-pixbuf/io-tiff.c:
	* bdk-pixbuf/io-wbmp.c:
	* bdk-pixbuf/io-xbm.c:
	* bdk-pixbuf/io-xpm.c:
	* btk/btkfilechooserdefault.c:
	* btk/btkfilesystemmodel.c:
	* btk/btkiconfactory.c:
	* btk/btkicontheme.c:
	* btk/btkmain.c:
	* btk/btkpagesetup.c:
	* btk/btkpapersize.c:
	* btk/btkprintoperation-win32.c:
	* btk/btktextbufferserialize.c:
	* tests/testfilechooser.c: Use g_set_error_literal where appropriate. Bug #538640.

	* configure.in: Update bunnylib requirement to 2.17.3.

2008-06-19  Johan Dahlin  <jdahlin@async.com.br>

	* demos/testpixbuf.c (new_testrgb_window):
	* btk/btkctree.c (btk_ctree_new_with_titles):
	* btk/btkitemfactory.c (btk_item_factory_construct),
	(btk_item_factory_create_item):
	* btk/btkmenu.c (btk_menu_set_tearoff_state)
	* btk/btkprogressbar.c (btk_progress_bar_new),
	(btk_progress_bar_new_with_adjustment):
	* btk/btkscrolledwindow.c (btk_scrolled_window_new):
	* btk/btktext.c (btk_text_new):
	* btk/btkviewport.c (btk_viewport_new):
	* tests/simple.c (main):
	* tests/testbtk.c (create_statusbar), (create_get_image),
	(create_saved_position), (create_tooltips), (create_cursors),
	(create_display_screen), (create_progress_bar), (create_idle_test):
	* tests/testmultidisplay.c (make_selection_dialog), (main):
	* tests/testmultiscreen.c (main):
	* tests/testrgb.c (new_testrgb_window):
	Use g_object_new instead of btk_widget_new

2008-06-19  Johan Dahlin  <jdahlin@async.com.br>

	* btk/btkcellrendererpixbuf.c: Remove an unused prototype.

	* btk/btklabel.c (btk_label_set_text_with_mnemonic): Remove
	an unused variable.

	* btk/btkactiongroup.c: Use BdkModifierType instedd of buint,
	to avoid a gcc warning.

2008-06-18  Olle Bergkvist <olle.bergkvist@yahoo.se>

	http://bugzilla.bunny.org/show_bug.cgi?id=538784 - Don't change
	the filename in the name entry in CREATE_FOLDER mode when changing
	folders, so that you can enter a new subfolder name, double-click on a
	folder to change to it, and close the dialog.

	* btk/btkfilechooserdefault.c (update_chooser_entry): Don't change
	the filename in the entry in CREATE_FOLDER mode, either.

2008-06-18  Olle Bergkvist <olle.bergkvist@yahoo.se>

	http://bugzilla.bunny.org/show_bug.cgi?id=419737#c59 - The file
	chooser clears the filename entry in SAVE/CREATE_FOLDER modes when
	it shouldn't.

	* btk/btkfilechooserdefault.c (shortcuts_activate_iter): Don't
	clear the entry for CREATE_FOLDER either; this needs the same
	behavior as SAVE mode.
	(update_chooser_entry): Only clear the entry in OPEN/SELECT_FOLDER
	modes.

2008-06-18  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkfilesystem.c (_btk_file_system_volume_render_icon):
	* btk/btkfilechooserbutton.c (change_icon_theme):
	(model_add_bookmarks):
	(model_update_current_folder):
	* btk/btkfilechooserdefault.c (shortcuts_insert_file):
	(shortcuts_reload_icons): Use standard icon names.

2008-06-18  Matthias Clasen  <mclasen@redhat.com>

	* btk/Makefile.am: Add some more aliases for standard
	icon names to the builtin icon theme: drive-harddisk,
	folder, folder-remote, text-x-generic.

2008-06-18  Michael Natterer  <mitch@imendio.com>

	* btk/btkcalendar.c: set the maximum of the "year" property to
	B_MAXINT >> 8 instead of B_MAXINT to fix overflows in internal
	calculations which in turn caused writing beyond the boundaries of
	the calendar->day_month[] and day[] arrays which in turn caused a
	SEGV. This limits the lifetime of BTK+ to the year 8,388,608 ;)

2008-06-18  Michael Natterer  <mitch@imendio.com>

	* tests/Makefile.am
	* tests/autotestfilechooser.c
	* tests/buildertest.c
	* tests/defaultvaluetest.c
	* tests/floatingtest.c
	* tests/objecttests.c
	* tests/pixbuf-init.c
	* tests/textbuffertest.c: remove unit tests here...

	* btk/tests/Makefile.am
	* btk/tests/builder.c
	* btk/tests/defaultvalue.c
	* btk/tests/filechooser.c
	* btk/tests/floating.c
	* btk/tests/object.c
	* btk/tests/pixbuf-init.c
	* btk/tests/textbuffer.c: ...and add them here.

2008-06-18  Michael Natterer  <mitch@imendio.com>

	* bdk/bdk.h: deprecate BdkDestroyNotify.

	* bdk/bdkevents.c
	* bdk/bdktypes.h
	* bdk/x11/bdkevents-x11.c
	* btk/btkmain.c: s/BdkDestroyNotify/GDestroyNotify/g.

2008-06-18  Michael Natterer  <mitch@imendio.com>

	* btk/btktypeutils.h: deprecate BtkDestroyNotify.

	* btk/btkactiongroup.[ch]
	* btk/btkcombobox.[ch]
	* btk/btkcontainer.[ch]
	* btk/btkliststore.[ch]
	* btk/btkmain.[ch]
	* btk/btkmenu.c
	* btk/btkstock.[ch]
	* btk/btktreedatalist.[ch]
	* btk/btktreemodelfilter.[ch]
	* btk/btktreemodelsort.[ch]
	* btk/btktreeprivate.h
	* btk/btktreeselection.[ch]
	* btk/btktreesortable.[ch]
	* btk/btktreestore.[ch]
	* btk/btktreeview.[ch]
	* btk/btktreeviewcolumn.[ch]: s/BtkDestroyNotify/GDestroyNotify/g.

2008-06-18  Michael Natterer  <mitch@imendio.com>

	* tests/testbtk.c: some more undeprecation.

2008-06-18  Michael Natterer  <mitch@imendio.com>

	* btk/btktypeutils.h: deprecate BtkType, BtkSignalFunc and
	BTK_SIGNAL_FUNC().

	(struct BtkArg): s/BtkType/GType/ and s/BtkSignalFunc/GCallback/

2008-06-18  Michael Natterer  <mitch@imendio.com>

	* btk/btktypeutils.[ch]: deprecate btk_type_class().

	* btk/btk.symbols: changed accordingly.

	* btk/btksettings.c (btk_settings_install_property)
	(btk_settings_install_property_parser): get rid of using
	btk_type_class() by keeping a static reference to BtkSettingsClass
	around in both functions and passing that pointer on to
	settings_install_property_parser().

	* tests/testbtk.c: use g_type_class_ref()/unref() instead of
	btk_type_class().

	* btk/btkobject.c: #undef BTK_DISABLE_DEPRECATED around including
	btktypeutils.h.

2008-06-17  Johan Dahlin  <jdahlin@async.com.br>

	* btk/btkstyle.c: Add deprecated version
	and change the deprecation markup used by ref/unref 

2008-06-17  Johan Dahlin  <jdahlin@async.com.br>

	* btk/btkwidget.c: 
	Add deprecated versions and fixup markup.

2008-06-17  Johan Dahlin  <jdahlin@async.com.br>

	* btk/btkaboutdialog.c:
	* btk/btkbutton.c (btk_button_class_init):
	Don't markup deprecated in italics.

2008-06-18  Carlos Garnacho  <carlos@imendio.com>

	* btk/btkfilesystem.[ch]: Remove BtkFileSystemError, use
	BtkFileChooserError instead. (#538378, patch by Matthias Clasen)

2008-06-17  Michael Natterer  <mitch@imendio.com>

	* examples/btkdial/btkdial.[ch]: undeprecate.

2008-06-17  Michael Natterer  <mitch@imendio.com>

	* btk/btkobject.c: remove bogus extern declaration of non-existing
	function btk_object_init_type().

2008-06-17  Michael Natterer  <mitch@imendio.com>

	* btk/btkbindings.c (btk_binding_entry_add_signal):
	* btk/btktoolbutton.c (btk_tool_button_get_type): 
	* examples/btkdial/btkdial.h (btk_dial_get_type): 
	s/BtkType/GType/

2008-06-17  Tor Lillqvist  <tml@novell.com>

	* btk/btknotebook.c: Need to do the BTK_DISABLE_DEPRECATED
	#undef/#define dance here, too, because
	btk_notebook_set_group_id() is deprecated but used here before it
	is defined, and gcc complains about conflicting type from the
	implicit int declaration when it sees the actual void definition.

	* modules/input/btkimcontextime.h: Don't use the deprecated BTK_*
	BtkType macros.

2008-06-17  Michael Natterer  <mitch@imendio.com>

	* btk/Makefile.am: build with BTK_DISABLE_DEPRECATED.

	* btk/btkclist.c
	* btk/btkcombo.c
	* btk/btkctree.c
	* btk/btklist.c
	* btk/btklistitem.c
	* btk/btkoldeditable.c
	* btk/btkpixmap.c
	* btk/btktext.c
	* btk/btktipsquery.c
	* btk/btktree.c
	* btk/btktreeitem.c: whenever we #undef BTK_DISABLE_DEPRECATED and
	actually use deprecated symbols (not just types or macros),
	#define it again before #include "btkalias.h" so the symbols match
	and the beast links.

2008-06-17  Paolo Borelli  <pborelli@katamail.com>

	* btk/tests/recentmanager.c: more tests for BtkRecentManager.

2008-06-17  Michael Natterer  <mitch@imendio.com>

	* modules/input/btkimcontextmultipress.h
	* modules/input/btkimcontextthai.h
	* modules/input/btkimcontextxim.h: use B_TYPE instead of BTK_CHECK
	type checking macros.

2008-06-17  Michael Natterer  <mitch@imendio.com>

	* btk/btktypeutils.h: really move the BtkType typedef to an
	undeprecated section.

2008-06-17  Michael Natterer  <mitch@imendio.com>

	* btk/btktypeutils.h: deprecate BTK_CHECK_CAST,	BTK_CHECK_CLASS_CAST,
	BTK_CHECK_GET_CLASS, BTK_CHECK_TYPE and BTK_CHECK_CLASS_TYPE.
	Move the BtkType typedef to an undeprecated section.

2008-06-17  Michael Natterer  <mitch@imendio.com>

	* btk/btkprogress.h: use B_TYPE macros for type checking instead
	of BTK_CHECK ones because it's the parent class of an undeprecated
	class and the BTK_CHECK stuff will soon be deprecated.

2008-06-17  Michael Natterer  <mitch@imendio.com>

	* btk/btkfilesel.c
	* btk/btkinputdialog.c
	* btk/btkmenutoolbutton.c
	* btk/btkoptionmenu.c
	* btk/btktoolitem.c
	* btk/btktooltips.c: add or move around
	#undef BTK_DISABLE_DEPRECATED so it's possible to build without
	deprecated stuff again (with the minor glitch that it doesn't
	link ;) but at least it's a tool to keep the code clean).

2008-06-17  Emmanuele Bassi  <ebassi@bunny.org>

	* btk/btkrecentmanager.c:
	(btk_recent_manager_remove_item): Fix dumb typo in the previous
	commit.

2008-06-17  Emmanuele Bassi  <ebassi@bunny.org>

	* btk/btkrecentmanager.c:
	(btk_recent_manager_remove_item),
	(btk_recent_manager_move_item): Increase the consistency of the
	errors returned by BtkRecentManager. (Paolo Borelli)

2008-06-17  Paolo Borelli  <pborelli@katamail.com>

	* btk/tests/recentmanager.c: add some unit tests for BtkRecentManager.

2008-06-17  Emmanuele Bassi  <ebassi@bunny.org>

	* btk/btkrecentmanager.c:
	(btk_recent_manager_remove_item): Consistently use the same
	error when removing a URI from an empty BtkRecentManager.

2008-06-17  Michael Natterer  <mitch@imendio.com>

	* btk/btkfilechooserdefault.c: remove static integer variables
	which hold the number of members in BtkTargetEntry arrays and use
	G_N_ELEMENTS() directly instead.

2008-06-17  Michael Natterer  <mitch@imendio.com>

	* btk/btk.symbols: move some deprecated symbols into
	#ifndef BTK_DISABLE_DEPRECATED.

2008-06-17  Emmanuele Bassi  <ebassi@bunny.org>

	* btk/btkfilechooserdefault.c:
	(btk_file_chooser_default_init),
	(btk_file_chooser_default_constructor),
	(btk_file_chooser_default_screen_changed),
	(recent_start_loading): Remove the BtkRecentManager screen
	dance, as it has been deprecated since 2.12. Now we get the
	BtkRecentManager singleton whewn we create the FileChooserDefault
	instance. (Michael Natterer)

2008-06-17  Michael Natterer  <mitch@imendio.com>

	* btk/btkoptionmenu.c (btk_option_menu_position): cast menu's
	toplevel to BtkWindow when passing to btk_window_set_type_hint().

2008-06-17  Michael Natterer  <mitch@imendio.com>

	* btk/btktestutils.c: #undef BTK_DISABLE_DEPRECATED, clean up
	includes a bit.

	* btk/btkuimanager.c: #include "btkwindow.h", it was only pulled
	in via deprecated headers.

2008-06-16  Matthias Clasen  <mclasen@redhat.com>

	Bug 508751 – bunny-terminal crashed with SIGSEGV after keypress

	* bdk/x11/bdkkeys-x11.c (_bdk_keymap_key_is_modifier): Protect
	against XKB being stupid. Reported by Pedro Villavicencio.

2008-06-17  Michael Natterer  <mitch@imendio.com>

	* btk/btkplug.c (_btk_plug_send_delete_event): use g_object_ref()
	and unref() instead of the deprecated btk_widget_ref() and unref().

2008-06-16  Michael Natterer  <mitch@imendio.com>

	* btk/btkentry.c: removed function drag_begin_cb(), which was in
	svn since 2.8 but was never used.

2008-06-16  Michael Natterer  <mitch@imendio.com>

	* btk/btkbindings.c (_btk_binding_entry_add_signall): use
	btk_binding_entry_clear() instead of btk_binding_entry_add()
	(the former is deprecated and #defined to btk_binding_entry_clear)

2008-06-16  Michael Natterer  <mitch@imendio.com>

	* btk/btkprintoperation-unix.c: don't include the deprecated (and
	unused) "btkmarshal.h".

2008-06-16  Behdad Esfahbod  <behdad@bunny.org>

	Bug 538182 – bango_bairo_context_update_layout is not noop after
	btk_widget_create_bango_layout

	* btk/btksettings.c (settings_update_font_options): Make sure all
	font option fields are set to non-DEFAULT values.

2008-06-16  Michael Natterer  <mitch@imendio.com>

	* btk/btkfontsel.c
	* btk/btkrc.c
	* btk/btkstyle.c
	* btk/btkwidget.c: use g_object_unref() instead of the deprecated
	btk_rc_style_unref().

2008-06-16  Michael Natterer  <mitch@imendio.com>

	* btk/btkcombobox.c (btk_combo_box_class_init): use
	_btk_marshal_BOOLEAN__VOID instead of the deprecated
	btk_marshal_BOOLEAN__VOID.

2008-06-16  Michael Natterer  <mitch@imendio.com>

	* btk/btkcellrendereraccel.h
	* btk/btkiconview.h
	* btk/btkobject.h: use B_TYPE macros instead of the old BTK_CHECK
	macros for type checking.

	(btk_object_get_type): change prototype to return GType instead of
	BtkType.

2008-06-16  Matthias Clasen  <mclasen@redhat.com>

	* btk/Makefile.am: Make folder, user-home and user-desktop links 
	to btk-directory in the builtin icon theme, so that we can
	use these icon names without risk of ending up without an icon.

2008-06-16  Tor Lillqvist  <tml@novell.com>

	Bug 538362 - Get Win32 icons back in the file chooser

	* btk/btkicontheme.c (choose_icon): Check if the icon name is a
	reference to an icon resource in a DLL or .EXE in the same format
	as the DefaultIcon strings in the Registry. In that case, extract
	the icon and convert to a BdkPixbuf. Patch by Hans Breuer. This
	code has to be in sync with the corresponding code in
	bunnylib/bunnyio/gcontenttype.c.

2008-06-16  Matthias Clasen  <mclasen@redhat.com>

	* btk/stock-icons/24/audio-volume*: Add icons used by BtkVolumeButton
	to the builtin icon theme, to avoid showing broken images when
	there is no icon theme around.  The new icons are thanks to
	Lapo Calamandrei.

2008-06-16  Michael Natterer  <mitch@imendio.com>

	* btk/btkfilechooserprivate.h: remove BtkTooltips member from the
	BtkFileChooserDefault struct.

	* btk/btkfilechooserdefault.c: don't allocate and free the
	BtkTooltips.

2008-06-16  Carlos Garnacho  <carlos@imendio.com>

	Bug 538519 – BtkCellRendererPixbuf doesn't allow unsetting the icon
	anymore

	* btk/btkcellrendererpixbuf.c (btk_cell_renderer_pixbuf_set_property):
	Allow again setting any of the properties to render an image back to
	NULL.

2008-06-15  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkimage.c: When pixel-size is specified, use
	BTK_ICON_LOOKUP_FORCE_SIZE when loading themed icons.

2008-06-15  Carlos Garnacho  <carlos@imendio.com>

	* btk/btkfilechooser.c (btk_file_chooser_get_filename): Return full 
	path here as expected, not just the basename.

	* btk/btkfilechooserdefault.c
	(btk_file_chooser_default_update_current_folder): Ensure that we keep
	a reference to file, since it can be destroyed when switching back to
	browse mode.

	* btk/btkfilesystem.c (get_icon_for_special_directory): Removed, home
	and desktop directories are dealt by the filechooser as normal files,
	not volumes, so the icon for these is handled directly by BUNNYIO.
	(_btk_file_system_volume_render_icon): Update caller.

2008-06-15  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkcellrendererpixbuf.c: Add a gicon property.

2008-06-14  Cody Russell  <bratsche@bunny.org>

	* bdk/win32/bdkselection-win32.c (bdk_win32_selection_add_targets):

	Initialize hwnd to NULL.  This fixes OpenClipboard() failure and,
	according to MSDN docs, associates the open clipboard with the
	current task.  (#378158, reported by Andreas Köhler)

2008-06-13  Matthias Clasen  <mclasen@redhat.com>

	* configure.in: Bump version

	* === Released 2.13.3 ===

2008-06-13  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkaccelgroup.c: Add some docs

	* bdk/bdkwindow.c: Fix doc typos

2008-06-13  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkfilesystem.c: Avoid PLT entries by including
	btkalias.h

2008-06-13  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkfilechooserbutton.c:
	* btk/btkfilechooserdefault.c:
	* btk/btkfilechooserentry.c:
	* btk/btkfilesystem.c:
	* btk/btkfilesystem.h:
	* btk/btkfilesystemmodel.c:
	* btk/btkpathbar.c: Really make BtkFileSystem private
	by _-prefixing all functions.

2008-06-13  Matthias Clasen  <mclasen@redhat.com>

	* docs/RELEASE-HOWTO: Updates
	* INSTALL.in: Bump version

2008-06-13  Matthias Clasen  <mclasen@redhat.com>

	* NEWS: Updates

2008-06-13  Michael Natterer  <mitch@imendio.com>

	* btk/btkcellrendereraccel.h
	* btk/btkfilechooser.h
	* btk/btkfilechooserdialog.h
	* btk/btkfilechooserwidget.h
	* btk/btkmenutoolbutton.h
	* btk/btkpagesetup.h
	* btk/btkpapersize.h
	* btk/btkprintcontext.h
	* btk/btkprintoperation.h
	* btk/btkprintoperationpreview.h
	* btk/btkprintsettings.h
	* btk/btkradiotoolbutton.h
	* btk/btkrecentchooser.h
	* btk/btkrecentchooserdialog.h
	* btk/btkrecentchoosermenu.h
	* btk/btkrecentchooserwidget.h
	* btk/btkseparatortoolitem.h
	* btk/btkshow.h
	* btk/btktoggletoolbutton.h
	* btk/btktoolbar.h
	* btk/btktoolbutton.h
	* btk/btktooltip.h: #include <btk/btkfoo.h> instead of
	"btk/btkfoo.h" or even just "btkfoo.h" in public headers.

2008-06-13  Michael Natterer  <mitch@imendio.com>

	* btk/btktexttagtable.h: remove double inclusion of
	<btk/btktexttag.h>.

2008-06-13  Michael Natterer  <mitch@imendio.com>

	* btk/btkaction.c (btk_action_set_short_label): change type of
	local "image" variable from BtkImage to BtkWidget to fix warning.

2008-06-13  Michael Natterer  <mitch@imendio.com>

	* btk/btkcombobox.c (btk_combo_box_menu_position): cast menu's
	toplevel to BtkWindow when passing to btk_window_set_type_hint().

2008-06-13  Michael Natterer  <mitch@imendio.com>

	* btk/btkuimanager.c (start_element_handler): silently skip
	unknown attributes instead of bailing out with an error in order
	to be compatible with possible future attribute names.

	This is related to the discussion in bug #516425 but actually
	needed for any kind of XML format extension.

2008-05-23  Hans Breuer  <hans@breuer.org>

	* btk/btkprintoperation.c : check surface status after ceating a pdf.
	Avoids crashing when the target can not be written, bug #537685

	* bdk/win32/bdkdisplay-win32.c : runtime linking of ProcessIdToSessionId

	* btk/btkfilesystem.c : variadic macros are not supported with c89 and
	it was not needed here anyway.

2008-06-13 Matthias Clasen  <mclasen@redhat.com>

	* btk/btkentry.c (btk_entry_draw_frame): Fix frame size allocation.
	Patch by Jan Arne Peterson

2008-06-12  Matthias Clasen  <mclasen@redhat.com>

	Bug 537985 – btk_init_with_args() doesn't open a display after
	btk_parse_args()

	* btk/btkmain.c (btk_init_with_args): Open the default display
	even when btk_parse_args() has already been called.
	Patch by Mathias Hasselmann

2008-06-12  Matthias Clasen  <mclasen@redhat.com>

	Bug 524222 – BtkToolbar with mix of buttons with and without 
	icons looks "bad"

	* btk/btktoolbutton.c (btk_tool_button_construct_contents):
	Improve appearance of "both vertical" mode toolbuttons.
	Patch by Peter Johanson

2008-06-12  Matthias Clasen  <mclasen@redhat.com>

	Bug 519092 – Add accessibility support to BtkVolumeButton

	* btk/btkvolumebutton.c: Set accessibility descriptions.
	Patch by Jonh Wendell

2008-06-12  Matthias Clasen  <mclasen@redhat.com>

	Bug 517706 – Connecting BtkButton with "use-stock" == FALSE to a
	BtkAction has problems
	Patch by Peter Johanson

	* btk/btkaction.c (connect_proxy): Set the image of a button
	proxy to the "icon-name" property.

	(btk_action_set_short_label):  If the "image" property is set 
	on the button proxy, also tries to set the "label" property on 
	the BtkButton.

2008-06-12  Michael Natterer  <mitch@imendio.com>

	* btk/btkmain.c
	* btk/btktrayicon-x11.c: don't #include <libintl.h>, it's pulled
	in via "btkintl.h" from <bunnylib/gi18n-lib.h>.

2008-06-12  Matthias Clasen  <mclasen@redhat.com>

	RH bug 248245 and 449379: cups client printing from bunny
	applications fail

	* modules/printbackends/cups/btkprintbackendcups.c: Really fix
	printer URI construction. Patch by Marek Kasik
	
2008-06-12  Michael Natterer  <mitch@imendio.com>

	* btk/btkentrycompletion.c (_btk_entry_completion_resize_popup):
	limit the number of displayed items by the actual screen height
	instead of some arbitrary value (Bug #408154, Xan Lopez and
	Christian Dywan).

2008-06-11  Behdad Esfahbod  <behdad@bunny.org>

	Bug 503071 – Application direction changes to right to left even if
	theres no translation

	* configure.in: Bump bunnylib requirement.

	* btk/btkaccellabel.c
	(_btk_accel_label_class_get_accelerator_label):
	* btk/btkactiongroup.c (dgettext_swapped):
	* btk/btkbuilder.c (btk_builder_class_init):
	* btk/btkbuilderparser.c (_dpgettext),
	(_btk_builder_parser_translate):
	* btk/btkfilechooserdefault.c (list_size_data_func):
	* btk/btkimmulticontext.c (btk_im_multicontext_append_menuitems):
	* btk/btkintl.h:
	* btk/btkmain.c (setlocale_initialization),
	(do_pre_parse_initialization), (gettext_initialization):
	* btk/btkstock.c (btk_stock_lookup), (sgettext_swapped):
	Use g_dgettext() and g_dngettext().

2008-06-11  Matthias Clasen <mclasen@redhat.com>

	* docs/RELEASE-HOWTO: Updates

2008-06-11  Tor Lillqvist  <tml@novell.com>

	* bdk/win32/bdkdisplay-win32.c (bdk_display_get_name): As we don't
	support Win9x anyway, we can use ProcessIdToSessionId()
	unconditionally.

2008-06-11  Michael Natterer  <mitch@imendio.com>

	* btk/btkfilechooserbutton.c: fix local prototype of
	_btk_file_chooser_label_for_file() (takes a GFile, not const bchar*).

2008-06-10  Matthias Clasen <mclasen@redhat.com>

	Bug 536765 – BtkComboBox should set COMBO type hint for its menu

	* btk/btkoptionmenu.c:
	* btk/btkcombobox.c: Set the window type hint on popups.
	Patch by Danny Baumann

2008-06-10  Matthias Clasen <mclasen@redhat.com>

	* btk/btkfilesystem.c (get_icon_for_special_directory):
	(btk_file_system_volume_render_icon): Add standard icon names,
	and also fall back to builtin btk stock icons.

2008-06-10  Christian Persch  <chpe@bunny.org>

	* btk/btktreeview.c: (destroy_info), (set_destination_row),
	(btk_tree_view_maybe_begin_dragging_row),
	(btk_tree_view_set_reorderable),
	(btk_tree_view_enable_model_drag_source),
	(btk_tree_view_enable_model_drag_dest),
	(btk_tree_view_unset_rows_drag_source),
	(btk_tree_view_unset_rows_drag_dest): Make
	btk_tree_view_enable_model_drag_[source|dest] compatible with
	btk_drag_[source|dest]_add_*_targets. Bug #506853.

2008-06-10  Christian Persch  <chpe@bunny.org>

	* btk/btktreeview.c: (btk_tree_view_button_release_drag_column),
	(dest_row_free), (set_dest_row), (ensure_info),
	(btk_tree_view_remove), (btk_tree_view_put),
	(btk_tree_view_set_column_drag_info): Use GSlice. Patch from
	bug #506853.

2008-06-10  Paolo Borelli  <pborelli@katamail.com>

	* btk/btkfilechooser.c (btk_file_chooser_set_current_folder_uri)
	use g_file_new_for_uri.

2008-06-10  Paolo Borelli  <pborelli@katamail.com>

	* btk/btkfilesystem.c (btk_file_system_volume_render_icon): do not
	leak the GIcon.

2008-06-10  Carlos Garnacho  <carlos@imendio.com>

	* configure.in:
	* btk/Makefile.am:
	* btk/xdgmime: removed local xdgmime copy as Matthias suggested in bug
	#520874, comment #8. It's no longer used directly by BTK+.

2008-06-10  Carlos Garnacho  <carlos@imendio.com>

	Bug 520874 - Should use bunnyio directly.

	* btk/btkfilesystem.[ch]: Turn into a private object, which mostly
	provides helper functions for asynchronous calls, folder abstraction
	and uniform handling of volumes/drives/mounts.

	* btk/btkfilesystemwin32.[ch]:
	* btk/btkfilesystemunix.[ch]: Removed, these are no longer required.

	* btk/btkfilechooser.c:
	* btk/btkfilechooserbutton.c:
	* btk/btkfilechooserdefault.c:
	* btk/btkfilechooserentry.[ch]:
	* btk/btkfilechooserprivate.h:
	* btk/btkfilechooserutils.c:
	* btk/btkfilesystemmodel.[ch]:
	* btk/btkpathbar.[ch]: Use BUNNYIO internally. Adapt to BtkFileSystem API.
	Do not load filesystem implementation modules.

	* btk/Makefile.am:
	* btk/btk.symbols: the btkfilesystem.h private header isn't installed
	anymore, nor the unix/win32 implementations.

	* README.in: Add blurb about these changes.

2008-06-09  Kristian Rietveld  <kris@btk.org>

	Bug 526987 - BtkCellRendererCombo should allow model to be NULL

	* btk/btkcellrenderercombo.c (btk_cell_renderer_combo_class_init),
	(btk_cell_renderer_combo_set_property),
	(btk_cell_renderer_combo_editing_done),
	(btk_cell_renderer_combo_start_editing): introduce private class
	struct, allow model to be set to NULL.

2008-06-08  Björn Lindqvist  <bjourne@gmail.com>

	Bug 131920 – btkNotebook sends incorrect switch_page value

	* btk/btknotebook.c (btk_notebook_real_remove): Make switch-page
	signal send correct page index when page index 0 is active and
	removed. (#131920, Samuel Fogh)

2008-06-08  Kristian Rietveld  <kris@btk.org>

	Bug 536730 - memory corruption in btktreeview

	* btk/btktreeview.c (btk_tree_view_real_collapse_row): first
	remove the expand/collapse timeout and node, then free the rbtree.

2008-06-08  Kristian Rietveld  <kris@btk.org>

	Bug 488119 - critical warnings from btk_tree_view_get_visible_range

	* btk/btktreeview.c (btk_tree_view_get_visible_range): only try to
	find path if we found valid nodes, return FALSE otherwise.  (Patch
	from Matthias Clasen).

2008-06-08  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkrecentmanager.c:
	* btk/btkrecentfilter.c:
	* btk/btkfilefilter.c: Replace uses of xdgmime with
	g_content_type.
	
2008-06-08  Christian Persch <chpe@bunny.org>

	Bug 535608 – do not string-copy accel paths in the menu code

        * btk/btkaccelgroup.c:
        * btk/btkaccelmap.c:
        * btk/btkaction.c:
        * btk/btkmenu.c:
        * btk/btkmenuitem.c:
        * btk/btkwidget.c:  Don't store the accel path as a string in
        btkmenu/btkmenuitem. The accel path will be interned anyway, so
        keeping a string copy around is just a waste of memory.
        Improve the documentation to mention this.

2008-06-07  Tor Lillqvist  <tml@novell.com>

	Bug 536990 - updateiconcache.c: 'close ()' is redundant

	* btk/updateiconcache.c (build_cache): Drop redundant close()
	calls. fclose() on a fdopen()ed stream closes the underlying file
	descriptor.

2008-06-06  Matthias Clasen  <mclasen@redhat.com>

	Bug 536757 – regression: openoffice.org menus are placed at wrong
	position since 2.12.10

	* bdk/x11/bdkwindow-x11.c (bdk_window_get_frame_extents):
	Return the right coordinates.  

2008-06-06  Behdad Esfahbod  <behdad@bunny.org>

	Bug 536185 – monitor font configuration

	* configure.in:
	* bdk/x11/bdksettings.c:
	* btk/btksettings.c (btk_settings_class_init),
	(btk_settings_notify), (settings_update_fontconfig):
	Monitor xsettings key Fontconfig/Timestamp and upon change,
	reread fontconfig configuration, clear Bango's caches, and
	redraw all widgets.

2008-06-06  Ross Burton  <ross@burtonini.com>

	* btk/btkwindow.c:
	Fix trivial typo in documentation.

2008-06-06  Tor Lillqvist  <tml@novell.com>

	* config.h.win32.in: Slight update to match what configure
	produces.

2008-06-05  Johan Dahlin  <jdahlin@async.com.br>

	* btk/btkbuilder.h (enum): Add the new version mismatch error
	constant to the end of the list, to avoid breaking the stable ABI

2008-06-05  Michael Natterer  <mitch@imendio.com>

	* configure.in: add -DBATK_DISABLE_SINGLE_INCLUDES to CPPFLAGS.

2008-06-05  Li Yuan  <li.yuan@sun.com>

	* bail-uninstalled.pc.in:
	Bug #536430. Patch from Damien Carbery <damien.carbery@sun.com>.
	Correct paths to bail headers and libraries in bail-uninstalled.pc.in.

2008-06-03  Matthias Clasen  <mclasen@redhat.com>

	* docs/RELEASE-HOWTO: Update a bit

2008-06-03  Matthias Clasen  <mclasen@redhat.com>

	* configure.in: Bump version

	* === Released 2.13.2 ===

2008-06-03  Federico Mena Quintero  <federico@novell.com>

	* btk/btkfilechooserentry.c (install_completion_feedback_timer):
	If the user presses Tab while the completion feedback window is
	active, then we'll assert.  Remove the assertion and just re-set
	the timer.  Fixes https://bugzilla.novell.com/show_bug.cgi?id=355225

2008-06-03  Colin Walters  <walters@redhat.com>
	
	Bug 535303 – add _get_implementation to BtkStatusIcon

	* btk/btkstatusicon.c (btk_status_icon_get_x11_window_id): New
	function to retrieve internal X11 window ID, useful for libnotify.
	* btk/btkstatusicon.h: Prototype it.
	* docs/reference/btk/btk-sections.txt: Add to docs.
	* btk/btk.symbols: Export it.

2008-06-03  Tor Lillqvist  <tml@novell.com>

	* btk/updateiconcache.c (build_cache): Use g_open().

2008-06-03  Michael Natterer  <mitch@imendio.com>

	* btk/btkclist.h
	* btk/btkctree.h: revert includes to how they have been before the
	BTK_DISABLE_SINGLE_INCLUDES changes. Apparently I missed the fact
	that you can't include <btk/btk.h> from two headers where one is a
	parent class of the other and expect them both to be includable
	individually.

2008-06-03  Michael Natterer  <mitch@imendio.com>

	* btk/btkprinteroptionset.h: remove newline at beginning of file.

2008-06-02  Matthias Clasen  <mclasen@redhat.com>
	
	Bug 536092 – BtkEntryCompletion's popup window should set type hint

	* btk/btkentrycompletion.c (btk_entry_completion_init): Set
	a type hint on the popup window to help compiz.
	Patch by Vaclav Slavik.

2008-06-02  Claudio Saavedra  <csaavedra@igalia.com>

	Bug 535862 – btk_action_create_icon can't create icons from the
	icon themes

	* btk/btkaction.c: (btk_action_create_icon): Look for the icon in
	the default factories as it's supposed.

2008-06-02  Yevgen Muntyan  <muntyan@tamu.edu>

        Bug 535497 – Print preview doesn't work.

        * btk/Makefile.am: BTK_PRINT_PREVIEW_COMMAND on quartz: use open
        instead of launching Preview.app directly.

2008-06-02  Michael Natterer  <mitch@imendio.com>

	* btk/btksignal.h: put back #include <btk/btkmarshal.h>, it's not
	in <btk/btk.h>. Fixes stuff that uses deprecated cruft.
	(bug #536126).

2008-05-31  Emmanuele Bassi  <ebassi@bunny.org>

	Bug 535830 – wrong content type adding an item

	* btk/btkrecentmanager.c:
	(btk_recent_manager_add_item_query_info): Use the correct API
	for retrieving the fast MIME type of a URI. (Carlos Garcia
	Campos)

2008-05-31  Kristian Rietveld  <kris@imendio.com>

	Bug 530146 - Setting non-string tooltip with
	btk_tree_view_set_tooltip_column() segfaults

	* btk/btktreeview.c (btk_tree_view_set_tooltip_query_cb): use
	btk_tree_model_get_value() and explicitly transform the value to a
	string before setting it as tooltip.

2008-05-30  Tor Lillqvist  <tml@novell.com>

	* modules/engines/ms-windows/msw_style.h
	* modules/engines/ms-windows/msw_rc_style.h: Include btk.h.

2008-05-30  Michael Natterer  <mitch@imendio.com>

	* btk/btkmenu.c (get_attach_info): cast attach_info_free() to
	GDestroyNotify when using it in g_object_set_data_full().

2008-05-30  Michael Natterer  <mitch@imendio.com>

	* bdk/bdkapplaunchcontext.h
	* bdk/bdktestutils.h
	* btk/btkmountoperation.h
	* btk/btkshow.h
	* btk/btktestutils.h
	* btk/btktoolshell.h: no need to allow disabling single includes
	conditionally in these new files. Simply forbid including them
	individually from the beginning.

2008-05-30  Tor Lillqvist  <tml@novell.com>

	Bug 533108 - leak of GDI rebunnyion in function 'handle_wm_paint'

	* bdk/win32/bdkevents-win32.c (handle_wm_paint): Patch by Daniel
	Atallah.

2008-05-29  Matthias Clasen <mclasen@redhat.com>

	* configure.in: Bump version 

	* === Released 2.13.1 ===

	* NEWS: Updates

2008-05-29  Matthias Clasen <mclasen@redhat.com>

	* btk/btkwidget.c: s/2.16/2.14/ in Since tags

2008-05-29  Matthias Clasen <mclasen@redhat.com>

	* tests/Makefile.am: Don't add testmountoperation to TEST_PROGS.

2008-05-29  Tor Lillqvist  <tml@novell.com>

	Bug 535526 - updateiconcache.c: using open/close without prototype

	* btk/updateiconcache.c: Include <io.h> if _MSC_VER. Also, use
	g_utime() when available instead of utime() for UTF-8 pathname
	support on Windows.

2008-05-29  Jan Arne Petersen  <jpetersen@jpetersen.org>

	Bug 56355 – BtkLabel - Not all changes propagate correctly

	* btk/btklabel.c: (btk_label_recalculate), (btk_label_set_label),
	(btk_label_set_markup_with_mnemonic), (btk_label_parse_uline),
	(btk_label_set_text_with_mnemonic), (btk_label_set_use_underline):
	Call btk_label_setup_mnemonic from btk_label_recalculate. Add
	notifications of mnemonic-keyval changes.

2008-05-27  Matthias Clasen  <mclasen@redhat.com>

	Bug 522084 – GIcon support for BtkIconTheme & BtkImage

	* btk/btkicontheme.[hc]: Add support for GIcon based lookups.
	* btk/btkimage.[hc]: Allow setting an image from a GIcon.
	* btk/btk.symbols: Additions
	* tests/testimage.c: Add a GIcon test

2008-05-29  Michael Natterer  <mitch@imendio.org>

	* btk/Makefile.am
	* btk/btkunixprint.h: add a single-include header for the unix
	print stuff.

	* btk/btkpagesetupunixdialog.h
	* btk/btkprinter.h
	* btk/btkprintjob.h
	* btk/btkprintunixdialog.h: add single-include guards that #error
	out if BTK_DISABLE_SINGLE_INCLUDES is defined and any of these
	files is included individually.

	* btk/btkprintbackend.h
	* btk/btkprinter-private.h
	* modules/printbackends/cups/btkprintbackendcups.c
	* modules/printbackends/cups/btkprintercups.h
	* modules/printbackends/lpr/btkprintbackendlpr.c
	* tests/buildertest.c
	* tests/defaultvaluetest.c
	* docs/tools/widgets.c: include <btk/btkunixprint.h> instead of
	individual files.

2008-05-28  Michael Natterer  <mitch@imendio.com>

	* btk/btk*.h: whitespace cleanup: remove trailing whitespace and
	excess newlines and sprinkled some newlines where needed. Zero
	code or formatting changes included.

2008-05-28  Michael Natterer  <mitch@imendio.com>

	* btk/btkprinter.h: fix formatting of details_acquired() signal.

2008-05-28  Michael Natterer  <mitch@imendio.com>

	* btk/btkcolorbutton.h: fix comment: the widget is called
	BtkColorButton, not BtkColorSelectButton. Remove trailing
	whitespace and excess newlines.

2008-05-28  Michael Natterer  <mitch@imendio.com>

	* configure.in: last but not least, add G_DISABLE_SINGLE_INCLUDES,
	BDK_PIXBUF_DISABLE_SINGLE_INCLUDES and BTK_DISABLE_SINGLE_INCLUDES
	to CPPFLAGS so it's impossible to commit code that would break
	apps which use DISABLE_INCLUDE defines.

2008-05-28  Michael Natterer  <mitch@imendio.com>

	* btk/btk.h: define __BTK_H_INSIDE__ around including all other
	headers.

	* btk/btktypebuiltins.h.template
	* btk/btkversion.h.in
	* btk/btk*.h: add single-include guards that #error out if
	BTK_DISABLE_SINGLE_INCLUDES is defined and any of these files is
	included individually.

	* btk/btkprintbackend.h
	* btk/btkprinter-private.h
	* btk/btktextlayout.h
	* btk/btktexttagprivate.h
	* btk/btktexttypes.h
	* btk/btktreedatalist.h: include <btk/btk.h> instead of individual
	headers in these private or semi-private headers.

	* btk/btkimmodule.h: also here because it's not in btk.h.

	* btk/btkpagesetupunixdialog.h
	* btk/btkprinter.h
	* btk/btkprintjob.h
	* btk/btkprintunixdialog.h: likewise in the btkunixprint headers.

	* btk/btkclist.h
	* btk/btkcombo.h
	* btk/btkctree.h
	* btk/btkfilesel.h
	* btk/btkitemfactory.h
	* btk/btklist.h
	* btk/btklistitem.h
	* btk/btkoldeditable.h
	* btk/btkoptionmenu.h
	* btk/btkpixmap.h
	* btk/btkpreview.h
	* btk/btksignal.h
	* btk/btktipsquery.h: whenever possible, include only <btk/btk.h>
	instead of individual headers in these deprecated headers. They
	don't get included at all when BTK_DISABLE_DEPRECATED is defined,
	so if an app needs them anyway, it must undef BTK_DISABLE_DEPRECATED
	and include them individually, which should continue to work.

	* btk/btkclist.c: include "btkctree.h" because of the change
	above.

2008-05-28  Kristian Rietveld  <kris@imendio.com>

	Bug 449625 - crash in btk_tree_view_real_move_cursor at
	btktreeview.c:9641

	* btk/btktreeview.c (btk_tree_view_move_cursor_page_up_down):
	cursor_offset *must* be larger than background height of the cursor
	node, not just equal otherwise there is no guarantee there is a next
	node.

2008-05-28  Michael Natterer  <mitch@imendio.com>

	* btk/btktestutils.c: don't include <bdk/bdktestutils.h>.

2008-05-28  Michael Natterer  <mitch@imendio.com>

	* bdk/bdk.h: define __BDK_H_INSIDE__ around including all other
	headers.

	* bdk/bdkenumtypes.h.template
	* bdk/bdk*.h: add single-include guards that #error out if
	BTK_DISABLE_SINGLE_INCLUDES is defined and any of these files is
	included individually. Also removed some redundant includes and
	did some tiny trailing whitespace removal that's not worth to
	commit separately.

	* bdk/bdkprivate.h: include <bdk/bdk.h> instead of individual
	files.

	* bdk/win32/bdkwin32.h
	* bdk/x11/bdkx.h: only include <bdk/bdkprivate.h> and remove all
	other includes.

2008-05-28  Kristian Rietveld  <kris@imendio.com>

	Bug 504087 - make btk_tooltip_set_custom a no-op for setting the
	current widget again.

	* btk/btktooltip.c (btk_tooltip_set_custom),
	(btk_tooltip_reset), (btk_tooltip_run_requery): use a
	custom_was_reset field to check if the custom widget is set again in
	the query-tooltip callback; if not, we set it to NULL.  Based on a
	patch by Xavier Claessens, insightful comments from Jean-Yves Lefort
	and Christian Persch.

2008-05-28  Michael Natterer  <mitch@imendio.com>

	* modules/printbackends/cups/btkcupsutils.c
	* modules/printbackends/cups/btkprintbackendcups.c
	* modules/printbackends/file/btkprintbackendfile.c
	* modules/printbackends/lpr/btkprintbackendlpr.c: include
	<btk/btk.h> instead of individual files.

2008-05-28  Michael Natterer  <mitch@imendio.com>

	* demos/testpixbuf.c: include <bdk-pixbuf/bdk-pixbuf.h> instead of
	individual files.

2008-05-28  Kristian Rietveld  <kris@imendio.com>

	Bug 498010 - btk_tree_view_set_cursor fails if model!=NULL.

	* btk/btktreeview.c (btk_tree_view_set_cursor_on_cell): return if fail
	->priv->tree != NULL.  Suggestion from Stefan Kost.

2008-05-28  Kristian Rietveld  <kris@imendio.com>

	Bug 324282 - add selected signal to cell renderer combo.

	* btk/btkcellrenderercombo.c (btk_cell_renderer_combo_class_init),
	(btk_cell_renderer_combo_changed),
	(btk_cell_renderer_combo_start_editing): add a new "changed" signal
	that will be emitted as soon as the combo box emitted changed and has
	an active iterator.  (Modified patch based on work by James
	Pelletier).

	* btk/btkmarshalers.list: add marshaler.

2008-05-28  Kristian Rietveld  <kris@imendio.com>

	Refactor expand/collapse timeout handling (amendment to bug 511217).

	* btk/btktreeview.c (add_expand_collapse_timeout),
	(remove_expand_collapse_timeout): new functions, the remove function
	also clears expanded_collapsed_node,
	(cancel_arrow_animation): moved to be next to the add/remove timeout
	functions,
	(btk_tree_view_unrealize),
	(btk_tree_view_row_deleted),
	(btk_tree_view_set_model),
	(cancel_arrow_animation),
	(btk_tree_view_real_expand_row),
	(btk_tree_view_real_collapse_row): use the new add/remove functions.

2008-05-28  Kristian Rietveld  <kris@imendio.com>

	Amendment of bug 485218 - Strange warning encountered.

	* btk/btktreemodelsort.[ch]
	(btk_tree_model_sort_convert_child_iter_to_iter): return a boolean
	indication whether or not the conversion had succeeded.

2008-05-27  Matthias Clasen  <mclasen@redhat.com>

	Bug 509788 - BTK+ should use CUPS to set Postscript level of PS output

	* modules/printbackends/cups/btkprintbackendcups.c
	(cups_printer_create_bairo_surface): Fall back to PostScript level 2
	if the printer does not support level 3. Patch by Marek Kašík.

2008-05-27  Matthias Clasen  <mclasen@redhat.com>

	Bug 404571 - Scroll arrow backgrounds should be painted with different
	detail

	* btk/btkmenu.c (btk_menu_paint): Use "menu_scroll_arrow_up/down" 
	as detail when drawing scroll arrow backgrounds. Proposed by
	Tommi Komulainen.
	
2008-05-27  Matthias Clasen  <mclasen@redhat.com>

	Bug 511217 - potential memory corruption after refreshing a tree_view

	* btk/btktreeview.c (cancel_arrow_animation): Reset
	expanded_collapsed_node when canceling the animation.
	Patch by Nicholas Setton.

2008-05-28  Michael Natterer  <mitch@imendio.com>

	* modules/input/btkimcontextime.h
	* modules/input/btkimcontextmultipress.h
	* modules/input/btkimcontextthai.h
	* modules/input/btkimcontextxim.h: include <btk/btk.h> instead of
	individual files.

	* modules/input/btkimcontextime.c
	* modules/input/btkimcontextmultipress.c
	* modules/input/btkimcontextxim.c
	* modules/input/imam-et.c
	* modules/input/imcedilla.c
	* modules/input/imcyrillic-translit.c
	* modules/input/iminuktitut.c
	* modules/input/imipa.c
	* modules/input/imti-er.c
	* modules/input/imti-et.c
	* modules/input/imviqr.c: ditto. Some minor cleanups like moving
	"btk/btkintl.h" to the end of includes.

2008-05-28  Michael Natterer  <mitch@imendio.com>

	* modules/engines/pixbuf/pixbuf-style.h
	* modules/engines/pixbuf/pixbuf-rc-style.h: include <btk/btk.h>
	instead of individual files.

2008-05-27  Matthias Clasen  <mclasen@redhat.com>

	Bug 485218 - Strange warning encountered

	* btk/btktreemodelsort.c (btk_tree_model_sort_row_inserted):
	(btk_tree_model_sort_convert_child_iter_to_iter):
	(btk_tree_model_sort_build_level): Better warnings. Patch
	by Kristian Rietveld.

2008-05-27  Matthias Clasen  <mclasen@redhat.com>

	Bug 351910 - Search column setting lost

	* btk/btktreeview.c (btk_tree_view_set_search_column): Clarify
	the docs. Patch by Matt Barnes.

2008-05-27  Matthias Clasen  <mclasen@redhat.com>

	Bug 477278 - avoid unnecessary pointer subtraction

	* btk/btkaccelgroup.c (quick_accel_remove): Avoid pointer 
	subtraction that sparse complains about. Patch by Christian
	Persch.

2008-05-27  Matthias Clasen  <mclasen@redhat.com>

	Bug 106574 - Inconsistent increment behavior for btkspinbutton

	* btk/btkspinbutton.c (btk_spin_button_real_value_change):
	Commit the entry text before doing an increment. Patch by
	Björn Lindqvist.

2008-05-27  Federico Mena Quintero  <federico@novell.com>

	http://bugzilla.bunny.org/show_bug.cgi?id=533891 - Don't allow
	drag and drop from the file list into itself, as it doesn't make
	sense (it would just change the current folder).

	* btk/btkfilechooserdefault.c (file_list_dest_targets): Use
	BTK_TARGET_OTHER_WIDGET so we don't DnD from the file list into
	itself.

2008-05-27  Michael Natterer  <mitch@imendio.com>

	* btk/btksignal.h: move deprecated guards around everything,
	including includes and include guards (just as in all other
	deprecated files).

2008-05-27  Tor Lillqvist  <tml@novell.com>

	* btk/updateiconcache.c (build_cache): Use simpler mode for open()
	on Windows. (No S_I?GRP and S_I?OTH bits are defined in
	<sys/stat.h> on Windows, and the mode used in open() doesn't
	matter much as there are no rwxrwxrwx bits on Windows anyway.)
	Open file in binary mode. Passing "b" to fdopen() later isn't
	enough.

2008-05-27 10:33:41  Tim Janik  <timj@imendio.com>

	* btk/btkwidget.c: guard btk_widget_get_snapshot() against
	invalid or invisible widgets.

2008-05-27  Matthias Clasen  <mclasen@redhat.com>

	Bug 531008 – Crash in btkprintunixdialog.c

	* btk/btkprintunixdialog.c: Disconnect signal handlers when
	the dialog closes. Patch by Yevgen Muntyan.

2008-05-27  Matthias Clasen  <mclasen@redhat.com>

	RH bug 248245: cups client printing from bunny applications fail

	* modules/printbackends/cups/btkprintbackendcups.c
	(btk_print_backend_cups_print_stream): Specify the right server.

2008-05-27  Carlos Garnacho  <carlos@imendio.com>

	* btk/btkfilechooserdefault.c (set_select_multiple): Enable
	rubberbanding when "select-multiple" is TRUE. Bug #446068.

2008-05-27  Carlos Garnacho  <carlos@imendio.com>

	* btk/btkmountoperation.c (btk_mount_operation_ask_password): Enable
	correctly dialog buttons sensitivity when the anonymous option is
	enabled by default. Bug #531865.

2008-05-27  Carlos Garnacho  <carlos@imendio.com>

	* btk/btkmountoperation.c (btk_mount_operation_ask_password): Set
	password dialog modal and transient for the parent window also if it
	was specified in the constructor. Bug #531864.

2008-05-26  Richard Hult  <richard@imendio.com>

	* bdk/quartz/bdkevents-quartz.c: (bdk_screen_get_setting): Try
	setting the default font, might need to tweak this.

2008-05-26  Michael Natterer  <mitch@imendio.com>

	* examples/btkdial/btkdial.h
	* modules/input/btkimcontextthai.h: use B_BEGIN/END_DECLS.

2008-05-26  Michael Natterer  <mitch@imendio.com>

	* btk/btkimmodule.h: fix indentation.

2008-05-26  Michael Natterer  <mitch@imendio.com>

	* btk/btkshow.h: include "bdk/bdk.h" instead of "bdk/bdkscreen.h"

	* btk/btkshow.c: remove inclusion of single files from bdk/

	Removed trailing whitespace in both files.

2008-05-26  Richard Hult  <richard@imendio.com>

	Bug 530353 – Mac-like btk_accelerator_get_label()

	* btk/btkaccellabel.c: (btk_accel_label_class_init),
	(append_keyval_symbol), (_btk_accel_label_class_get_accelerator_label):
	On quartz, make btk_accelerator_get_label() format a Mac-like
	string, using unicode characters for modifier keys, arrows, delete
	etc. Patch from Yevgen Muntyan.

2008-05-26  Richard Hult  <richard@imendio.com>

	Bug 534869 – Length miscalculation in
	_btk_quartz_get_selection_data_from_pasteboard

	* btk/btkquartz.c: (_btk_quartz_get_selection_data_from_pasteboard):
	Get the number of bytes, not the number of characters, patch from
	Yevgen Muntyan.

2008-05-26  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkwidget.c: Some doc formatting fixes.

2008-05-26  Matthias Clasen  <mclasen@redhat.com>

	Bug 511163 – Remove bango_extents_to_pixels() calls

	* btk/btkcellrenderertext.c (get_size): Use
	bango_layout_get_pixel_extents.

	* configure.in: Bump Bango requirement to 1.20

	* INSTALL.in: Update required versions

2008-05-26  Matthias Clasen  <mclasen@redhat.com>

	Bug 513811 – Use bairo_format_stride_for_width()

	* btk/btkhsv.c (paint_ring, paint_triangle):
	* bdk/bdkbairo.c (bdk_bairo_set_source_pixbuf): Use
	bairo_format_stride_for_width, proposed by Behdad Esfahbod.

	* configure.in: Bump bairo requirement to 1.6.0

	* INSTALL.in: Update required versions

2008-05-26  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkshow.[hc]: Formatting fixes

	* btk/btkmountoperation.c: Add docs

2008-05-25  Cody Russell  <bratsche@bunny.org>

	Bug 507389 – use gslice for btksettings

	* btk/btksettings.c: Change from g_new0/g_free to use GSlice.
	Report and patch by Christian Persch.

2008-05-25  Cody Russell  <bratsche@bunny.org>

	Bug 523562 - btk-update-icon-cache core dumps when run concurrently and
	when options are missing

	* btk/updateiconcache.c: Open the cache file (O_CREAT | O_EXCL) so
	that other processes that try to open it will fail gracefully.  Also
	fix a crasher caused by lack of a NULL check.  Report and patch
	by Erwann Chenede.

2008-05-25  Cody Russell  <bratsche@bunny.org>

	Bug 526635 - _bdk_window_get_toplevel handles FOREIGN windows

	* bdk/x11/bdkwindow-x11.c (_bdk_window_get_toplevel): Check
	!WINDOW_IS_TOPLEVEL instead of checking for BDK_WINDOW_CHILD,
	so that we also take into account for foreign windows.
	Report and patch by Nathaniel Smith.

2008-05-25  Cody Russell  <bratsche@bunny.org>

	Bug 525461 - Don't invalidate under an input-only child

	* bdk/x11/bdkgeometry-x11.c (_bdk_window_move_resize_child):
	Check that the window is not input-only before invalidating.
	Report and patch by Owen Taylor.

2008-05-25  Cody Russell  <bratsche@bunny.org>

	Bug 524110 - Bdk should not assume reparenting WMs when retrieving
	window frame extents

	* bdk/x11/bdkwindow-x11.c (bdk_window_get_frame_extents):
	Use _NET_FRAME_EXTENTS, if available.  Patch by Danny Baumann.

2008-05-25  Cody Russell  <bratsche@bunny.org>

	Bug 522269 - Evince windows sometimes incorrectly unmaximized,
	caused by missing flag initialization

	* bdk/x11/bdkwindow-x11.c (set_initial_hints): Initialize
	top-level private flags correctly.  Patch by Danny Baumann.

2008-05-25  Cody Russell  <bratsche@bunny.org>

	Bug 534463 - non-editable BtkTextView should not call
	btk_im_context_focus_in in focus event

	* btk/btktextview.c: Add checks to see if the textview is
	editable.  Patch by Wang Diancheng.

2008-05-25  Matthias Clasen  <mclasen@redhat.com>

	Bug 501730 – use GSlice for small allocs

	* btk/btkmenuitem.c:
	* btk/btkmenu.c: Use the slice allocator for small allocations.
	Patch by Christian Persch.
	
2008-05-25  Matthias Clasen  <mclasen@redhat.com>

	Bug 523930 – sort -> search in btktreeview.c

	* btk/btktreeview.c (btk_tree_view_set_search_column): Fix a doc
	glitch, pointed out by Björn Lindqvist.

2008-05-25  Matthias Clasen  <mclasen@redhat.com>

	Bug 479384 – btk_selection_data_targets_include_uri docs buglet

	* btk/btkselection.c (btk_selection_data_targets_include_uri): Fix
	doc glitch, pointed out by Christian Persch.

2008-05-25  Matthias Clasen  <mclasen@redhat.com>

	Bug 534694 – Col id in BtkListStore could be out of range

	* btk/btkliststore.c (list_store_start_element): Fix up error handling
	a bit. Pointed out by Jan Arne Petersen.

2008-05-25  Matthias Clasen  <mclasen@redhat.com>

	Bug 532497 – Configure problem when cross-compiling

	* configure.in: Use AC_CHECK_TOOLS to find C++ compiler, 
	pointed out by Marko Lindqvist.

2008-05-25  Richard Hult  <richard@imendio.com>

	* btk/btkquartz.c: (_btk_quartz_set_selection_data_for_pasteboard):
	Slight coding style cleanup.

2008-05-25  Tristan Van Berkom <tvb@bunny.org>

	* btk/btkbuilderprivate.h, btk/btkbuilder.h, btk/btkbuilderparser.c:
	Added support for parsing required toolkit versions (so that ui descriptions
	can target specific versions of the backend widget libraries) bug 527612.

	* btk/docs/reference/btk/tmpl/btkbuilder.sgml: Added documentation
	for the added xml tags to the ui description.

	* tests/buildertest.c: Enhanced bango attribute tests, Added tests
	for requires tag handling.

2008-05-25  Richard Hult  <richard@imendio.com>

	* btk/btkdnd-quartz.c: (btk_drag_drop_finished): Run
	btk_drag_source_info_destroy in an idle, workaround for bug
	#501588, that makes any code that uses the context returned from
	btk_drag_begin() crash, like treeview/iconview dnd.
	(BdkDragSourceOwner::provideDataForType): only use the data if we
	got any.

2008-05-25  Jan Arne Petersen  <jpetersen@jpetersen.org>

	* btk/btkfilechooserdefault.c: (create_file_list): Add BDK_ACTION_MOVE
	to the drag actions to allow trash (#137717).

2008-05-25  Josselin Mouette  <joss@malsain.org>

	reviewed by: Matthias Clasen

	* btk/btksearchenginetracker.c: (_btk_search_engine_tracker_new):
        check that tracker is actually working before using it. Fixes
        bug #479197.

2008-05-25  Sven Neumann  <sven@gimp.org>

	* btk/btkdrawingarea.c (btk_drawing_area_realize)
	(btk_drawing_area_size_allocate): respect the BTK_NO_WINDOW flag
	and don't create an output window if it is set.

	* btk/btkprintunixdialog.c: set the BTK_NO_WINDOW flag for the
	drawing areas. Fixes bug #519317.

2008-05-25  Jan Arne Petersen  <jpetersen@jpetersen.org>

	* btk/btkentry.c: (btk_entry_class_init), (get_text_area_size),
	(btk_entry_get_text_area_size), (btk_entry_draw_frame):
	* btk/btkentry.h:
	* btk/btkspinbutton.c: (btk_spin_button_class_init),
	(btk_spin_button_realize), (btk_spin_button_size_allocate),
	(btk_spin_button_expose), (btk_spin_button_draw_arrow),
	(btk_spin_button_enter_notify), (btk_spin_button_leave_notify),
	(btk_spin_button_grab_notify), (btk_spin_button_state_changed),
	(start_spinning), (btk_spin_button_button_release),
	(btk_spin_button_motion_notify), (btk_spin_button_value_changed),
	(btk_spin_button_get_text_area_size), (btk_spin_button_real_spin),
	(btk_spin_button_update): Reorder strange window hierarchy of the
	BtkSpinButton (#466000).

2008-05-25  Jan Arne Petersen  <jpetersen@jpetersen.org>

	* btk/btklabel.c: (get_layout_location): Subtract logical.x from x to
	fix the wrong position for right and center justified labels with
	logical.x > 0 (#530255).

2008-05-25  Jan Arne Petersen  <jpetersen@jpetersen.org>

	* btk/btkfilechooserdefault.c:
	(shortcuts_activate_volume_mount_cb): Ignore G_IO_ERROR_FAILED_HANDLED
	errors (#532262).

2008-05-25  Björn Lindqvist  <bjourne@gmail.com>

	* tests/pixbuf-lowmem.c
	* tests/pixbuf-random.c
	* tests/pixbuf-randomly-modified.c
	* tests/pixbuf-read.c
	* tests/pixbuf-threads.c
	* tests/testbtk.c
	* tests/testtreeview.c: Fix remaining compiler warnings in these
	files (#523751).

2008-05-25  Jaap A. Haitsma  <jaap@haitsma.org>

	reviewed by: Matthias Clasen

	* btk/Makefile.am:
	* btk/btk.h:
	* btk/btk.symbols:
	* btk/btkshow.c: (btk_show_uri):
	* btk/btkshow.h:
	Add btk_show_uri to make showing uris really easy. Fixes bug #514396

2008-05-25  Jan Arne Petersen  <jpetersen@jpetersen.org>

	* btk/btkliststore.c: (list_store_text): Use type of the correct
	column (#529535).
	* tests/buildertest.c: (test_list_store): Add test.

2008-05-24  Matthias Clasen  <mclasen@redhat.com>

	Bug 520989 – icon factory buildable too strict

	* btk/btkiconfactory.c (icon_source_start_element): Make filename
	an optional attribute.

2008-05-24  Matthias Clasen  <mclasen@redhat.com>

	Bug 387972 – btkassistant drawing problem

	* btk/btkassistant.c (btk_assistant_size_allocate): Make 
	BtkAssistant work better in glade. 

2008-05-24  Jan Arne Petersen  <jpetersen@jpetersen.org>

	* btk/btktoolbar.c: (btk_toolbar_class_init): Change defaults of child
	properties "expand" and "homogeneous" from TRUE to FALSE (as they are
	used in BtkToolItem) (#532787).

2008-05-24  Jan Arne Petersen  <jpetersen@jpetersen.org>

	* btk/btkfilechooserdefault.c: (location_toggle_popup_handler): Don't
	try to toggle the visibility of the location entry field in search and
	recent mode (#526422).

2008-05-24  Jan Arne Petersen  <jpetersen@jpetersen.org>

	* btk/btkfilechooserdefault.c: (shortcuts_query_tooltip_cb),
	(shortcuts_list_create): Show parse name as tooltip for path
	shortcuts (#137503).

2008-05-24  Björn Lindqvist  <bjourne@gmail.com>

	* bdk/bdkcolor.c (bdk_color_parse): Update docstring to match
	bango_color_parse, do not reference XParseColor forms (#434991).

2008-05-24  James Sharpe <jsharpe@bunny.org>

	* bdk/bdk.symbols: Remove duplicate
	bdk_window_redirect_to_drawable and bdk_window_remove_redirection
	* btk/btk.symbols: Remove duplicate btk_widget_get_snapshot
	
2008-05-23  Hans Breuer  <hans@breuer.org>

	* **/makefile.msc btk/makefile.msc.in : updated
	* btk/btkwidget.c : fix c99ism (variable at start of block
	* bdk/bdk.symbols btk/btk.symbols : export functions for window 
	redirection
	* btk/btkfilechooserdefault.c : #include <locale.h> for 
	setlocale(LC_ALL, ...)

2008-05-23  Tor Lillqvist  <tml@novell.com>

	* bdk/bdk.symbols: Add bdk_window_redirect_to_drawable and
	bdk_window_remove_redirection.

	* bdk/win32/bdkwindow-win32.c (_bdk_window_new)
	(_bdk_window_reparent): Rename to adapt to the offscreen rendering
	changes. Remove now unnecessary parameter checks as the caller
	does that already.

	* btk/btk.symbols: Add btk_widget_get_snapshot.

2008-05-23  Tor Lillqvist  <tml@novell.com>

	* bdk/win32/bdkwindow-win32.c (update_style_bits): Don't do
	anything if style doesn't change. Improve debugging output.

2008-05-23  Michael Natterer  <mitch@gimp.org>

	* perf/widgets.h
	* tests/print-editor.c
	* tests/prop-editor.h
	* tests/testmountoperation.c
	* tests/testmultidisplay.c
	* tests/testnouiprint.c
	* tests/testprint.c
	* tests/testprintfileoperation.h
	* tests/testtreesort.c
	* tests/textbuffertest.c: include <btk/btk.h> instead of single
	files. Remove some redundant includes.

2008-05-22  Hiroyuki Ikezoe  <poincare@ikezoe.net>

	* btk/btksockget.c: (btk_socket_realize): Remove second call of
	BTK_WIDGET_SET_FLAGS (widget, BTK_REALIZED).

2008-05-21  Richard Hult  <richard@imendio.com>

	* bdk/quartz/bdkwindow-quartz.c:
	(_bdk_window_new), (_bdk_window_reparent): Renamed to adapt to the
	offscreen rendering changes, fixes build.

2008-05-21 21:10:15  Tim Janik  <timj@imendio.com>

	* btk/btkwidget.h: added BdkRectangle *clip_rect to btk_widget_get_snapshot().

	* btk/btkwidget.c: clip the returned snapshot pixmap to clip_rect.
	return snapshot pixmap coordinates widget relative in *clip_rect.

	* tests/testbtk.c: fixed bogus NULL pointer unref.

2008-05-21 21:04:28  Tim Janik  <timj@imendio.com>

	* btk/btkwidget.c btk_widget_get_snapshot(): grow snapshot area from
	widget's allocation to cover extra widget windows placed outside the
	widget allocation (spinbutton arrows are the prime example for this).

2008-03-18 10:49:20  Tim Janik  <timj@imendio.com>

	* Applied pixmap redirection patch by Alexander Larsson with
	various updates from:
	Bug 318807 – Offscreen windows and window redirection.


	Updates:

	* updated docs to mention "Since 2.16".

	* tests/testbtk.c: fixed snapshooting pixmap leak.
	convert pixmap to pixbuf after snapshooting, to compensate for different
	bit depths (occurs when snapshooting ARGB visuals and displaying the
	pixmap in an RGB visual).

	* bdk/bdkwindow.[hc]: made BdkWindowRedirect private.

	* bdk/bdkwindow.c: removed damage idle handler, there's no aparent
	need for it. enqueue damage notification as BDK_DAMAGE events
	for each painting redirection at the start of the event queue.
	consider windows with a redirection fully visible when invalidating,
	and when updating from backing store. cleaned up stale variables.

	* bdk/bdkevents.c: added _bdk_event_queue_prepend().

	* btk/btkwidget.c: fixed coordinates for !NO_WINDOW widgets in
	btk_widget_get_snapshot; this fixes garbage snap offsets for gammacurve,
	tree, drawingarea, text, handlebox, etc.
	clip the redirected window hierarchy to window sizes, the visible
	rectangles don't need to be taken into account here.
	extended snapshooting docs to recommend bdk_pixbuf_get_from_drawable()
	in case pixmap visuals could mismatch.

	* bdk/x11/bdkwindow-x11.c: removed _bdk_windowing_window_get_visible_rect().


	Base patch:

	* tests/testbtk.c: add a "Snapshot" test to demonstrate snapshooting
	of possibly obscured widgets into an offscreen pixmap.

	* btk/btkwidget.[hc]: add BtkWidget::damage-event signal, add
	btk_widget_get_snapshot() to render a widget's contents to a BdkPixmap.

	* btk/btkmain.c: dispatch BDK_DAMAGE events.

	* bdk/bdkwindow.c: moved outer bdk_window_new() and bdk_window_reparent()
	implementations here, adapted them to propagate redirects to child windows.
	bdk_window_end_paint(): copy repainted window contents to redirection pixmap,
	clipped to visible rebunnyion. queue BDK_DAMAGE event delivery.
	bdk_window_redirect_to_drawable(): install window painting redirection.
	bdk_window_remove_redirection(): remove previously installed redirection.

	* bdk/x11/bdkwindow-x11.c: added _bdk_windowing_window_get_visible_rect(),
	renamed _bdk_window_new() and _bdk_window_reparent().

	* bdk/bdkwindow.h: added BdkWindowRedirect* to BdkWindowObject, export
	bdk_window_redirect_to_drawable() and bdk_window_remove_redirection().

	* bdk/bdkevents.h: added BDK_DAMAGE event type.

	* bdk/bdkevents.c: extract time and state from BDK_DAMAGE events.

	* bdk/bdkinternals.h: added internal prototypes.

2008-05-21  Michael Natterer  <mitch@imendio.com>

	* btk/btkalignment.c
	* btk/btkarrow.c
	* btk/btkbbox.c
	* btk/btkcalendar.c
	* btk/btkscrolledwindow.c: remove PROP_LAST enum values.

2008-05-20  Matthias Clasen  <mclasen@redhat.com>

	RH bug 204621 - "BtkPrint" asks for "Letter" size paper when "A4" size
	was chosen

	Patch by Marek Kasik.

	* btk/btk.symbols:
	* btk/btkprinter.[hc]: Add btk_printer_get_default_page_size.
	
	* btk/btkprintbackend.[hc]: Add fallback implementation.

	* modules/printbackends/file/btkprintbackendfile.c:
	* modules/printbackends/cups/btkprintbackendcups.c: Implement
	get_default_page_size.

	* btk/btkpagesetupunixdialog.c: When selecting a different printer,
	select its default paper size.

	* btk/btkprintunixdialog.c: If no explicit page setup has been set,
	use the printer default.

	* btk/btkprintoperation-unix.c: Don't create an empty page setup
	if we don't have a default page setup.

2008-05-20  Gian Mario Tagliaretti  <gianmt@bunny.org>

	* btk/btkdnd.c: (btk_drag_set_icon_pixmap): Fix the docs, the mask param
	can accept NULL for none. Fixes bug #533920.

2008-05-20  Björn Lindqvist  <bjourne@gmail.com>

	* btk/btkspinbutton.c: (btk_spin_button_snap,
	btk_spin_button_update): Remove two chunks of duplicated
	code (#533733).

2008-05-20 14:27:34  Tim Janik  <timj@imendio.com>

	* reverted recent unapproved changes by Yair Hershkovitz,
	regarding: Bug 503071 – Application direction changes to right
	to left even if theres no translation.

2008-05-19  Richard Hult  <richard@imendio.com>

	* bdk/quartz/bdkwindow-quartz.c: (bdk_window_hide),
	(bdk_window_fullscreen), (bdk_window_unfullscreen): Use
	SetSystemUIMode instead of hiding and showing the menubar.

2008-05-19  Federico Mena Quintero  <federico@novell.com>

	http://bugzilla.bunny.org/show_bug.cgi?id=322298 - Save dialog
	can't be resized until you expand the "Browse for other folders"
	section.

	* btk/btkfilechooserembed.h (struct _BtkFileChooserEmbedIface):
	Removed the "get_resizable" method.
	(_btk_file_chooser_embed_get_resizable): Removed.

	* btk/btkfilechooserembed.c: Removed the _get_resizable() machinery.

	* btk/btkfilechooserdefault.c: Likewise.

	* btk/btkfilechooserdialog.c
	(file_chooser_widget_default_size_changed): Act as if the dialog
	were always resizable.

2008-05-19  Michael Natterer  <mitch@imendio.com>

	* btk/btkcellrenderer.c
	* btk/btkcellrendererpixbuf.c
	* btk/btkcellrenderertoggle.c
	* btk/btkimagemenuitem.c
	* btk/btkmenutoolbutton.c
	* btk/btkoptionmenu.c
	* btk/btkstatusbar.c
	* btk/btktextview.c: s/PROP_ZERO/PROP_0/g, remove LAST_PROP.

2008-05-17  Yair Hershkovitz  <yairhr@gmail.com>

	* btk/btkmain.c: btk_disable_setlocale() - Added a call to
	g_disable_setlocale().

2008-05-17  Richard Hult  <richard@imendio.com>

	* bdk/quartz/bdkwindow-quartz.c:
	(bdk_window_impl_quartz_invalidate_maybe_recurse):
	(bdk_window_quartz_update_idle): Use bdk_threads_add_idle instead
	of g_idle_add. Add a temporary check if the window is already in
	the updates list, since update_area currently doesn't always match
	the backend's state, see bug #530801.

2008-05-13  Tor Lillqvist  <tml@novell.com>

	Bug 496958 - Wacom Bamboo doesn't function with BTK apps in Win32

	* bdk/win32/bdkinput-win32.c (_bdk_input_wintab_init_check): Set
	the "packet rate" of devices to zero instead of 50. This is
	reported to help significantly with Wacom tablet behaviour in GIMP
	and Inkscape. Patch from Thomas Bleeker.

2008-05-12  Richard Hult  <richard@imendio.com>

	* bdk/quartz/bdkevents-quartz.c:
	* bdk/quartz/bdkquartz.h: Remove special casing of menu key events
	as it's no longer necessary; instead the added quartz API to get
	the nsevent from an event should be used. Also move the global
	filter up so it's done before the check for window-less events.

2008-05-12  Tor Lillqvist  <tml@novell.com>

	Bug 532558 - Cannot build dll when using separate builddir

	* bdk/Makefile.am
	* btk/Makefile.am: .def file belongs in $(srcdir). Patch by Marko
	Lindqvist.

2008-05-12  Yair Hershkovitz  <yairhr@gmail.com>

	* btk/btkmain.c: g_i18n_init(); -> g_i18n_init ();

2008-05-12  Tor Lillqvist  <tml@novell.com>

	Bug 532059 - Leak in win32 clipboard manipulation

	* bdk/win32/bdkselection-win32.c
	(bdk_win32_selection_add_targets): Plug memory leak. Patch by
	Daniel Atallah.

2008-05-11  Yair Hershkovitz  <yairhr@gmail.com>

	* btk/btkmain.c: call g_i18n_init() in gettext_initialization(). do
	gettext_initialization only once.

	*  btk/btkbuilderparser.c: use bunnylib i18n api. removed dpgettext() as it
	duplicates g_dpgettext() and added _g_dpgettext() to wrap g_dpgettext 
	with the extended functionality that was in the removed dpgettext().

	* btk/btkaccellabelc:
	* btk/btkstock.c:
	* btk/btkimmulticontext.c:
	* btk/btkactiongroup.c:
	* btk/btkintl.h: use bunnylib i18n api.

2008-05-08  Richard Hult  <richard@imendio.com>

	* bdk/quartz/bdkgeometry-quartz.c (bdk_window_scroll): Move the
	currently invalidated rebunnyion. Fixes bug #532048, patch by Yevgen
	Muntyan.

2008-05-08  Richard Hult  <richard@imendio.com>

	* bdk/quartz/bdkeventloop-quartz.c (poll_func): Only set the fake
	fd's revents, not the first one. Fixes bug #531056, spotted by
	Yevgen Muntyan.

2008-05-07  Tor Lillqvist  <tml@novell.com>

	* btk-zip.sh.in: Add btk-update-icon-cache.exe and more man pages
	to the dev zipfile.

2008-05-05  Matthias Clasen  <mclasen@redhat.com>

	Apply a patch by Marek Kasik <mkasik@redhat.com> to display
	more printer status information in the print dialog. 

	* modules/printbackends/cups/btkprintbackendcups.c: Translate
	printer-state-reasons into suitable messages and icons.

	* btk/stock-icons/16/btk-print-error.{svg,png}:
	* btk/stock-icons/16/btk-print-report.{svg,png}:
	* btk/stock-icons/16/btk-print-warning.{svg,png}:
	* btk/Makefile.am: 
	* btk/btkiconfactory.c:
	* btk/btkstock.h: New stock icons to display printer state.

2008-05-07  Michael Natterer  <mitch@imendio.com>

	* bdk/bdkinternals.h
	* bdk/bdkevents.c
	* bdk/directfb/bdkevents-directfb.c
	* bdk/quartz/bdkevents-quartz.c
	* bdk/win32/bdkevents-win32.c
	* bdk/x11/bdkevents-x11.c (_bdk_windowing_event_data_copy):
	order parameters src,dest and make src const.

2008-05-06  Richard Hult  <richard@imendio.com>

	* bdk/bdkevents.c: (bdk_event_copy), (bdk_event_free):
	* bdk/bdkinternals.h: Add private backend data to events, and
	handle it when copying/freeing events. Currently only needed in
	the quartz backend.

	* bdk/directfb/bdkevents-directfb.c:
	* bdk/quartz/bdkevents-quartz.c:
	* bdk/win32/bdkevents-win32.c:
	* bdk/x11/bdkevents-x11.c: (_bdk_windowing_event_data_copy)
	(_bdk_windowing_event_data_free): Add stubs for X11, win32 and
	directfb. Implement for quartz. Part of fixing bug #473822.

2008-05-05  Richard Hult  <richard@imendio.com>

	* bdk/quartz/bdkmain-quartz.c (_bdk_windowing_init): Initalize
	framework if there is one.

2008-05-05  Michael Natterer  <mitch@imendio.com>

	* btk/btkcellrenderercombo.h
	* btk/btkcellrendererspin.h
	* btk/btkfilechooserbutton.h: style cleanups for the sake of
	consistency.

	* btk/btkfilechooserdialog.h
	* btk/btkfilechooserwidget.h
	* btk/btkscalebutton.h: reorder instance and class structs to be
	in canonical order.

2008-05-04  Richard Hult  <richard@imendio.com>

	* bdk/quartz/bdkkeys-quartz.c (maybe_update_keymap): Check if
	bdk_unicode_to_keyval() worked before using the result. Makes
	function keys work, bug #530156. Also add F16 to the function key
	map.

2008-05-04  Richard Hult  <richard@imendio.com>

	* bdk/quartz/bdkkeys-quartz.c (maybe_update_keymap): Remove stray
	semicolon after if statement. Fixes bug #530963, patch from Yevgen
	Muntyan.

2008-05-02  Michael Natterer  <mitch@imendio.com>

	* btk/btk.h: add 15 files that were missing (they all got included
	indirectly by including btk.h, so should have been here in the
	first place).

2008-05-02  Michael Natterer  <mitch@imendio.com>

	* modules/input/imthai.c: use GETTEXT_PACKAGE instead of "btk20".

2008-05-01  Richard Hult  <richard@imendio.com>

	* btk/btkquartz.c (_btk_quartz_set_selection_data_for_pasteboard):
	Prevent crash, fixes bug #530153. Patch from Yevgen Muntyan.

2008-05-01  Matthias Clasen  <mclasen@redhat.com>

	* modules/imput/imthai.c: Register the right translation domain.

2008-04-30  Matthias Clasen  <mclasen@redhat.com>

	Bug 529386 – Printing options hidden by blacklisted option

	* modules/printbackend/cups/btkprintbackendcups.c
	(cups_printer_get_options): Fix the blacklist handling. 
	Patch by Marek Kašík.
	
2008-04-30  Richard Hult  <richard@imendio.com>

	* bdk/quartz/BdkQuartzView.c: Simplify check for zero sized expose
	area.

2008-04-30  Richard Hult  <richard@imendio.com>

	* bdk/quartz/bdkevents-quartz.c: (_bdk_events_queue): Don't send
	nsevents with the bdk lock held, fixes deadlock when doing manual
	window resizing with threading enabled.

2008-04-30  Richard Hult  <richard@imendio.com>

	* bdk/quartz/bdkevents-quartz.c:
	(get_keyboard_modifiers_from_ns_event), (create_key_event): Map
	Alt to Alt and Cmd to Meta. This is not only more logical but also
	makes it easier to have Mac-like behavior.

2008-04-25  Björn Lindqvist  <bjourne@gmail.com>

	* btk/btkentry.c: (btk_entry_expose) Use existing window size when
	painting the flat box instead of recalculating it. (#437493,
	Ricardo Cruz)

2008-04-25  Michael Emmel  <mike.emmel@gmail.com>

	Bug 529841 – incorrect position in directfb 

	* bdk/directfb/bdkwindow-directfb.c: fix y = abs_x 

2008-04-25  Johan Dahlin  <jdahlin@async.com.br>

	* btk/btkwidget.h: include <batk/batk.h> instead of <batk/batkobject.h>

2008-04-25  Michael Natterer  <mitch@imendio.com>

	* btk/btkprintcontext.h: include <bango/bango.h> instead of
	<bango/bango-layout.h>.

	* btk/btkiconfactory.c
	* btk/btkimmodule.c
	* btk/btkmain.c
	* btk/btkmodules.c
	* btk/queryimmodules.c: remove inclusion of single files from
	bango, none of them was actually needed.

	* modules/input/btkimcontextime.c: include <bango/bango.h> instead of
	<bango/bango-utils.h>.

2008-04-25  Michael Natterer  <mitch@imendio.com>

	* bdk/bdkfont.h: include <bango/bango.h> instead of
	<bango/bango-font.h>.

2008-04-25  Michael Natterer  <mitch@imendio.com>

	* btk/btkmountoperation.h: include <bdk/bdk.h> instead of
	<bdk/bdkscreen.h>.

2008-04-21  Michael Natterer  <mitch@imendio.com>

	* btk/btkselection.c: add tons of g_return_if_fail() instead of
	crashing when NULL pointers get passed.

2008-04-18  Michael Natterer  <mitch@imendio.com>

	* btk/btkenums.h: move a few '{' to their own lines so all enums
	here have the same style.

2008-04-18  Michael Natterer  <mitch@imendio.com>

	* btk/btkicontheme.h
	* btk/btkrecentmanager.h: include <bdk/bdk.h> instead of
	<bdk/bdkscreen.h>.

	* btk/btkbuilderparser.c
	* btk/btklinkbutton.c
	* btk/btkpreview.c
	* btk/btkrecentchooserdefault.c
	* btk/btkrecentchoosermenu.c
	* modules/input/btkimcontextthai.c: remove inclusion of single
	files from bdk, none of the includes was actually needed.

2008-04-18  Michael Natterer  <mitch@imendio.com>

	* bdk/bdk.h: reorder one include so they are all alphabetical.

2008-04-18  Michael Natterer  <mitch@imendio.com>

	* modules/printbackends/cups/btkprintercups.[ch]
	(btk_printer_cups_get_ppd_name): change return value and local
	variable to const bchar* to fix warning about discarding const
	qualifier.

2008-04-18  Emmanuele Bassi  <ebassi@bunny.org>

	* btk/btkrecentmanager.c:
	(btk_recent_manager_set_filename): Keep the default storage
	file in $HOME, as we don't have a migration code in place yet.

2008-04-18  Michael Natterer  <mitch@imendio.com>

	* btk/btkrecentmanager.c (btk_recent_manager_clamp_to_age):
	g_strfreev() the uris returned by g_bookmark_file_get_uris().

2008-04-17  Michael Natterer  <mitch@imendio.com>

	* btk/btkiconfactory.c (get_default_icons): register the
	BTK_STOCK_PAGE_SETUP icon.

2008-04-17  Michael Natterer  <mitch@imendio.com>

	* btk/btktooltips.c (btk_tooltips_destroy): no need to
	g_return_if_fail(tooltips != NULL);

2008-04-16  Tristan Van Berkom <tvb@bunny.org>

	* btk/btkwindow.c: Chain up in buildable_finish()

	* btk/btkbuilder.c: _btk_builder_get_absolute_filename() handle
	cases where g_path_get_dirname() returns "."

	* docs/reference/btk/tmpl/btklabel.sgml, 
	docs/reference/btk/tmpl/btkbuilder.sgml: Added documentation
	for the <attributes> tags on BtkLabel

2008-04-15  Emmanuele Bassi  <ebassi@bunny.org>

	* btk/btkrecentmanager.c:
	(btk_recent_manager_real_changed): Fix last commit, and
	complete the btk-recent-files-max-age semantics: if the
	property is set to 0 then purge the list.

2008-04-15  Emmanuele Bassi  <ebassi@bunny.org>

	Bug 488507 – boundless growth of .recently-used.xbel file
	slows down applications

	* btk/btkrecentmanager.c:
	(btk_recent_manager_init),
	(btk_recent_manager_real_changed),
	(btk_recent_manager_set_filename),
	(btk_recent_manager_clamp_to_age): Clamp the recently
	used resources list by the age of its items, using
	the newly added BtkSettings property.

	* btk/btksettings.c (btk_settings_class_init): Add the
	btk-recent-files-max-age property, controlling the
	maximum age of the items in the recently used resources
	list.

2008-04-15  Emmanuele Bassi  <ebassi@bunny.org>

	* btk/btkrecentmanager.c:
	(btk_recent_manager_add_item_query_info),
	(btk_recent_manager_add_item): Emit the ::changed signal
	at the end of the asynchronous MIME type query.

2008-04-15  Emmanuele Bassi  <ebassi@bunny.org>

	Bug 487375 – btkrecent apps poll ~/.recently-used.xbel
	every 5 seconds

	* btk/btkrecentmanager.c: Use GFileMonitor to check for
	changes in the recently used resources storage file, and
	drop the timeout-based poll.

	* ChangeLog: Fix attribution of the patch of the previous
	commit.

2008-04-15  Emmanuele Bassi  <ebassi@bunny.org>

	Bug 506062 – btk_recent_manager_add_item does not detect mime
	type on Windows

	* configure.in: Depend on bunnyio-2.0

	* btk/btkrecentmanager.c:
	(btk_recent_manager_add_item_query_info_cb),
	(btk_recent_manager_add_item): Use BUNNYIO to (asynchronously)
	query the MIME type of the passed URI (based on a patch by
	Armin Burgmeier)

2008-04-11  Carlos Garnacho  <carlos@imendio.com>

	* btk/btkassistant.c (btk_assistant_set_current_page): Add current
	page to visited page list instead of next current page. (#527466,
	patch by Marcus Brinkmann)

2008-04-11  Tristan Van Berkom <tvb@bunny.org>

	* btk/btklabel.c: Added <attributes> / <attribute>
	custom tags to parse bango attributes into labels (#527486).

	* tests/buildertest.c: Added tests for BtkLabel custom
	tag parsing.

2008-04-10  Carlos Garnacho  <carlos@imendio.com>

	* btk/btknotebook.c (hide_drag_window): Do not call
	btk_widget_set_parent_window(), using widget->window instead of NULL
	to unset is the wrong thing, and btk_widget_unparent() will already 
	take care of this (#467698, patch by Sébastien Granjoux)

2008-04-08  Tor Lillqvist  <tml@novell.com>

	* demos/btk-demo/builder.c (quit_activate, about_activate): Mark
	these functions with G_MODULE_EXPORT.

2008-04-08  Tomas Bzatek  <tbzatek@redhat.com>

	* btk/btkfilesystem.c: (btk_file_info_render_icon),
	(btk_file_system_volume_render_icon):
	Fix fallback icon rendering size

2008-04-08  Michael Natterer  <mitch@imendio.com>

	* btk/btkmenushell.c (btk_real_menu_shell_move_current): fix a
	touchscreen-mode keynav corner case: when navigating to the parent
	menu, make sure we don't close two menus at the same time in case
	the deepest open menu has no selectable items.

2008-04-06  Tristan Van Berkom <tvb@bunny.org>

	* btk/btkwidget.c: Clarified a g_warning message regarding
	parsing accelerators from builder files.

2008-04-03  Cody Russell  <bratsche@bunny.org>

	* btk/btkprintoperation-win32.c: Fix variable declared in the middle
	of the block. (#526021, reported by Kazuki IWAMOTO)

2008-04-03  Tor Lillqvist  <tml@novell.com>

	Bug 330743 - Up/down spinbuttons won't take zeros and exhibit very
	strange behavior

	* btk/btkspinbutton.c (btk_spin_button_insert_text) [Win32]: Add
	workaround for a specific kind of screwed up locale setting.

2008-04-02  Matthias Clasen  <mclasen@redhat.com>

	* bdk/x11/bdkcolor-x11.c: Don't call XFreeColormap on foreign
	colormaps.  Found by Daniel Berrange.

2008-04-02  Björn Lindqvist  <bjourne@gmail.com>

	* tests/autotestfilechooser.c: Cover
	BTK_FILE_CHOOSER_ACTION_CREATE_FOLDER action in tests for current
	name. (#346058, Joe Halliwell)

2008-04-02  Federico Mena Quintero  <federico@novell.com>

	Fix http://bugzilla.bunny.org/show_bug.cgi?id=492134 - The file
	chooser incorrectly substitutes and expands a ~ when you type it
	in the filename entry.

	* btk/btkfilesystemunix.c (expand_tilde): Ensure that empty
	basenames result in a slash-terminated pathname.
	btk_file_system_unix_parse() is correct, but it was splitting
	"/home/username" into path="/home" and file_part="username", which
	is not what the caller wants when the entry has just "~" or
	"~username".

2008-04-02  Tor Lillqvist  <tml@novell.com>

	* btk/Makefile.am: Don't bother compiling btksearchenginebeagle.c
	and btksearchenginetracker.c on Windows.

	* btk/btksearchengine.c: Don't define HAVE_BEAGLE and HAVE_TRACKER
	on Windows.

2008-04-01  Cody Russell  <bratsche@bunny.org>

	* configure.in: Bump required Bairo to 1.5.2.

	* btk/btkprintoperation-win32.c: Add support for using the new
	bairo_win32_printing_surface for printing.  Also fixed to use
	bairo_surface_show_page(). (#488833 and #521178)

2008-03-31  Cody Russell  <bratsche@bunny.org>

        * demos/btk-demo/printing.c (draw_page): Move down each line in         
        units of text_height rather than in units of data->font_size.
        (totally awesome catch by Dom Lachowicz)

2008-03-28  Richard Hult  <richard@imendio.com>

	* bdk/quartz/bdkevents-quartz.c: (bdk_event_translate),
	(_bdk_quartz_events_trigger_crossing_events): Defer the generated
	event to the mainloop and don't generate one at all if the
	toplevel didn't change. Use the actual window and not the toplevel
	as event window. These changes make the generated crossing events
	match the X11 behavior and fixes issues with e.g. tooltips,
	comboboxes and menus.

	* bdk/quartz/BdkQuartzView.c: Don't update the tracking rect if
	the view has no window, it will be updated as soon as it's put
	inside a window.

	* bdk/quartz/bdkwindow-quartz.c:
	(_bdk_quartz_window_debug_highlight): Make it possible to track
	multiple windows with debug highlighting.
	(show_window_internal): Remove workaround for tooltips and popups
	that is no longer needed with the above changes.

2008-03-26  Federico Mena Quintero  <federico@novell.com>

	* btk/btkfilechooserentry.c (commit_completion_and_refresh): New
	helper function; factored out from the functions that commit the
	current suggested autocompletion and that refresh the entry's paths.
	(btk_file_chooser_entry_activate): Use commit_completion_and_refresh().
	(_btk_file_chooser_entry_get_file_part): Likewise.
	(_btk_file_chooser_entry_get_current_folder): Likewise.  This
	makes the entry have the correct paths when *not* using any form
	of completion (and makes the file chooser work when clicking the
	OK button).

2008-03-25  Richard Hult  <richard@imendio.com>

	* bdk/quartz/bdkevents-quartz.c:
	(_bdk_quartz_events_trigger_crossing_events): Bail out early if we
	can't find a matching window.

	* bdk/quartz/bdkwindow-quartz.c: (show_window_internal): Add a
	comment, and only trigger an event for non-temp windows, fixes
	problems for tooltips caused by the workarounds for the
	problematic tracking rect API.

2008-03-25  Richard Hult  <richard@imendio.com>

	* bdk/quartz/bdkwindow-quartz.c:
	(bdk_window_quartz_process_all_updates): Plug a leak and add a
	check that we have a toplevel before accessing it.

2008-03-24  Tor Lillqvist  <tml@novell.com>

	Bug 524151 - Dragging of 0-byte files results in an empty filename
	on Windows XP and above

	* bdk/win32/bdkdnd-win32.c (resolve_link): Check for the file
	being empty first. For some reason ISHellLink and IPersistFile
	succeeds in interpreting empty files as shortcuts, claiming the
	target of the shortcut is an empty path.

	Change the function to take the wide character file name that the
	caller already has anyway, to avoid a superfluous conversion from
	UTF-8 to UTF-16.

2008-03-23  Björn Lindqvist  <bjourne@gmail.com>

	* bdk-pixbuf/bdk-pixbuf-io.c (bdk_pixbuf_new_from_xpm_data): Guard
	against NULL pointer. (#467051, Gian Mario Tagliaretti)

2008-03-23  Cody Russell  <bratsche@bunny.org>

	* bdk/win32/bdkevents-win32.c (show_window_recurse):
	Check window state for BDK_WINDOW_STATE_ICONIFIED before doing
	ShowWindow (SW_RESTORE).  This fixes a problem where tearing off
	menus from a maximized window would force the window to restore
	its size. (#518846)

2008-03-23  Johan Dahlin  <johan@bunny.org>

	* btk/btk-builder-convert:
	Properly convert BtkImageMenuItems which use stock labels but don't
	have any children.
	(#523932, Brian Pepple)
	
2008-03-22  Matthew Barnes  <mbarnes@redhat.com>

	* btk/btkentrycompletion.c (btk_entry_completion_get_cells):
	New function implements BtkCellLayoutClass::get_cells.  (#523787)

2008-03-22  Tor Lillqvist  <tml@novell.com>

	Bug 523782 - Leftover call to BDK_THREADS_LEAVE() in btktoolbar.c

	* btk/btktoolbar.c (slide_idle_handler): Remove obviously wrong
	BDK_THREADS_LEAVE() call. Approved by mclasen.

2008-03-22  Björn Lindqvist  <bjourne@gmail.com>

	* btk/btkexpander.c (btk_expander_get_label):
	btk_label_get_label() should be used instead of
	btk_label_get_text(). (#353088, Xan Lopez)

2008-03-21  Tor Lillqvist  <tml@novell.com>

	Import the GDI+ bdk-pixbuf loaders for Windows by Dominic
	Lachowicz and Alberto Ruiz into the BTK+ tree, from the
	gdip-pixbuf-loader module.

	* configure.in: Add switch --disable-gdiplus-loaders that disables
	building of the GDI+ loaders.

	When including loaders in the bdk-pixbuf library, and building
	GDI+ loaders, either build in all the GDI+ loaders or none of
	them. Use just -DINCLUDE_gdiplus in $INCLUDED_LOADER_DEFINE to
	signal building them in.

	Add Automake conditionals BUILD_GDIPLUS_LOADERS to indicate
	whether the GDI+ loaders should be built and INCLUDE_GDIPLUS to
	indicate whether they should be built-in.
	
	For the rest of the changes, see bdk-pixbuf/ChangeLog.
	
2008-03-20  Tor Lillqvist  <tml@novell.com>

	* btk/Makefile.am: Revert accidental change that went in as part
	of the commit on 2008-03-18. Do use grep -o. Unbreaks build on
	Darwin. On Windows one has to use a newer GNU grep that has -o,
	for instance the one from gnuwin32, instead of the oldish one in
	MSYS that doesn't have -o.

2008-03-20  Tor Lillqvist  <tml@novell.com>

	* tests/testfilechooserbutton.c (chooser_update_preview_cb): Don't
	pass NULL for %s to g_message().
	(main): Drop unnecessary call to btk_widget_destroy().

2008-03-20  Tor Lillqvist  <tml@novell.com>

	Bug 314084 - BTK+ dialogs should not be placed partially offscreen

	* btk/btkwindow.c (clamp): New function. Clamps a window position
	in one dimension, or centered in case it doesn't fit.
	(clamp_window_to_rectangle): Simplify. Call clamp() for x and y
	dimensions.

2008-03-18  Tor Lillqvist  <tml@novell.com>

	Bug 523225 - modules/input/im*.c: MODULE_ENTRY macros make illegal code
	
	* modules/input/im*.c: Modify the MODULE_ENTRY macro so the
	G_MODULE_ENTRY decoration can be put in a more correct place.

2008-03-18  Sven Neumann  <sven@gimp.org>

	* btk/btkmountoperation.c (btk_mount_operation_ask_password): set
	alternative button order on the password dialog.

2008-03-18  Tor Lillqvist  <tml@novell.com>

	Bug 99192 - Add --with-include-input-modules

	* configure.in: Add --with-included-immodules switch. Handled in a
	similar way as the --with-included-loaders switch. For each input
	method module foo: Collect the list of input modules to be built
	into libbtk into INCLUDED_IMMODULE_OBJ. Collect a list of
	-DINCLUDE_IM_foo definitions into INCLUDED_IMMODULE_DEFINE.
	Define Automake conditionals INCLUDE_IM_FOO.

	* modules/input/Makefile.am: For modules to be included in libbtk,
	build a static library.
	
	* modules/input/im*.c: Use MODULE_ENTRY macros much like in
	bdk-pixbuf to get unique names for the functions called by libbtk
	in the included case. Use G_MODULE_EXPORT in the non-included case
	so that we don't unnecessarily export unneeded random global
	symbols on Windows.

	* btk/Makefile.am: Build the included modules and link them into libbtk.

	* btk/btkimmodule.c: Handle the built-in modules. Remove
	copy/paste leftover mentions of "themes" in comments.

2008-03-18  Tor Lillqvist  <tml@novell.com>

	* tests/Makefile.am: Build testmountoperation only on Unix for now.

2008-03-17  Christian Kellner  <gicmo@bunny.org>

	Implement BtkMountOperation, a subclass of GMountOperation
	to be used with bunnyio wherever there is the need to ask the
	user for credentials or questions while mounting a volume.
	This is bug #522245

	* btk/btkmountoperation.c:
	* btk/btkmountoperation.h:
	Implement BtkMountOperation.
	
	* btk/btk.h: Add btkmountoperation.h
	* btk/Makefile.am: Add btkmountoperation.[hc]
	* btk/btk.symbols: Add symbols of BtkMountOperation.
	* tests/testmountoperation.c: Test program for it.
	* tests/Makefile.am: Add testmountoperation.

2008-03-17  Emmanuele Bassi  <ebassi@bunny.org>

	* btk/btkcontainer.c: Properly document
	btk_container_set_focus_child(). (#521739, Andrew Cowie)

2008-03-16  Alberto Ruiz <aruiz@bunny.org>

	* modules/engines/ms-windows/Theme/btk-2.0/btkrc: more descriptive
	style names for the ComboBox thickness style

2008-03-16  Alberto Ruiz <aruiz@bunny.org>

	* modules/engines/ms-windows/Theme/btk-2.0/btkrc:
	* modules/engines/ms-windows/msw_style.c (draw_box) (draw_arrow)
	(combo_box_draw_arrow) (setup_msw_rc_style): draw box does more
	intelligent separation for the xp theming engine and the classic
	theme while drawing the BtkComboBox button.  combobox_draw_arrow
	is not used anymore, commented.  The style has been updated to fix
	border/thickness glitches in the combobox according to the fixes
	commited regarding bug #521442. (bug #461805)

2008-03-16  Alberto Ruiz <aruiz@bunny.org>

	* btk/btkcombobox.c: (btk_combo_box_size_allocate) The child is
	now aware of both the combobox and frame (if has-frame is set)
	thickness and border. (bug #521442)

2008-03-15  Andre Klapper  <a9016009@gmx.de>

	* configure.in: Added "si" to ALL_LINGUAS.

2008-03-15  Matthias Clasen  <mclasen@redhat.com>

	* btk/btktreeview.c (btk_tree_view_ensure_interactive_directory):
	Set window type hint on the search popup.  (#522279, Danny Baumann)

2008-03-15  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkimcontextsimple.c: Emit preedit_start/_end as
	appropriate.  (#521934, Huang Peng)

2008-03-14  Michael Natterer  <mitch@imendio.com>

	* bdk/bdkspawn.h
	* btk/btkbuilderprivate.h
	* btk/btkfilechoosersettings.c
	* btk/btksearchenginesimple.c
	* btk/tests/liststore.c
	* btk/tests/treestore.c: remove single-file includes of GLib
	headers or replace them by <bunnylib.h> where needed.

2008-03-14  Michael Natterer  <mitch@imendio.com>

	* btk/btkadjustment.c: coding style cleanup.

	(btk_adjustment_set_property): no need to call g_object_notify()
	on the set properties.

	Implement BObject::dispatch_properties_changed() and make sure we
	emit "changed" when anything but the "value" property changes.

2008-03-14  Tor Lillqvist  <tml@novell.com>

	* bdk/win32/bdkevents-win32.c: Drop the support for the
	MSH_MOUSEWHEEL message that MSDN says is used only on NT 3.51 and
	Win95. Thanks to mitch for noticing this obsolete code.

2008-03-14  Cody Russell  <bratsche@bunny.org>

	* examples/scribble-xinput/scribble-xinput.c: Changed
	'void int main()' to 'int main()'. (#522211, Liqing Huang)
	
2008-03-14  Richard Hult  <richard@imendio.com>

	* bdk/quartz/bdkwindow-quartz.c:
	(bdk_window_quartz_process_all_updates): Patch from Paul Davis,
	only flush the toplevel once per update.

2008-03-13  Federico Mena Quintero  <federico@novell.com>

	* btk/btkfilechooserentry.c (create_completion_feedback_window):
	Set the mouse cursor of the feedback window to invisible, so that
	we respect BtkEntry's invisible cursor while typing.

2008-03-13  Federico Mena Quintero  <federico@novell.com>

	* btk/btkfilechooserentry.c (show_completion_feedback_window): Put
	the feedback window at entry_height/2 pixels to the right of the
	cursor, for a cheap "M-width / 2" spacing.

2008-03-13  Sven Neumann  <sven@gimp.org>

	* btk/btkfilechooserdefault.c
	* btk/btkprintunixdialog.c: set alternative button order for
	overwrite confirmation dialogs (bug #522191).

2008-03-13  Sven Neumann  <sven@gimp.org>

	* btk/btkprintunixdialog.c (add_custom_button_to_dialog)
	(overwrite_confirmation_dialog): added some line-breaks for
	readability.

2008-03-12  Federico Mena Quintero  <federico@novell.com>

	Rework the way completion works in BtkFileChooserEntry.  Fixes
	http://bugzilla.bunny.org/attachment.cgi?bugid=314873 - 
	Tab completion should work even if the cursor is not at the end of
	the entry.

	* btk/btkfilechooserentry.c: Change the strategy by which we do
	completion.

	We distinguish between two cases:

		- autocompletion - happens only in the Open modes by
		  inserting and selecting the common prefix as you type.

		- explicit completion - happens when you hit Tab.

	When some type of completion needs to happen, the entry first
	parses its input and sees if it needs to initiate a folder load.
	Completion will not happen until the folder finishes loading.

	If the folder is already completely loaded, then completion is
	performed immediately.  Otherwise, the entry queues a pending
	completion and starts loading the new folder (or waits until the
	current folder is completely loaded).

	Tab completion is allowed to happen even if the cursor is not at
	the end of the entry.

	There is a new feedback mechanism for explicit completion, so that
	you will get an Emacs-like tip whenever there are ambiguities in
	completion, no matches, etc.  (This needs to be polished so that
	we support RTL entries and all the fancy Bango layout in BtkEntry).

	The only remaining thing to fix is the popup suggestion window.
	Unfortunately, BtkEntryCompletion does not let us do what we want,
	and will need further changes.

2008-03-12  Tor Lillqvist  <tml@novell.com>

	Bug 510000 - BtkStatusIcon doesn't reshow after explorer.exe crash

	* btk/btkstatusicon.c [Win32]: Keep a list of status icons. Check
	for the TaskbarCreated message in the window procedure for the
	dummy "tray observer" window we create. When we get a
	TaskbarCreated message, iterate over the status icons and re-add
	them to the task bar, and update them by calling
	btk_status_icon_update_image().

	Move some ifdefs around to avoid unused functions.

2008-03-12  Tor Lillqvist  <tml@novell.com>

	* config.h.win32.in: Update to match what configure produces.

2008-03-12  Jens Granseuer  <jensgr@gmx.net>

	* modules/printbackends/cups/btkprintbackendcups.c:
	(cups_printer_prepare_for_print): Don't define variables in the
	middle of a block. (#522067)

2008-03-12  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkprintunixdialog.c: Add an overwrite confirmation 
	dialog for print-to-file.  (#474302, Marek Kašík)

2008-03-12  Matthias Clasen  <mclasen@redhat.com>

	* modules/printbackends/cups/btkprintbackendcups.c: Fix a crash
	(#469210, Wouter Bolsterlee)

2008-03-12  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkpagesetup.c (btk_page_setup_copy): Don't leak 
	paper_size here.  (#488820, Morten Welinder)

2008-03-12  Michael Natterer  <mitch@imendio.com>

	* acconfig.h: remove this deprecated file.

	* configure.in: added comments to all instances of AC_DEFINE() so
	config.h can be completely generated from configure.in.

2008-03-12  Michael Natterer  <mitch@imendio.com>

	* modules/printbackends/cups/btkprintbackendcups.c: include
	<bunnylib/gstdio.h> for g_fopen().

2008-03-11  Matthias Clasen  <mclasen@redhat.com>

	* modules/printbackends/cups/btkprintbackendcups.c: Use
	g_ascii_formatd when formatting custom paper sizes, since
	cups doesn't handle , as decimal separator.  (#521548)

2008-03-11  Tor Lillqvist  <tml@novell.com>

	Bug 469868 - Filenames with colon ":" are not saved correctly

	* btk/btkfilechooserentry.c (insert_text_callback)
	(delete_text_callback) [Win32]: New functions to make sure that
	colons used otherwise than as a separator after a drive letter, or
	characters that are always illegal in file names, are rejected on
	input. This means that the BTK+ file chooser can't be used to
	input full names of alternate data streams, but oh well. There are
	still more checks that could be done on the file names, see the
	bug report. But this will do for now.
	(_btk_file_chooser_entry_init) [Win32]: Connect above functions.

2008-03-11  Jordi Mallach  <jordi@sindominio.net>

	* configure.in (ALL_LINGUAS): Add ca@valencia (Valencian-Catalan).

2008-03-11  Michael Natterer  <mitch@imendio.com>

	* bdk/linux-fb/*: removed linux-fb backend files.

	* acconfig.h
	* config.h.win32.in
	* docs/README.linux-fb
	* btk/Makefile.am: remove remaining traces of linux-fb.

	* btk/btkwindow-decorate.c: same here. There is some code that
	calls into linux-fb to set window move/resize callbacks. I put it
	in #if 0 as a reminder because we did use decorated windows with
	the DirectFB backend and it did work, so I don't really know why
	this code is needed or how it could work with DirectFB back then.
	The file does actually compile now if DECORATE_WINDOWS is defined,
	but I didn't test with DirectFB to check if it does anything.

2008-03-11  Alberto Ruiz  <aruiz@bunny.org>

	* btk/btkcombobox.c (btk_combo_box_size_allocate):
	Take thickness into account in the size allocation of the child widgets in
	list mode.
	Fixes #521442

2008-03-11  Richard Hult  <richard@imendio.com>

	* bdk/quartz/bdkwindow-quartz.c: Implement bdk_window_reparent.

2008-03-10  Tor Lillqvist  <tml@novell.com>

	* tests/teststatusicon.c (do_exit, popup_menu): Add the
	possibility to test what happens if the process just calls exit()
	without any orderly cleanup of BTK+.

2008-03-10  Tor Lillqvist  <tml@novell.com>

	* btk/btktrayicon-win32.c: Remove from SVN, finally.

2008-03-10  Tor Lillqvist  <tml@novell.com>

	Bug 520286 - Non-deletable window has no minimize / maximize buttons

	* bdk/win32/bdkmain-win32.c (_bdk_win32_window_style_to_string):
	New debugging output function that decodes a set of WS_* bits.

	* bdk/win32/bdkprivate-win32.h: Declare it.

	* bdk/win32/bdkwindow-win32.c (update_single_system_menu_entry):
	New function that enables or disables one menu entry in the system
	menu of a top-level window. (The corresponding decoration will
	then also be enabled or disabled (grayed).)

	(update_style_bits): Do as the comment says and don't try to
	update the window style based on the BdkWMFunctions set for the
	window.
		   
	(update_system_menu): New function that enables or disables the
	system menu entries based on a window's stored set of
	BdkWMFunctions.

	(bdk_window_set_functions): Call update_system_menu() instead of
	update_style_bits().

2008-03-10  Emmanuele Bassi  <ebassi@bunny.org>

	* README.in: Reword the 2.14 release notes entry about the
	deprecation of the btkitemfactory.h header, and fix typos
	and grammar.

2008-03-08  Alberto Ruiz  <aruiz@bunny.org>

	* modules/engines/ms-windows/msw_style.c (draw_shadow):
	Do not draw frame if parent if combobox.
	(draw_box):
	Uses scrollbar width system metrics for combobox button.
	Fixes #461805 for XP theme engine.

2008-03-07  Johan Dahlin  <johan@bunny.org>

	* btk/btkbuilder.c:
	* btk/btkbuilderparser.c:
	* btk/btkbuilderprivate.h:
	* btk/btkiconfactory.c:
	* tests/buildertest.c:
	- Treat enums like enums and not values
	- Avoid invalid free, in case of more than two sources
	- Add better error messages
	- Add much improved tests
	(#520979, Christian Persch)

2008-03-07  Carlos Garnacho  <carlos@imendio.com>

	* btk/btkiconfactory.c (btk_icon_factory_buildable_custom_tag_end):
	Fix build.

2008-03-06  Federico Mena Quintero  <federico@novell.com>

	Fix http://bugzilla.bunny.org/show_bug.cgi?id=505857 -
	BtkFileChooserDialog should set a default response button if the
	app doesn't set it.  Based on a patch by Chris Wang <chris.wang@sun.com>.

	* btk/btkfilechooserdialog.c (is_stock_accept_response_id): New
	function, refactor from where there was duplicated code.
	(btk_file_chooser_dialog_map): Look at the buttons in our
	action_area.  If the response ID for a button is one of the stock
	ones, make it the default response button.

2008-03-06  Johan Dahlin  <jdahlin@async.com.br>

	* docs/reference/btk/tmpl/btkiconfactory.sgml:
	* btk/btkbuilder.c:
	* btk/btkbuilderprivate.h:
	* btk/btkiconfactory.c:
	* tests/buildertest.c:
	Implement BtkBuildable on BtkIconFactory, to make
	it possible to register custom stock icons.
	Fixes #517066

2008-03-06  Johan Dahlin  <johan@bunny.org>

	Make btk-doc happy:
	
	* btk/btkstyle.c: npoints->n_points.
	* btk/btktestutils.h: widget->spinner
	* btk/btktestutils.c: argc->argcp, argv->argvp

2008-03-06  William Lachance <wrlach@gmail.com>

	* btk/btkfilechooserdefault.c: Oops, forgot to make the raw "%H:%M" 
	string localizable (as it should be). 

2008-03-06  William Lachance <wrlach@gmail.com>

	* btk/btkfilechooserdefault.c: Don't print "Today at" in front of
	the time for today's date. It's redudant. (see bug #410517).

2008-03-06  Xan Lopez  <xan@bunny.org>

	* btk/btkfixed.c: fix typo in documentation.

2008-03-06  Johan Dahlin  <jdahlin@async.com.br>

	* btk/btkitemfactory.h:
	* btk/btktypeutils.h:
	Move BtkTranslateFunc to btktypeutils.h so we can completely
	deprecate btkitemfactory.h. 

	* btk/btkactiongroup.h:
	* btk/btkstock.h:
	Do not include btkitemfactory.h directly, instead include btktypeutils.h

	* README.in: 
	Add a note describing this slight incompatible change
	
2008-03-06  Johan Dahlin  <johan@bunny.org>

	* btk/btkpreview.h: Avoid double-deprecation.

2008-03-06  Michael Natterer  <mitch@imendio.com>

	* btk/btk.h
	* btk/Makefile.am: move the remaining deprecated widgets to the
	separate sections and replaced spaces by tabs in Makefile.am

2008-03-05  Johan Dahlin  <johan@bunny.org>

	* configure.in: Add --disable-cups option.
	(#513826, Alberto Ruiz)

	* btk/btk.h: 
	* btk/Makefile.am:
	Separate broken and deprecated sources and headers into different sections

	* tests/buildertest.c (test_list_store): Restore accidentally broken test.

2008-03-05  Kristian Rietveld  <kris@imendio.com>

	* btk/btktreemodelfilter.c (btk_tree_model_filter_row_inserted):
	short-circuit in case an empty root level would be build (and thus
	directly destroyed) if no virtual root has been set.

2008-03-04  Matthias Clasen  <mclasen@redhat.com>

	* modules/printbackends/cups/btkprintbackendcups.c: 
	Honor cups user default options from ~/.cups/lpoptions
	(#469210, Stijn Hoop)

2008-03-04  Michael Natterer  <mitch@imendio.com>

	* btk/btkcellview.c
	* btk/btkcolorbutton.c
	* btk/btkentrycompletion.c
	* btk/btkfontbutton.c
	* btk/btkiconview.c
	* btk/btkobject.c
	* btk/btkpaned.c
	* btk/btkpreview.c: don't include "btksignal.h".

	* btk/btkfilefilter.c
	* btk/btkrecentchoosermenu.c
	* btk/btkrecentfilter.c
	* btk/btktext.c: don't include "btkobject.h".

2008-03-04  Simos Xenitellis  <simos@bunny.org>

        Patch from http://bugzilla.bunny.org/show_bug.cgi?id=321896
	- Synch bdkkeysyms.h/btkimcontextsimple.c with X.org 6.9/7.0
	
	* bdk/bdkkeysyms.h: Updated file from upstream (using script from 
	same directory).
	
	* btk/btkimcontextsimpleseqs.h (btk_compose_seqs_compact[]): New 
	file, contains compose sequences that used to exist in 
	btk/btkimcontextsimple.c

	* btk/compose-parse.py: Script to generate compose 
	sequences from upstream (Xorg).

	* btk/btkimcontextsimple.c (compare_seq_index, check_compact_table, 
	check_algorithmically): New functions. First two search in
	btk_compose_seqs_compact[] for matching compose sequence, third
	tries NFC normalisation on incoming compose sequence.
	(btk_im_context_simple_filter_keypress): 
	Adds searching with check_compact_table(), check_algorithmically().

2008-03-03  Carlos Garnacho  <carlos@imendio.com>

	Fix http://bugzilla.bunny.org/show_bug.cgi?id=417389 - Make the
	scrollwheel work in BtkPathBar.

	* btk/btkpathbar.h (struct _BtkPathBar): New field event_window.

	* btk/btkpathbar.c (btk_path_bar_realize): New function.  Create
	an input-only window, event_window, which we'll use to capture
	scroll events.
	(btk_path_bar_map): Show the event_window under the rest of the
	windows, so it will be a catch-all for unhandled events.

2008-03-03  Sven Neumann  <sven@gimp.org>

	* btk/btkfilechooserbutton.c (G_DEFINE_TYPE_WITH_CODE): fixed a
	typo in the documentation of the BtkFileChooserButtons::file-set
	signal (see bug #353196).

2008-03-03  Tor Lillqvist  <tml@novell.com>

	* btk-zip.sh.in: Add bail bits. Simplify check for message catalog
	location.

2008-03-02  Johan Dahlin  <johan@bunny.org>

	* btk/btkiconview.c (btk_icon_view_paint_item): 
	Remove left-over focus_pad variable.
	(#490892, Claudio Saavedra)

	* docs/tutorial/btk-tut.sgml: Remove an extra space and swap word order
	(#518166, Matt Kraai)

2008-03-02  Johan Dahlin  <johan@bunny.org>

	* docs/tutorial/btk-tut.sgml: Add a missing space
	(#517954, Matt Kraai)

2008-03-03  Tor Lillqvist  <tml@novell.com>

	* modules/engines/ms-windows/msw_style.c (draw_box): Check that
	the widget is a BtkButton before casting.

2008-03-02  Johan Dahlin  <johan@bunny.org>

	* configure.in: Compare using = instead of ==, which is portable.
	(#490787, Thomas Klausner)

2008-03-02  Johan Dahlin  <johan@bunny.org>

	* tests/Makefile.am (noinst_PROGRAMS): Remove autotestkeywords, it's added later,
	fixes non-C++ build.
	(#496032, Nelson Benitez)

2008-02-29  Johan Dahlin  <johan@bunny.org>

	* demos/btk-demo/demo.ui:
	* btk/btkbuilderparser.c:
	* btk/btkbuilderprivate.h:
	* btk/btkliststore.c:
	* tests/buildertest.c:
	Add translatable/context and comment attributes on
	<col> tags under a BtkListStore. Refactor parts of the
	translation api and make it available inside btk+ itself.
	Update tests and example.
	Fixes a part of #518642

2008-02-29  Johan Dahlin  <johan@bunny.org>

	* btk/btkbuilder.c:
	Add missing g_return_val_if_fail checks for public API.

	* btk/btkbuilderparser.c:
	* btk/btkbuilderprivate.h:
	Do not use g_error for a few more errors, instead set
	the GError sent in through add_from_file/add_from_string.
	* tests/buildertest.c:
	Add a couple of new parsing tests.
	(#519199, Pavel Syomin)

2008-02-29  Federico Mena Quintero  <federico@novell.com>

	* btk/btkfilesystemunix.c (btk_file_system_unix_get_folder): When
	refreshing an existing folder (i.e. when we are about to reload
	its file list), turn off the folder's is_finished_loading flag.
	Otherwise callers which do ::is_finished_loading() followed by
	::list_children() will get nothing.

2008-02-29  Cody Russell  <bratsche@bunny.org>

	* docs/tutorial/btk-tut.sgml: Fix tutorial documentation to
	say 'btk_main_quit()' instead of 'btk_quit()'. (#517908, Matt Kraai)

2008-02-28  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkcalendar.h: Remove trailing comma from enum to
	make the compiler happy.  (#517295, Sylvain Pasche)

2008-02-27  Michael Natterer  <mitch@imendio.com>

	* btk/btkmenushell.c
	* btk/btktable.c
	* btk/btktext.c
	* btk/btktipsquery.c
	* btk/btktoolbar.c
	* btk/btktreeitem.c
	* btk/btktreeview.c
	* btk/btkviewport.c
	* btk/btkwin32embedwidget.c: remove g_return_if_fail() from
	private functions and virtual function implementations.

2008-02-27  Richard Hult  <richard@imendio.com>

	* bdk/quartz/BdkQuartzView.c:
	* bdk/quartz/BdkQuartzView.h:
	* bdk/quartz/bdkwindow-quartz.c: (bdk_window_set_decorations):
	Fix performance regression for borderless transparent windows
	with shadow.

2008-02-27  Emmanuele Bassi  <ebassi@bunny.org>

	* tests/testbtk.c: Revert back to r19454.

2008-02-27  Sven Neumann  <sven@gimp.org>

	* btk/Makefile.am (BTK_PRINT_PREVIEW_COMMAND): when building the
	Quartz backend, use a native Mac OS X application for the print
	preview (bug #518624).

2008-02-26  Michael Natterer  <mitch@imendio.com>

	* btk/btktextbufferserialize.c (parse_info_free): don't g_free()
	the members of info->tag_stack since they are a) bobjects and b)
	not even owned by us, ugh... Fixes crash when deserializing fails.

2008-02-26  Sven Neumann  <sven@gimp.org>

	* docs/tools/shooter.c (find_toplevel_window)
	* docs/tools/widgets.c (find_toplevel_window): fixed signedness of
	argument passed to XQueryTree().

2008-02-25  Matthias Clasen  <mclasen@redhat.com>

	* btk/btksearchenginebeagle.c: Look for libbeagle.so.1 and
	don't use beagle_query_add_hit_type.

2008-02-25  Richard Hult  <richard@imendio.com>

	* bdk/quartz/bdkevents-quartz.c
	(_bdk_quartz_events_trigger_crossing_events): Fix build on tiger.

2008-02-24  Richard Hult  <richard@imendio.com>

	* bdk/quartz/BdkQuartzWindow.c: Prevent hidden windows from being
	shown without bdk's control when clicking the dock icon.

2008-02-24  Richard Hult  <richard@imendio.com>

	* bdk/quartz/bdkprivate-quartz.h:
	* bdk/quartz/bdkeventloop-quartz.c: (got_fd_activity), (poll_func):
	Use the subtype field for the custom event that is used to wake up
	the mainloop so we can have other custom event types.

	* bdk/quartz/bdkevents-quartz.c:
	(_bdk_quartz_events_trigger_crossing_events):
	* bdk/quartz/bdkwindow-quartz.c: (show_window_internal): Create
	crossing events after showing a window if necessary, to work
	around problems with the tracking rect API.

2008-02-22  Dominic Lachowicz  <domlachowicz@gmail.com>

	* demos/btk-demo/printing.c (do_printing): btk-demo printing gives 
	wrong results on win32 because it doesn't set the printing units, 
	which affect the transformation of the bairo context 
	(#347125, Erik van Pienbroek)

2008-02-22  Tor Lillqvist  <tml@novell.com>

	* tests/pixbuf-init.c: Add file missing from SVN, from the tarball.

2008-02-22  Dominic Lachowicz  <domlachowicz@gmail.com>

	* bdk-pixbuf/queryloaders.c (loader_sanity_check): It's perfectly
	acceptable for a module to only support the save_to_callback()
	method if it marks itself as WRITABLE

2008-02-16  Matthias Clasen  <mclasen@redhat.com>
	
	* configure.in: Bump version

2008-02-16  Matthias Clasen  <mclasen@redhat.com>

	* === Released 2.13.0 ===

	* Makefile.decl: Start Xvfb at depth 16 so bairo doesn't choke.

2008-02-21  Tor Lillqvist  <tml@novell.com>

	* btk/btkfilechooserdefault.c (list_mtime_data_func) [Win32]: Must
	pass the format string to strftime in the C library's locale's
	charset, not the system's. Correspondingly, the return value from
	strftime() is in the C library's locale's charset. (#509885)

2008-02-20  Richard Hult  <richard@imendio.com>

	* bdk/quartz/bdkwindow-quartz.c: (bdk_window_set_decorations): Set
	the right window level and shadow after recreating the window.

	* bdk/quartz/BdkQuartzView.c: (drawRect): Invalidate the shadow if
	necessary after drawing (bug #517338).

2008-02-20  Marc-Andre Lureau  <marcandre.lureau@gmail.com>

	* btk/btkbuilder.c (_btk_builder_enum_from_string): fix missing
	call to g_type_class_unref in case of error. (#517563)

2008-02-18  Sven Neumann  <sven@gimp.org>

	* btk/Makefile.am (STOCK_ICONS)
	* btk/stock-icons/16/btk-page-setup.png
	* btk/stock-icons/24/btk-page-setup.png: added page-setup icons
	taken from BUNNY icon theme.

	* btk/btkstock.[ch]: added BTK_STOCK_PAGE_SETUP. Closes bug #514410.

2008-02-18  Runa Bhattacharjee <runabh@gmail.com>

	* configure.in: Added Kannada (kn) to ALL_LINGUAS

2008-02-17  Johan Dahlin  <johan@bunny.org>

	* btk/btk-builder-convert (BtkBuilderConverter._add_action_from_menuitem): 
	When converting a stock item based on the label, remove the label property.

2008-02-17  Richard Hult  <richard@imendio.com>

	* bdk/quartz/BdkQuartzWindow.c: (showAndMakeKey): Update the
	position after showing the window since the window manager might
	not place it where we requested in the first places.

2008-02-17  Richard Hult  <richard@imendio.com>

	* bdk/quartz/bdkwindow-quartz.c: (show_window_internal),
	(_bdk_quartz_window_detach_from_parent),
	(_bdk_quartz_window_attach_to_parent), (bdk_window_focus): Clear
	the toplevel ordering list in all places where the order is
	potentially changed. Fixes mouse focus issues for windows with
	a transient parent set.

2008-02-17  Richard Hult  <richard@imendio.com>

	* bdk/quartz/bdkevents-quartz.c
	(_bdk_quartz_events_update_mouse_window): Highlight the mouse
	window when event debugging is enabled.

2008-02-16  Richard Hult  <richard@imendio.com>

	* bdk/quartz/bdkevents-quartz.c (create_scroll_event): Add state
	to the scroll event (bug #516757, Paul Davis).

2008-02-16  Matthias Clasen  <mclasen@redhat.com>

	* NEWS: Updates

2008-02-16  Matthias Clasen  <mclasen@redhat.com>

	* btk/btklinkbutton.c: Show the URI in a tooltip.  (#505480,
	Teppo Turtiainen)

2008-02-15  Matthias Clasen  <mclasen@redhat.com>

	* bdk/Makefile.am: Don't install private headers. (#463510)

	* bdk/bdkinternal.h: Include bdkmedialib.h here, not in
	the installed header bdkprivate.h.

2008-02-15  Matthias Clasen  <mclasen@redhat.com>

	* btk/btknotebook.c (btk_notebook_stop_reorder): Prevent
	a crash with hidden, reorderable tabs.  (#513230, 
	Mike Massonnet, patch by Carlos Garnacho)

2008-02-15  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkuimanager.c (btk_ui_manager_insert_action_group):
	Warn on duplicate action group names.  (#501746, Christian
	Persch)

2008-02-15  Matthias Clasen  <mclasen@redhat.com>

	* btk/Makefile.am:
	* modules/other/bail/tests/Makefile.am:
	* modules/other/bail/libbail-util/Makefile.am:
	* modules/other/bail/Makefile.am: Fix builddir!=srcdir
	builds.  (#516254,  Yevgen Muntyan)

2008-02-15  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkentry.c:
	* btk/btkfilesel.c:
	* btk/btklabel.c:
	* btk/btkpathbar.c: Use btk_drag_*_add_{text,uri}_targets 
	instead of hardcoded target tables.  (#516092, Christian Persch)

2008-02-15  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkselection.c (btk_target_list_add_text_targets): Don't
	add the same target atom twice.  (#516087, Christian Persch)

2008-02-15  Matthias Clasen  <mclasen@redhat.com>

	* tests/testfilechooser.c: Add a --backend option.
	(#516073, Christian Persch)

2008-02-16  Richard Hult  <richard@imendio.com>

	* bdk/quartz/bdkprivate-quartz.h:
	* bdk/quartz/bdkwindow-quartz.c: Add debugging code to highlight a
	bdkwindow.

2008-02-15  Matthias Clasen  <mclasen@redhat.com>

	* configure.in: Go back to 2.13.0 as version for now,
	as there was no consensus to do the jump.

	* many other places: Update Since: tags.

2008-02-15  Matthias Clasen  <mclasen@redhat.com>

	* btk/btk.symbols: Add btk_tool_shell_get_type

	* btk/btktestutils.c: Don't generate unnecessary PLT entries

2008-02-15  Richard Hult  <richard@imendio.com>

	* bdk/quartz/BdkQuartzView.c: Adapt to the change to use frame
	instead of bounds when resizing windows.

2008-02-15  Matthias Clasen  <mclasen@redhat.com>

	* bdk/x11/bdkkeys-x11.c:
	* bdk/x11/bdkcolor-x11.c:
	* bdk/bdkpolyreg-generic.c: Fix a small doc issues.

2008-02-15  Matthias Clasen <mclasen@redhat.com>

	* bdk/x11/bdktestutils-x11.c:
	* bdk/x11/bdkscreen-x11.c: Documentation fixes.

2008-02-15  Tor Lillqvist  <tml@novell.com>

	* btk/btkfilesystemwin32.c (get_viewable_logical_drives): Don't
	leak Registry key handles. (#516578)

2008-02-14  Richard Hult  <richard@imendio.com>

	* bdk/quartz/bdkwindow-quartz.c: (bdk_window_focus): Using
	makeKeyWindow unfortunately doesn't work in all cases, we must use
	makeKeyAndOrderFront.

2008-02-14  Richard Hult  <richard@imendio.com>

	* bdk/quartz/bdkwindow-quartz.c: (get_fullscreen_geometry),
	(bdk_window_hide), (bdk_window_fullscreen),
	(bdk_window_unfullscreen): Make sure we leave fullscreen mode if
	the window is hidden.

2008-02-14  Richard Hult  <richard@imendio.com>

	* bdk/quartz/BdkQuartzWindow.c: Set frame, not bounds when
	resizing to be consistent and to avoid introducing an internal
	transform in the view.

2008-02-14  Richard Hult  <richard@imendio.com>

	* bdk/quartz/bdkdisplay-quartz.c: (bdk_display_open): Coding style
	fix.

2008-02-14  Johan Dahlin  <johan@bunny.org>

	* bdk/bdktestutils.h
	* btk/btktestutils.h: Remove ; trailing B_BEGIN/END_DECLS

2008-02-13  Richard Hult  <richard@imendio.com>

	* btk/btkclipboard-quartz.c: (btk_clipboard_wait_for_contents):
	Remove unused variables.
	(btk_clipboard_set_contents),
	(btk_clipboard_get_owner), (clipboard_unset),
	(btk_clipboard_request_targets): Notify the previous clipboard
	owner when the owner changes. Fixes bug #493406.
	
2008-02-13  Richard Hult  <richard@imendio.com>

	* bdk/quartz/bdkcolor-quartz.c: (bdk_colormap_alloc_colors): Fix
	the return value (return number of colors that failed), and handle
	RGBA colormap.
	(bdk_colormap_free_colors): Fix typo in comment.

2008-02-13  Kristian Rietveld  <kris@imendio.com>

	* btk/btktreeview.c (btk_tree_view_stop_rubber_band): only
	queue a redraw if the rubber banding has actually been active.

2008-02-12  Matthias Clasen  <mclasne@redhat.com>

	* btk/btkpapersize.c:
	* btk/btkprintoperation.c:
	* btk/btkvolumebutton.c:
	* btk/btkbulderparser.c: Fix some i18n errors. Pointed
	out by Behdad Esfahbod.

2008-02-12  Federico Mena Quintero  <federico@novell.com>

	Merged from btk-2-12:

	Don't focus the file list when shortcuts get activated.  This
	removes a lot of ambiguity in when the file selection should
	change, and makes the overall code flow simpler.

	This fixes http://bugzilla.bunny.org/show_bug.cgi?id=419737 -
	file/save dialog clears the filename entry when changing
	directories.

	Also fixes http://bugzilla.bunny.org/show_bug.cgi?id=499940 -
	focus should not go to the file list when a shortcut is activated.

	* btk/btkfilechooserdefault.c
	(shortcuts_activate_volume_mount_cb): Don't focus the file list
	(shortcuts_activate_get_info_cb): Likewise.

	* btk/btkfilechooserdefault.c (switch_to_shortcut): Don't focus
	the file list (this was the last place where we would focus the
	file list explicitly).  If you are in the location entry, for
	example, you don't want Alt-Home to take you to the file list; you
	just want the current folder to change.  Thanks to Olle Bergkvist
	<olle.bergkvist@yahoo.se> for pointing this out in
	http://bugzilla.bunny.org/show_bug.cgi?id=419737#c51.
	(focus_browse_tree_view_if_possible): Removed.

2008-02-12  Matthias Clasen  <mclasen@redhat.com>

	Skip exensions when selecting filenames in the save-as dialog.
	(#362516, Carlos Garnacho)

	* btk/btkfilechooserentry.h:
	* btk/btkfilechooserentry.c (_btk_file_chooser_entry_select_filename):
	New function to skip the extension part when selecting a filename.
	(_btk_file_chooser_entry_set_base_folder): Use it here.

	* btk/btkfilechooserdefault.c (btk_file_chooser_entry_grab_focus):
	...and here.

2008-02-12  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkiconview.c: Fix state change reporting for 
	accessibility.  (#499835, Rich Burridge, patch by LiYan Zhang)

2008-02-12  Emmanuele Bassi  <ebassi@bunny.org>

	* btk/btkrecentchooser.c:
	(btk_recent_chooser_class_init): Set the default value of the
	:show-not-found property to TRUE, as every implementation sets
	it to TRUE already.

	* btk/btkrecentchooserdefault.c:
	(_btk_recent_chooser_default_init): Sync show_tips to the
	default value of the :show-tips property.

2008-02-12  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkclipboard-quartz.c:
	* btkquartz.c:
	* btkselection.c: Use GSlice for BtkSelectionData.  (#515060,
	Christian Persch)

2008-02-12  Kristian Rietveld  <kris@imendio.com>

	* btk/btktreeview.c (btk_tree_view_real_select_cursor_row),
	(btk_tree_view_real_toggle_cursor_row): guard against people
	deleting the row in question in the selection-changed callback.
	(#514621, Andreas Koehler).

2008-02-12  Matthias Clasen  <mclasen@redhat.com>

	* btk/*.c: Unify the handling of various "Enter" keysyms
	all over the place.  (#515047, Christian Persch)

2008-02-12  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkfilesystemmodel.c:
	* btk/btkprinter.c:
	* btk/btkwidget.c: Use b_value_set_static_string() where 
	appropriate.  (#515042, Christian Persch)

2008-02-12  Matthias Clasen  <mclasen@redhat.com>

	* tests/prop-editor.c: Fix a memory leak (#515039, Christian Persch)
	
2008-02-12  Matthias Clasen  <mclasen@redhat.com>

	* tests/testmerge.c: Fix a memory leak (#515038, Christian Persch)

2008-02-12  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkfilechooserdefault.c (recent_model_sort_drag_data_get):
	(recent_model_sort_drag_data_get):
	(search_model_sort_drag_data_get):
	* btk/btkfilesystemmodel.c (drag_source_drag_data_get):
	* btk/btkpathbar.c (button_drag_data_get_cb):
	Use btk_selection_data_set_uris() instead of doing it
	by hand.  (#514890, Christian Persch)

2008-02-12  Michael Natterer  <mitch@imendio.com>

	* btk/btkstatusicon.c: #include "btkmain.h" for
	btk_get_current_event_time().

2008-02-12  Michael Natterer  <mitch@imendio.com>

	* btk/btkwindow.c (btk_window_activate_key): simply use
	btk_window_get_key_hash() to get the hash instead of manually
	fiddling with quarks and btk_window_keys_changed(). Also add
	g_return_if_fail() to this public function.

2008-02-11  Matthias Clasen  <mclasen@redhat.com>

	Support keynav in status icons.  (#473786, Li Yuan)

	* btk/btkstatusicon.c: Handle keynav, make the tray icon focusable.

	* btk/btktrayicon-x11.c: Draw a focus rectangle when focused.

2008-02-11  Kristian Rietveld  <kris@imendio.com>

	* btk/btkcellview.c (btk_cell_view_cell_layout_reorder)
	* btk/btkiconview.c (btk_icon_view_cell_layout_reorder): plug leak
	wrt. link deletion from list; contination of fix for #503569.

2008-02-11  Emmanuele Bassi  <ebassi@bunny.org>

	* btk/btkrecentchoosermenu.c:
	(btk_recent_chooser_menu_constructor): Set no-show-all flag
	on the placeholder menu item.

	* tests/testrecentchoosermenu.c:
	(create_recent_chooser_menu): Use btk_widget_show_all() to test
	whether the placeholder menu item gets shown.

2008-02-10  Cody Russell  <bratsche@bunny.org>

	* btk/btkfilechooser.c (btk_file_chooser_get_current_folder_uri):
	Check the return value of _btk_file_chooser_get_file_system () for
	NULL before passing it to btk_file_system_path_to_uri ().
	(#515667, Francesco Montorsi)

2008-02-10  Philip Withnall  <pwithnall@svn.bunny.org>

	* btk/btkbuilder.c: Improve the documentation for
	btk_builder_connect_signals. (#514471)

2008-02-10  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkrecentaction.c: Propagate local-only.  (#511987, 
	Jonh Wendell)

2008-02-08  Cody Russell  <bratsche@bunny.org>

	* btk/btkcombobox.c (btk_combo_box_cell_layout_pack_start):
	Removed an extra semicolon.  (#515219, reported by Kazuki IWAMOTO)

2008-02-08  Richard Hult  <richard@imendio.com>

	* bdk/quartz/bdkevents-quartz.c (bdk_event_translate): Ignore the
	delta from the NSEvent for now, generating multiple scroll events
	results in a lot of events getting queued up and things get really
	slow.

2008-02-08  Sven Herzberg  <sven@imendio.com>

	Adjust the code to match the documentation, examples, "common sense"
	and existing applications.

	* btk/btkaction.c: (_btk_action_sync_menu_visible): take into account
	that a BtkMenu for a <popup> element doesn't have to have a BtkAction
	assigned

2008-02-07  Cody Russell  <bratsche@bunny.org>

	* bdk/win32/bdkevents-win32.c
	* bdk/win32/bdkwindow-win32.c: Fixed two declarations in the middle
	of a block that were causing compile problems on old
	compilers. (#515053, reported by Kazuki IWAMOTO)
	
2008-02-07  Michael Natterer  <mitch@imendio.com>

	* btk/btkcellview.c
	* btk/btklabel.c
	* btk/btklayout.c
	* btk/btklist.c
	* btk/btkmenu.c
	* btk/btkmenushell.c
	* btk/btkmisc.c
	* btk/btkoptionmenu.c
	* btk/btkplug.c
	* btk/btkpreview.c
	* btk/btkprogress.c
	* btk/btkradiomenuitem.c
	* btk/btkscale.c
	* btk/btkscrolledwindow.c
	* btk/btksocket.c: remove g_return_if_fail() from private
	functions and virtual function implementations.

2008-02-07  Michael Natterer  <mitch@imendio.com>

	* btk/btkaction.c
	* btk/btkassistant.c
	* btk/btkbin.c
	* btk/btkbox.c
	* btk/btkcalendar.c
	* btk/btkcellrenderercombo.c
	* btk/btkcombobox.c
	* btk/btkcombo.c
	* btk/btkdrawingarea.c
	* btk/btkentrycompletion.c
	* btk/btkfixed.h
	* btk/btkgamma.c
	* btk/btkhpaned.c
	* btk/btkiconview.c
	* btk/btkitem.c
	* btk/btkitemfactory.c: remove g_return_if_fail() from private
	functions and virtual function implementations.

2008-02-07  Christian Persch  <chpe@bunny.org>

	* bdk/bdkpixbuf-render.c:
	(bdk_pixbuf_render_pixmap_and_mask_for_colormap): If the pixbuf has an
	alpha channel, use bdk_draw_rgb_32_image to draw it to the pixmap;
	otherwise there will be random pixel values in the semi-transparent
	area of the pixbuf within the mask. Bug #487865.

2008-02-06  Cody Russell  <bratsche@bunny.org>

	* bdk/win32/bdkevents-win32.c: Check if the window is a temp window,
	otherwise things get wonky when you click on a menu.  This fixes
	a regression caused in #505928.  Thanks to Tor for spotting this
	one!  (#514789)

2008-02-06  Michael Natterer  <mitch@imendio.com>

	* btk/btkcontainer.c
	* btk/btkexpander.c
	* btk/btkframe.c
	* btk/btklabel.c
	* btk/btkmain.c
	* btk/btkmenu.c
	* btk/btkmenuitem.c
	* btk/btkmenushell.c
	* btk/btknotebook.c
	* btk/btkseparatortoolitem.c
	* btk/btksocket.c
	* btk/btktextlayout.c
	* btk/btktoggletoolbutton.c
	* btk/btktoolbutton.c
	* btk/btktoolitem.c
	* btk/btktree.c
	* btk/btktreeitem.c: replace "foo && BTK_IS_FOO (foo)" by simply
	"BTK_IS_FOO (foo)".

2008-02-05  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkprintsettings.c (btk_print_settings_get_page_ranges):
	Allow to store half-open ranges.

2008-02-05  Cody Russell  <bratsche@bunny.org>

	* bdk/win32/bdkwindow-win32.c (_bdk_modal_current): Walk
	down the stack until we get to a window that is mapped.
	Otherwise hiding a window will cause all windows in the app
	to be blocked. (#514643)

2008-02-05  Matthias Clasen  <mclasen@redhat.com>

	* btk/updateiconcache.c: Ignore images in the toplevel theme
	directory, avoiding one source of invalid caches that has been
	spotted in the wild.

2008-02-05  Matthias Clasen  <mclasen@redhat.com>

	* btk/updateiconcache.c: Fix the previous commit to compile.

2008-02-05  Matthias Clasen  <mclasen@redhat.com>

	* btk/updateiconcache.c: Install a printerr handler that
	prepends the program name, since btk-update-icon-cache output
	often appears in the middle of other output, e.g. rpm update logs.

2008-02-05  Cody Russell  <bratsche@bunny.org>

	* bdk/win32/bdkprivate-win32.h
	* bdk/win32/bdkevents-win32.c
	* bdk/win32/bdkwindow-win32.c
	* bdk/win32/bdkwindow-win32.h
	* bdk/win32/bdkwin32.h:
	Modal window rework.  (#455627 and #511111)

2008-02-04  Michael Natterer  <mitch@imendio.com>

	* btk/btkcombobox.c (btk_combo_box_cell_layout_add_attribute):
	g_return_if_fail() if the cell is not part of the combo instead of
	crashing in the next line.

2008-02-01  Cody Russell  <cody@jhu.edu>

	* modules/engines/ms-windows/xp_theme.[ch]
	* modules/engines/ms-windows/xp_theme_defs.h
	* modules/engines/ms-windows/msw_rc_style.c
	* modules/engines/ms-windows/msw_theme_main.c
	* modules/engines/ms-windows/msw_style.c: Re-indented and generally
	attempted to stylize more like the rest of the btk+ stack's code.

2008-02-01  Michael Natterer  <mitch@imendio.com>

	* tests/testbtk.c: initialize BdkColor structs to fix warning
	about uninitialized "pixel" member.

	* tests/testactions.c: connect the toolbar_style() callback so it
	does something useful and doesn't warn about being defined but not
	used.

2008-01-31  Cody Russell  <bratsche@bunny.org>

	* bdk/win32/bdkevents-win32.c:
	Refactored some of the window hiding/showing code from
	WM_ACTIVATE to WM_SIZE and WM_SYSCOMMAND.  Having this
	under WM_ACTIVATE was causing the application to go into
	a weird state when the user right-clicked on the taskbar
	entry of a window that was minimized.  (#505928)
	
2008-01-31  Cody Russell  <bratsche@bunny.org>

	* btk/btkpaned.c (btk_paned_set_position):
	Change queue_resize() to queue_draw(), and add a check for
	child2 != NULL in case someone calls this before there is
	a child packed in there.  (#144269 again)

2008-01-31  Sven Neumann  <sven@gimp.org>

	* bdk/directfb/bdkimage-directfb.c (_bdk_directfb_copy_to_image):
	applied patch from Denis Oliver Kropp <dok@directfb.org>.

2008-01-31  Sven Neumann  <sven@gimp.org>

	* bdk/directfb/bdkdisplay-directfb.c
	* bdk/directfb/bdkdrawable-directfb.c
	* bdk/directfb/bdkprivate-directfb.h
	* bdk/directfb/bdkwindow-directfb.c: applied patch from Denis
	Oliver Kropp <dok@directfb.org>. Fixes remaining warnings.

2008-01-31  Richard Hult  <richard@imendio.com>

	* bdk/quartz/BdkQuartzView.c: Another attempt at fixing focus
	issues with undecorated windows. Revert the change done on
	2008-01-25 and fix it by using the view's bounds instead. The
	bounds will always be up to date when setting up the tracking
	rect, so this should be more robust.

2008-01-30  Sven Neumann  <sven@gimp.org>

	* bdk/directfb/bdkdrawable-directfb.c
	* bdk/directfb/bdkwindow-directfb.c
	* bdk/directfb/bdkprivate-directfb.h: applied patch from Denis
	Oliver Kropp <dok@directfb.org>. Adds debug messages using
	DirectFB's debugging system

2008-01-30  Sven Neumann  <sven@gimp.org>

	* bdk/directfb/bdkdirectfb.h
	* bdk/directfb/bdkdisplay-directfb.c
	* bdk/directfb/bdkdrawable-directfb.c
	* bdk/directfb/bdkim-directfb.c
	* bdk/directfb/bdkimage-directfb.c
	* bdk/directfb/bdkinput-directfb.c
	* bdk/directfb/bdkmain-directfb.c
	* bdk/directfb/bdkpixmap-directfb.c
	* bdk/directfb/bdktestutils-directfb.c
	* bdk/directfb/bdkvisual-directfb.c
	* bdk/directfb/bdkwindow-directfb.c: applied patch from Denis
	Oliver Kropp <dok@directfb.org>. Fixes various warnings, some
	errors and has some cleanups.

2008-01-30  Michael Natterer  <mitch@imendio.com>

	* btk/btkbuilderparser.c (parse_custom): use the right type for
	"subparser_data" and remove the (bpointer*) cast. Fixes bogus
	aliasing warning.

	* btk/updateiconcache.c (add_string): cast const bchar* to
	bpointer when inserting in a GHashTable.

	* tests/testcalendar.c (calendar_detail_cb): remove const from
	return value since it's a newly allocated string.

	(calendar_update_details): free the detail.

2008-01-29  Johan Dahlin  <johan@bunny.org>

	* demos/btk-demo/builder.c: (quit_activate), (about_activate),
	(do_builder):
	* demos/btk-demo/demo.ui:
	Move the about dialog to the glade file, add accessible tags
	examples to the markup file.

2008-01-28  Paolo Borelli  <pborelli@katamail.com>

	* btk/btkprintunixdialog.c (draw_page_cb): do not leak the bango
	layout, fixes #512375.

2008-01-28  Michael Natterer  <mitch@imendio.com>

	* btk/btktextchild.c
	* btk/btktextview.c: meant to use B_STRFUNC, not B_STRLOC...

2008-01-28  Michael Natterer  <mitch@imendio.com>

	* demos/btk-demo/builder.c (about_activate): use
	btk_about_dialog_set_program_name() instead of the deprecated
	set_name().

2008-01-28  Michael Natterer  <mitch@imendio.com>

	* btk/btktextchild.c
	* btk/btktextview.c: use B_STRLOC instead of B_GNUC_FUNCTION (which
	is deprecated now).

2008-01-26  Johan Dahlin  <johan@bunny.org>

	* tests/Makefile.am:
	* tests/textbuffertest.c:
	Rename textbuffer test and port it to the new test framework
	
2008-01-25  Johan Dahlin  <johan@bunny.org>

	* btk/btktestutils.c (btk_test_init): Restore accidentally removed
	unsetting of BTK_MODULES.

	* btk/btk-builder-convert
	(BtkBuilderConverter._convert_adjustment): Handle the case where
	there is no child text node.
	(BtkBuilderConverter): Allow xml comments in most places.

2008-01-25  Johan Dahlin  <johan@bunny.org>

	* btk/btk-builder-convert
	(BtkBuilderConverter._convert_combobox_items): Remove the items
	even if there are no items set.
	(BtkBuilderConverter._add_action_from_menuitem): Convert toggled
	signals and tooltips for all menu items subclasses and 
	BtkImageMenuItem:label. 
	Makes it possible to fully convert and run Jokosher.glade.

2008-01-25  Johan Dahlin  <johan@bunny.org>

	* btk/btkwidget.c: (btk_widget_buildable_interface_init),
	(btk_widget_buildable_get_internal_child), (free_action),
	(free_relation), (btk_widget_buildable_parser_finished),
	(accessibility_start_element),
	(btk_widget_buildable_custom_tag_start),
	(btk_widget_buildable_custom_finished):
	Implement accessible support, fixes #454653.

	* btk/btk-builder-convert:
	Add support for migrating old glade files
	
	* tests/buildertest.c: (test_widget), (test_file):
	Add accessible tests and imprve the test_file function to display
	toplevels and run dialogs.

2008-01-25  Richard Hult  <richard@imendio.com>

	* bdk/quartz/BdkQuartzView.c: Don't recreate a tracking rect if it
	didn't change, fixes focus event issues for undecorated windows.

2008-01-25  Richard Hult  <richard@imendio.com>

	* bdk/quartz/bdkwindow-quartz.c: Fix compile warnings (add missing
	const and remove unused variables).

2008-01-25  Michael Natterer  <mitch@imendio.com>

	* btk/btkbutton.h
	* btk/btkcellrenderer.h
	* btk/btkimcontext.h
	* btk/btkstyle.h
	* btk/btktoolbar.h
	* btk/btktooltip.h
	* btk/btktreeprivate.h
	* btk/btktreeviewcolumn.h
	* btk/btkwidget.h: add const to constant structs which are passed
	into BTK+. Also add some forgotten const for const strings.
	Fixes bug #511554.

	* btk/btkbutton.c
	* btk/btkcellrenderer.c
	* btk/btkimcontext.c
	* btk/btkstyle.c
	* btk/btktoolbar.c
	* btk/btktooltip.c
	* btk/btktreeview.c
	* btk/btktreeviewcolumn.c
	* btk/btkwidget.c: changed accordingly.

2008-01-25  Sven Herzberg  <sven@imendio.com>

	Reviewed by Johan Dahlin.

	* btk/btkuimanager.c (btk_ui_manager_remove_ui): emit a warning if
	this is called with something that's not a BtkUIManager

2008-01-24  Johan Dahlin  <johan@bunny.org>

	* btk/btkdialog.c (btk_dialog_buildable_get_internal_child): 
	Chain up to parent, so widgets can have internal children.

2008-01-22  Mathias Hasselmann  <mathias@openismus.com>

	Add bdk_app_launch_context_get_type() to bdk.symbols (#511308, Kazuki
	IWAMOTO).

	* bdk/bdk.symbols: Add bdk_app_launch_context_get_type().

2008-01-22  Mathias Hasselmann  <mathias@openismus.com>

	Use bango_layout_set_height() for calendar details (#506049).

	* configure.in: Require 1.19.3 for bango_layout_set_height().
	* btk/btkcalendar.c: Use bango_layout_set_height() for details.

2008-01-18  Johan Dahlin  <johan@bunny.org>

	* btk/btk-builder-convert (get_property_node): New method
	(BtkBuilderConverter._create_object): Conditionally take a node as
	a property value, so don't lose translate/context attributes if they
	are set. 
	(BtkBuilderConverter._add_action_from_menuitem): Send in Node as
	property values instead of strings.
	(#509153, Erik van Pienbroek)

2008-01-16  Mathias Hasselmann  <mathias@openismus.com>

	Change BtkCalendarDetailFunc to return newly allocated string. (#339540)

	* btk/btkcalendar.c: Release the memory returned by the detail_func.
	* btk/btkcalendar.h: Remove G_CONST_RETURN from BtkCalendarDetailFunc.
	* tests/testcalendar.c: Duplicate calendar details before returning.

2008-01-16  Christian Persch  <chpe@bunny.org>

	* btk/btkwidget.c: Store the event mask and extension event mode
	directly in the bobject data pointer, instead of in an allocated
	bint. Bug #506604.

2008-01-16  Michael Natterer  <mitch@imendio.com>

	* configure.in (BDK_PIXBUF_PACKAGES): add "bunnyio-2.0" because
	bdk-pixbuf now uses bunnyio functions.

2008-01-16  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkcombobox.c (btk_combo_box_set_model): Emit
	the notify::model signal.  (#509819, David Zeuthen)

2008-01-15  Michael Natterer  <mitch@imendio.com>

	* bdk/bdkdisplay.h
	* bdk/bdkdrawable.h
	* bdk/bdkevents.h
	* bdk/bdkbango.h
	* bdk/bdkrebunnyion.h
	* bdk/bdkrgb.h
	* bdk/bdkwindow.h: made more struct pointer and array parameters
	const. BDK should now be constified as far as possible without
	breaking source compatibility. Includes some minor cleanup like
	indentation and s/nfoo/n_foo/ (bug #508544).

	* bdk/bdkdisplay.c
	* bdk/bdkdraw.c
	* bdk/bdkevents.c
	* bdk/bdkbango.c
	* bdk/bdkrebunnyion-generic.c
	* bdk/bdkrgb.c
	* bdk/directfb/bdkdisplay-directfb.c
	* bdk/directfb/bdkwindow-directfb.c
	* bdk/quartz/bdkdisplay-quartz.c
	* bdk/quartz/bdkwindow-quartz.c
	* bdk/win32/bdkdisplay-win32.c
	* bdk/win32/bdkwindow-win32.c
	* bdk/x11/bdkdisplay-x11.c
	* bdk/x11/bdkwindow-x11.c: changed accordingly.

2008-01-14  Michael Natterer  <mitch@imendio.com>

	* btk/btkrc.c (_btk_rc_style_unset_rc_property): add cast to fix
	const warning.

	(btk_rc_parse_any): change variables to const and introduce
	another local variable to fix const warnings.

2008-01-14  Michael Natterer  <mitch@imendio.com>

	* bdk/bdkscreen.c (bdk_screen_get_property): cast the return value
	of bdk_screen_get_font_options() to bpointer to get rid of const
	warning.

2008-01-14  Michael Natterer  <mitch@imendio.com>

	* tests/testdnd.c (source_drag_data_get): fix another call to
	btk_selection_data_set().

2008-01-14  Michael Natterer  <mitch@imendio.com>

	* btk/btkoldeditable.c (btk_old_editable_selection_received): fix
	signedness warning.

2008-01-14  Michael Natterer  <mitch@imendio.com>

	* btk/btkiconcache.c (find_image_offset): remove unused variable.

2008-01-14  Michael Natterer  <mitch@imendio.com>

	* btk/btkfilesystemmodel.c (drag_source_drag_data_get): cast
	"uris" to buchar* when passing it to btk_selection_data_set().

2008-01-14  Michael Natterer  <mitch@imendio.com>

	* bdk/bdk.h
	* bdk/bdkbairo.h
	* bdk/bdkcolor.h
	* bdk/bdkgc.h
	* bdk/bdkinternals.h
	* bdk/bdkrebunnyion.h
	* bdk/bdkwindow.h: made BdkRectangle*, BdkRebunnyion* and BdkColor*
	parameters const (bug #508544).

	* bdk/bdkbairo.c
	* bdk/bdkgc.c
	* bdk/bdkwindow.c
	* bdk/bdkrectangle.c
	* bdk/bdkpolyreg-generic.c
	* bdk/bdkrebunnyion-generic.c
	* bdk/directfb/bdkcolor-directfb.c
	* bdk/directfb/bdkgc-directfb.c
	* bdk/directfb/bdkgeometry-directfb.c
	* bdk/directfb/bdkwindow-directfb.c
	* bdk/quartz/bdkcolor-quartz.c
	* bdk/quartz/bdkgc-quartz.c
	* bdk/quartz/bdkgeometry-quartz.c
	* bdk/quartz/bdkwindow-quartz.c
	* bdk/win32/bdkcolor-win32.c
	* bdk/win32/bdkgc-win32.c
	* bdk/win32/bdkgeometry-win32.c
	* bdk/win32/bdkprivate-win32.h
	* bdk/win32/bdkwindow-win32.c
	* bdk/x11/bdkcolor-x11.c
	* bdk/x11/bdkgc-x11.c
	* bdk/x11/bdkgeometry-x11.c
	* bdk/x11/bdkmain-x11.c
	* bdk/x11/bdkprivate-x11.h
	* bdk/x11/bdkwindow-x11.c: changed accordingly.

	* bdk/bdkpolyreg-generic.c: uncruftify to have proper function
	headers.

2008-01-14  Mathias Hasselmann  <mathias@openismus.com>

	Explain name choice for btk_tool_item_toolbar_reconfigured.

	* btk/btktoolitem.c: Add comment expaining name choice for
	btk_tool_item_toolbar_reconfigured.

2008-01-14  Mathias Hasselmann  <mathias@openismus.com>

	Make _btk_tool_item_toolbar_reconfigured public to allow BtkToolShell
	implementations to notify its children, when some aspect of their
	configuration changed (#509042).

	* btk/btk.symbols: Add btk_tool_item_toolbar_reconfigured.
	* btk/btktoolbar.c, btk/btktoolitem.c, btk/btktoolitem.h:
	Rename _btk_tool_item_toolbar_reconfigured.

2008-01-12  Mathias Hasselmann  <mathias@openismus.com>

	Include <btk/btktoolshell.h> from btk.h.

	* btk/btk.h: Add btktoolshell.h

2008-01-12  Mathias Hasselmann  <mathias@openismus.com>

	Print angle brackets arround e-mail addresses in the about dialog
	(#409520, Mariano Suárez-Alvarez).

	* btk/btkaboutdialog.c: Keep e-mail brackets in add_credits_page().

2008-01-11 13:28:02  Tim Janik  <timj@imendio.com>

	* btk/btktestutils.c (btk_test_create_widget): removed old testutils
	special casing so test widgets are always queues for destruction
	during teardown.

	* btk/tests/testing.c: removed bits left-over from testing without
	gtestutils.h.

2008-01-10  Tor Lillqvist  <tml@novell.com>

	* modules/other/bail/libbail-util/Makefile.am
	* modules/other/bail/tests/Makefile.am: Link with btktargetlib and
	bdktargetlib.
	
2008-01-10  Tor Lillqvist  <tml@novell.com>

	* tests/Makefile.am: Build defaultvaluetest only on Unix as it
	uses btkprintunixdialog API.

2008-01-10  Tor Lillqvist  <tml@novell.com>

	* bdk/win32/bdkdisplay-win32.c
	* bdk/win32/bdkglobals-win32.c
	* bdk/win32/bdkprivate-win32.h
	* bdk/win32/bdkscreen-win32.c
	* bdk/win32/bdkwindow-win32.c: Implement
	bdk_screen_get_monitor_width_mm(), bdk_screen_get_monitor_height_mm()
	and bdk_screen_get_monitor_plug_name(). Thanks to Kazuki
	Iwamoto. (#505753)

2008-01-10  Cody Russell  <bratsche@bunny.org>

	* bdk/win32/bdkwindow-win32.c: (bdk_window_set_transient_for),
	Properly ref/unref windows and parents.  (#506769)

2008-01-10  Richard Hult  <richard@imendio.com>

	* bdk/quartz/bdkwindow-quartz.c: (show_window_internal),
	(bdk_window_hide), (move_resize_window_internal): Move the
	tracking rect workaround from here...

	* bdk/quartz/BdkQuartzWindow.c:
	* bdk/quartz/BdkQuartzWindow.h: ...to here, and ignore window
	movements during showing/hiding operations. Fixes bug #508516.

2008-01-10  Michael Natterer  <mitch@imendio.com>

	* bdk/directfb/bdkscreen-directfb.c
	(bdk_screen_get_monitor_width_mm)
	(bdk_screen_get_monitor_height_mm)
	(bdk_screen_get_monitor_plug_name): add these functions to make
	it build again.

2008-01-10  Emmanuele Bassi  <ebassi@bunny.org>

	* btk/btkrecentchoosermenu.c:
	(idle_populate_func), (idle_populate_clean_up): Fix possible
	recursion by resetting the idle source id. (#507605, William
	Pitcock)

2008-01-10  Kristian Rietveld  <kris@imendio.com>

	* btk/btktreeview.c (btk_tree_view_motion_draw_column_motion_arrow),
	(_btk_tree_view_column_start_drag): fully initialize BdkWindowAttr to
	avoid valgrind warnings.  (#507751, patch from Christian Persch).

2008-01-10  Kristian Rietveld  <kris@imendio.com>

	* btk/btktreemodelfilter.c (btk_tree_model_filter_get_path): Fix
	a leak of the path (#504611, patch from Sadrul Habib Chowdhury).

2008-01-10  Kristian Rietveld  <kris@imendio.com>

	Fix #477175, reported by Juri Pakaste.

	* btk/btktreeprivate.h:
	* btk/btktreeview.c (btk_tree_view_top_row_to_dy): do not set
	tree_view->priv->dy here directly, just calculate the new value
	and set it on the adjustment,
	(btk_tree_view_adjustment_changed): add guards to not call
	btk_tree_view_dy_to_top_row() if we are currently in
	btk_tree_view_top_row_to_dy(),
	(btk_tree_view_put): fix coordinate annotation: these are bin_window
	coordinates, not tree coordinates,
	(btk_tree_view_real_start_editing): add cast.

	* btk/tests/treeview-scrolling.c: add an assertion for checking the
	position of the editable in the "create new row and start editing"
	tests.

2008-01-09  Michael Natterer  <mitch@imendio.com>

	* btk/btkcolorsel.c (make_label_spinbutton): remove unused
	variable.

	* btk/btkcombobox.c (btk_combo_box_detacher)
	* btk/btkicontheme.c (theme_list_contexts)
	(btk_icon_theme_lookup_icon)
	* btk/btkimcontextsimple.c (beep_window)
	* btk/btklinkbutton.c (set_link_color)
	* btk/btkuimanager.c (child_hierarchy_changed_cb): add casts to
	fix warnings.

	* btk/btkpathbar.c (_btk_path_bar_set_file_system): remove unused
	variable and add const to another to fix a warning.

2008-01-07  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkassistant.c (remove_page): Be more robust when removing 
	the current page.  (#499951, Andreas Sandberg)

2008-01-06  Johan Dahlin  <johan@bunny.org>

	* btk/btkspinbutton.c: Declare value in the example code for
	BtkSpinButton::output, as pointed out by Anders Carlsson.

2008-01-06  Christian Persch  <chpe@bunny.org>

	* btk/btkpagesetupunixdialog.c: Make the labels left-aligned,
	and remove an obsolete event box. Bug #506760.

2008-01-06  Johan Dahlin  <johan@bunny.org>

	* tests/buildertest.c (test_domain): 
	Update, BtkBuilder::translation-domain is no longer set
	
	* btk/btkbuilderparser.c (parse_interface): 
	Allow domains to be overridden in <interface>'s if a translation-domain
	is set in the builder.
	(_btk_builder_parser_parse_buffer): Do not modify the translation-domain
	of the builder, make the domain set in the <interface> apply only to strings
	in that interface.
	(#496831, Ryan Lortie)

	* btk/btkbuilder.c: Avoid adding unnecessary trailing newlines 
	to g_warning calls.

	* btk/btktreestore.c (tree_model_end_element): 
	Remove an unused variable

2008-01-06  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkspinbutton.c: Document the ::output signal and
	add an example.  (#507566, example by Owen Taylor)

2008-01-06  Johan Dahlin  <johan@bunny.org>

	* btk/btkcellrenderercombo.c:
	(btk_cell_renderer_combo_get_property),
	(btk_cell_renderer_combo_set_property):
	* btk/btkcombobox.c: (btk_combo_box_set_property):
	* btk/btkcomboboxentry.c: (btk_combo_box_entry_set_property):
	* btk/btknotebook.c: (btk_notebook_set_property):
	* btk/btkspinbutton.c: (btk_spin_button_set_property):
	* btk/btktextbuffer.c: (btk_text_buffer_set_property),
	(btk_text_buffer_get_property):
	* btk/btktextview.c: (btk_text_view_set_property):
	* btk/btktogglebutton.c: (btk_toggle_button_set_property):
	* btk/btktoolbutton.c: (btk_tool_button_set_property),
	(btk_tool_button_get_property):
	* btk/btktoolitem.c: (btk_tool_item_set_property),
	(btk_tool_item_get_property):
	* btk/btktreeview.c: (btk_tree_view_set_property):
	* btk/btkwidget.c: (btk_widget_set_property):
	* btk/btkwindow.c: (btk_window_set_property):
	Use B_OBJECT_WARN_INVALID_PROPERTY_ID consistently.
	Fixes #507585

2008-01-06  Johan Dahlin  <johan@bunny.org>

	* btk/btk-builder-convert (BtkBuilderConverter._strip_root): 
	Make sure that --root works for toplevel widgets.
	(#491847, Phil Lello)

2008-01-05  Johan Dahlin  <johan@bunny.org>

	* modules/other/bail/tests/Makefile.am: Include Makefile.decl,
	to make sure that make test-report works properly

2008-01-05  Christian Persch  <chpe@bunny.org>

        * tests/defaultvaluetest.c: Fix mem leak, and don't pass
        GType as integer through bpointer. Bug #507395.

2008-01-04  Mathias Hasselmann  <mathias@openismus.com>

	Avoid some compiler warnings (#507000).

	* btk/btkbuilder.c, btk/btkbuilderprivate.h: Use proper sign
	for value argument of _btk_builder_flags_from_string.
	* btk/btkwidget.c: Don't alias the child pointer passed
	to bdk_window_get_user_data.

2008-01-04  Michael Natterer  <mitch@imendio.com>

	* bdk/x11/bdkinput-x11.c (_bdk_device_get_history): don't forget
	to set the time in the returned BdkTimeCoords.

2008-01-03  Emmanuele Bassi  <ebassi@bunny.org>

	* btk/btkfilechooserdefault.c (recent_sort_mru): Use the
	correct comparison function (kudos to Christian Persch and
	Claudio Saavedra for spotting this)

	* btk/btkrecentchooserutils.c:
	(sort_recent_items_mru),
	(sort_recent_items_lru): Ditto as above.

2008-01-03  Johan Dahlin  <johan@bunny.org>

	* tests/defaultvaluetest.c: Make it pass again.

2008-01-02  Johan Dahlin  <johan@bunny.org>

	* tests/defaultvaluetest.c (test_type): Ignore a few more tests to 
	make it pass on Ubuntu.
	(main): Use btk_test_list_all_types () instead of providing our
	own list.
	And it no longer passes.

2007-12-30  Johannes Schmid <jhs@bunny.org>

	* btk/btknotebook.c: (btk_notebook_stop_reorder):
	Also reorder menu when reordering tabs by drag & drop
	(Bug #506474)
	
	* tests/testnotebookdnd.c: (create_notebook_with_notebooks):
	Add a menu to one of the notebooks to have a test-case for
	the change mentioned above.

2007-12-31  Philip Van Hoof  <pvanhoof@bunny.org>

        * btk/btktreemodel.c: Using GSlice for BtkTreePath

2007-12-31  Christian Persch  <chpe@bunny.org>

	* btk/btkprintunixdialog.c: (btk_print_unix_dialog_get_property):
	Plug a mem leak. Bug #506107.

2007-12-28  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkiconfactory.c (render_fallback_image): Adjust to
	icon cache api change.  (#506135, Kazuki Iwamoto)

2007-12-28  Mathias Hasselmann  <mathias@openismus.com>

	Consider "wide-separators" and "separator-height" style properties:
	The separator is drawn using btk_paint_box instead of bairo, when
	"wide-separators" is set. Also do not highlight details for previous
	or next month, if their day matches the selected day. (#339540)

	* btk/btkcalendar.c: Consider "wide-separators" and "separator-height"
	in btk_calendar_size_request and calendar_paint_day
	* btk/btkstyle.c: Modify btk_default_draw_box to use special colors
	for selected detail separators in BtkCalendar.

2007-12-28  Mathias Hasselmann  <mathias@openismus.com>

	Remove max_detail_height field from BtkCalendarPrivate. (#339540)

	* btk/btkcalendar.c: Drop max_detail_height field, and use
	a local variable instead in btk_calendar_size_request.

2007-12-28  Matthias Clasen  <mclasen@redhat.com>

	* tests/defaultvaluetest.c: Add enough exclusions to make the
	test succeed.

2007-12-28  Christian Persch  <chpe@bunny.org>

	* modules/other/bail/Makefile.am:
	* modules/other/bail/tests/*:
	* configure.in: Merge tests from standalone bail. Bug #504568.

2007-12-28  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkclipboard.c: Make the finalizer work when display is
	not set.

2007-12-28  Mathias Hasselmann  <mathias@openismus.com>

	Draw bottom shadow of BtkCalender headings. (#506113)

	* btk/btkcalendar.c: Set proper initial height for priv->header_win.

2007-12-28  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkcalendar.c: Document the initial values of year/month/day
	properties.

2007-12-28  Christian Persch  <chpe@bunny.org>

	* btk/btkfontsel.c: (btk_font_selection_get_property): Plug
	a mem leak. Bug #506096.

2007-12-28  Matthias Clasen  <mclasen@redhat.com>

	* btk/btktable.c:
	* btk/btktreeview.c:
	* btk/btkprintoperation.c:
	* btk/btkprogressbar.c:
	* btk/btkmessagedialog.c:
	* btk/btknotebook.c:
	* btk/btkprinter.c:
	* btk/btkfilesel.c:
	* btk/btklabel.c:
	* btk/btklinkbutton.c:
	* btk/btkmenu.c: More default property value corrections.

2007-12-28  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkitemfactory.c (btk_item_factory_finalize): Don't unref
	accel_group unless it is set.

2007-12-28  Matthias Clasen  <mclasen@redhat.com>

	* bdk/x11/bdkwindow-x11.c (get_default_title): Don't return NULL.

2007-12-28  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkhandlebox.c: Fix the default values of shadow and 
	shadow-type properties.

	* btk/btkfontsel.c: Fix the default values of several properties.

	* btk/btkfilesel.c: Fix the default value of the show-fileops
	property.

	* btk/btkcurve.c: Fix the default value of the curve-type property.

	* btk/btkcombo.c: Fix the default value of the enable-arrows-always
	property.

2007-12-28  Johan Dahlin  <johan@bunny.org>

	* btk/btkdialog.c (btk_dialog_buildable_custom_finished)
	(btk_dialog_buildable_custom_tag_start): Chain up. 
	This makes it possible to have accelerators tags on BtkDialog 
	subclasses.

2007-12-28  Mathias Hasselmann  <mathias@openismus.com>

	Add BTK_CALENDAR_SHOW_DETAILS display flag, which chooses if details
	are shown within the widget, or just as tooltip. (#339540)

	* btk/btkcalendar.c, btk/btkcalendar.h: Add "show-details" property
	aka. BTK_CALENDAR_SHOW_DETAILS, and use it.
	* tests/testcalendar.c: Test BTK_CALENDAR_SHOW_DETAILS. Reduce padding
	in flags vbox.

2007-12-28  Mathias Hasselmann  <mathias@openismus.com>

	Try more decent appearance of calendar details separator. (#339540)

	* btk/btkcalendar.c: Use different colors for drawing the separator,
	and make it short by one pixel on each side.

2007-12-28  Mathias Hasselmann  <mathias@openismus.com>

	Apply trivial code-style changes from attachement 101101. (#339540)

	* tests/testcalendar.c: Some updates to current BTK+ code-style.

2007-12-28  Mathias Hasselmann  <mathias@openismus.com>

	Restructure testcalendar for testing calendar details. (#339540)

	* tests/testcalendar.c: Push code arround for testing calendar details.

2007-12-28  Mathias Hasselmann  <mathias@openismus.com>

	Implement BtkTooltip API for calendar details. (#339540)

	* btk/btkcalendar.c: Add btk_calendar_query_tooltip and chain it up.
	Remember detail overflows in calendar_paint_day to show the tooltip
	only when neccessary.

2007-12-28  Mathias Hasselmann  <mathias@openismus.com>

	Without setting "detail-width-chars" and "detail-height-rows"
	properties not only the widget has to be redrawn on certain
	conditions, but also its size must be recalculated. (#339540)

	* btk/btkcalendar.c: Add calendar_queue_refresh and call
	that function instead of btk_widget_queue_draw.

2007-12-28  Mathias Hasselmann  <mathias@openismus.com>

	Consider details for size-request and expose-event. (#339540)

	* btk/btkcalendar.c: Add btk_calendar_get_detail and
	is_color_attribute functions. Change btk_calendar_size_request
	and calendar_paint_day to consider and show calender details.

2007-12-28  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkcombobox.c: Introduce local priv variables to 
	reduce ->->

2007-12-27  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkcombobox.c: Correct the default value for the 
	tearoff-title property.

	* btk/btkcellrenderertext.c: Fix the default value for the
	wrap-mode and font-scale properties.

	* btk/btkaspectratio.c: Fix the default value for the ratio
	property.

2007-12-27  Matthias Clasen  <mclasen@redhat.com>

	* gkt/btksignal.h: Fix 0<>NULL confusion in btk_signal_connect...
	defines.  (#505708,  MINAMI Hirokazu)

2007-12-27  Christian Persch  <chpe@bunny.org>
	
	* Makefile.am: Install bail.pc. Bug #505859.

2007-12-27  Mathias Hasselmann  <mathias@openismus.com>

	Add infrastructure for BtkCalendar details. (#339540)

	* btk/btkcalendar.c, btk/btkcalendar.h, btk/btk.symbols:
	Add "detail-width-chars" and "detail-height-rows" properties,
	and btk_calendar_set_detail_func function.

2007-12-27  Xan Lopez  <xan@bunny.org>

	* btk/btk.symbols: 
	* btk/btkstyle.c (btk_border_new, btk_border_copy): 

	Add btk_border_new to avoid memory allocator confusions when using
	BtkBorders. Also, make btk_border_copy use g_slice_dup. (#454042)

2007-12-27  Christian Persch  <chpe@bunny.org>

	* bdk/x11/bdkscreen-x11.c: (init_randr12): Fir the patch from 
	bug #504886 not to read unitialised memory.

2007-12-26  Xan Lopez  <xan@bunny.org>

	* btk/btkstatusbar.c (has_extra_children): take into account the
	modification of the internal frame contents to decide if we have
	extra children. (#415677)

2007-12-22  Christian Persch  <chpe@bunny.org>

	* modules/other/bail/bailitem.c: Fix mem leak. Bug #505556.

2007-12-25  Christian Persch  <chpe@bunny.org>

	* modules/other/bail/bailwindow.c: (bail_window_initialize):
	Initialise |widget|. Fixes a buglet introduced by the commit from bug
	#505226.

2007-12-25  Christian Persch  <chpe@bunny.org>

        * modules/other/bail/*.h: Use B_BEGIN_DECLS/B_END_DECLS. Bug #505268.
	
2007-12-25  Christian Persch  <chpe@bunny.org>

	* modules/other/bail/*.[ch]: Remove relocations from the batk
	factories. Remove unused bail_foo_new() functions. Fix object
	instantiation to be derivation safe by moving initialisation code
	from the removed bail_foo_new() functions to the
	BatkObjectClass::initialize implementation. Bug #505226.

2007-12-24  Matthias Clasen  <mclasen@redhat.com>

	* modules/other/bail/bailentry.c:
	* modules/other/bail/bailimage.c:
	* modules/other/bail/bailtextview.c: Remove non-multihead-safe
	uses of clipboards and settings.  (#504722, Christian Persch)

2007-12-24  Matthias Clasen  <mclasen@redhat.com>

	* bdk/bdkapplaunchcontext.c: Remove unneeded includes. (#505411,
	 Kazuki IWAMOTO)

2007-12-24  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkcombobox.c: When popping up a menu from a treeview cell,
	use the time and button information from the event.  (#504901,
	Peter Bloomfield)

2007-12-23  Cody Russell  <bratsche@bunny.org>

	* bdk/win32/bdkevents-win32.c (show_window_recurse): Check that
	the window is mapped before setting SW_RESTORE or SW_MINIMIZE.
	Fixes a regression caused by #164537 patch where transient
	windows that are hidden get shown (incorrectly) when their
	parents are minimized. (#504984)
	
2007-12-22  Christian Persch  <chpe@bunny.org>

	* modules/other/bail/bailcell.c:
	* modules/other/bail/bailcontainercell.c:
	* modules/other/bail/bailexpander.c:
	* modules/other/bail/bailtextcell.c:
	* modules/other/bail/bailtextview.c:
	* modules/other/bail/bailwindow.c: Fix compile warnings. Bug #504701.

2007-12-22  Christian Persch  <chpe@bunny.org>

	* modules/other/bail/*.c: Include config.h. Bug #504720.

2007-12-22  Christian Persch  <chpe@bunny.org>

	* modules/other/bail/*.c: Use G_DEFINE_TYPE[_WITH_CODE] instead of
	handwritten get_type functions. Bug #504661.

2007-12-23  Xan Lopez  <xan@bunny.org>

	* btk/btktreeview.c (btk_tree_view_build_tree): pass correct argument
	to g_signal_emit for TEST_EXPAND_ROW (BtkTreeIter* vs. BtkTreeIter**).

	Patch by Sadrul Habib Chowdhury (#504804)

2007-12-22  Christian Persch  <chpe@bunny.org>

	* modules/other/bail/Makefile.am: Link to bdk and btk libs. Bug
	#504645, patch by Li Yuan.

2007-12-22  Christian Persch  <chpe@bunny.org>

	* bdk/x11/bdkscreen-x11.c: (init_randr12): Plug mem leaks. Bug #504886.

2007-12-22  Christian Persch  <chpe@bunny.org>
        
        * modules/other/bail/bail.c:
        * modules/other/bail/bailbutton.c:
        * modules/other/bail/bailcell.c:
        * modules/other/bail/bailcombo.c:
        * modules/other/bail/bailcombo.h:
        * modules/other/bail/bailcombobox.c:
        * modules/other/bail/bailentry.c:
        * modules/other/bail/bailexpander.c:
        * modules/other/bail/bailmenuitem.c:
        * modules/other/bail/bailnotebook.c:
        * modules/other/bail/bailnotebookpage.c:
        * modules/other/bail/bailnotebookpage.h:
        * modules/other/bail/bailoptionmenu.c:
        * modules/other/bail/bailrange.c:
        * modules/other/bail/bailtextview.c:
        * modules/other/bail/bailtreeview.c:
        * modules/other/bail/bailtreeview.h:
        * modules/other/bail/bailwindow.c: Use bdk_threads_add_idle.
        Bug #504571.

2007-12-22  Matthias Clasen  <mclasen@redhat.com>

	* modules/other/bail/bailclist.c: Chain up the finalizer (#504570,
	Christian Persch)

2007-12-21  Richard Hult  <richard@imendio.com>

	* bdk/quartz/bdkwindow-quartz.c: (_bdk_windowing_window_destroy):
	Plug leak of destroyed subviews, fixes bug #504753.

2007-12-20  Johan Dahlin  <johan@bunny.org>

	* tests/Makefile.am (TEST_PROGS): 
	* tests/defaultvaluetest.c: Add a test for default values,
	based on program by Christan Perch

2007-12-20  Johan Dahlin  <johan@bunny.org>

	* btk/btk-builder-convert (BtkBuilderConverter._remove_window): 
	Refactor to avoid some duplication.
	Convert toplevel BtkMenu's top popups and not menubars in the ui manager.
	Fixes #504749, Yuri Pimenov

2007-12-20  Kristian Rietveld  <kris@imendio.com>

	* configure.in: RYuri Pimenovemove leftovers from old XRandR check.  Makes
	the build work again on systems without xrandr 1.2.

2007-12-20  Christian Persch  <chpe@bunny.org>

	* configure.in:
	* modules/other/bail/libbail-util/Makefile.am:
	Keep the same libtool version as the standalone	libbail-util had.
        Bug #504643.

2007-12-20 15:30:09  Tim Janik  <timj@imendio.com>

	* Makefile.decl: generate HTML reports for test-report perf-report full-report.

2007-12-20  Alexander Larsson  <alexl@redhat.com>
        
	* bdk/x11/bdkapplaunchcontext-x11.c:
	Update for bunnyio API changes

2007-12-20  Richard Hult  <richard@imendio.com>

	* bdk/quartz/BdkQuartzWindow.c:
	* bdk/quartz/BdkQuartzWindow.h: Make manual resizing smoother by
	processing events after changing the size.

2007-12-20  Richard Hult  <richard@imendio.com>

	* modules/other/bail/bailwindow.c: (bail_window_get_mdi_zorder):
	Add stub for quartz to fix build.

2007-12-20  Christian Persch  <chpe@bunny.org>

	* modules/other/bail/Makefile.am:
	* modules/other/bail/bailimage.c: (bail_image_class_init),
	(bail_image_init), (elide_underscores), (bail_image_get_name),
	(batk_image_interface_init), (bail_image_finalize):
	* modules/other/bail/bailimage.h:
	R modules/other/bail/bailintl.h:
	* po/POTFILES.skip: Use the stock item's label as the name of the
	accessible in bailimage.c. Bug #504246.

2007-12-19  Mathias Hasselmann  <mathias@openismus.com>

	Avoid some compiler warnings and remove obsolete code. (#339540)

	* btk/btkcalendar.c: Change week and year variable in
	calendar_paint_week_numbers from bint to buint. Remove obsolete "#if
	0" block from calendar_paint_day: The feature in question is handled
	few lines above. Cast data returned by btk_selection_data_get_text()
	to (bchar*) in btk_calendar_drag_data_received.

2007-12-19 17:05:31  Tim Janik  <timj@imendio.com>

	* modules/other/Makefile.am: include Makefile.decl to unbreak test rules.

2007-12-19  Johan Dahlin  <johan@bunny.org>

	* tests/buildertest.c (test_object_properties): 
	Add another call to btk_builder_add_string after using
	delayed properties, as reported in #504393 but already
	fixed in #495769.

2007-12-18  Christian Persch  <chpe@bunny.org>

	* configure.in:
	* docs/reference/Makefile.am:
	* docs/reference/libbail-util/*:
	* bail-uninstalled.pc.in:
	* bail.pc.in:
	* modules/Makefile.am:
	* modules/other/Makefile.am:
	* modules/other/bail/*:
	* modules/other/bail/libbail-util/*:
	* po/POTFILES.skip: Integrate bail into btk+. Bug #169488.

2007-12-17  Matthias Clasen  <mclasen@redhat.com>

	* btk/btksettings.c: Add a btk-im-module BTK setting
	* bdk/win32/bdkproperty-win32.c: 
	* bdk/x11/bdksettings.c: ...and back it by a Btk/IMModule X setting.

	* btk/btkimmodule.[hc]: 
	* btk/btkimmulticontext.[hc]: When determining the default context,
	look at the btk-im-module setting, and listen for changes to the
	setting.  (#502446, Akira Tagoh)

2007-12-17  Kristian Rietveld  <kris@imendio.com>

	* btk/btktooltip.c (btk_tooltip_finalize),
	(btk_tooltip_set_last_window): use a weak pointer to set last_window
	to NULL as soon as it's destroyed.  (#496546, patch from
	Benjamin Berg).

2007-12-17  Kristian Rietveld  <kris@imendio.com>

	* btk/btktreeviewcolumn.c (btk_tree_view_column_update_button):
	always determine what arrow to show if show_sort_indicator is true.
	(#352738, Chris Vine).

2007-12-16  Mathias Hasselmann  <mathias@openismus.com>

	Prevent assertion failure in btk_paned_find_neighbours. (#503824,
	Sébastien Granjoux)

	* btk/btkpaned.c: Call btk_container_forall instead of
	btk_container_foreach in get_child_panes.

2007-12-15  Xan Lopez  <xan.lopez@nokia.com>

	* btk/btktreeviewcolumn.c (btk_tree_view_column_cell_layout_reorder):

	Plug leak: When reordering the info in the list the old node is
	removed but not freed. (#503569)

2007-12-15  Sebastian Dröge  <slomo@circular-chaos.org>

	* bdk/directfb/bdkcursor-directfb.c: (bdk_cursor_new_for_display):
	Use u32 instead of __u32 and u8 instead of __u8 as the other types
	are deprecated since DirectFB 1.0.0. If compiling with an older
	version define the new type name to the old types. Fixes bug #503190.

2007-12-14  Ray Strode  <rstrode@redhat.com>

	* btk/btkwidget.c: Suggest g_signal_connect (..., "realize", ...)
	instead of g_signal_connect_after (..., "realize", ...) as an
	alternative to btk_widget_realize () (bug 503537).

2007-12-14  Michael Natterer  <mitch@imendio.com>

	* bdk/bdkinternals.h
	* bdk/bdkapplaunchcontext.h: #include <bunnyio/bunnyio.h> instead of
	individual files.

	* bdk/bdkapplaunchcontext.c
	* bdk/x11/bdkapplaunchcontext-x11.c: remove all bunnyio includes, the
	header already includes everything now.

2007-12-14  Mathias Hasselmann  <mathias@openismus.com>

	Correct "Since:" tags for BtkPageSetup and BtkPrintSettings as
	next stable release shall be 2.16, not 2.14 - even if disagree.

	* btk/btkpagesetup.c, btk/btkprintsettings.c: s/2.14/2.16/

2007-12-14  Mathias Hasselmann  <mathias@openismus.com>

	Change BtkToolItem to retrieve its properties from BtkToolShell
	interface, instead of relying on being child of a BtkToolbar.
	(#5034079)

	* btk/btk.symbols, docs/reference/btk/btk-docs.sgml,
	docs/reference/btk/btk-sections.txt: Add BtkToolShell symbols.
	* docs/reference/btk/tmpl/btktoolitem.sgml: Move section docs inline.
	* btk/btktoolbar.c: Implement BtkToolShellIface.
	* btk/btktoolbar.h: Remove _btk_toolbar_rebuild_menu.
	* btk/btktoolitem.c: Use BtkToolShell, instead of BtkToolbar.
	Take section docs from template file and update them for BtkToolShell.
	* btk/Makefile.am: Add btk/btktoolshell.c and btk/btktoolshell.h.
	* btk/btktoolshell.c, btk/btktoolshell.h: New BtkToolShellIface.

2007-12-14  Mathias Hasselmann  <mathias@openismus.com>

	Extract loading of BtkPageSetup and BtkPrintSettings from their
	*_new_*() functions and move that code into separate
	*_load_*() functions (#475565).

	* btk/btk.symbols, btk/btkpagesetup.c, btk/btkpagesetup.h:
	Extract btk_page_setup_load_file, btk_page_setup_load_key_file,
	btk_print_settings_load_file and btk_print_settings_load_key_file.
	Change the matching *_new_*() functions to use those functions.

2007-12-14  Matthias Clasen  <mclasen@redhat.com>

	* btk/btk.symbols:
	* btk/btktooltip.[hc]: Add btk_tooltip_set_icon_from_icon_name().

2007-12-14  Kristian Rietveld  <kris@imendio.com>

	* btk/tests/liststore.c:
	* btk/tests/treestore.c: added tests for insertion functions.

Thu Dec 13 13:14:50 2007  Søren Sandmann  <sandmann@redhat.com>

	* Add RandR 1.2 support

	- New monitors_changed signal - New API to get width/height of
	  monitors, and the name of the plug

2007-12-13  Kristian Rietveld  <kris@imendio.com>

	* btk/tests/liststore.c:
	* btk/tests/treestore.c: test the move and swap functions on a
	store with only one node.

2007-12-13  Kristian Rietveld  <kris@imendio.com>

	* btk/btktestutils.c (btk_test_init): add a call to
	g_test_bug_base().

	* btk/tests/treeview-scrolling.c: add g_test_bug() calls to
	appriopriate tests.

2007-12-13  Kristian Rietveld  <kris@imendio.com>

	* btk/tests/liststore.c:
	* btk/tests/treestore.c: start composing tests for the list and tree
	store.

	* btk/tests/treeview-scrolling.c: added automated tests for
	BtkTreeView's scrolling "subsystem".

	* btk/tests/Makefile.am: updated; added new test programs.

2007-12-13  Mathias Hasselmann  <mathias@openismus.com>

	Make the code compile again after the BdkAppLaunchContext changes.

	* configure.in: Add bunnyio-2.0 to BDK_PACKAGES.
	* bdk/bdkinternals.h: Include <bunnyio/gappinfo.h>.

2007-12-12  Matthias Clasen  <mclasen@redhat.com>

	* bdk/bdkapplaunchcontext.c: Add docs

2007-12-12  Matthias Clasen  <mclasen@redhat.com>

	* bdk/bdkapplaunchcontext.[hc]: Implement GAppLaunchContext 
	in bdk, providing startup notification.  (#503203)

	* bdk/x11/bdkapplaunchcontext-x11.c: 
	* bdk/win32/bdkapplaunchcontext-win32.c:
	* bdk/quartz/bdkapplaunchcontext-quartz.c: 
	* bdk/directfb/bdkapplaunchcontext-directfb.c: Backend-specific
	parts. All but X11 are just empty stubs for now.

	* bdk/bdk.symbols:
	* bdk/bdkinternals.h:
	* bdk/Makefile.am:
	* bdk/x11/Makefile.am: 
	* bdk/win32/Makefile.am: 
	* bdk/quartz/Makefile.am: 
	* bdk/directfb/Makefile.am: Necessary glue.

2007-12-12  Mathias Hasselmann  <mathias@openismus.com>

	* btk/btkdnd.c: Another attempt to improve btk_drag_dest_set docs.

2007-12-11  Attilio Fiandrotti  <attilio.fiandrotti@gmail.com>

	* bdk/directfb/bdktestutils-directfb.c:
	* bdk/directfb/Makefile.am: Applied a patch by Claudio Ciccani
	which adds testing functions to the DirectFB backend.

2007-12-11  Attilio Fiandrotti  <attilio.fiandrotti@gmail.com>

	* bdk/directfb/bdkdrawable-directfb.c: Applied a patch by Claudio
	Ciccani	which fixes the mixing of bdk and bairo rendering.

2007-12-11  Mathias Hasselmann  <mathias@openismus.com>

	* btk/btkdnd.c, btk/btkwidget.c: Mention impact of BtkDestDefaults
	on "drag-motion" handlers. Clearify documentation for
	btk_drag_dest_set.

2007-12-11 15:44:01  Tim Janik  <timj@imendio.com>

        * buildertest.c: made unnecessarily exported symbols static.
        switched g_return_if_fail() statements in tests to assertions.
        special cased currently failing Widget/accesibility test to
        run only for g_test_thorough(), so it doesn't break make check.
        some coding style fixes.

        * Makefile.am: added buildertest to TEST_PROGS.

2007-12-11  Stefan Kost  <ensonic@users.sf.net>

	* docs/tutorial/btk-tut.sgml:
	  Use btk_widget_get_parent_window() instead of widget->parent->window.

2007-12-10  Richard Hult  <richard@imendio.com>

	* bdk/quartz/Makefile.am:
	* bdk/quartz/bdkquartz.h:
	* bdk/quartz/bdkwindow-quartz.c: Install backend specific
	header (bug #405915). Also add a getter for the toplevel nswindow.

2007-12-10  Richard Hult  <richard@imendio.com>

	* bdk/quartz/bdkdrawable-quartz.c:
	(bdk_quartz_drawable_get_context),
	(bdk_quartz_drawable_release_context):
	* bdk/quartz/bdkeventloop-quartz.c: (bdk_event_prepare),
	(bdk_event_check), (bdk_event_dispatch), (poll_func):
	* bdk/quartz/bdkwindow-quartz.h: Replace the autorelease pools
	used for each drawing context and in prepare, dispatch and poll
	with one that exists across each main loop iteration. Fixes leaks
	on leopard and protects against future leaks introduce when the
	underlying system changes again (bug #492977).

2007-12-10  Richard Hult  <richard@imendio.com>

	* bdk/quartz/bdkwindow-quartz.c: (move_resize_window_internal):
	Fix the check for no changes to position and size.

2007-12-10  Richard Hult  <richard@imendio.com>

	* bdk/quartz/BdkQuartzView.c: Ignore drawRect calls with zero
	sized areas at (0, 0), patch from Paul Davis.

2007-12-10  Richard Hult  <richard@imendio.com>

	* bdk/quartz/bdkprivate-quartz.h: 
	* bdk/quartz/bdkeventloop-quartz.c:
	(_bdk_quartz_event_loop_get_pending),
	(_bdk_quartz_event_loop_check_pending),
	(_bdk_quartz_event_loop_release_event), (bdk_event_prepare),
	(bdk_event_check), (bdk_event_dispatch):
	* bdk/quartz/bdkevents-quartz.c: (bdk_events_pending)
	(_bdk_events_queue): Fix a bug where we could end up trying to
	handle the same event more than once. Based on patch from Paul
	Davis.

2007-12-10  Tor Lillqvist  <tml@novell.com>

	* btk-zip.sh.in: Include bin/btk-builder-convert in the dev
	package. (#502850)

2007-12-10  Matthias Clasen  <mclasen@redhat.com>

	* btk/btknotebook.c (btk_notebook_real_remove): Another fix
	to avoid further fallout from the fix for bug 388321.

2007-12-09 09:56:06  Attilio Fiandrotti  <attilio.fiandrotti@gmail.com>

	* bdk/directfb/bdkgc-directfb.c:
	* bdk/directfb/bdkdrawable-directfb.c:
	* bdk/directfb/bdkdirectfb.h:
	* bdk/directfb/bdkwindow-directfb.c:
	* bdk/directfb/bdkprivate-directfb.h: Committed several patches
	(window_flip_group, no_background_pixmap_fix, opt_temp_rebunnyion2,
	blit_after_bairo_fix, rect_clip_fix, fast_blend, opt_temp_rebunnyion_etc,
	opt_clip_rebunnyion_and_fill_rects, no_state_resets) by Denis Oliver Knopp
	which are expected to improve the performance of the DirectFB backend.
	Experimental pieces of code (BDK_DIRECTFB_NO_EXPERIMENTS) are disabled.

2007-12-07  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkcontainer.c: Correct the documentation of child
	property getter arguments.  (#501992, David Brigada)

2007-12-07  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkfilechooserdefault.c (shortcuts_reload_icons): Don't
	leak pixbufs.  (#502250, Yevgen Muntyan)

2007-12-07  Yevgen Muntyan  <muntyan@tamu.edu>

	* btk/btkprintunixdialog.c:
	* btk/btkpagesetupunixdialog.c: added alternative button order in
	Print and Page Setup dialogs (#502202).

2007-12-07 13:16:33  Tim Janik  <timj@imendio.com>

	* Makefile.decl: skip tests if bdktarget!=x11, since GUI tests need
	Xvfb. only start Xvfb if TEST_PROGS is not empty. moved "set -e" out
	of XVFB_START, since it's the BTESTER invokation that needs this.

2007-12-06  Tommi Komulainen  <tommi.komulainen@iki.fi>

	* bdk-pixbuf/bdk-pixbuf.symbols:
	* bdk/bdk.symbols:
	* bdk/btk.symbols: Remove trailing whitespace that can trigger false
	positives in abicheck.sh

2007-12-06 18:45:06  Attilio Fiandrotti  <attilio.fiandrotti@gmail.com>

	* bdk/directfb/bdkevents-directfb.c: Committed a patch by DOK to fix
	BDK events generations in the DirectFB backend.

2007-12-06 13:55:06  Tim Janik  <timj@imendio.com>

	* Makefile.decl: replaced seq(1) invokation for X11 ids with a hardcoded
	set of likely unused display ids, because MacOS has no seq(1) command.

2007-12-06  Richard Hult  <richard@imendio.com>

	* bdk/quartz/bdkevents-quartz.c:
	(synthesize_crossing_events_for_ns_event): Fix warning when
	switching spaces in leopard.

2007-12-06 13:38:36  Tim Janik  <timj@imendio.com>

	* tests/floatingtest.c: ported to new testing framework.

	* tests/Makefile.am: run floatingtest as testing framework test.

2007-12-06 10:44:52  Tim Janik  <timj@imendio.com>

	* tests/autotestfilechooser.c: majorly speed up execution by reducing
	timeouts and converting main loop sleeps to pending/iterate loops with
	very low priority async handlers. eliminate output for non-verbose
	tests. assert successfull subtests in all test functions. use testing
	framework in main().

	* tests/Makefile.am: add autotestfilechooser to TEST_PROGS, so it's
	executed inside Xvfb upon make check.

2007-12-06 08:23:38  Tim Janik  <timj@imendio.com>

	* tests/objecttests.c: use string comparisons for string property
	values and get rid of referencing symbols in array initialization.

2007-12-05 18:59:59  Tim Janik  <timj@imendio.com>

	* btk+/Makefile.decl: run tests in current dir after setting up the
	logging directory, so their results get properly merged into the
	resulting test log.

	* btk+/btk/btktestutils.[hc]: added btk_test_list_all_types() for
	tests to loop over registered Bdk/Btk+ types.

	* btk+/tests/objecttests.c: new test program, implements automated
	property tests. several properties are blacklisted because they
	seem to trigger Bdk/Btk+ bugs. ./objecttests -m thorough --verbose
	can be used to test blacklisted properties and see which proprty failed.

2007-12-04  Richard Hult  <richard@imendio.com>

	* bdk/quartz/bdkwindow-quartz.c: (_bdk_windowing_window_init):
	Fully initialize the root window, fixes bug #501583.

2007-12-04  Matthias Clasen  <mclasen@redhat.com>

	* btk/btknotebook.c: Modify the tab-label-destroy fix to not
	crash epiphany.

2007-12-03  Richard Hult  <richard@imendio.com>

	* btk/btkquartz.c: (_btk_quartz_set_selection_data_for_pasteboard):
	Don't crash when dragging from a source that doesn't support uri
	lists (bug #499868, Paul Davis).

2007-12-03  Richard Hult  <richard@imendio.com>

	* bdk/quartz/bdkwindow-quartz.c:
	(bdk_window_impl_quartz_begin_paint_rebunnyion): Don't crash when a
	parent relative bg pixmap is set, and no parent has a bg
	pixmap. Fixes bug #500804.

2007-12-03  Matthias Clasen  <mclasen@redhat.com>

	Two optimizations for icon cache lookups.

	* btk/btkiconcache.[hc]:
	* btk/btkicontheme.c: Remember the directory index for
	subdirectories, instead of running over the directory list
	again and again.

	* btk/btkiconcache.c (find_image_offset): Remember the last 
	chain and try it first; this helps with the the usage patterns
	in btkicontheme.c, where the same icon is queried for a lot
	of subdirectories.

2007-12-03 15:18:17  Tim Janik  <timj@imendio.com>

	* btk/Makefile.am (btktypefuncs.c): use 'grep -o' to extract _get_type
	functions from header files. this should be portable across linux and
	Mac OS, unlike the previpous sed expression.

2007-12-1  Cody Russell  <bratsche@bunny.org>

	* btk/btkpaned.c: (btk_paned_set_position) [Win32]:
	On Windows, queue a redraw of child2 whenever we set
	the pane handle position.  This is unfortunately kind
	of hacky, but solves the visual artifacts that were
	occuring on at least certain types of child widgets
	(e.g., text views and tree views) that are inside
	horizontal or vertical panes. (#144269)

2007-11-30  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkrc.c: Fix doc typos.  (#500672, David Lambert)

2007-11-29  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkmenuitem.c (btk_menu_item_paint): Remove leftover
	debug spew.

2007-11-29  Matthias Clasen  <mclasen@redhat.com>

	* btk/Makefile.am: Fix ordering of subdirs.

2007-11-28  Tor Lillqvist  <tml@novell.com>

	A proper build of GNU libintl is supposed to export the variable
	_nl_msg_cat_cntr. configure looks for that variable in order to
	recognize GNU gettext. If it sees that it is indeed GNU gettext
	that is used, it decides to install message catalogs in
	share/locale, otherwise in lib/locale. Until now on Windows I have
	built BTK+ against a build of GNU gettext that did not export
	_nl_msg_cat_cntr. But this will change, so we can't assume message
	catalogs are always in lib/locale.

	* btk/btkmain.c: (_btk_get_localedir) [Win32]: Rework to handle
	BTK_LOCALEDIR being either in "lib" or "share". Move the function
	before the inclusion of btkprivate.h so that it sees the original
	BTK_LOCALEDIR.

	* btk-zip.sh.in: Check whether the message catalogs are in
	share/locale or lib/locale.

	* config.h.win32.in: Tack on "/share/locale" to BTK_LOCALEDIR so
	that the code in _btk_get_localedir() will find the slashes.

2007-11-28  Tor Lillqvist  <tml@novell.com>

	* btk/Makefile.am: Improve portability. The -o option is present
	only in newish GNU egreps. Use one more sed in the pipeline
	instead.

2007-11-28  Tor Lillqvist  <tml@novell.com>

	Fix #375893, patch by Ben Hague:

	* btk/btkfilesystemwin32.c (get_viewable_logical_drives): Wrapper
	around GetLogicalDrives() that takes also the viewable drive
	restrictions in the Registry (which are usually the result of an
	Active Directory Group Policy) into account.

	(check_volumes, btk_file_system_win32_list_volumes) Call
	get_viewable_logical_drives() instead of GetLogicalDrives().

2007-11-27  Matthias Clasen <mclasen@redhat.com>

	* btk/btkwindow.c (btk_window_move_resize): Zero some
	variables to silence valgrind.  (#495124, Morten Welinder)

2006-11-26  Ryan Lortie  <desrt@desrt.ca>

	* docs/reference/btk/tmpl/btkbuildable.sgml: add clarification stating
	that the construct_child function is responsible for returning a
	reference.
	* btkbuilder.c (_btk_builder_construct): remove g_object_ref() for
	objects from constructors
	* btkuimanager.c (btk_ui_manager_buildable_construct_child): add
	g_object_ref() to this construction function (it's the only
	implementer in BTK)

	Fixes #496645.

2006-11-26  Ryan Lortie  <desrt@desrt.ca>

	* btkbuilder.c: remove concept of root objects and just refcount
	all objects in the builder.  Fixes #496651.

2007-11-26  Ryan Lortie  <desrt@desrt.ca>

	* tests/buildertest.c (test_window): fix invalid free

2007-11-26  Josselin Mouette <joss@malsain.org>

	reviewed by: Federico Mena Quintero

	* btk/btkfilechooserdefault.c: (shortcuts_append_paths),
	(shortcuts_add_bookmarks), (shortcuts_selection_changed_cb),
	(shortcuts_list_create), (btk_file_chooser_default_should_respond):
	Make the shortcuts activate with a single click. (#148828)
        Fix a few things affected by the change:
	  - Set selection mode to BTK_SELECTION_SINGLE to allow a case 
	    where no shortcut is selected.
	  - Don't activate a shortcut in the response callback.
	  - Filter out duplicate entries in volumes and bookmarks to 
	    avoid the selection to change when reordering them with DnD.

2007-11-26  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkmain.c:
	* btk/btknotebook.c:
	* btk/btkplugprivate.h:
	* btk/btksocket.c:
	* btk/btksocketprivate.h:
	* btk/btktable.c: Fix up some doc comments to shut up btk-doc.

2007-11-26  Matthias Clasen  <mclasen@redhat.com>

	* configure.in: Use $CUPS_CONFIG instead of hardcoded cups-config.
	(#495574, Richard Hult)

2007-11-26  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkprintunixdialog.c: Change some labels to be clearer.
	String change !   (#376361, Sven Neumann)

2007-11-26  Matthias Clasen  <mclasen@redhat.com>

	* btk/btknotebook.c (btk_notebook_update_labels): Short-circuit on
	destroy.
	(btk_notebook_destroy): Destroy tab_label widgets. (#388321, Morten
	Welinder)

2007-11-26  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkassistant.c: Improve alternative button
	ordering.  (#476827, Yevgen Muntyan, patch by Carlos Garnacho)

2007-11-26  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkcalendar.c: Fix a theming problem with colors
	in BtkCalendar.  (#499703, Michael Hofmann)

2007-11-26  Matthias Clasen  <mclasen@redhat.com>

	* configure.in: Bump bunnylib requirement to 2.15.0 (for g_test_init)

2007-11-26  Matthias Clasen  <mclasen@redhat.com>

	Use templates for bunnylib-mkenums calls instead of 
	complicated commandlines in Makefiles.  (#429910)

	* bdk-pixbuf/Makefile.am:
	* bdk/Makefile.am: 
	* btk/Makefile.am: 
	* perf/Makefile.am: Use templates for bunnylib-mkenums

	* bdk-pixbuf/bdk-pixbuf-enum-types.[ch].template:
	* bdk/bdkenumtypes.[ch].template: 
	* btk/btktypebuiltings.[ch].template: 
	* perf/typebuiltins.[ch].template: The templates

2007-11-26  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkfilechooserbutton.c:
	* btk/btktoolbar.c: Don't use buint8 for bitfields, since
	some compilers choke on that.  (#467722)

2007-11-26  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkaboutdialog.c (btk_about_dialog_set_website): Add a note
	about hook setup.  (#425004, Emmanuele Bassi)

2007-11-26  Tor Lillqvist  <tml@novell.com>

	* bdk/win32/bdkwindow-win32.c (bdk_window_fullscreen): Use the
	monitor the window currently is on, not always the primary
	monitor. (#463865, Tim Evans)

2007-11-26  Tor Lillqvist  <tml@novell.com>

	* bdk/win32/bdktestutils-win32.c: New file, dummy implementations.

	* bdk/win32/Makefile.am: Add it.

2007-11-26  Tor Lillqvist  <tml@novell.com>

	* configure.in: Don't add jasper to all_loaders if no libjasper.

2007-11-25  Bastien Nocera  <hadess@hadess.net>

	* configure.in: Add detection for libjasper, used by the
	bdk-pixbuf JPEG2000 loader

2007-11-25  Matthias Clasen  <mclasen@redhat.com>

	* configure.in: Require btk-doc 1.8

	* */*.c: Use btk-doc abbreviations for examples in docs.

2007-11-25  Matthias Clasen  <mclasen@redhat.com>

	* btk/btktreeview.c (btk_tree_view_set_show_expanders): Fix a
	typo.  (#498922)

2007-11-25  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkdialog.c: Move signal and property documentation inline,
	fix a problem with the ::response signal docs.  (#499133, Josselin
	Mouette)

2007-11-22 15:48:26  Tim Janik  <timj@imendio.com>

        * Makefile.decl: initialize automake variables EXTRA_DIST and
	TEST_PROGS for unconditional appending via += in other makefiles.
	define recursive test targets: test, test-report, perf-report,
	full-report, as described here:
      http://mail.bunny.org/archives/btk-devel-list/2007-November/msg00000.html
	the test targets will execute Btk+ test programs within an Xvfb session.

        * btk/btktestutils.c: call g_test_init() from btk_test_init().

        * btk/tests/testing.c: use g_test_add_func() to register tests and use
	g_test_run() to run the tests to integrate with the testing framework.

        * btk/tests/Makefile.am: removed exemplary testing rules.

        * Makefile.am, btk/tests/Makefile.am, btk/Makefile.am:
        * btk/xdgmime/Makefile.am, btk/theme-bits/Makefile.am:
        * tests/Makefile.am, docs/reference/bdk-pixbuf/Makefile.am:
        * docs/reference/bdk/Makefile.am, docs/reference/btk/Makefile.am:
        * docs/reference/Makefile.am, docs/tools/Makefile.am:
        * docs/tutorial/Makefile.am, docs/faq/Makefile.am, docs/Makefile.am:
        * bdk-pixbuf/pixops/Makefile.am, bdk-pixbuf/Makefile.am:
        * demos/btk-demo/Makefile.am, demos/Makefile.am:
        * modules/input/Makefile.am, modules/printbackends/file/Makefile.am:
        * modules/printbackends/test/Makefile.am, modules/printbackends/Makefile.am:
        * modules/printbackends/cups/Makefile.am, modules/printbackends/lpr/Makefile.am:
        * modules/engines/ms-windows/Theme/btk-2.0/Makefile.am:
        * modules/engines/ms-windows/Theme/Makefile.am:
        * modules/engines/ms-windows/Makefile.am:
        * modules/engines/Makefile.am,  modules/engines/pixbuf/Makefile.am:
        * modules/Makefile.am, m4macros/Makefile.am, perf/Makefile.am:
        * contrib/Makefile.am, contrib/bdk-pixbuf-xlib/Makefile.am:
        * bdk/directfb/Makefile.am, bdk/linux-fb/Makefile.am:
        * bdk/quartz/Makefile.am, bdk/win32/rc/Makefile.am:
        * bdk/win32/Makefile.am, bdk/x11/Makefile.am, bdk/Makefile.am:
	include $(top_srcdir)/Makefile.decl, adapted EXTRA_DIST assignments.

2007-11-22  Matthias Clasen  <mclasen@redhat.com>

	* modules/printbackends/cups/btkcupsutils.c: Fix a casting problem.
	(#485662, patch by Herbert Valerio Riedel)

2007-11-22  Matthias Clasen  <mclasen@redhat.com>

	* btk/btktextiter.c: Fix an aliasing problem.  (#347585, Ed Catmur)

2007-11-21  Richard Hult  <richard@imendio.com>

	* bdk/quartz/Makefile.am: * bdk/quartz/bdktestutils-quartz.c: Add
	stubs for the testing functions to fix the build.

2007-11-21  Behdad Esfahbod  <behdad@bunny.org>

	* tests/testrichtext.c (setup_buffer): Fix C89 compilation issue.
	(#467711, The Written Word)

2007-11-21  Ross Burton  <ross@openedhand.com>

	* bdk/x11/bdksettings.c:
	Add xsetting for btk-scrolled-window-placement (#458103).

2007-11-21  Behdad Esfahbod  <behdad@bunny.org>

	* btk/btkmenuitem.c (btk_menu_item_class_init),
	(btk_menu_item_paint): Make BtkMenuItem's arrow size themeable.
	(#469239, Michael Natterer)

2007-11-21  Behdad Esfahbod  <behdad@bunny.org>

	* bdk/x11/bdksettings.c (bdk_settings_names, bdk_settings_map): Add
	Btk/EnableAccels and Btk/EnableMnemonics xsettings for
	btk-enable-accels and btk-enable-mnemonics BtkSettings respectively.
	(#436536, Tommi Komulainen)

2007-11-21  Matthias Clasen  <mclasen@redhat.com>

	* btk/btktoolbar.c: Fix the default value of the toolbar-style
	property.  (#489782, Jan Janech)

2007-11-20  Matthias Clasen  <mclasen@redhat.com>

	* btk/btkimage.c (animation_timeout): Avoid drawing one too many
	frames.  (#107398, Owen Taylor, Miguel Gomez)

Tue Nov 20 15:19:42 2007 +0100 Tim Janik

	Moved Bdk test functions from Btk+ to Bdk test utils.

	* bdk/Makefile.am: added bdktestutils.h to public includes.

	* bdk/bdk.h: added bdktestutils.h to public includes.

	* bdk/bdk.symbols: added bdk_test_simulate_button,
	bdk_test_simulate_key, bdk_test_render_sync.

	* bdk/bdktestutils.h: new file, added prototypes for
	bdk_test_simulate_button, bdk_test_simulate_key, bdk_test_render_sync.

	* bdk/x11/Makefile.am: build bdktestutils-x11.c.

	* bdk/x11/bdktestutils-x11.c: implemented bdk_test_simulate_button,
	bdk_test_simulate_key, bdk_test_render_sync.

	* btk/btktestutils.c:
	* btk/btktestutils.h:
	* btk/btk.symbols: removed btk_test_simulate_button
	btk_test_simulate_key, btk_test_xserver_render_sync.

	* btk/tests/testing.c: call bdk_test_render_sync.

Thu Nov 15 13:11:39 2007 +0100 Tim Janik

	Added unit tests for Btk+ testing utilities.

	* btk/tests/testing.c: added a sample test program that tests Btk+ test
	utility functions. some g_test_* related portions are disabled and need
	to be enabled once Btk+ depends on a new bunnylib with the GLib testing
	framework integrated.

	* btk/tests/Makefile.am: new subdirectory to include quick Btk+
	tests.  added exemplary test rules to run tests inside Xvfb. this
	needs to depend on btester for full fledged testing.

	* btk/Makefile.am: build btk+/btk/tests, define
	-DBTK_ENABLE_BROKEN when collecting _get_type functions to catch
	e.g. btk_text_get_type().

	* configure.in: create btk/tests/Makefile.in and btk/tests/Makefile.

Thu Nov 15 11:55:34 2007 +0100 Tim Janik

	Added Btk+ testing utilities.

	* btk/btktestutils.h, btk/btktestutils.c: added unit test utility
	functions.  for the most part, the functions herein involve
	navigating and interacting with dialog elements programatically,
	to automate user interaction tests of dialogs and widgets.

	* btk/btk.h: include btk/btktestutils.h as public API.

	* btk/btk.symbols: added btk_test_* symbols.

	* btk/Makefile.am: include btktestutils.h and btktestutils.c into
	the build.  generate btktypefuncs.c which contains a list of all
	_get_type functions in Btk+ and Bdk.

2007-11-20  Bastien Nocera  <hadess@hadess.net>

	* configure.in: add support for conditional icns bdk-pixbuf loader
	(Closes: #395738)

2007-11-19 10:31:26  Tim Janik  <timj@imendio.com>

	* configure.in: updated version number to 2.15.0 for development.

2007-11-19 10:27:39  Tim Janik  <timj@imendio.com>

	=== Branch for 2.12 ===


Wed Feb 24 05:27:44 CST 1999 Shawn T. Amundson <amundson@btk.org>

	* Released BTK+ 1.2.0

	* AUTHORS: updated
	
Wed Feb 24 05:26:20 CST 1999 Shawn T. Amundson <amundson@btk.org>

	* btk/btkitemfactory.h: added a dummy bpointer to 
	  BtkItemFactoryClass for Tim Janik.

Mon Feb 22 21:22:11 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkcontainer.h btk/btkwidget.h: Added some
	  padding to class structures to allow addition
	  of signals without breaking binary compatibility.

Thu Feb 25 13:38:38 1999  Tim Janik  <timj@btk.org>

	* btk/btkscrolledwindow.c (btk_scrolled_window_size_request): still
	request the extra width or height if the corresponding scrollbar is
	already visible (the change from 09:50 needs to apply to policy ==
	BTK_POLICY_AUTOMATIC only).

Thu Feb 25 11:27:36 1999  Tim Janik  <timj@btk.org>

	* TODO: updates, i left the text widget related portions in there,
	to serve as a guide line for things to watch out for when it gets
	reimplemented.

Thu Feb 25 09:50:38 1999  Tim Janik  <timj@btk.org>

	* btk/btkscrolledwindow.c (btk_scrolled_window_size_request): don't add
	extra width or height if the requested size is mandatory (i.e. set
	through child->usize).

Thu Feb 25 02:13:20 CST 1999 Shawn T. Amundson <amundson@btk.org>

	* btk/btkmenu.[ch]: New function btk_menu_reorder_child()
	  from Tim Janik.  

Thu Feb 25 00:48:51 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkfontsel.c: Don't access *bitmapped_sizes
	if nbitmapped_sizes == 0. (Pointed out by
	zucchi@zedzone.fsi.com.au (Michael Zucchi))

Wed Feb 24 23:12:09 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkwidget.h btk/btkclist.c: Make prototypes 
	for drag_data_get and drag_data_received handlers
	match the types used for btk_singal_new; time needs
	to be a uint, not a uint32. 
	
Wed Feb 24 20:34:59 1999  Owen Taylor  <otaylor@redhat.com>

	* README: Changed bug reporting instructions to
	describe using the BUNNY bug tracking system.

Wed Feb 24 19:08:51 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkclist.c (draw_cell_pixmap): Unset the clip
	mask for the GC if we set it. (Patch from
	Lars Hamann <lars@btk.org>)

Thu Feb 24 23:58:44 1999  Tim Janik  <timj@btk.org>

	* btk/btksignal.c (btk_signal_handler_pending_by_id): added function
	to check if a specific signal handler connection exists (similar to
	btk_signal_handler_pending_by_func). and yes, this is a neccessary
	addition, since without this function, signal handlers can not be
	(un)blocked or disconnected in a generic fashion without producing
	g_warnings().
	made btk_signal_get_handlers() an inline function since it's used in
	a lot of places, especially within signal emission.

Wed Feb 24 19:35:15 1999  Tim Janik  <timj@btk.org>

	* btk/btktext.c (btk_text_key_press): if the widget is not editable,
	don't silently eat up BDK_Return, BDK_Home and BDK_End, return FALSE
	instead so the user can still hook up key bindings.

Wed Feb 24 11:19:12 1999  Tim Janik  <timj@btk.org>

	* btk/btkwidget.c (btk_widget_size_request): warn about
	&widget->requisition, even for toplevels.

	* btk/btkwindow.c (btk_window_move_resize): request size into an
	automatic variable and check if our size has changed.
	when we decide to reallocate everything, we need to resize our
	own BdkWindow as well.

	* btk/btkmain.c:
	* btk/btkobject.c: hack time, make --btk-debug=objects work even
	after btk_type_init(), this is to "fix" bunny's arg parsing oddities.

	* btk/btktypeutils.h: don't segfault in BTK_CHECK_CLASS_TYPE and
	BTK_CHECK_TYPE upon NULL pointers.

	* btk/btklayout.c: removed bogus prototypes of btk_layout_gravity_works,
	btk_layout_set_static_gravity, btk_layout_add_child_cb and
	btk_layout_remove_child_cb to shut up compiler.
	
	* btk/Makefile.am: added an empty rule
	btkrc:
		:
	so make doesn't try to "update" btkrc from btkrc.c.

Wed Feb 24 05:53:15 CST 1999 Shawn T. Amundson <amundson@btk.org>

	* btk/Makefile.am: removed btkrc rule added by   
	  Sergey Panov, because BTK+ no longer built.  We
	  don't need to install an empty btkrc anyway.

Wed Feb 24 01:22:39 CST 1999 Shawn T. Amundson <amundson@btk.org>

	* *.[ch]: Added notice to look in AUTHORS and ChangeLog files
	  for a list of changes.

Tue Feb 23 17:52:37 1999  Tim Janik  <timj@btk.org>

	* btk/btkitemfactory.c (btk_item_factory_create_item): fix implicit
	branch creation, we need the *real* parent path for this and
	btk_item_factory_parse_path() only returns the parent path with "_?"
	stripped off.

1999-02-23  Pavel Machek  <pavel@artax.karlin.mff.cuni.cz>

	* btk/btkentry.c (btk_entry_finalize): trivial bugfix

Mon Feb 22 19:06:30 1999  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdkdnd.c (xdnd_send_*): When sending events to
	 windows with a proxy, set the window field in the
	 sent event to the original window, not to the proxy.
	 (This gives consistency with Motif, and also provides
	  information to the destination that it wouldn't have 
	  otherwise).
	
	* btk/btkdnd.c: Fixed some refcount leaks for windows.

	* bdk/bdkdnd.c (xdnd_send_xevent): When sending
	 Xdnd event to the root window, set the event mask
	 to ButtonPressMask. Hopefully, this should give us 
	 compatibility with kfm, if it uses the Qt style
	 of root window drops.

Mon Feb 22 08:45:10 GMT 1999 Tony Gale  <gale@btk.org>

	* docs/btk_tut.sgml:
	  - Complete the ProgressBar API
	  - Fix the CList example code

	* examples/clist/clist.c, examples/progressbar/progressbar.c:
	   Update from tutorial

Sun Feb 21 17:44:52 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/testbtkrc: Removed check-y/check-n backgrounds -
	 the effect looked like a bug.

Sun Feb 21 17:14:44 1999  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdkwindow.c (bdk_window_set_geometry_hints): Always
	 set the max width or height to at least 1, since 0 
	 triggers bugs in some window managers. (The window 
	"pops out" of the frame in fvwm)

Sun Feb 21 16:16:22 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkscrolledwindow.c bdk/bdkfont.c bdk/bdkim.c:
	 Changed warnings from g_message() to g_warning().

	* bdk/bdkim.c (bdk_ic_destroy): Changed g_print
	 to g_message within BDK_NOTE()

	* btk/btkcolorsel.c  btk/btkhandlebox.c:
	 Removed some leftover debugging printfs.

Sun Feb 21 15:59:55 1999  Owen Taylor  <otaylor@redhat.com>

	* bdk/MwmUtil.h bdk/bdkwindow.c: Account for the
	fact that Xlib expects format == 32 to be a long,
	even on 64-bit architectures.
	
	[ patch from George Lebl (jirka@5z.com) ]

Sun Feb 21 14:46:02 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkmain.c (btk_init_check):
	  bdk/bdk.c     (bdk_init_check):

	Added initialization variants that return a status
	instead of dying.

Sun Feb 21 14:21:46 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkwindow.c: removed debugging statements
	about embedded XID's. They could have been
	moved to the new PLUGSOCKET debug key, but they weren't
	really useful anyways.

	* bdk/bdk.h: Added bdk_error_trap_push/pop to provide
	a clean interface to the bdk_error_code functionality
	of trapping X errors.

	* btk/btkplug.c btk/btksocket.c: Add error
	traps around accesses to foreign windows.

Sun Feb 21 15:37:25 1999  Tim Janik  <timj@btk.org>

	* btk/btkwindow.h: marked btk_window_set_focus, btk_window_set_default,
	btk_window_remove_embedded_xid and btk_window_add_embedded_xid as
	internal functions.

Sun Feb 21 11:39:06 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btktext.c (find_line_containing_point): Revise
	algorithm for scrolling backwards. This one might actually 
	work with one-line-high	Text widgets.

	* btk/btkmain.c: Removed a misplaced comment, a few 
	formatting cleanups.

Sat Feb 20 20:59:25 1999  Tim Janik  <timj@btk.org>

	* btk/btkwindow.c: hm, set_modal doesn't really work with random
	btk_grab_add/btk_grab_remove calls. either the window user uses
	the set_modal interface or he places grab_add/grab_remove on his own.
	(btk_window_set_modal): enforce modality state either way.
	(btk_window_hide): revert previous change.

Sat Feb 20 20:04:48 1999  Tim Janik  <timj@btk.org>

	* btk/btkcalendar.c (btk_calendar_button_press): increment years and
	months by two not three on double clicks, patch provided by Nick Lamb
	<njl98r@ecs.soton.ac.uk>.

Sat Feb 20 19:44:36 1999  Tim Janik  <timj@btk.org>

	* btk/btkwindow.c: added ::modal argument.
	(btk_window_hide): reset window->modal from the current grab state
	(this is only relevant when grab_add/grab_remove is called on the
	window by bypassing btk_window_set_modal).
	(btk_window_remove_embedded_xid): 
	(btk_window_add_embedded_xid): don't use g_print() but g_message()
	within #ifdef G_ENABLE_DEBUG. when the hack got these functions
	added (ChangeLog doesn't know them)?

Fri Feb 19 14:59:45 EST 1999 Sergey Panov  <sipan@mit.edu>

        * btk/btkrc,btk/btkrc.ja, btk/btkrc.ko,
	btk/btkrc.ru: Collecttion of the locale dependent
	btkrc files and

	* btk/Makefile.am: patched to get that collection
	installed in to $(prefix)/etc/btk/

Fri Feb 19 17:52:28 1999  Tim Janik  <timj@btk.org>

	* btk/btksignal.h: grouped function names into application-level,
	widget-level and non-public.

	* btk/btktreeitem.c (btk_tree_item_size_request): use auto
	pix_requisition instead of item->pixmaps_box->requisition.

Thu Feb 18 17:26:09 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkwidget.c (btk_widget_queue_clear_area): 
	 When queueing clears relative to widget->window,
	 actually store widget->window so we know that
	 the coordinates are window-relative.

Thu Feb 18 11:46:57 1999  Owen Taylor  <otaylor@redhat.com>

	* btk.m4: Fix bunnylib_config_args btk_config_args
	  confusion. (pointed out by
	  Roland Dreier <droland@mail.math.okstate.edu>)

	* btk/btksocket.c btk/btkmain.c btk/btkdebug.h
	  (btk_socket_filter_func): Move the plug-socket
	  debugging code to a new "plugsocket" debug keys
	  from the previous hardcoded DPRINTF.

Thu Feb 18 00:54:46 1999  Tim Janik  <timj@btk.org>

	* btk/btkclist.c: added widget arg ::titles_active.

Thu Feb 18 00:27:46 1999  Tim Janik  <timj@btk.org>

	* btk/btkwidget.c (btk_widget_queue_clear_area): only translate widget
	relative coordinates to window relative if the widget is not a toplevel
	(i.e. it has ->parent != NULL), otherwise the area size gets screwed up
	for toplevels.

Tue Feb 16 14:25:44 CST 1999 Shawn T. Amundson <amundson@btk.org>

	* INSTALL
	  README
	  configure.in
	  btk+.spec
	  docs/btk-config.1: version = 1.1.16

	* Makefile.am: removed colorsel example since it
	  doesn't actually exist.

	* Released BTK+ 1.1.16

Mon Feb 15 23:55:27 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/testbtk.c (create_text): Use a ScrolledWindow
	 test how Text widgets work within ScrolledWindow.
	 (POLICY_AUTOMATIC drew very badly, so it uses
	  POLICY_ALWAYS for the vscrollbar)

	* btk/btktext.c (btk_text_unrealize): Free the cache
	 in the unrealize handler. Some code in btktext.c
	 assumes that if text->line_start_cache is non-NULL,
	 the widget is realized. We'll recompute it again
	 anyways if we later re-realize.

Fri Feb 12 15:47:20 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkcalender.c btk/btkentry.c btk/btkhandlebox.c
	  btk/btknotebook.c btk/btktext.c  btk/btkviewport.c 
	  btk/btkwidget.c: 

	 When setting styles, remove unecessary explicits draws 
	 and clears.

	* btk/btkrange.c: Ugly fix so the steps get the
	 correct background.
	 
Mon Feb 15 22:55:50 1999  Owen Taylor  <otaylor@redhat.com>

	* NEWS: Updated for 1.1.16.

Mon Feb 15 19:36:57 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btklabel.c (btk_label_finalize): Free
	 label->label_wc.

Mon Feb 15 18:02:22 1999  Owen Taylor  <otaylor@redhat.com>

        * btk/btkdnd.c: Some coding style fixups.

	* btk/btkdnd.c (btk_drag_set_icon_pixmap): Set a flag
	 so that we destroy the icon window that we created
	 when the drag ends.

Thu Feb 11 18:43:12 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkbindings.c (btk_binding_set_add_path): When
	  we find a match, stop searching. (Because we
	  assume pspec != NULL in the search).

Wed Feb 10 01:18:22 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkhandlebox.c (btk_handle_box_draw_ghost): Fix
	  up painting of "ghosts".

	* btk/btkhandlebox.c (btk_handle_box_button_changed): 
	  Add double-click reattachment.

	* btk/btkhandlebox.c: Grab on widget->window,
	  not on handlebox->bin_window. This means we don't 
	  have to worry about ungrabbing while reparenting.

	  Don't make a BTK+ grab - that wasn't necessary.

	* btk/btkhandlebox.c: Only compute the root -> desk
	  offset once, when starting the drag, instead
	  of continuously. This should solve the *Bad Window*
	  errors that were occurring because of race conditions
	  with the WM.
	  
	* btk/btkhandlebox.c: Completely reworked the 
	  the logic of reattachment. We introduce the 
	  concept of the "snap edge", which is an edge
	  that needs to be aligned for reattachmed.
	  We set a reasonable default from 
	  handlebox->handle_position, but an application
	  might want to change this in some circumstances.

	* btk/btkhandlebox.[ch]: Add settors:
            btk_handle_box_set_handle_position  ();
            btk_handle_box_set_snap_edge        ();

Mon Feb 15 11:13:01 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkwindow.c (btk_window_set_focus): 
	  btk/btkwidget.c (btk_widget_real_grab_focus):

	If the focus widget is the same, but does not currently
	have the focus, call btk_window_set_focus(). This is needed
	so that click focusing with BtkPlug works correctly.

Mon Feb 15 07:45:28 1999  Tim Janik  <timj@btk.org>

	* configure.in (--enable-debug): default to yes for development trees.

Fri Feb 12 00:08:01 1999  Lars Hamann  <lars@btk.org>

	* btk/btklist.c (btk_list_remove_items_internal): don't autoselect
	focus_row in case of BTK_SELECTION_EXTENDED

	* btk/testbtk.c : few changes in list example.

	* btk/btklistitem.c (btk_list_item_class_init): 
	* btk/btkctree.c (btk_ctree_class_init): 
	* btk/btkclist.c (btk_clist_class_init): 
	fixed indentation, removed unused key bindings
	
Wed Feb 10 01:02:46 1999  Lars Hamann  <lars@btk.org>

	* btk/btkclist.c (real_remove_row): 
	* btk/btkctree.c (btk_ctree_remove_node): don't autoselect focus_row
	in case of BTK_SELECTION_EXTENDED

	* btk/testbtk.c : few changes in clist/ctree examples.

Wed Feb 10 15:49:16 1999  Tim Janik  <timj@btk.org>

	* btk/btkwindow.c (btk_window_class_init):
	* btk/btkctree.c (btk_ctree_class_init): applied patch from Paolo
	Molaro to fix BTK_TYPE_POINTER args of ::tree_collapse and
	::set_focus signals.

	* docs/btk_tut.sgml: s/menufactory/itemfactory, minor fixups
	to the item factory example.

Wed Feb 10 11:05:53 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkdnd.c: Reverted coding style "fixups"

Wed Feb 10 10:43:50 1999  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdkwindow.c (bdk_window_set_icon, bdk_window_set_group):
	 Supplement the existing WMNormalHints, don't 
	 overwrite them.

Wed Feb 10 08:35:36 1999  Tim Janik  <timj@btk.org>

	* btk/btkcolorsel.c (btk_color_selection_draw_value_bar): asure that
	->value_buf always points to an allocated area.
	(btk_color_selection_drag_end): new function hooked up to drag_end to
	destroy the drag_window.

	* btk/btkdnd.c: some coding style fixups.

Wed Feb 10 06:47:17 1999  Tim Janik  <timj@btk.org>

	* bdk/bdkwindow.c: various indentation fixes.

	* bdk/bdkevents.c: coding style fixups.
	NULL initialize event_func, event_notify and event_chunk.
	(expose_predicate): made this function static.
	(bdk_event_handler_set): perform destroy notification even if no
	event_func is set.

	* bdk/bdkrectangle.c (bdk_rectangle_union): added g_return_if_fail
	statements.

Sun Feb  7 19:49:21 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkwindow.c (btk_window_move_resize): Fixed some
	  bugs with set_default_size.

Sat Feb  6 13:23:51 1999  Owen Taylor  <otaylor@redhat.com>

	* docs/Changes-1.2.txt: Added information about
	 the change to btk_widget_size_request().

	* btk/btkentry.c: Call btk_widget_get_child_requisition
	 explicitely since we differentiate between the usize
	 set by the user and what we got. (Ugh)

	* btk/btkwidget.[ch] (btk_widget_get_child_requisition):
	 New function to return the effective size of a widget
	 as it looks to its parent.

	* btk/btkwidget.c (btk_widget_size_request): Leave
	 widget->requisition set to exactly what the widget
	 asked for, and then make a copy of that into
	 the requisition argument. Allow a NULL requisition
	 argument, and, if G_ENABLE_DEBUG, warn if
	 requisition == &widget->requisition.

	* btkalignment.c btkaspectframe.c btkbutton.c btkclist.c
	  btkcontainer.c btkentry.c btkeventbox.c btkfixed.c
	  btkframe.c btkhandlebox.c btkhbox.c btkhpaned.c 
	  btklayout.c btklist.c btklistitem.c btkmenu.c
	  btkmenubar.c btkmenuitem.c btknotebook.c
	  btkoptionmenu.c btkpacker.c btkscrolledwindow.c
	  btktable.c btktoolbar.c btktree.c btktreeitem.c
	  btkvbox.c btkviewport.c btkvpaned.c btkwindow.c

	 Avoid calling btk_widget_size_request with
	 requisition == widget->requisition; use 
	 btk_widget_get_child_requisition to get the
	 size of children.

Tue Feb  9 19:49:46 1999  Owen Taylor  <otaylor@redhat.com>

	* configure.in (LDFLAGS): Removed extraneous line
	  that crept in in previous commit.

Tue Feb  9 19:39:32 1999  Owen Taylor  <otaylor@redhat.com>

        * btk/btkentry.[ch] btk/btkeditable.h: Moved
	  entry->visible into editable class. (Leave it
	  behind deprecated for compatibility)
	 
	* btk/btkeditable.c: If not editable->visible,
	  return *'s for clipboard and selection.

Tue Feb  9 19:11:43 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkstyle.c (btk_style_new): If we can't find
	  helvetica, fall back to "fixed". If we can't
	  find "fixed", exit cleanly.

Tue Feb  9 16:03:44 1999  Owen Taylor  <otaylor@redhat.com>

	* acconfig.h configure.in: Rename 
	  XIM_INST_IS_MISSING_OR_STRANGE to USE_X11R6_XIM

	* Conditionalize destroy callbacks with USE_X11R6_XIM.

Tue Feb  9 15:35:13 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btklabel.c (btk_label_style_set): Added
	  a style_set() function so that word lengths get
	  recomputed on style change.

Mon Feb  8 21:00:20 1999  Lars Hamann  <lars@btk.org>

	* btk/btkclist.c (CLIST_OPTIMUM_SIZE): changed to 64
	(btk_clist_draw_focus) (hadjustment_value_changed) (draw_row):
 	few fixes to respect BTK_CAN_FOCUS flag.

	* btk/btkctree.c (draw_row): 
 	respect BTK_CAN_FOCUS flag.

Mon Feb  8 19:22:27 GMT 1999 Tony Gale  <gale@btk.org>

	* example/colorsel/*: missing from the CVS for some reason

Mon Feb  8 13:08:51 GMT 1999 Tony Gale  <gale@btk.org>

	* examples/Makefile: add SpinButton example

Mon Feb  8 12:50:06 GMT 1999 Tony Gale  <gale@btk.org>

	* docs/btk_tut.sgml:
	  - Heavily edited BtkCombo section initially from
	    Christopher T. Lansdown <lansdoct@screech.cs.alfred.edu>.

	  - Cleanups and some bunnylib stuff from
	    David Wheeler <wheeler@ida.org>

	* Makefile.am: update to include the latest Tutorial examples.

Sat Feb  6 11:20:16 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkwidget.c (btk_widget_idle_draw): Add the
	entire draw_data_list back to the free list, not
	just the last element.

Sat Feb  6 00:21:14 1999  Lars Hamann  <lars@btk.org>

	* btk/btkctree.c (draw_row): 
	* btk/btkclist.c (draw_row) (new_column_width) (scroll_horizontal)
	(title_focus): search last visible column instead of
	using clist->columns.

Fri Feb  5 13:23:50 1999  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdkwindow.c (bdk_window_move_resize): Adjust
	saved positions of children when resizing a 
	guffaw_gravity = TRUE window.

	* btk/btkdnd.c (btk_drag_highlight): Rework the
	 highlighting so that it is done in callbacks for
	 draw and expose. This should solve problems with
         multiple highlights for the same BdkWindow.

	* btk/btkdnd.c (btk_drag_highlight): Fix bug where
	the highlight was being drawn with an incorrect
	width/height for !NO_WINDOW widgets.

Tue Feb  2 11:06:02 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkrange.c (btk_range_style_set): Fixes
	 to account for the changed structure of the windows
	 of range widgets.

1999-02-05  Owen Taylor  <otaylor@btk.org>

	* btk/btk[hv]paned.c (btk_[hv]paned_size_allocate): 
	Don't assume any more that the btkwidget.c code
	will queue a redraw on us during a size_allocate -
	queue clear/draws as appropriate for our groove.

1999-02-04  Christopher Blizzard  <blizzard@redhat.com>

	* btk+.spec (Packager): Change my email address.

Thu Feb  4 05:42:34 CST 1999 Shawn T. Amundson <amundson@btk.org>

	* INSTALL
	  NEWS
	  README
	  configure.in
	  btk+.spec
	  docs/btk-config.1: version=1.1.15

	* Makefile.am: example files where incorrect for
	  menu directory.

	* Released BTK+ 1.1.15

Wed Feb  3 17:29:57 PST 1999 Manish Singh <yosh@gimp.org>

	* btk/btkclist.h: spelling fix in comment from
	joey@kuolema.Infodrom.North.DE (Martin Schulze)

Tue Feb  2 12:39:42 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkdnd.c: Make sure we set the icon window position 
	 before it is shown to prevent annoying flicking to 0,0.
	 Make it consistent that info->cur_x/y do not include
	 info->hot_x/y displacement.

Tue Feb  2 08:59:16 GMT 1999 Tony Gale  <gale@btk.org>

	* docs/btk_tut.sgml: new sections on Layout and
	  SpinButton [nice widget]

	* examples/spinbutton/*: example code

Mon Feb  1 19:25:54 1999  Owen Taylor  <otaylor@redhat.com>

	* docs/btk-config.txt (testinput_SOURCES): Put
	in some information about 'btk-config --libs bthread'.

	* docs/Changes-1.2.txt: Updated section on threads.

Tue Feb  2 00:28:44 1999  Lars Hamann  <lars@btk.org>

	* btk/btkctree.c (btk_ctree_insert_node): in case of
	BTK_SELECTION_BROWSE select first inserted row.
	(resync_selection): select rows in correct order.

	* btk/btkclist.c (real_insert_row): in case of BTK_SELECTION_BROWSE
 	select first inserted row.
	(resync_selection): select rows in correct order.

	* btk/btklist.c (btk_list_end_selection): select rows in correct order.

Mon Feb  1 16:47:55 1999  Owen Taylor  <otaylor@redhat.com>

	* btk.m4: Pass bthread on to btk-config.

	* configure.in btk-config.in: Support bthread flag to 
	  add thread cflags/libraries into the output of 
	  btk-config.

Mon Feb  1 15:14:56 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkoptionmenu.c (btk_option_menu_size_allocate): 
	 Fixed problem with uints resulting in huge child
	 allocations.

Mon Feb  1 14:54:28 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btklabel.c (btk_label_expose): Cast uints
	 to ints in geometry calculations. This should
	 prevent FP exceptions on FreeBSD when quantities
	 become negative. [ Actually, this is probably
	 a workaround with a gcc bug with handling of
	 bitfields, according to Ben Jackson <ben@ben.com> ]

Mon Feb  1 13:35:14 GMT 1999 Tony Gale  <gale@btk.org>

	* examples/Makefile: update to new examples

	* examples/menu/itemfactory.c: I must have forgotten to
	  'cvs add' this file

Mon Feb  1 09:16:03 GMT 1999 Tony Gale  <gale@btk.org>

	* docs/btk_tut.sgml:
	  - Complete documentation of Label widget API
	  - New sections for the following:
		* Arrows
		* Alignment
		* Button Boxes
		* Viewports

	* examples/arrow/*, examples/buttonbox/*, examples/label/*
	  - New code examples

Fri Jan 29 09:44:37 GMT 1999 Tony Gale  <gale@btk.org>

	* examples/fixed/*, examples/frame/*
	  - Examples from the Tutorial

Fri Jan 29 09:18:41 GMT 1999 Tony Gale  <gale@btk.org>

	* docs/btk_tut.sgml:
	  - New sections on the Fixed and Frame containers
	  - Rearrange the Containers section so the easier ones
	    are first
	  - Move the List widget section to an appendix

Thu Jan 28 12:14:12 GMT 1999 Tony Gale  <gale@btk.org>

	* docs/package_tutorial.sh: script to convert and
	  package up the tutorial - stick it here so I don't lose
	  it when I accidentally delete it again.
 
Thu Jan 28 10:16:28 GMT 1999 Tony Gale  <gale@btk.org>

        * docs/btk_tut.sgml:
          - Replace all uses of deprecated functions.
          - Replace menufactory example with itemfactory example
            from Nick Scott <mendigo@geocities.com>
          - Minor bug fixes in the examples.

1999-01-28  Sebastian Wilhelmi  <wilhelmi@ira.uka.de>

	* bdk/bdkim.c:
	s/XIM_INSTANTIATE_IS_MISSING_OR_STRANGE/XIM_INST_IS_MISSING_OR_STRANGE/

Thu Jan 28 01:57:06 CST 1999 Shawn T. Amundson <amundson@btk.org>

	* INSTALL
	  NEWS
	  README
	  configure.in
	  btk+.spec
	  docs/btk-config.1: version=1.1.14

	* Released BTK+ 1.1.14

Thu Jan 28 01:34:29 1999  Owen Taylor  <otaylor@redhat.com>

	* btkfontsel.c btkcolorsel.c: When translating
	N_() strings, use _(), not gettext(), since we
	really need to call dgettext().

Wed Jan 27 20:51:25 PST 1999 Manish Singh <yosh@gimp.org>

	* acinclude.m4: Xsed isn't valid here, don't use it

	* ltmain.sh
	* ltconfig: better file magic regexp for Linux libs

Wed Jan 27 23:05:55 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btklayout.[ch] (btk_layout_realize): Move 
	gravity_works back to a static global variable,
	since it is a global constant, and this way we
	keep structure sizes uniform.

Wed Jan 27 22:59:07 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/Makefile.am (static_SOURCES): Move btkintl.h
	from $source_headers to $static_sources since
	it should not be installed.

Wed Jan 27 22:51:23 1999  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdkevents.c (expose_predicate): Allow exposure
	 compression across GravityNotify events to improve
 	 the appearance of a BTK+ window unshading.

Wed Jan 27 21:56:07 1999  Owen Taylor  <otaylor@redhat.com>

        [ patch from Takashi Matsuda <matsu@arch.comp.kyutech.ac.jp> ]
	
	* acconfig.h configure.in bdk/bdkim.c: Add configure 
	flag for disabling XRegisterIMInstantiateCallback(), default
	it to off for Solaris. Always try to open the
	input method immediately, and only if that fails,
	register than instantiate callback.

	* btk/btkentry.c: Some tweaks to make sure that we
	only get and set the IC attributes when appropriate.
	
Wed Jan 27 20:08:54 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkfilesel.c (open_user_dir): Patch from
	Sebastian Wilhelmi  <wilhelmi@ira.uka.de> to
	use g_get_home_dir() instead of calling getpwuid() 
	ourselves.

Wed Jan 27 20:06:06 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btklayout.c (btk_layout_adjustment_changed):
	Removed some g_print()'s

Wed Jan 27 18:57:57 1999  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdk.h bdk/bdkdnd.c: Change signatures for 
	bdk_drag_begin() and bdk_drag_motion() so that the set 
	of possible actions is passed on each motion, not just at
	the beginning of the drag. We do this so that
	we can restrict the set of possible drag events
	when the user presses a modifier key during a 
	drag.

	* bdk/bdkdnd.c: Send a motif Operation-changed
	message when the set of possible actions change,
	as well as when the suggested action change.

	* bdk/bdkdnd.c: Change the XdndActionList whenever
	the set of actions change.

	* bdk/bdkdnd.c: Add a filter to catch changes to
	the XdndActionList property for the source widget.

	* btk/btkdnd.c: Change the set of possible actions
	when the user presses Control, Shift, or Control-Shift,
	to only include the corresponding action.
	
	* btk/btkdnd.c (btk_drag_button_release_cb):
	Disconnect button signals before we possibly
	free info structure.

Wed Jan 27 18:40:50 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkmain.c (btk_main_do_event): Hack scrollwheel
	support into the eventloop, by treating button 4-5
	presses on scrolled windows and scrollbars specially. 
	Put it here to keep the ugliness small and confined.
	(We need to intercept the normal propagation in any case
	to have this work reliably right now, since some
	subwidgets will trap the button presses)
	
	* btk/btkviewport.c (btk_viewport_realize): Select for 
	BUTTON_PRESS to	support the above hack.
	
Tue Jan 26 14:02:50 1999  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdkwindow.c (bdk_window_show/hide): Remove TimJ's
	checks for already being mapped or hidden. See
	the ICCCM's section on state changes for why this
	is a bad idea.

Wed Jan 27 17:05:40 1999  Owen Taylor  <otaylor@redhat.com>

	* Separate out BUNNYLIB_LIBS and BUNNYLIB_DEPLIBS. This
	may fix the --with-bunnylib option. BUNNYLIB_LIBS are
	the libs to link example programs against, while
	BUNNYLIB_DEPLIBS are dependency libraries.

Wed Jan 20 11:19:00 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btklabel.c: Use floor() instead of truncating
	to integer values so we get translation invariance.

	* btk/btklayout.c (btk_layout_size_allocate): Set upper
	and lower values for adjustments in size_allocate().

	* bdk/bdkwindow.c bdk/bdk.h bdk/bdkprivate.h: New
	function bdk_window_set_static_gravities() to set
	up a window for guffaw scrolling.
	
	* bdk/bdkwindow.c (bdk_window_internal_destroy): Set flags
	indicating destroyed state before cleanup.

	* btk/btkprivate.h btk/btkwidget.c: Add a new
	private flag IS_OFFSCREEN. If set, this indicates
	to BTK+ that the widget is not to be considered
	viewable regardless of its map state. Queued draws
	on offscreen widgets are suppressed.

	Added new function static btk_widget_is_offscreen() to
	check this flag on a widget and its ancestors.

	* btk/btklayout.[ch]: Major revisions.

	- Use bdk_window_set_static_gravities to set static gravity 
	on all child windows, and thus avoid having to create a window
	for NO_WINDOW children.

	- Adjust allocations of children as we scroll them
	so queued draws work correctly.

	- Don't allocate our children directly in a put()
	or move(); just queue a resize() like every other
	widget.

	* btk/testbtk.c: Make the arrows on the scrollbars
	work, create a larger and more demanding test.
	
Wed Jan 27 09:19:07 1999  Tim Janik  <timj@btk.org>

	* bdk/bdkcolor.c (bdk_colormap_unref): assert ref_count>0.

Mon Jan 25 20:05:22 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkwidget.c (btk_widget_set_{visual,colormap}): 
	New functions to set the colormap or visual
	of an existing widget. These functions should not
	be called on a widget that has previosly been
	realized.

	* btk/btkcolorsel.c (btk_color_selection_dialog_init):
	Set the visual and colormap on the toplevel dialog,
	then push them for the child widgets. As opposed
	to push/pop in _new(), this way, things will work
	properly with btk_widget_new().
	
Mon Jan 25 19:41:56 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btknotebook.c (btk_notebook_page_allocate): Queue
	a redraw on the tab area when a tab changes size.
	(Includes improvements from Lars Hamann)

Mon Jan 25 19:00:13 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkcolorsel.c (btk_color_selection_value_events): 
	 Back out the last solution to updating problem. And
	 try a different one that is less dependent on
	 the state of the widget. Just redraw the value_marker
	 when it gets mapped. Somebody needs to analyze
	 this widget more carefully and figure out when
	 it should be setting the contents of the previews
	 with more care.

Mon Jan 25 17:48:03 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkcolorsel.c: Removed some BTK_WIDGET_DRAWABLE()
	tests - we need to update the value bar's contents
	even when the widget is unmapped.

Mon Jan 25 15:47:46 1999  Owen Taylor  <otaylor@redhat.com>

	* acinclude.m4 (ac_result): Don't define ENABLE_NLS
	 unless we have a working NLS. (This should keep
	 libintl.h from being included when it doesn't
	 exist).

Mon Jan 25 11:05:10 1999  George Lebl  <jirka@5z.com>

	* btk/btkbutton.c: set RECEIVES_DEFAULT on init, and a
	  button press on the widget doesn't grab default anymore

	* btk/btkcheckbutton.c,btk/btkoptionmenu.c,btk/btkradiobutton.c:
	  unset RECEIVES_DEFAULT on init

	* btk/btkwidget.[ch]: add a RECEIVES_DEFAULT flag to widget
	  flags

	* btk/btkwindow.c,btk/btkplug.c: on pressing <enter>, activate
	  the focused widget if it is a RECEIVES_DEFAULT widget,
	  no matter what the current default_widget is

	* btk/btkwindow.c: on focus change, migrate the HAS_DEFAULT
	  flag to CAN_DEFAULT widgets if they RECEIVE_DEFAULT as well
	  or migrate it back to the default_widget if the focus widget
	  doesn't "RECEIVE_DEFAULT"

Sun Jan 24 18:09:24 1999  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdkdnd.c (motif_read_initiator_info): Byteswap
	the MotifInitiatorInfo structure _before_ using it.

Sun Jan 24 12:17:39 1999  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdkcolor.c (bdk_colormap_real_destroy): Fix 
	 reversed assertion. 
	 (Pointed out by Austin Donnelly <austin@greenend.org.uk>)

	* btk/btkruler.c (btk_ruler_expose): Remove unecessary
	 and harmful call to btk_paint_box(). We are going
	 to paint onto the backing store later anyways.

Sat Jan 23 11:15:39 1999  Owen Taylor  <otaylor@btk.org>

	* bdk/bdkdnd.c (bdk_window_register_dnd): X expects
	 longs, not uint32 for XChangeProperty, when 
	 format == 32.

	* bdk/bdkdnd.c (motif_read_initiator_info): Byte-swap
	 the MotifInitiatorInfo structure if necessary.

 	* bdk/bdkdnd.c: When extracting and constructing
         Motif DND messages, don't use data.s[], data.l[]
	 since on 64bit architectures, these won't necessarily
	 be in the same place with data.b[]. 

 	* btk/testdnd.c (target_drag_drop): Return TRUE for
	 drag_drop within the drop zone.
 
	* btk/btkdnd.c (btk_drag_dest_handle_event): Only send
	 a XmTRANSFER_FAILURE if no drop site is found, not
	 on every drop!

Fri Jan 22 19:22:39 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkeditable.c: Add flags field to 
	 BtkTargetEntry table.
	
	* bdk/bdkwindow.c (bdk_window_is_viewable): Treat foreign
	 windows as always viewable, since we can't track their
	 map-state reliably without speed problems. (Fixes
	 problem where updating didn't occur properly within
	 BtkPlug)

Sat Jan 23 13:41:00 1999  Jeff Garzik  <jgarzik@pobox.com>

	* btk/btkctree.c
	(tree_delete): Don't search selection list twice.
	(real_select_row): Remove extra ';', add default for clarity.

Sat Jan 23 01:44:43 1999  Lars Hamann  <lars@btk.org>

	* btk/btkspinbutton.c (btk_spin_button_get_value_as_int)
	(btk_spin_button_get_value_as_float): removed extra
 	btk_spin_button_update calls again.
	* btk/btkclist.c (btk_clist_unmap): unblock dnd signal handler if
	neccessary
	* btk/btknotebook.c (btk_notebook_button_press): grab_focus before
	switch_page
	(btk_notebook_set_shape): don't use cur_page if it's NULL.

Fri Jan 22 12:20:54 1999  Jeff Garzik  <jgarzik@pobox.com>

	* btk/btktooltips.c:
	Fix recent change to match existing coding style.

Fri Jan 22 07:33:44 1999  Tim Janik  <timj@btk.org>

	* btk/btkvscale.c (btk_vscale_pos_trough): take value_spacing into
	account for BTK_POS_LEFT.

	* btk/btkradiobutton.c (btk_radio_button_set_group): use
	btk_toggle_button_set_active () to set the new state.
	(btk_radio_button_new): only _set_group if group != NULL.
	(btk_radio_button_clicked): reference the widget.
	(btk_radio_button_init): make radio buttons active upon
	startup.

Thu Jan 21 17:13:12 1999  Jeff Garzik  <jgarzik@pobox.com>

	* btk/btkselection.c:
	(btk_selection_property_notify): Check args for NULL.
	(btk_selection_default_handler):
	Replace manual list count with call to g_list_length.
	Remove signedness of temp var 'count' to agree with usage.
	Slight spacing adjustment for readability.

	* btk/btkbox.c, btk/btklayout.c, btk/btkselection.c:
	Init a few ptrs to NULL, to quiet warnings.

Thu Jan 21 16:03:02 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkbutton.c (btk_button_expose): Code cleanup.

	* btk/btktreeitem.c: Add a paint routine, fix up bugs
	in drawing where if the expose area was contained
	completely in the right side of the tree the background
	wasn't redraw, etc.

	* btk/btkwidget.c (btk_widget_clip_rect): Fix a bug
	in clipping draw rebunnyions while propagating them
	upwards.

Thu Jan 21 12:20:51 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkcolorsel.c (btk_color_selection_dialog_new): 
	Pushing	and popping the visual/cmap in the init() 
	function does no good, because the window itself needs
	to be create with that visual/cmap.

	So do it in the new() function instead. 

	This will require people doing btk_widget_new() to do 
	the push/pop themselves, but I don't see any way around
	it other than digging in and tweaking the window
	widget's colormap and visual ourselves, which
	is highly non-kosher, but would be safe...

Thu Jan 21 16:04:35 1999  Timur Bakeyev <mc@bat.ru>

	* btk/btkrc.c (btk_rc_init): It was reported by Owen Taylor 
	<otaylor@redhat.com>, that LC_ALL produce unparsable garbage
	on some bunnylibc'ed systems and HP/UX. So, falling to LC_CTYPE.

Thu Jan 21 02:11:44 1999  Owen Taylor  <otaylor@redhat.com>

	* Set and read the XdndActionList property defined
	in the Xdnd spec. We do this always, not just for
	XdndActionAsk like the spec says, but if we don't
	find it, we fall back to actions = suggested_action,
	which is compatible with the language of the spec.

Thu Jan 21 01:15:28 1999  Jeff Garzik  <jgarzik@pobox.com>

	* bdk/bdkdnd.c (bdk_drag_context_unref):
	Move not-null assertion before pointer de-ref.

	* bdk/bdkevents.c (bdk_event_queue_find_first):
	Fix infinite loop bug.  Someone should look at this further to
	make sure the events_pending tests are correct.

Thu Jan 21 00:44:47 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkdnd.c (btk_drag_dest_drop): Default handling
	for drops should be keyed on BTK_DRAG_DEFAULT_DROP
	not BTK_DRAG_DEFAULT_MOTION.

Wed Jan 20 21:52:51 1999  Jeff Garzik  <jgarzik@pobox.com>

	* btk/btkclist.c (real_remove_row):
	Don't search entire row list twice for element being removed.

	* btk/btkmenushell.c (btk_menu_shell_insert):
	Replaced hand-coded implementation of g_list_insert with
	call to g_list_insert.

	* btk/btktooltips.c
	  (btk_tooltips_destroy_data, btk_tooltips_layout_text):
	tooltipsdata->row test not-null test now properly encompasses
	both g_list_* calls.

Thu Jan 21 02:47:36 1999  Lars Hamann  <lars@btk.org>

	* btk/btknotebook.c (btk_notebook_focus): few cleanups.
	(btk_notebook_key_press): call select page function for
	BDK_DOWN key in case of tab_pos == TOP. Changed other
	positions accordingly.

Wed Jan 20 19:57:14 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkdnd.c (btk_drag_begin): Start off with the
	cursor for "no drop" since if we'll get a status
	if we are over a drag window, but none if we aren't
	over one. 

1999-01-20  Jeff Garzik  <jgarzik@pobox.com>

	* btk/btkcombo.c (btk_combo_entry_key_press):
	Free 'nprefix', closing a memory leak.
	Spaced out the code a bit to make it more readable.

	* btk/btkhbox.[ch] (btk_hbox_new),
	  btk/btkvbox.[ch] (btk_vbox_new):
	Change 'homogenous' arg from bint to bboolean.

	* btk/btktogglebutton.[ch]:
	New function btk_toggle_button_get_active().

1999-01-20  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* btk/btkdnd.c (btk_drag_get_event_action): Allow button 2 to act
	as BDK_ACTION_ASK.  Also, allow MOD1 to specify BDK_ACTION_ASK
	only if that action is enabled in the actions argument.

1999-01-20  Raja R Harinath  <harinath@cs.umn.edu>

	* configure.in (btklocaledir): New variable.  Define to
	$prefix/$DATADIRNAME/locale.  This will point to the directory
	where po/Makefile actually installs the message translation
	tables. 
	* btk/Makefile.am (INCLUDES): Define BTK_LOCALEDIR to
	$(btklocaledir) rather than $prefix/share/locale.

Wed Jan 20 21:07:45 1999  Timur Bakeyev <mc@bat.ru>

	* btk/btkrc.c (btk_rc_init): There are some systems, that lacks of
	LC_MESSAGES in locale.h. As a last resort for such systems, set locale
	according to LC_ALL.

Wed Jan 20 13:06:51 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btktext.[ch] (clear_[focus_]area): Instead of drawing
	a background pixmap in with bdk_draw_pixmap(), set
	it as a tile pixmap for a GC. This should speed
	up things considerably and also will hide a bug
	where text->first_onscreen_ver_pixel is being
	corrupted, causing the bg pixmap drawing code to generate
	graphics exposes.

Tue Jan 19 22:15:10 1999  Lars Hamann  <lars@btk.org>

	* btk/btklist.c
	(btk_list_button_press):  only call grab_add if pointer_grab succeeds.
	(btk_list_unmap): remove pointer/widget grabs if needed.
	(btk_list_signal_focus_lost): removed.
	(btk_list_focus) (btk_list_set_focus_child): set last_focus_child.
	(btk_list_remove_items_internal) (btk_list_clear_items): unset
 	undo_focus_child if neccessary. In case of SELECTION_BROWSE/EXTENDED
 	select a new item if selection is empty.

Tue Jan 19 00:21:15 1999  Tim Janik  <timj@btk.org>

	* btk/btkcompat.h: add compatibility define for
	btk_ctree_set_reorderable.

Tue Jan 19 00:02:10 1999  Lars Hamann  <lars@btk.org>

	* btk/btkctree.c (btk_ctree_node_set_row_data_full): 
	add a sanity check [from Todd Dukes <todddukes@netscape.net>]
	
Mon Jan 18 22:54:11 1999  Lars Hamann  <lars@btk.org>

	* btk/btkclist.c (btk_clist_button_press): only call grab_add
	if pointer_grab succeeds.
	(btk_clist_unmap): remove pointer/widget grabs if needed.

Mon Jan 18 15:46:14 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btklabel.c (btk_label_init): Initialize
	label->label_wc. (We allocate labels from
	a memchunk)

Mon Jan 18 18:53:08 1999  Tim Janik  <timj@btk.org>

	* btk/btkscale.c (btk_scale_set_digits): CLAMP digits into a
	meaningfull range (we need to stay below a certain limit anyways
	to avoid string buffer overflows).

	* btk/btkvscale.c (btk_vscale_pos_background): fixed up background
	area calculations for BTK_POS_RIGHT and BTK_POS_BOTTOM.
	* btk/btkhscale.c (btk_hscale_pos_background): likewise.
	(btk_hscale_draw_value): safety CLAMP the value's x position for
	BTK_POS_TOP and BTK_POS_BOTTOM, so we don't paint strings outside of
	our allocation.

	* btk/btkscale.c: implemented BtkScale::digits, BtkScale::draw_value
	and BtkScale::value_pos arguments.

Mon Jan 18 14:26:17 1999  Owen Taylor  <otaylor@redhat.com>

	* docs/Changes-1.2.txt: Some editing, a little more
	detail.

Mon Jan 18 13:25:14 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkmenu.[ch]: Added btk_menu_set_title() to
	set the title of a menu in the torn-off state.

	* btk/btkthemes.c (btk_theme_engine_get): When loading
	of theme engine fails, just warn and do without -
	don't error out.

	* btk/btkmain.c (btk_check_version): s/to/too/.

Mon Jan 18 01:21:03 1999  Lars Hamann  <lars@btk.org>

	* btk/btkctree.c (draw_row): fixed auto resize bug.

Sun Jan 17 17:35:28 CST 1999 Shawn T. Amundson <amundson@btk.org>

	* Released BTK+ 1.1.13

	* README:
	  INSTALL:
	  docs/btk-config.1: ver=1.1.13

Mon Jan 18 00:22:54 1999  Lars Hamann  <lars@btk.org>

	* btk/btkclist.c (btk_clist_button_press) (btk_clist_button_release):
	block drag source signal handler during column resizes.
	(btk_clist_set_column_visibility): resize clist if needed.
	(btk_clist_map): raise resize windows to make resize
 	cursor visible again.

Sun Jan 17 22:47:15 1999  Tim Janik  <timj@btk.org>

	* btk/btkwidget.[hc]: 
	* btk/btkspinbutton.[hc]: 
	* btk/btkscrolledwindow.[hc]:
	* btk/btkprogressbar.[hc]:
	* btk/btkpreview.[hc]: 
	* btk/btkobject.[hc]:
	* btk/btkentry.[hc]: 
	* btk/btkctree.[hc]:
	* btk/btkcontainer.[hc]:
	* btk/btkclist.[hc]:
	removed deprecated functions: btk_clist_set_border,
	btk_container_block_resize, btk_container_unblock_resize,
	btk_container_need_resize, btk_ctree_set_reorderable,
	btk_ctree_show_stub, btk_ctree_set_use_drag_icons,
	btk_entry_adjust_scroll, btk_object_class_add_user_signal,
	btk_preview_put_row, btk_progress_bar_construct,
	btk_scrolled_window_construct, btk_spin_button_construct,
	btk_widget_freeze_accelerators,	btk_widget_thaw_accelerators.

	* btk/btkcheckmenuitem.c: removed binary variant of
	btk_check_menu_item_set_state, this is still defined in btkcompat.h
	though.

	* docs/Changes-1.2.txt:
	removed section about btk_idle_remove_by_data vs.
	btk_timeout_remove_by_data, we actually don't even provide a
	btk_timeout_remove_by_data() function.
	added a table with removed functions and their replacements.
	
	* NEWS: updates for 1.1.13.

Sun Jan 17 17:56:33 1999  Owen Taylor  <otaylor@redhat.com>

	Patch from Felix Bellaby <felix@pooh.u-net.com>

	* bdk/bdk.c: Use XmbSetWMProperties to set
	the class/command on the loader window so that the
	client machine is also set in the same place.
	(For X11R5 sesssion management compatibility)

	* bdk/bdk.c: (bdk_set_sm_client_id) Implementation
	of function to set the session manager client ID.

	* bdk/bdkwindow.c (bdk_window_new): Set 
	WM_CLIENT_LEADER propertiy on all windows pointing
	back to BDK's leader window.

Sun Jan 17 12:01:57 1999  Owen Taylor  <otaylor@btk.org>

	* btk/btkrc.c (btk_rc_style_init): Allow a bg_pixmap
	of "<none>", as there was no way to set the background
	on all widget but some widgets. This is important
	because Text widgets with background images are
	slow and possibly ugly.

1999-01-17  Nat Friedman  <nat@nat.org>

	* btk/btkscrolledwindow.c (DEFAULT_SCROLLBAR_SPACING): New macro.
  	Changed the spacing from 5 to 3.

	* btk/btkmenubar.c (BORDER_SPACING): Changed the extra spacing on
 	the menubar from 2 to 0.

Sun Jan 17 11:51:17 1999  Owen Taylor  <otaylor@btk.org>

	* btk/btktext.c (btk_text_move_cursor): Fix typo
	[ btk-mailund-990116-0: Thomas Mailund Jensen <mailund@daimi.au.dk> ]

Sun Jan 17 11:15:05 1999 Christopher Blizzard  <blizzard@appliedtheory.com>

	* btk+.spec: Update to version 1.1.13, change packager address.

Sun Jan 17 14:52:29 1999  Tim Janik  <timj@btk.org>

	* btk/btkcompat.h:
	* btk/btkcheckmenuitem.[hc]:
	deprecated btk_check_menu_item_set_state, people should use
	btk_check_menu_item_set_active instead.
	
	* btk/testbtk.c:
	 s/btk_check_menu_item_set_state/btk_check_menu_item_set_active/.

Sun Jan 17 05:19:14 1999  Tim Janik  <timj@btk.org>

        * configure.in: incremented version number to 1.1.13, bin age 0,
	interface age 0.

	* btk/btkmain.c (btk_idle_remove_by_data): use g_idle_remove_by_data to
	remove idles, so `data' cannot conflict with other sources.

	* btk/btkcompat.h: define btk_style_apply_default_pixmap here.

	* btk/btkstyle.[hc]: removed btk_style_apply_default_pixmap.
	(struct _BtkStyle): reordered BtkStyleClass*klass; member.

Sat Jan 16 19:42:48 1999  George Lebl  <jirka@5z.com>

	* btk/btktooltips.c: for NO_WINDOW widgets, add their allocation.y
	  to the position of the tooltip. This fixes tooltip positioning
	  problems with some widgets such as a checkbox.

Sat Jan 16 14:01:53 1999  Stuart Parmenter <pavlov@btk.org>

	* btk/btklayout.c (btk_layout_put): check for child widget being NULL

Sat Jan 16 05:02:22 1999  Lars Hamann  <lars@btk.org>

	* btk/btkclist.c (btk_clist_button_press): fixed double click bug.

Fri Jan 15 19:16:42 1999  Tim Janik  <timj@btk.org>

	* btk/Makefile.am: define BTK_DISABLE_COMPAT_H for compilation of btk
	code.

	* btk/btkrc.c (btk_rc_style_unref): added an assertment.

	* btk/btkcompat.h:
	* btk/btklabel.h: 
	don't provide compatibility defines if BTK_DISABLE_COMPAT_H is defined.

	* btk/btkstyle.h:
	* btk/btkstyle.c: coding style, indentation and alignment fixups.
	(btk_draw_string): 
	(btk_paint_string): 
	(btk_draw_polygon):
	(btk_style_set_background): fixed assertments.
	(btk_default_draw_ramp): 
	(btk_default_draw_cross): 
	(btk_default_draw_oval): issue warnings since these functions aren't
	yet implemented.

	* bdk/bdkwindow.c:
	(bdk_window_hide): only unmap window if already mapped.
	(bdk_window_show): only map window if !mapped.
	(bdk_window_internal_destroy): destroyed windows can't be mapped.

	* btk/btkwidget.c (btk_widget_event): don't ignore expose events just
	because a resize is queued on a widget, we rely on the expose events
	now.

Fri Jan 15 10:22:21 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkwidget.c (btk_widget_class_init): 
	nparams for selection_get should be 3, not 2.
	[ From Damon Chaplin <damon@karuna.freeserve.co.uk> ]

	* btk/btkeventbox.c (btk_event_box_paint): Add a paint
	routine so queued redraws work inside event boxes.

Thu Jan 14 17:47:37 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkentry.c (btk_entry_draw_cursor_on_drawable): Only
 	 redraw character under cursor when not displaying 
	highlighted selection.

	* bdk/bdkrgb.c (bdk_rgb_init): Add in a cast to
	bpointer to make IRIX cc happy.

Thu Jan 14 12:29:50 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkcheckbutton.c (btk_check_button_draw): Restructure
	the drawing code to remove a bit of duplication - 
	and to remove a call to btk_widget_draw_focus()
	that queues a redraw when an expose occurs.

	* btk/btklabel.c (btk_label_expose): Fix up handling
	  of ypadding.

	* btk/btknotebook.c (btk_notebook_draw): If we redraw
	  the whole widget, also redraw the corresponding
	  areas of the child widget. (have_visible_child 
	  still has some problems)

	* bdk/bdkpixmap.c: Change some g_new's to g_new0 so
	  that fields unused for pixmaps get initialzized
	  sanely.

        * bdk/bdk.h bdk/bdkwindow.c bdk/bdkprivate.h: Add new calls
	  bdk_window_is_visible() and bdk_window_is_viewable()
	  and a mapped flag to the window private structure.
	
        * btk/btkbin.c btk/btkclist.c btk/btkfixed.c btk/btkitem.c
	  btk/btklayout.c btk/btklist.c btk/btkmenushell.c
	  btk/btknotebook.c btk/btkpaned.c btk/btktree.c
	  btk/btktreeitem.c btk/btkviewport.c: 
	Map windows after mapping children.
	
	* btk/btkwidget.c (btk_widget_clip_rect): Handle 
	rectangles completely clipped away correctly.

	* btk/btkwidget.c (btk_widget_idle_draw): Don't
	call btk_widget_draw if width or height is 0.

	* btk/btkwidget.c (btk_widget_idle_draw): Don't
	rely on BTK_REDRAW_PENDING after we've cleared
	it. (This was causing draw-combining to not
	happen at all).

	* btk/btkbin.c btk/btkscale.c: Remove uneccessary calls
	to btk_widget_queue_draw() when mapping.

Thu Jan 14 11:29:53 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkdnd.c (btk_drag_get_event_action): Make
	MOD1-drag also do action ask.

	* btk/btkdnd.c (btk_drag_button_release_cb): Send the
	button-release event we simulate to get grabs released,
	with a window of BDK_ROOT_PARENT instead of the actual 
	widget. This is a bad hack in some sense, but seems
	to work nicely. (It's sort of like what you would
	if you grabbed on button press, then the user 
	released outside of the widget.)

Thu Jan 14 20:29:16 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkstyle.[ch] (btk_style_apply_default_background): 
	Change copy_area => !set_bg. Use tile instead of 
	bdk_window_copy_area when drawing without !set_bg.
	
	This does mess up timj's neat check-button example,
	but is consistent with how we interpret background
	pixmaps everywhere else in the default scheme.

	Restructure code for clarity.

Thu Jan 14 19:19:51 1999  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdkevents.c: Do all event processing in
	dispatch() instead of prepare() and check().

Wed Jan 13 22:34:29 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkbutton.c btk/btkclist.c btk/btkhandlebox.c
	btk/btkframe.c btk/btk[hv]box.c btk[hv]paned.c btk/btklist.c
	btkmenu.c btkmenuitem.c btkmenubar.c btknotebook.c
	btk/btkscrolledwindow.c btk/btktable.c btk/btktree.c
	btk/btktreeeitem.c btk/btkviewport.c
	
	Fix up comparisons of signed and unsigned ints to avoid 
	assigning negative widths/heigths.

Wed Jan 13 21:18:41 1999  Owen Taylor  <otaylor@redhat.com>

	* acinclude.m4 (ac_result): Unset CATOBJEXT so
	that the macros and Makefiles correctly handle
	disabling NLS when no gettext is found.

Wed Jan 13 20:14:32 1999  Tim Janik  <timj@btk.org>

	* btk/btkarg.c (btk_arg_copy): in comparisions with BTK_TYPE_STRING, use
	the fundamental type to catch BTK_TYPE_IDENTIFIER as well.

	* btk/btkmenushell.c:
	(btk_real_menu_shell_activate_current):
	(btk_menu_shell_button_release): asure that we only activate sensitive
	menu items, reported by Dave Cole <dave@dccs.com.au>.

Wed Jan 13 13:28:00 1999  Tim Janik  <timj@btk.org>

	* btk/btkwidget.c: eliminate queue_clears or queue_draws where we know
	that expose events will be generated.
	(btk_widget_map): only queue_draw for NO_WINDOW widgets.
	(btk_widget_unmap): only queue_clear_child for NO_WINDOW widgets.
	(btk_widget_size_allocate): we don't need a queue_clear on changing
	allocations of !NO_WINDOW widgets, we do still need a full redraw for
	them though.

	* btk/btklabel.c (btk_label_set_text): check whether the new string
	actually differs from the original.

Tue Jan 12 22:50:44 PST 1999 Manish Singh <yosh@gimp.org>

	* acinclude.m4
	* ltconfig
	* ltmain.sh: upgrade to libtool 1.2d (with fixes for irix6 and osf)

Tue Jan 12 18:30:51 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/testdnd.c (label_drag_data_received): Add 
	a drag_data_received handler for the label.

Tue Jan 12 15:01:50 1999  Owen Taylor  <otaylor@redhat.com>

        * bdk/bdkevents.c: Removed the putback_events queue, 
	since it was causing problems with event ordering -
	just keep a single queue. If we need it, we can
	add priorities to events.

	* bdk/bdkevents.c: Annotate events with flags - we allocate
	a BdkEventPrivate structure in bdk_event_new() and use these
	flags to mark an event being translated as "pending" -
	I.e., not yet ready to be dequeued. So we can put
	the event on the queue and get the order of the
	events right. (This solves the double-click problems)
	
	* bdk/bdk.h bdk/bdkevents.h: Add bdk_event_peek() to get a copy
	of the next event on the event queue.
	
	* btk/btkmain.c (btk_main_do_event): Use bdk_event_peek()
	to check the next event without causing event queue
	reordering.

Tue Jan 12 15:41:20 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btklabel.c (btk_label_expose): Minor fix
	to handling of misc->[x/y]pad

Tue Jan 12 14:31:43 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkstyle.[ch] (btk_style_apply_default_pixmap): 
	Add back as wrapper function to restore source/binary 
	compatibility. grrrr.

Tue Jan 12 13:47:07 1999  Tim Janik  <timj@btk.org>

	* reworked the redrawing heuristics somewhat, this fixed a bunch of
	existing redrawing problems and majorly reduces overall redrawing needs
	during normal operation. basically we now only queue redraws when
	neccessary and much rely on the draw_area coalescing code in btkwidget.c
	to optimize the queued portions. widgets will now upon reallocation only
	get redrawed if their allocation has changed. upon hide/show only the
	area allocated by the child will be queued for the parent, this has the
	side effect that parents which change their appearance in dependance on
	the numer of visible children have to keep track of their children's
	visiblity and eventually fully redraw themselves. this is a minor
	constrain with great benefits in terms of redraw reduction, and only got
	triggered by the notebook widget.

	* btk/btkwidget.c:
	(btk_widget_queue_clear): don't bother if width and height == 0.
	(btk_widget_queue_clear_child): new static function to queue a redraw of
	the area obscured by a child on a parent.
	(btk_widget_queue_resize): queue_clear the widget if it is drawable.
	(btk_widget_show): queue resize on the widget before showing.
	(btk_widget_hide): queue resize on the widget after hiding.
	(btk_widget_map): queue_draw the widget after mapping.
	(btk_widget_unmap): queue_clear_child the widget.
	(btk_widget_size_allocate): queue_clear_child and queue_draw if the
	widget's allocation changed.
	(btk_widget_unparent): queue_clear_child so the parent redraws obscured
	portions.
	(btk_widget_real_show):
	(btk_widget_real_hide):
	(btk_widget_real_map):
	(btk_widget_real_unmap):
	(btk_widget_real_size_allocate): don't bother with redraw queueing,
	descendants that override these functions don't do either and we handle
	all redrawing/resizing related stuff before or after the signal emission
	now.

	* btk/btkcontainer.c:
	(btk_container_resize_children): don't bother about redrawing anymore
	since btk_widget_size_allocate handles that for us now.

	* btk/btknotebook.h:
	* btk/btknotebook.c:
	added a flag have_visible_child to indicate whether we need to draw
	non child related portions at all, e.g. shadows etc.
	(btk_notebook_draw): if have_visible_child changed, do a full paint
	instead of updating a small area only.

Mon Jan 11 20:44:35 1999  Tim Janik  <timj@btk.org>

	* btk/btkstyle.c: changed btk_style_apply_default_pixmap to
	btk_style_apply_default_background which takes an extra argument
	copy_area to determine NO_WINDOW widget pixmap copying.
	changed callers accordingly.

	* btk/btktogglebutton.c:
	(btk_toggle_size_allocate): 
	(btk_toggle_button_expose): 
	(btk_toggle_button_paint): avoid messing with our parent's window if
	toggle_button->draw_indicator == TRUE and we are a NO_WINDOW widget.

	* btk/btkcheckbutton.c (btk_real_check_button_draw_indicator): draw
	the draw_indicator with BTK_STATE_ACTIVE if the toggle button is active.

	* btk/check-n.xpm:
	* btk/check-y.xpm:
	* btk/testbtkrc: set pixmaps for ACTIVE and NORMAL check button
	bg_pixmaps.

Mon Jan 11 23:52:58 1999  Lars Hamann  <lars@btk.org>

	* btk/btklist.c (btk_list_signal_drag_begin)
	(btk_list_drag_begin): end drag selections if necessary.

	* btk/btkspinbutton.c/h (btk_spin_button_update): made function
	public. Manually force synchronization of spin button text and
 	adjustment value.

Mon Jan 11 15:23:32 1999  Tim Janik  <timj@btk.org>

	* btk/btktogglebutton.c: eliminated some queue_draws when invoking
	btk_widget_set_state, since that cares about redrawing already.
	some code cleanups.

	* btk/btktogglebutton.[hc]:
	* btk/btkfontsel.c:
	* btkgamma.c:
	s/btk_toggle_button_set_state/btk_toggle_button_set_active/ since
	set_state is already taken by btkwidget.h.

	* btk/btkcompat.h: #define btk_toggle_button_set_state
        btk_toggle_button_set_active.
        
        * btk/btkstyle.c: some indentation cleanups.

Mon Jan 11 15:12:33 1999  Tim Janik  <timj@btk.org>

	* btk/btktogglebutton.c (btk_toggle_button_set_mode): take previous
	visibility state into account when unrealizing.

Mon Jan 11 10:45:28 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkdnd.c: Only remove handlers for motion/button_release
	at drop, remove "selection_get" handler later.

Mon Jan 11 13:31:49 1999  Tim Janik  <timj@btk.org>

	* btk/btktypeutils.[hc]: removed Paolo Molaro's type creation hooks
	again, since they 1) don't care about infinite recursion (likely
	to achive), 2) we are in feature freeze for 1.2. this definitely
	deserves a sane implementation in 1.3 though (but without a hook
	return value, without seq_id hackery and with recursion checks).

Mon Jan 11 13:18:37 1999  Tim Janik  <timj@btk.org>

	* btk/btkwindow.c:
	(btk_window_key_release_event): 
	(btk_window_key_press_event): only pass key events to the focus widget
	if it is sensitive.

	* btk/btkmenuitem.c (btk_menu_item_select_timeout): don't popup the
	submenu if it isn't sensitive.
	(btk_menu_item_paint): state_type doesn't need to be reset to
	BTK_STATE_INSENSITIVE if the widget is insensitive anyways.

	* btk/btkcontainer.c (btk_container_real_focus): 
	* btk/btklist.c (btk_list_focus): 
	* btk/btkmenushell.c (btk_menu_shell_move_selected): 
	* btk/btknotebook.c (btk_notebook_focus): 
	s/BTK_WIDGET_SENSITIVE/BTK_WIDGET_IS_SENSITIVE/ since a widgets
	sensitivity is determined through the parent as well,
	BTK_WIDGET_SENSITIVE is only of interest inside btkwidget.c, everywhere
	else BTK_WIDGET_IS_SENSITIVE (widget) needs to be used to check for
	sensitivity.

	* btk/btkaccelgroup.c (btk_accel_group_activate): don't activate
	object if it is an insensitive widget.

Mon, 11 Jan 1999 08:09:08 +0100 Paolo Molaro <lupus@debian.org>

	* btk/btktypeutils.[ch]: add btk_type_{add,remove}_creation_hook().
	You can have a notification when a type is created.

1999-01-11  Tim Janik  <timj@btk.org>

	* btk/btkmain.c (btk_propagate_event): added an assertement.

Sun Jan 10 14:45:37 1999  Owen Taylor  <otaylor@btk.org>

	* btk/btktext.c (text_properties_equal): Fixed
	cut and paste bug when comparing text property
	bg colors.
	[ Matt Aubury <Matt.Aubury@comlab.ox.ac.uk> ]

1999-01-10  Tim Janik  <timj@btk.org>

	* btk/btksignal.c (btk_signal_lookup): if the lookup failed, try
	to initialize the object class and reattempt the lookup, reported
	by Paolo Molaro <lupus@lettere.unipd.it>.

Sat Jan  9 17:36:20 1999  Owen Taylor  <otaylor@redhat.com>

	* configure.in (ALL_LINGUAS): Added cs to ALL_LINGUAS.

Sat Jan  9 17:27:49 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkfilesel.c (btk_file_selection_populate):
	Mark another string for internationalization.
	[ Stanislav Brabec <utx@k332.feld.cvut.cz> ]

Sat Jan  9 14:02:08 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btktooltips.c (btk_tooltips_force_window): Set
	name "btk-tooltips" on tip window so that a style
	can be set for tooltips.

Fri Jan  8 19:00:17 1999  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdkdnd.c (bdk_window_cache_filter): Fixed
	some list-manipulation breakage.

	* bdk/bdkdnd.c (bdk_window_cache_destroy): Free 
	window cache structure.

	* btk/btkdnd.c (btk_drag_set_icon_pixmap): Set an
	event mask on the drag window so clicking on it
	doesn't pop up root menus, etc.

	* btk/btkdnd.c (btk_drag_button_release_cb): Remove
	signal handlers at button release.

Fri Jan  8 00:42:00 1999  Lars Hamann  <lars@btk.org>

	* btk/btkspinbutton.c (btk_spin_button_get_value_as_int)
	(btk_spin_button_get_value_as_float): call btk_spin_button_update
	before returning a value

	* btk/btkclist.c (btk_clist_motion): don't allow 'drag selections'
	if clist is a drag source.
	(btk_clist_drag_begin): remove pointer grabs, end ongoing selections.

	* btk/btkctree.c (remove_grab): copy of clist function.
	(btk_ctree_drag_begin): let clists drag_begin method set the
	source info struct.

Thu Jan  7 19:10:21 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkviewport.c (btk_viewport_style_set): Fixes
	to drawing the background of the bin window 
	so that clearing and redrawing of child
	widgets work properly.

	* btk/btkwidget.c (btk_widget_idle_draw): Juggle around
	data so that if somebody triggers more redraw queuing
	from a expose_event handler, it doesn't confuse the
	heck out of BTK+. (But is highly liable to cause 
	an infinite loop...)

Thu Jan  7 12:31:41 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkselection.c (btk_target_list_unref): Fix some
	more memory leaks.

Wed Jan  6 23:14:19 1999  Lars Hamann  <lars@btk.org>

	* btk/btkctree.c (btk_ctree_drag_motion): fix for dnd bug reported
	by Bertrand Guiheneuf. Don't return FALSE if source widget != dest.
	widget.

Wed Jan 06 10:04:12 1999  Tristan Tarrant  <ttarrant@etnoteam.it>

	* configure.in,po/it.po: added Italian translations

Tue Jan 05 21:18:00 1999  George Lebl  <jirka@5z.com>

	* btk/btkmenu.c,btk/btkmenuitem.c,btk/btkeditable.c: free the
	  event that was returned to us by btk_get_current_event

Tue Jan  5 19:01:18 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkcolorsel.c (btk_color_selection_dialog_init): Push
	BdkRGB's visual and colormap around the color selection
	dialog so that the window and the previews have the
	same colormap. If an app adds things to the colorsel
	dialog, it will have to take care of them itself.

Tue Jan  5 15:03:47 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkmain.c (btk_propagate_event): Make 
	btk_propagate_event() non-static, we need it in btkdnd.c 
	so that the button-release we synthesize gets propagated
	correctly.

	* btk/btkdnd.c: Use btk_propagate_event() so
	release gets to a BtkList. But we can't really
	get this right without access to the windows
	event masks and doing X-style propagation ourselves.

Tue Jan  5 12:40:57 1999  Owen Taylor  <otaylor@redhat.com>

        * btk/btkpreview.c: Add a size_allocate() routine 
	and set the size of the preview window equal
	to the area we are going to draw on, instead 
	of the entire allocation. Do this to avoid having 
	to set a parent-relative background.
	
Tue Jan  5 11:51:32 1999  Owen Taylor  <otaylor@redhat.com>

	* btk/btkentry.c (btk_entry_draw_cursor_on_drawable):
	When redrawing the under-cursor character, don't
	redraw the terminating NULL.
	[ From: dov@imagic.weizmann.ac.il (Dov Grobgeld) ]

Tue Jan  5 11:31:55 1999  Owen Taylor  <otaylor@redhat.com>
	 
	* btk/btkselection.c (btk_target_list_unref): Free
	memory allocated for target lists.

	* btk/btkdnd.c (btk_drag_drop_finished): Release
	selections before destroying info structure.

	* bdk/bdkdnd.c bdktypes.h (bdk_drag_get_protocol): Add
	new value BDK_DRAG_PROTO_NONE, use it for non-drag
	targets, to quiet Purify.

	* bdk/bdkdnd.c (bdk_window_register_dnd): Set size
	of property properly.

Mon Jan  4 03:45:42 CST 1999 Shawn T. Amundson <amundson@btk.org>

	* Released BTK+ 1.1.12

	* INSTALL:
	  NEWS:
	  README:
	  configure.in:
	  btk+.spec:
	  docs/btk-config.1:
	  btk/btkfeatures.h.in: version=1.1.12

1999-01-04  Sung-Hyun Nam  <namsh@lgic.co.kr>

	* configure.in (ALL_LINGUAS): Added 'ko'.

Sun Jan  3 17:41:22 1999  Lars Hamann  <lars@btk.org>

	* btk/btkctree.c (real_tree_expand): fixed auto_resize bug

Sat Jan  2 03:54:30 1999  Tim Janik  <timj@btk.org>

	* bdk/bdk.h (BDK_PRIORITY_EVENTS): make this G_PRIORITY_DEFAULT.

	* bdk/bdkevents.c (bdk_events_init): add the source and the poll fd with
 	a priority of BDK_PRIORITY_EVENTS.

1999-01-02  Jeff Garzik  <jgarzik@pobox.com>

	* configure.in, config.h.in, bdk/bdkimage.c:
	Removed features.h test.

	* bdk/bdkdnd.c:
	Guard public functions against NULL pointer derefs.

Fri Jan  1 18:41:09 PST 1999 Manish Singh <yosh@gimp.org>

	* bdk/bdk.c
	* bdk/bdkinputnone.h
	* btk/btkruler.c: casts to get rid of const warnings

	* btk/Makefile.am: fix btktypebuiltins.h dependencies, and do a
	cmp so people don't whine about rebuilds

	* btk/btknotebook.c: use g_snprintf on translated strings, so we
	don't get buffer overflows

	* btk/btkrc.c: use g_strdup_printf instead of g_malloc/sprintf
	Plug some memleaks.

1999-01-01  Jeff Garzik  <jgarzik@pobox.com>

	* configure.in, config.h.in:
	Check for features.h.

	* bdk/bdkevents.c (bdk_event_put, bdk_events_queue):
	Fixed bug in linked list append logic by replacing hand-coded
	logic with a call to g_list_append.  Bug found by tml.

	* bdk/bdkimage.c:
	'gcc -ansi -pedantic' on GNU/Linux spews warnings and errors
	in sys/ipc.h, including one specific admonishment to use
	_SVID_SOURCE or _XOPEN_SOURCE.	Manually defined the latter, and
	included features.h if present to obtain the necessary
	side-effects.

	* btk/btkclist.c, btk/btkeditable.c:
	Eliminates comma-after-final-element warnings.

	* btk/btkfontsel.c (btk_font_selection_init):
	Fixed bug where an intl string was declared as _("x") in
	local var initializer.

1998-12-31  Jeff Garzik  <jgarzik@pobox.com>

	* btk/btklabel.c (btk_label_split_text_wrapped):
	word->space is now initialized correctly.
	Reported by Chi-Deok Hwang <cdhwang@sr.hei.co.kr>.

1998-12-30  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* btk/btkmain.c (btk_main_do_event): Fix memory leak.
	bdk_event_put would make a copy of next_event, and next_event was
	not being freed.

Wed Dec 30 18:39:21 CST 1998 Shawn T. Amundson <amundson@btk.org>

	* Released BTK+ 1.1.11

	* INSTALL:
	  NEWS:
	  README:
	  configure.in:
	  btk+.spec:
	  docs/btk-config.1:
	  btk/btkfeatures.h.in: version=1.1.11
	
1998-12-29  Owen Taylor  <otaylor@srv-19-29.roc.ny.frontiernet.net>

	* bdk/bdkim.c (bdk_wcstombs): Fixed off-by-one
	error when computing length.

Thu Dec 24 14:35:48 1998  Jeff Garzik  <jgarzik@pobox.com>

	* bdk/bdkevents.c, bdk/bdkim.c, bdk/bdkrgb.c, bdk/bdkwindow.c,
	  btk/btkprogressbar.c:
	Pull in string.h for various mem*() and str*() functions,
	in an autoconf-friendly way.

Thu Dec 24 12:40:45 1998  Jeff Garzik  <jgarzik@pobox.com>

	* bdk/bdkfont.c: removed unused var
	* bdk/bdkim.c: 64-bit cast
	* btk/btkaccelgroup.c: point to const data
	* btk/btkdnd.[ch]: (btk_drag_dest_set, btk_drag_source_set):
	  Made const-correct.
	* btk/btkfontsel.c: kill uninitialized var warning
	* btk/btkselection.[ch]: (btk_target_list_new,
	  btk_target_list_add_table, btk_selection_add_targets):
	  Made const-correct.
	* btk/testbtk.c: 64-bit cast

Thu Dec 24 03:16:52 CST 1998 Shawn T. Amundson <amundson@btk.org>

	* INSTALL:
	  NEWS:
	  README:
	  configure.in:
	  btk+.spec:
	  docs/btk-config.1:
	  btk/btkfeatures.h.in: version=1.1.10

Wed Dec 23 20:31:40 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btklabel.c: Fix problem where empty labels were 
	getting a requisition height of zero, and trailing 
	newlines were being ignored.

Wed Dec 23 13:58:14 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btklabel.c (btk_label_parse_uline):
	label->label should be the mb text _after_ removing
	the underlines, not before.

	* btk/btkmenu.c: Reverted Elliot's tearoff-menu-item
	title hack. If it deserves being done, it deserves
	being done right.
	
1998-12-23  Elliot Lee  <sopwith@redhat.com>

	* btk/btkmenu.c: Allow programmer to btk_object_set_data(obj,
 	"BtkTearoffMenuItem_window_title", ..) on a BtkMenuItem and have
 	it be recognized. If we're getting the title out of the BtkLabel,
 	then remove all underscores.

Tue Dec 22 17:01:43 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkdnd.c (btk_drag_dest_handle_event): 
	Request XmTRANFER_FAILURE on Motif drops not within
	a drop zone. I don't know why this is necessary,
	but it is.

	* bdk/bdkdnd.c (bdk_drop_reply): Fixed error where
	Motif flag field in response was getting wrong
	values.

Tue Dec 22 15:55:39 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkoptionmenu.c (btk_option_menu_button_press): 
	Return TRUE for button press events we handle.
	(Allows option menus in radio buttons to work...)

Tue Dec 22 14:50:25 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkdnd.c (btk_drag_find_widget): Optimization -
	when we've already found a widget, skip all checks
	for subsequent children.

	* btk/btkdnd.c (btk_drag_find_widget): Checked for
	!MAPPED, not !VISIBLE, since a widget (like a notebook
	page), can be VISIBLE, but !REALIZED or !MAPPED.

	* btk/btkdnd.c (btk_drag_find_widget): Use forall(),
	not foreach().

Mon Dec 21 22:01:49 1998  Lars Hamann  <lars@btk.org>

	* btk/btkclist.c (btk_clist_motion): fixed column resize bug

Sun Dec 20 04:48:59 1998  Tim Janik  <timj@btk.org>

	* bdk/bdk.h (BDK_PRIORITY_EVENTS): export the priority at which
	events are processed.

	* btk/btk[main|signal|container].[ch]: removed deprecated _interp
	variants: btk_container_foreach_interp, btk_idle_add_interp,
 	btk_timeout_add_interp, btk_signal_connect_interp.

Sat Dec 19 18:45:30 PST 1998 Shawn T. Amundson <amundson@btk.org>

	* configure.in: added sv to ALL_LIGNUAS

Sat Dec 19 22:49:40 1998  Tim Janik  <timj@btk.org>

	* btk/btktypeutils.c (btk_type_query): eek, fixed an embarrasing bug
	that caused this function to always return NULL (noticed by marius
 	vollmer).

Sat Dec 19 17:28:30 1998  Owen Taylor  <otaylor@redhat.com>

	* configure.in: Don't add the bthread libs to 
	BUNNYLIB_LIBS either, or -lbthread -lpthread will get 
	pulled into all applications because of shlib deps.

	* btk/btkmain.h btk/btkwidget.c btk/btk bdk/bdk: 
	Use BUNNYLIB's priority #define. Revise scale of 
	priorities.

Sat Dec 19 03:44:29 PST 1998 Manish Singh <yosh@gimp.org>

	* btk/btkmain.c: always run a g_main_iteration, even if
	there are no active main loops. This fixes the gimp splash
	screen.

Sat Dec 19 05:37:51 1998  Tim Janik  <timj@btk.org>

	* btk/btklabel.c (btk_label_expose): removed return_if_fail
 	(label->words != NULL) since that's a valid case when the label
 	is empty, or just default constructed.
	fixed indentation prototype arguments and braces in some places.
	also, pointer comparisions and initializations are done with NULL
	not 0, there's a reason GLib defines NULL.

	* bdk/bdkevents.c (bdk_events_pending): return (queued_events ||
 	putback_events) so this again returns whether events are pending,
	not whether other sources like idles are pending.

	* btk/btkmain.c (btk_main_iteration_do): 
	(btk_main_iteration): return whether the loop is done, not whether
	something got dispatch to restore the original behaviour (yosh: this
 	fixes code like in GleSelector).

Fri Dec 18 19:20:45 PST 1998 Manish Singh <yosh@gimp.org>

	* btkbutton.[ch]
	* btktogglebutton.c: s/(enter|leave)_button/$1/g, since pthreads.h
	no longer conflicts
	
Sat Dec 19 01:56:13 1998  Lars Hamann  <lars@btk.org>

	* btk/btkclist.c (btk_clist_button_press): fixed BDK_2BUTTON_PRESS
 	bug.

Fri Dec 18 15:30:43 PST 1998 Manish Singh <yosh@gimp.org>

	* configure.in: add ja to ALL_LINGUAS

Fri Dec 18 15:19:54 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btksocket.c (btk_socket_filter_func): Marked
	plug window as destroyed before destroying the 
	window.

Fri Dec 18 14:17:14 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkmenu.c (btk_menu_popup): Set the usize on the
	tearoff window so when we reparent the window out,
	the window doesn't shrink down.

1998-12-18  Sebastian Wilhelmi  <wilhelmi@ira.uka.de>

	* configure.in: do not export the bunnylib flags for thread support to
	btk-config.

Fri Dec 18 01:32:59 1998  Tim Janik  <timj@btk.org>

	* btk/btkmain.c (btk_main): added bdk_flush() after g_main_run(), so we
 	get the original behaviour back, i.e. the event queue needs to be flushed
	after a main loop has been quitted.
	(btk_main): add/remove the current main loop to/from the main loop
 	before/after init/quit functions have been exected to preserve the
 	original btk_main_quit() behaviour.

Thu Dec 17 23:48:29 1998  Tim Janik  <timj@btk.org>

	* bdk/bdkevents.c (bdk_events_init): changed argument order in call
	to g_main_add_poll() to match recent bunnylib changes.

Thu Dec 17 20:33:28 1998  Owen Taylor  <otaylor@redhat.com>

	* btk-config.in: Add @INTLLIBS@. 
	btk-scier-981116-0.patch  Sean Cier <scier@PostHorizon.com>) ]

	* btk/btkcolorsel.c btk/btkfilesel.c btk/btkfontsel.c
	  btk/btkgamma.c btk/btkinputdialog.c 
	  btk/btknotebook.c btk/btkrc.c btk/btkthemes.c
	  btk/btktipsquery.c: 
	
	Applied parts of btk-egger-981215-1 [ Daniel Egger
	<Daniel.Egger@t-online.de> ] marking additional strings for
	internationalization.
	
	* po/nl.po: Added Dutch translation from 
	Paul Siegmann <pauls@euronet.nl>.
	
Thu Dec 17 18:25:52 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkdnd.c (btk_drag_drop_finished): Remove the
	info tag from the context so if the source unexpectedly
	responds in the future, we do nothing properly.

Thu Dec 17 18:24:41 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btk[hv]paned.c (btk_[hv]paned_size_allocate): Handle
	the case where one side of the the pane is empty.

	* btk/btkfilesel.c (btk_file_selection_init): Set
	dir_title before using it. (Pointed out by
	Lavoie Philippe <lavoie@zeus.genie.uottawa.ca>)
	
Thu Dec 17 10:53:20 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btklabel.c (btk_label_set_text): Free 
	previous label->label_wc.

	* btk/testbtkrc: Leave font, not fontset commented
	in by default.

1998-12-17  Sebastian Wilhelmi  <wilhelmi@ira.uka.de>

	* bdk/bdkim.c: Define bdk_use_mb outside USE_XIM guard. Removed
	unnecessary USE_XIM guard inside another. Made bdk_use_mb
	static. Compile bdk_set_locale also if not USE_XIM.	

Thu Dec 17 00:26:01 1998 Shawn T. Amundson <amundson@btk.org>

	* Released BTK+ 1.1.9

	* INSTALL:
	  NEWS:
	  README:
	  configure.in:
	  btk+.spec:
	  btk/btkfeatures.h.in:
	  docs/btk-config.1: version=1.1.9

Wed Dec 16 21:20:00 PST 1998 Manish Singh <yosh@gimp.org>

	* autogen.sh: rm -rf intl breaks --disable-nls, put it back

	* btkbutton.[ch]
	* btktogglebutton.c: s/(enter|leave)/$1_button/g.
	Digital: 1 BTK+: 0 (for now)

Wed Dec 16 22:38:22 CST 1998 Shawn T. Amundson <amundson@btk.org>

	* bdk/bdkevents.c: updated call to g_main_add_poll
          instead of g_main_poll_add

Wed Dec 16 23:32:05 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btklabel.c (btk_label_expose): Remove 
	unnecessary cast.

Wed Dec 16 22:50:52 1998  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdk.c bdk/bdkim.c: Check for broken bunnylibc 2.0 
	mb functions, and avoid them.

Wed Dec 16 16:57:55 1998  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdkevents.c (bdk_events_queue): Don't
	call XPending() if we have putback events.

Wed Dec 16 16:04:41 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btklabel.c (btk_label_expose): Do nothing
	on empty string, quietly.

Wed Dec 16 15:36:19 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkentry.c (btk_entry_draw_cursor_on_drawable):
	Redraw the character under the cursor when removing
	the cursor.

Wed Dec 16 13:06:17 1998  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdk.[ch] btk/btkmain.[ch] btk/btkprivate.h: Move main
	thread lock back to BDK - we need it there for locking
	when translating events. Rename things appropriately.

Wed Dec 16 11:44:21 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkrange.c (btk_range_expose): Fix a x/y typo.

Wed Dec 16 10:20:27 CST 1998 Shawn T. Amundson <amundson@btk.org>

	* Released BTK+ 1.1.8

	* ChangeLog:
	  INSTALL:
	  README:
	  btk+.spec:
	  docs/btk-config.1: version=1.1.8

1998-12-16  Sebastian Wilhelmi  <wilhelmi@ira.uka.de>

	* bdk/bdkglobals.c: Define bdk_xim_ic only, if USE_XIM is defined.

Wed Dec 16 07:03:32 1998  Tim Janik  <timj@btk.org>

	* btk/btkwidget.h: 
	* btk/btkwidget.c: s/USER_DRAW/APP_PAINTABLE/. provided
	btk_widget_set_app_paintable() which users can use to make
	a widget paintable for the application. changed other files accordingly.

Wed Dec 16 05:26:32 1998  Tim Janik  <timj@btk.org>

        * configure.in: version bump to 1.1.8, binary age 0, interface age 0,
	depend on GLib 1.1.8.

	* bdk/bdkprivate.h:
	* bdk/bdkglobals.c: removed last Bdk threads specific bits.

	* btk/btkmain.c (btk_init): s/g_thread_supported/g_thread_supported()/.

	* btk/btkprivate.h: changed BTK_THREADS_ENTER and BTK_THREADS_LEAVE
	to function macros BTK_THREADS_ENTER() and BTK_THREADS_LEAVE().
	honour G_THREADS_ENABLED in the definition of BTK_THREADS_ENTER()
 	and BTK_THREADS_LEAVE(). changed callers accordingly.

Tue Dec 15 21:26:26 CST 1998 Shawn T. Amundson <amundson@btk.org>

	* autogen.sh: warn if bunnylib.m4 or gettext.m4 are not found 
          in aclocal's directory.

Tue Dec 15 21:36:14 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/testbtk.c (create_layout): Create buttons,
	not combos again.

1998-12-15  Joel Becker  <jlbec@ocala.cs.miami.edu>

	* autogen.sh: reordered gettextize and aclocal, because
	gettextize was messing up aclocal.m4.

Tue Dec 15 22:30:44 1998  Lars Hamann  <lars@btk.org>

	* btk/btkclist.h : 
	removed clist flag : BTK_CLIST_DRAG_SELECTION
	added flags : BTK_CLIST_REORDERABLE, BTK_CLIST_USE_DRAG_ICONS,
	BTK_CLIST_DRAW_DRAG_LINE, BTK_CLIST_DRAW_DRAG_RECT
	(BtkCListDragPos) : new enum for DND
 	(BtkButtonAction) : new enum of possible mouse button actions
	(struct _BtkCList): added button_actions array.
 	Added drag_button and click_cell struct, to store cell and
 	mouse button of last button_press_event
	
	(struct _BtkCListClass): new class method draw_drag_highlight.
	(btk_clist_set_reorderable) (btk_clist_set_use_drag_icons) :
	new functions. Moved from btkctree.h. Now clist is reorderable
	as well.
	(btk_clist_set_button_actions) new function to customize mouse
	button actions.

	* btk/btkclist.c:
	(btk_clist_drag_begin)
	(btk_clist_drag_motion)
	(btk_clist_drag_leave)
	(btk_clist_drag_end)
	(btk_clist_drag_drop)
	(btk_clist_drag_data_get)
	(btk_clist_drag_data_received) : new dnd widget methods to
	implement clists reorderability via DND

	(remove_grab) : new function. remove mouse grab if necessary.
	(draw_drag_highlight) : new method. Draw dnd highlight depending
	on clist flags BTK_CLIST_DRAW_DRAG_LINE and BTK_CLIST_DRAW_DRAG_RECT

	(btk_clist_class_init): added object args "reorderable" and
 	"use_drag_icons"

	(btk_clist_button_press) (btk_clist_button_release) :
	use button_actions array to decide which action to perform.
	(btk_clist_motion) : start reorder operation if necessary.

	* btk/btkctree.h :
	(struct _BtkCTree): removed drag_icon, icon_widht, icon_height,
	drag_row, drag_source, drag_target, reorderable, use_icons,
	in_drag, drag_rect
	(btk_ctree_set_reorderable) :  deprecated function.
 	use btk_clist_set_reorderable instead.
	(btk_ctree_set_use_drag_icons) : deprecated function.
 	use btk_clist_set_use_drag_icons instead.

	* btk/btkctree.c :
	(btk_ctree_class_init): removed object args "reorderable" and
	and "use_drag_icons"

	(draw_xor_line) (draw_xor_rect) (create_drag_icon) (check_cursor)
	(tree_toggle_selection) (set_mouse_cursor) : removed
	
	(draw_drag_highlight) : new clist method. replacement for
	draw_xor_line and draw_xor_rect functions
	(check_drag) renamed check_cursor function

	(btk_ctree_drag_begin)
	(btk_ctree_drag_motion)
	(btk_ctree_drag_data_received) : new dnd methods to implement ctrees
	reorderability via DND

	(btk_ctree_button_release)
	(btk_ctree_button_motion) : removed.

	* btk/testbtk.c:
	(create_clist) : added new reorderable toggle button
 	
Tue Dec 15 19:50:41 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkctree.c btk/btkclist.c btk/testbtk.c: Use 
	base[NORMAL] instead of bg[PRELIGHT] so CLists now can be
	used in detergent commercials.

Tue Dec 15 16:54:09 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btklabel.h: Moved btk_label_set() compatiblity
	define from <btkcompat.h> to <btklabel.h> for
	compatibility.

1998-12-15  Jeff Garzik  <jgarzik@pobox.com>

	* configure.in, bdk/Makefile.am, btk/Makefile.am:
	Removed last remaining thread-related configure bits 
	that have been moved into GLib.

1998-12-15  Elliot Lee  <sopwith@bogus.cuc.ml.org>

	* bdk/bdkevents.c: Use G_IO_ERR|G_IO_HUP|G_IO_NVAL
	as the mask for checking for BDK_INPUT_EXCEPTION events.

1998-12-15  Martin Baulig  <martin@home-of-linux.org>

	* acinclude.m4: Make the gettext check for for libc5 systems.

	* autogen.sh: Not running gettextize fails on a fresh CVS checkout
	and we'll get a lot of bug reports tomorrow, so I add it back.

	* acinclude.m4: Rename AM_GNU_GETTEXT_BTK to AM_BTK_GNU_GETTEXT and
	AM_WITH_NLS_BTK to AM_BTK_WITH_NLS to avoid this ugly automake
	warnings.

Tue Dec 15 16:06:15 1998  Owen Taylor  <otaylor@redhat.com>

	* acinclude.m4: Provide a hacked version of the
	  gettext macros that never use the included gettext.
	 
	* Makefile.am configure.in: Remove references
	  to intl/
	
	* autogen.sh: Don't run gettextize.

Tue Dec 15 14:30:35 1998  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdk.h bdk/bdkfonts.c: Added bdk_text_extents_wc()

        * Patch from Jonathan Blanford <jrb@redhat.com> to add line wrapping
	  to label. (Based on patch from Jeff Dairiki
	  <dairiki@mac-ceope.apl.washington.edu> btk-dairiki-971208-0)

	- Adds new function btk_label_set_line_wrap()
	- implement BTK_JUSTIFY_FILL.
	- rename btk_label_set to btk_label_set_text() add
	   btk_label_set() to btkcompat.h.

	* Use an internal wc representation in the label, so
	  that we handle underlining and line breaks correctly
	  for multi-byte strings.

Tue Dec 15 13:32:28 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkwidget.h: Added BTK_USER_DRAW flag.

	* btk/btkwindow.c: Honor BTK_USER_DRAW flag.

	* btk/btkdrawwindow.c btk/Makefile.am: Removed 
	BtkDrawWindow, which BTK_USER_DRAW obsoletes.

Tue Dec 15 11:37:05 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkmain.c: Fixed up some warnings.

Tue Dec 15 10:32:01 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btk{h,v,}paned.{c,h}: Add new functions 
	btk_paned_set_position(),
	btk_paned_pack1/2(). The latter take a
	shrink and resize parameters, that allows setting
	minimum sizes and getting 'relative' resizing.

Tue Dec 15 10:26:23 1998  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdkevents.c: Keep separate putback_events and 
	queued_events queues so that we get both FIFO and 
	preemptive behavior for	bdk_event_put().

Tue Dec 15 09:22:44 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btkrc.c (btk_rc_init): Removed unused 
	variable, fixed minor memory leak.

	* bdk/bdk.c: Fixed another merge problem.

Tue Dec 15 08:53:38 1998  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdk.c (bdk_get_display): Remove bdk_signal,
	which crept back in in last commit.

Tue Dec 15 01:38:53 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/Makefile.am: Commented out testthreads from
	the build process, since we won't have any idea
	how to create a thread.

	* configure.in (LIBS): use bunnylib-config ... bthread
	so we always build a thread-compatible library.

        * btk/btkaccellabel.c btk/btkclist.c btk/btkcolorsel.c
	  btk/btkcombo.c btk/btkcontainer.c btk/btkentry.c
	  btk/btklist.c btk/btkmenuitem.c btk/btknotebook.c
	  btk/btkrange.c btk/btkselection.c btk/btkspinbutton.c
	  btk/btktext.c btk/btktooltips.c btk/btkwidget.c:
	
	Add BTK_THREADS_ENTER/LEAVE pairs around timeouts
	and idles to account for the fact that they are no
	longer called within the BTK+ lock.

	* btk/btkprivate.h: Added definitions for locking
	the main BTK+ mutex.
	
	* btk/btkmain.c: Re-implement the main loop 
	in terms of the GLib main loop.

	* bdk/bdk.h bdk/bdkthreads.c bdk/Makefile.am: Removed threading 
	functionality, as it seems better to subsume BDK within the 
	BTK+ lock than vice-versa.

        * bdk/bdkevents.c: New file, containing event handling bits 
	from bdk.c.

	* bdk/bdkevents.c: Implement event source for BDK
	events.
	
	* configure.in bdk/bdkevents.c: Removed attempts to 
	subtract base_id, which were already non-functional.

Mon Dec 14 23:05:20 PST 1998 Manish Singh <yosh@gimp.org>

	* acconfig.h
	* configure.in: removed IPC_RMID_DEFERRED_RELEASE check

	* bdk/bdk.c: remove signal handlers, since we do an IPC_RMID
	after XShmAttach, and nobody complained

Tue Dec 15 02:27:42 MET 1998 Sven Neumann <sven@gimp.org>

	* po/de.po: Replaced the crappy german po-file with a valid one.

Mon Dec 14 16:10:05 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkrc.c (btk_rc_init): Append locale-specific
	suffixes to default rc file names, and look these
	up in addition to the base filename, to facilitate
	having the correct fontset per-locale.

	move $(sysconfdir)/btkrc to $(sysconfdir)/btk/btkrc

	* btk/btkitemfactory.[ch] (btk_item_factory_set_translate_func):
	New function to set a function to translate menu paths.

	* btk/btkrc.c (btk_rc_add_initial_default_files): Free
	results of g_strsplit().

1998-12-14  Nuno Ferreira  <nmrf@rnl.ist.utl.pt>

	* configure.in (ALL_LINGUAS): Added 'pt'.

	* po/pt.po: Added Portuguese translation.

Mon Dec 14 20:04:31 1998  Stefan Jeske  <stefan@btk.org>

	* btk/btkspinbutton.c: Only call btk_spin_button_update if
 	the spinbutton is editable.

Mon Dec 14 12:24:13 1998  Owen Taylor  <otaylor@redhat.com>

	* HACKING: Added gettext-10.35

	* autogen.sh: Run gettextize.

Wed Dec  9 16:29:06 1998  Owen Taylor  <otaylor@redhat.com>

        Applied btk-egger-981010-[12] 
	[ Daniel.Egger@t-online.de (Daniel Egger) ]

	* btk/btkintl.h: New file - defines for localization.

	* btk/btkfilesel.c btk/btkinputdialog.c: Mark strings
	for internationalization.

	* btk/btkmain.c: call bindtextdomain

	* po/ - directory for translations. Initially includes
	German translation.

Mon Dec 14 02:42:11 1998  Tim Janik  <timj@btk.org>

	* btk/btkwidget.c: made BtkWidget::grab_focus a RUN_LAST and
	RUN_ACTION signal. moved stuff from btk_widget_grab_focus() into
	btk_widget_real_grab_focus() so a signal is always emitted
	if the focus is grabbed on a widget.

Mon Dec 14 02:13:01 1998  Tim Janik  <timj@btk.org>

	* btk/btkmenuitem.c: fixed submenu popup timeouts, we decide whether or
	not to delay the submenu popup from a menu item deselection time stamp.
	the code looks even more hackish than before, but in practice "feels"
	very well.

1998-12-13  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* btk/btkwidget.h (struct _BtkWidgetClass): Added a "grab_focus"
	signal for widgets.  When the signal is emitted, the widget will
	grab the focus.  This is needed to let the user press an
	accelerator key in a dialog box and have the corresponding widget
	be focused.

	* btk/btkwidget.c (btk_widget_class_init): Create the "grab_focus"
	signal.  The default handler is simply btk_widget_grab_focus().

Sun Dec 13 22:15:48 GMT 1998  Tony Gale  <gale@btk.org>

	* docs/btk_tut.sgml: Update the following sections to the
	  current API:
	    - Container Widgets
	    - CList Widget
	    - List Widget
	    - Tree Widget

Sat Dec 12 19:11:35 1998  Tim Janik  <timj@btk.org>

	* btk/btkmenuitem.c: made BtkMenuItem::activate a BTK_RUN_ACTION signal.

	* btk/btkbutton.c: made BtkButton::clicked a BTK_RUN_ACTION signal.

	* btk/btkfeatures.h.in: define BTK_HAVE_FEATURES_1_1_8.

Sat Dec 12 17:46:55 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btklayout.c (btk_layout_unrealize): Mark
	child->window as destroyed so we don't destroy
	it again.

Sat Dec 12 17:18:32 1998  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdkfont.c (bdk_text_extents): Corrections
	to computation of extents of text from a font set.
	(from Chi-Deok Hwang <cdhwang@sr.hei.co.kr>)
         and Akira Higuchi <a-higuti@math.sci.hokudai.ac.jp>)
	
Fri Dec 11 08:59:12 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btklistitem.c (btk_list_item_style_set):
	* btk/btklist.c     (btk_list_style_set):
	Added "style_set" handlers.

Fri Dec 11 05:49:30 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkclist.c (btk_clist_style_set): Add in a "style_set"
	handler so that the background of the clist changes
	with the theme.

Thu Dec 10 22:02:49 CST 1998 Shawn T. Amundson <amundson@btk.org>

	* Released BTK+ 1.1.7

	* INSTALL:
	  NEWS:
	  README:
	  configure.in:
	  btk+.spec:
	  btk/btkfeatures.h.in: 
	  docs/btk-config.1: Version to 1.1.7

Thu Dec 10 20:48:19 PST 1998 Manish Singh <yosh@gimp.org>

	* btk/btkclist.c: avoid void pointer math

	* btk/btkhscale.c
	* btk/btkhscrollbar.c
	* btk/btkvscale.c
	* btk/btkvscrollbar.c: removed trailing , from enums

	* btk/btksignal.c: can't use enums as a bitfield type, use buint

	* btk/testbtk.c: removed C++ comment added by owenpoo

Thu Dec 10 21:48:34 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkdnd.[ch]: Added btk_drag_source_unset()

Thu Dec 10 20:42:22 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkdnd.c (btk_drag_dest_handle_event): Use 
	bdk_window_get_origin() instead of bdk_window_get_position,
	because get_position is unreliable for plugs. 

	This is a bad hack, maybe we need BDK_WINDOW_PLUG?

Thu Dec 10 17:58:49 GMT 1998  Tony Gale  <gale@btk.org>

	* docs/btk_tut.sgml:
	  - re-write the BtkProgressBar section to the 1.1 API.
	  - add an Appendix listing all the signals
	    (apologies to TimJ for taking so long in using his hard work
	     in automating the extraction - thanx Tim). 
	* examples/*: bring them all upto the tutorial versions

Thu Dec 10 02:21:16 1998  Jeff Garzik  <jgarzik@pobox.com>

	* btk/testdnd.c: use g_snprintf, eliminate need for string.h
	* btk/testrgb.c: include string.h, for strlen

Wed Dec  9 17:39:26 1998  Owen Taylor  <otaylor@redhat.com>

	* configure.in: Add a case for success in 
	test for XUnregisterIMInstantiate, to prevent
	screwing up $LIBS.

Wed Dec  9 13:06:31 1998  Sebastian Wilhelmi  <wilhelmi@ira.uka.de>
 
 	* bdk/bdkim.c (bdk_ic_new,bdk_ic_{set,get}_attr): Fixed argument
 	list and return type for non-XIM fallback.
 
 	* configure.in: Only build XIM-support if available.
 
Wed Dec  9 12:23:30 1998  Owen Taylor  <otaylor@redhat.com>
	
	* btk/testselection.c (main): Add in missing 'flags'
	field to target list.

	* bdk/bdkproperty.c (bdk_atom_intern): Actually
	add the atoms to the local cache.

Wed Dec  9 04:57:31 PST 1998 Manish Singh <yosh@gimp.org>

	* bdk/bdkprivate.h: put text after #endif in comment

	* bdk/bdktypes.h: change whitespace in enum to shut up makeenums.pl

	* btk/testdnd.c: #include <string.h>

Mon Dec  7 10:27:09 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkwidget.c: Destroy widgets _after_ propagating unrealize
	signals through the widget heirarchy. This is unpleasant, as it
	causes more X traffic, but is necessary, because we have to clean
	up our Input Contexts before destroying the X windows.
	(from matsu-981109-0.patch)
	
Mon Dec  7 10:18:18 1998  Owen Taylor  <otaylor@redhat.com>

	Applied btk-a-higuti-981202-0 : 
	[ a-higuti@math.sci.hokudai.ac.jp (Akira Higuchi) ]
	
	* bdk/bdk.h bdk/bdk.c
		(bdk_mbstowcs): New function. Nearly equals to mbstowcs, but
			implemented by a combination of Xlib functions, so
			it works even with X_LOCALE.
		(bdk_wcstombs): New function.
		(g_mbtowc): Removed. No longer needed.

	* bdk/bdk.h bdk/bdkfont.c bdk/bdkdraw.c: 
	        Added _wc() variants to bdk_text_width(), 
		bdk_char_width(), bdk_draw_text(),
		
	* bdk/bdki18n.h
		(mblen, mbtowc, wctomb, mbstowcs, wcstombs,
		 wcslen, wcscpy, wcsncpy):
			Removed. No longer needed.
		(iswalnum): Removed.
		(bdk_iswalnum): New macro.
		(bdk_iswspace): New macro.
	* bdk/bdktype.h
		(BdkWChar): New typedef.
	
	* btk/btkentry.h, btk/btkentry.c
		There are many changes according to the change of the
		internal representation of text, from multibyte string
		to wide characters. 
	* btk/btkprivate.h, btk/btkmain.c
		Removed the variable btk_use_mb and related codes.
	* btk/btkspinbutton.c
		Some changes according to the change of type of entry->text.
	* btk/btktext.h, btk/btktext.c
		Changed the internal representation of text. We use BdkWchar
		if a fontset is supplied. If not, we use buchar to save
		memory.
	
Tue Dec  1 15:20:39 1998  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdkwindow.c (bdk_window_new): When creating
	a window with a specified non-system visual, use
	a matching colormap.

Mon Nov 30 11:50:13 1998  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdk.c bdk/bdkim.c bdk/bdkprivate.h bdk/bdk.h
	  bdk/bdktypes.h btk/btkeditable.c btk/btkmain.c
	  btk/btkentry.c btk/btktext.c:

	 Applied matsu-981109-0
	 [ matsu@arch.comp.kyutech.ac.jp (Takashi Matsuda) ]
	
	 - Change system of setting input method values 
	   from varargs to a structure, similar to GC's
	   or window attributes.

	 - Various fixes to event handling.

	 Also:

	 * bdk/bdkim.c: Split of input method stuff into
	   a separate source file.

	 * Remove BdkIM typedef, change everything from
	   BdkIC to BdkIC * to be consistent with the
	   rest of BTK.
	
Wed Dec  9 00:41:41 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkrc.c (btk_rc_add_initial_default_files): Allocate
	correct amount of memory for strings.

Tue Dec  8 18:29:05 CST 1998 Shawn T. Amundson <amundson@btk.org>

	* Released BTK+ 1.1.6

	* NEWS: updated

        * btk/Makefile.am:
          btk/testbtk.c:
          btk/btkrc.h:
          btk/btkrc.c: Read in default files.

Wed Dec  9 00:49:12 1998  Tim Janik  <timj@btk.org>

	* btk/btktypeutils.h:
	* btk/btktypeutils.c: added btk_type_query() which returns a newly
	allocated structure holding certain type specific informations.
	fixed the big bunch of `discards const' warnings with the
 	initialization of enum/flags values.

Tue Dec  8 15:10:17 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkwindow.c (btk_window_transient_parent_realized):
	Fixed order of arguments to bdk_window_transient_for().

Tue Dec  8 18:02:57 GMT 1998  Tony Gale  <gale@btk.org>

	* examples/Makefile: simple top level Makefile that invokes all
	  the sub-directory Makefiles.

1998-12-08  Andrew T. Veliath  <andrewtv@usa.net>

	* btk/testbtk.c: Functions to test the toolbar space style.

	* btk/btktoolbar.c: Add a private BtkToolbarChildSpace subclass of
	BtkToolbarChild to hold allocation. Set default space style to
	BTK_TOOLBAR_SPACE_EMPTY, define SPACE_LINE_* for separator
	fraction defaults.
	(btk_toolbar_paint_space_line): New function; paints the separator
	line, using "toolbar" as the detail.
	(btk_toolbar_expose): (btk_toolbar_draw): Handle CHILD_SPACE when
	style is set to SPACE_LINE.
	(btk_toolbar_size_allocate): Store space allocations.
	(btk_toolbar_insert_element): If we are a space, allocate and
	initialize a BtkToolbarChildSpace instead of a BtkToolbarChild.
	(btk_toolbar_set_space_style): New function.

	* btk/btktoolbar.h: Add BtkToolbarSpaceStyle, with styles of EMPTY
	and LINE. Add prototype for btk_toolbar_set_space_style.

Mon Dec  7 16:03:55 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkthemes.h: Remove random unnecessary includes
	of standard headers.

1998-12-07  Damon Chaplin  <DAChaplin@msn.com>

	* btk/btkfontsel.c (btk_font_selection_select_best_style): made sure
	we only try to match styles which are currently shown.

	(btk_font_selection_init): set the notebook tabs homogeneous and set
	the border, so we don't need to set the size explicitly (bad for i18n).
	Used the clist auto-resize feature for the font and style lists on the
	main page and all the filters. Used padding for the 'Reset Filter'
	button instead of spaces around it (bad for i18n).

	(btk_font_selection_find_font): when searching for
	a font, if we can't match both the family and foundry, we return any
	font where just	the family matches. (The foundry can even be '*'.)

	(btk_font_selection_show_available_styles): 
	(btk_font_selection_realize_list): don't set the style clist row
	colours (for the charset rows) until the clist is realized, since we
	use the clist style's insensitive colours.

Mon Dec  7 13:38:06 1998  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdkimage.c (bdk_image_new): Use IPC_RMID
	_after_ doing XShmAttach. This should work everywhere,
	and avoid the need for signal handlers or configure
	checks.

Thu Dec  3 19:58:45 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkinputdialog.c: Use _add_with_viewport() for
	scrolled window contents.

1998-12-07  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* btk/btkpaned.h (struct _BtkPaned): Removed the unused cursor
	field in the structure.

Mon Dec  7 15:15:06 GMT 1998  Tony Gale <gale@btk.org>

	* docs/btk_tut.sgml: Start mass update for BTK 1.1
        * examples/extract.sh: Look for the best version of awk
        * examples/extract.awk: Fix FD leak
        * example/base: minimal example from Tutorial

Mon Dec  7 01:29:27 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btkwindow.c: New functions
        btk_window_set_transient_for() - set up a "transient for" relationship.
	btk_window_set_default_size() - set the initial size of a window
	   distinct from its minimum size.
	btk_window_set_geometry_hints() - Allow the user to set
	   minimum, maximum sizes, aspect rations, and gridded geometry, 
	   possibly all with respect to a subwidget of the window.
	These interfaces are still a wee bit experimental.

	* bdk/bdk.c: Added bdk_window_set_transient_for(),
	bdk_window_set_geometry_hints(), and bdk_window_set_role().

	* bdk/bdktypes.h: Added new types for find-grained specification
	of WM hints.

	* btk/testbtk.c: Various changes to tests to test the
	above new functions.

	* btk/btkfontsel.c: Squash a few 'const' warnings.
	
	* btk/btktogglebutton.c (btk_toggle_button_realize): Restored
	call to btk_style_set_background() to prevent egrebunnyious
	flashing to black.

Mon Dec  7 03:52:01 1998  Tim Janik  <timj@btk.org>

	* btk/btksignal.c (btk_handlers_run): when marshalling connect_object
	signals, don't pass the data pointer twice, but swap it with the
	object pointer (proposed on Nov 30 1998 on btk-devel-list).

Mon Dec  7 03:08:39 1998  Tim Janik  <timj@btk.org>

	* btk/btktypeutils.h: 
	* btk/btktypeutils.c: reverted Marius's change to expose the type systems
	internal type info data to the user. if such functionality is required
	we should provide wrapping accessors, ala btk_signal_query(). also the
	BtkTypeInfo structures are dynamically allocated memory portions, so
	only the type system is really allowed to access that stuff.

	* btk/btksignal.c (btk_signal_connect_by_type): reverted marius change,
	since it destroys the possibility to implement automatic marshaller
	lookups some day, and it also disables third party code's ability to
	connect to any signal.

Mon Dec  7 01:32:18 1998  Tim Janik  <timj@btk.org>

	* btk/btkfilesel.c (btk_file_selection_key_press): always intercept the
	Tab key on the entry. the focus shouldn't get lost even if completion
	is attempted from an empty entry, since an empty entry string does
	indeed have a valid completion meaning (complete all).
	(btk_file_selection_init): cast the bchar array parameter in calls to
	btk_clist_new_with_titles() to quit compiler warnings.
	(check_dir): the no_stat_dirs struct must not be const, since we do
	indeed modify its contents.

	* btk/testbtk.c (event_watcher): adapted prototype to fit new emission
	hook semantics.

	* btk/btksignal.h:
	* btk/btksignal.c:
	changed emission allocation, so we don't use a doubly linked list
	but link ourselfs (singly linked).
	changed emission hooks, they get the emision parameters passed as
	well now and are emitted during the actuall signal emission (after
	the RUN_FIRST class method, but prior to RUN_FIRST handlers).
	the existing restrictions do still apply to signal emission hooks,
 	i.e. an emission may not be stopped or restarted from an emission hook.
	due to possibly huge perfomance impacts, frequent use of emision hooks
	is also not recommended.
 	(btk_signal_next_and_invalidate): added an
 	assertments which explicits what the code assumes anyways: a
	maximum amount of 65535 signals.

	* btk/btkcontainer.h: deprecated btk_container_foreach_interp(),
	btk_container_foreach_full() should be used instead.

	* btk/btkmain.h:
	deprecated btk_timeout_add_interp and btk_idle_add_interp, since
	we provide _full variants.

	* btk/btksignal.h: deprecated btk_signal_connect_interp(), we provide
	btk_signal_connect_full() for long enough now.

1998-12-06  Marius Vollmer  <mvo@zagadka.ping.de>

	* btk/btksignal.c (btk_signal_newv): Allow a NULL marshaller.
	(btk_signal_connect_by_type): Allow only no_marshal handlers to
	connect to signals with a NULL marshaller.

	* btk/btktypeutils.c (btk_type_get_info): New.
	btk/btktypeutils.h (btk_type_get_info): New prototype.

Sun Dec  6 14:27:35 1998  Stefan Jeske  <stefan@btk.org>

	* btk/btkspinbutton.c (btk_spin_button_draw_arrow): Grey out
	arrows if wrap == FALSE and interval borders are reached.

Sat Dec  5 21:07:09 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btkaspectframe.c (btk_aspect_frame_size_allocate): Fixed
	long-standing typo in aspect ratio computation code.
	(pointed out by Sebastian Rittau <srittau@jroger.in-berlin.de>)

Fri Dec  4 01:20:06 1998  Lars Hamann  <lars@btk.org>

	* btk/btkclist.c (btk_clist_button_release): call toggle_row with
	valid row numbers only
	(toggle_row): check if clist_row != NULL

Fri Dec  4 00:50:12 1998  Lars Hamann  <lars@btk.org>

	* btk/btkctree.c (btk_ctree_export_to_gnode): fixed for-loop.

	* btk/btkclist.c 
	(btk_clist_set_column_visibility)
	(btk_clist_column_titles_active)
 	(btk_clist_column_titles_active)
	(btk_clist_column_title_passive)
 	(btk_clist_column_title_active): few additional tests whether
 	column->button != NULL

Thu Dec  3 16:49:18 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkdnd.c (DROP_ABORT_TIME): Changed to 5 min
	from 10 seconds, so it doesn't abort while users
	have an ACTION_ASK menu up.

	* btk/btkdnd.c: Hide the icon window between sending a a 
	drop event to the destination and displaying the
	snapback animation, so that it doesn't hang around
	during ACTION_ASK.

Thu Dec  3 16:37:42 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkclist.c (get_cell_style): Use BTK_STATE_INSENSITIVE
	for the foreground of cells for CLists in the insensitive
	state, instead of BTK_STATE_PRELIGHT.

Thu Dec  3 06:20:59 1998  Tim Janik  <timj@btk.org>

	* btk/btkwindow.c: moved checks upon focus setting from
 	btk_window_real_set_focus to btk_window_set_focus, so we don't
	emit the signal if unneccessary.

	* btk/btkwidget.c (btk_widget_grab_focus): clear up the old focus
	containers when grabbing focus on a new widget. this is based on
	a patch from Alexis Mikhailov, submitted to btk-list on 4 Nov 1998.

	* btk/btkclist.c (btk_clist_focus_out): set CLIST_CHILD_HAS_FOCUS
	flag, so we take the buttons into consideration upon the next focus
	request.

	* btk/btkcontainer.c (btk_container_set_focus_child): fixed an
 	assertment.

Wed Dec  2 17:45:21 CST 1998 Shawn T. Amundson <amundson@btk.org>

	* btk/btkpixmap.c: Fixes for low-color displays and a slight
	  enhancement for true-color displays.

	* INSTALL:
	  README:
	  configure.in:
	  btk+.spec:
	  docs/btk-config.1: up to version 1.1.6

Wed Dec  2 01:36:49 PST 1998 Manish Singh <yosh@gimp.org>

	* btk/btkfeatures.h.in: lets #define BTK_HAVE_FEATURES_1_1_6 before
	we release it this time

Wed Dec  2 01:39:02 1998  Tim Janik  <timj@btk.org>

	* btk/btknotebook.h: 
	* btk/btknotebook.c: s/btk_notebook_nth_page/btk_notebook_get_nth_page/.

	* incremented version number to 1.1.6 and made Btk
 	dependant on GLib 1.1.6.

	* btk/btkwidget.h (struct _BtkRequisition): changed width and height
 	from buint16 to bint16, since sizes bigger than 32767 are not supported
 	anyways, and aritmethics with intermediate negative values are possible
 	now.

Tue Dec  1 00:00:04 1998  Tim Janik  <timj@btk.org>

	* btk/btkscrolledwindow.c:
	implementation of BTK_POLICY_NEVER functionality, added rationales
	on the policy and size requisition handling at the top.
	(btk_scrolled_window_size_request):
	we assume a default minimum for our child's width and height
	if [hv]scrollbar_policy != BTK_POLICY_NEVER, except when the user
	specified the dimension explicitely.
 	(btk_scrolled_window_size_allocate): 
	do not show scrollbars if [hv]scrollbar_policy == BTK_POLICY_NEVER.

	* btk/btkviewport.c (btk_viewport_size_request): report the real
	size we require (including the child).

        * btk/btkclist.c:
	(btk_clist_size_request): report the real size required.

	* btk/btkenums.h (enum BtkPolicyType): added BTK_POLICY_NEVER.

	* btk/btkobject.c (btk_object_init_type): object_type doesn't
	need to be a static variable.

Mon Nov 30 22:41:25 1998  Tim Janik  <timj@btk.org>

	* btk/btkclist.h: 
	* btk/btkclist.c: 
	* btk/btkviewport.h:
	* btk/btkviewport.c:
	* btk/btktext.h:
	* btk/btktext.c:
	* btk/btklayout.h:
	* btk/btklayout.c:
	* btk/btkwidget.h:
	* btk/btkwidget.c:
	* btk/btkscrolledwindow.h:
	* btk/btkscrolledwindow.c:
	s/scroll_adjustements/scroll_adjustments/
	s/scroll_adjustments/set_scroll_adjustments/g

Tue Dec  1 22:45:58 1998  Lars Hamann  <lars@btk.org>

	* btk/btkclist.h (struct _BtkCListClass): new class method/signal
	row_move.
	* btk/btkclist.c (btk_clist_row_move): new public function.
	emit a row_move signal
	(real_row_move): move source_row to dest_row
	(btk_clist_swap_rows): use btk_clist_row_move calls.
	(btk_clist_columns_autosize): resize all columns to their optimal
	width
	* btk/btkctree.c (real_row_move): use btk_ctree_move to move
	entire sub-tree.
	* btk/btknotebook.c (btk_notebook_nth_page): get nth page widget.

Tue Dec  1 02:40:22 PST 1998 Manish Singh <yosh@gimp.org>

	* configure.in
	* bdk/Makefile.am
	* btk/Makefile.am: Put -DFOO stuff into Makefile.am INCLUDES.
	Separate vars for each, for granularity.

Tue Dec  1 02:19:54 1998  Tim Janik  <timj@btk.org>

	* btk/btkenums.h: fixed a stupid error of mine about the run type
	values.

1998-11-30  Elliot Lee  <sopwith@cuc.ml.org>

	* {bdk,btk}/*.c: Make read-only data structures "static const" to
	allow them to be shared, mainly including (but not limited to) the
	BtkTypeInfo structures for each class.

	* btk/btkfilesel.c: Add /net to the "leave me alone" directory listing.

Mon Nov 30 12:17:10 1998  Jeff Garzik  <jgarzik@pobox.com>

	* btk/btksignal.c:
	Surround debug variable with #ifdef to silence gcc.

	* btk/btknotebook.c (btk_notebook_reorder_child):
	Added initializer to quiet gcc warning.
	Added assertion to check for null pointer deref.

Mon Nov 30 10:11:29 1998  Tim Janik  <timj@btk.org>

	* btk/testbtkrc: merged testbtkrc with the pre-themes one, removed
 	system specific includes.

	* btk/btksignal.c: asured that stop and restart emissions are also
 	checked and processed for not connected objects. fixed up restart
	emission administration. invoke emission hooks after emission, hooks
	are not supposed to muck around with the current emission, and
	may also not cause emission restarts. fixed up stop emission
	administration.

Mon Nov 30 06:20:36 1998  Tim Janik  <timj@btk.org>

	* btk/testbtk.c: added an event watcher for enter/leave based on
	signal emission hooks.

	* btk/btkobject.c (btk_object_class_init): made BtkObject::destroy a
	BTK_RUN_NO_HOOKS signal.

	* btk/btksignal.h: 
	* btk/btksignal.c: implemented emission hooks, new hooks can be added
	to a signal with btk_signal_add_emission_hook or
	btk_signal_add_emission_hook_full, and can be removed again with
	btk_signal_remove_emission_hook.

	* btk/btkenums.h: remove BTK_RUN_MASK, since it doesn't represent
	an appropriate mask for signal runtypes for a long time now.
	added BTK_RUN_NO_HOOKS value, which is used to flag signals
	that do not allow the running of signal hooks.

1998-11-26  Michael Krause  <m.krause@tu-harburg.de>

        * btk/btknotebook.c (btk_notebook_switch_page): made 'page_num'
        argument a bint: switch_page signal delivers valid page numbers
        again.

Sun Nov 29 06:12:01 1998  Tim Janik  <timj@btk.org>

	* btk/btkscrolledwindow.c (btk_scrolled_window_set_[hv]adjustment): 
	set composite names.

	* btk/btktypeutils.c (btk_type_unique): removed default initialization
	check, people must use btk_type_init().
	fixed up type allocation for foreign fundamentals.

	* btk/btkwidget.h: 
	* btk/btkwidget.c: added btk_widget_set_composite_name() which is meant
	for internal use by containers, that want to assign specific composite
	names to their composite children.
	added btk_widget_get_composite_name() which will return a newly
 	allocated string, containing the composite name of a widget. valid
	composite names can only be retrived from widgets that have a parent
	assigned and are flagged as BTK_COMPOSITE_CHILD.

	* btk/btkcontainer.h:
	* btk/btkcontainer.c: added a new function
 	btk_container_child_default_composite_name() which will return a
	newly allocated string, holding the composite name of a containers
	child. a default implementation is provided which will compose the
	composite name out of the widgets type and its sequential children
 	id. this implementation can be overidden through a new class function
	*(composite_name)().

Sat Nov 28 10:57:59 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkwindow.c (btk_window_expose_event): Removed bogus
	expose_event handler - we had two expose_event
	handlers!

Sat Nov 28 03:13:42 1998  Tim Janik  <timj@btk.org>

	* btk/btkscrolledwindow.h: 
	* btk/btkscrolledwindow.c: changed scrolled window inheritance,
	it inherits from BtkBin now.

	* btk/btkbin.c (btk_bin_unmap): removed superfluous check for
	visibility of child.
	(btk_bin_draw): removed superfluous check for BTK_WIDGET_DRAWABLE().
	added check so a child gets only drawn if it's visible.

	* btk/btkwidget.h: 
	* btk/btkwidget.c: removed btk_widget_draw_children().

	* btk/btkstyle.h: 
	* btk/btkstyle.c: rmoved btk_reset_widget_shapes.

	* btk/btkwidget.h: 
	* btk/btkwidget.c: removed crufty relict: btk_widget_is_child().
	added internal function btk_widget_reset_shapes() from btkstyle.c.

	* btk/btkrc.h:
	* btk/btkrc.c: (btk_rc_find_pixmap_in_path): removed bogus gscanner
	argument, changed callers.

	* btk/btkmenufactory.c: BtkMenuFactory is deprecated for a long time,
	it will issue a warning now.

	* btk/btkcompat.h: new file to #define aliases for historic
 	function names.

	* changed 8 function names for consistency and provided aliases to keep
	source compatibility in btkcompat.h:
	(btk_accel_label_get_accel_width): renamed from btk_accel_label_accelerator_width
	(btk_container_set_border_width): renamed from btk_container_border_width
	(btk_notebook_get_current_page): renamed from btk_notebook_current_page
	(btk_packer_configure): renamed from btk_packer_set_child_packing
	(btk_paned_set_gutter_size): renamed from btk_paned_gutter_size
	(btk_paned_set_handle_size): renamed from btk_paned_handle_size
	(btk_scale_get_value_width): renamed from btk_scale_value_width
	(btk_window_set_position): renamed from btk_window_position

	* renamed a few recently added funtions for consistency:
	(btk_notebook_get_tab_label): renamed from btk_notebook_query_tab_label.
	(btk_notebook_get_menu_label): renamed from btk_notebook_query_menu_label.
        (btk_progress_configure): renamed from btk_progress_reconfigure.

Fri Nov 27 18:57:20 PST 1998 Manish Singh <yosh@gimp.org>

	* btk/btkscrolledwindow.c (btk_scrolled_window_add_with_viewport):
	check for existing viewport first, and don't add one if there
	already is one

Sat Nov 28 00:06:49 1998  Tim Janik  <timj@btk.org>

	* btk/btkwidget.h: 
	* btk/btkwidget.c: deprecated btk_widget_freeze_accelerators and
	btk_widget_thaw_accelerators, we provide btk_widget_lock_accelerators
	and btk_widget_unlock_accelerators.

	* btk/btklayout.h:
	* btk/btklayout.c: implemented incremental freezing facility.

	* btk/btktext.h: 
	* btk/btktext.c: implemented incremental freezing facility.

	* btk/btkenums.h:
	* btk/btkaccelgroup.h: moved enum BtkAccelFlags into this place.

	* btk/btkentry.h:
	* btk/btkentry.c:
 	deprecated btk_entry_adjust_scroll().
 	
 	* random BtkType, macro and indentation fixes.

Fri Nov 27 22:50:15 1998  Tim Janik  <timj@btk.org>

	* btk/btkclist.h: 
	* btk/btkclist.c: implemented incremental freezing facility, added
	a new class member (*refresh)() which takes over the thaw
 	functionality. the clist FROZEN flag got removed on the way.
	* btk/btkctree.c: adaptions to feature the clist refresh functionality
	and incremental freezing.

	* btk/btkcalendar.c: implemented incremental freezing facility.

Fri Nov 27 11:41:27 1998  Raph Levien  <raph@gimp.org>

	* bdk/bdkinputcommon.h (bdk_input_common_init): Fixed it so that
	it still includes the core pointer in bdk_input_devices even
	if the XInput extension is not present in the X server.

Fri Nov 27 12:17:15 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkdnd.[ch] (btk_drag_get_source_widget): New function to
	get the source widget of a drag.

	* btk/btkdnd.[ch]: Target flags BTK_TARGET_SAME_[WIDGET/APP]
	to restrict certain targets to the same widget or to
	the same application.

	* btk/testdnd.c: Test btk_drag_get_source_widget().
	
Thu Nov 26 19:11:46 1998  Lars Hamann  <lars@btk.org>

	* btk/btk-boxed.defs (BtkCTreeNode): define BtkCTreeNode as boxed type
	* btk/btkctree.c (btk_ctree_class_init): use BTK_CTREE_NODE_TYPE
	instead of BTK_TYPE_POINTER in signal definitions.
	(patch from James Henstridge <james@daa.com.au>)

Thu Nov 26 18:48:44 1998  Lars Hamann  <lars@btk.org>

	* btk/btkclist.c (set_cell_contents)
	* btk/btkctree.c (set_cell_contents): call column_auto_resize only
 	if auto.resize == TRUE

	* btk/btknotebook.c (btk_notebook_set_shape) (btk_notebook_expose):
 	don't draw tab, if show_tabs == FALSE
 	(bug reports from Alexis Mikhailov / Dave Cole)
 	(btk_notebook_focus_changed) (btk_notebook_draw_focus): draw only
 	the focus rectangle, not the hole tab.

Thu Nov 26 03:18:08 1998  Tim Janik  <timj@btk.org>

	* btk/btkclist.h: 
	* btk/btkctree.h: 
	* btk/btkclist.c:
	* btk/btkctree.c: reverted bogus and undocumented!!! changes from
	Jay Cox (98/11/23 13:53:26) which `const' qualified char* arrays.

	* btk/maketypes.awk: changed underline substitution, so we get
	BTK_TYPE_CTREE_POS instead of the broken BTK_TYPE_C_TREE_POS.
	* btk/makeenums.pl: likewise.
	* btk/btkctree.c: adapted type names accordingly.

Tue Nov 24 11:31:06 1998  Owen Taylor  <otaylor@redhat.com>

	* docs/Changes-1.2.txt: Edited section on the ScrolledWindow.

	* btk/btklayout.c (btk_layout_set_[hv]adjustment): Remove
	some code duplication.

	* btk/btklayout.[ch] Fixed mapping and unmapping of child windows
	and child widgets when scrolling greater than 32k pixels.

	* testbtk.c: Modified layout test to test scrolling over 
	long distances.

	* btk/btkplug.c: Added a few blank lines.

Tue Nov 24 11:11:05 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btklayout.[ch]: Fixed up copyright message.

	* bdk/bdkrgb.c (DM): Make the dither matrix constant
	so it can be shared.

	* btk/btkdnd.c: Make cursor bitmaps const.

	* bdk/bdk.h bdk/bdkpixmap.c: Added const to 
	bdk_pixmap/bitmap_create_from_data.

Tue Nov 24 07:46:09 1998  Tim Janik  <timj@btk.org>

	* docs/Changes-1.2.txt: added a section on scrolled windows and
	scrollable widgets.

1998-11-24  Andrew T. Veliath  <andrewtv@usa.net>

	* btk/btktoolbar.c (btk_toolbar_insert_element): Include radio
	buttons when setting relief for button items.
	(btk_toolbar_set_button_relief): Same.

1998-11-23  Jeff Garzik  <jgarzik@pobox.com>

	* bdk/Makefile.am, btk/Makefile.am:
	Removed DEFS "+=" mess that breaks recent automakes.
	INCLUDES is the correct way to add to CFLAGS from Makefile.am.

	* bdk/bdk.c, bdk/bdkglobals.c, bdk/bdkimage.c, bdk/bdkinput.c,
	bdk/bdkpixmap.c, bdk/bdkthreads.c, bdk/bdkwindow.c,
	bdk/gxid_lib.c, btk/fnmatch.c, btk/btkclist.c, btk/btkmain.c,
	btk/testthreads.c:
	Include "config.h" instead of "../config.h".
	Now that DEFS works again, automake will automatically pass us
	the location of config.h in -I.

Mon Nov 23 22:10:09 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/Makefile.am btk/btk.h btk/btklayout.[ch]
	btk/btkplug.[ch] btk/btksocket.[ch] btk/btk.h:

	Added layout widget for scrolling arbitrarily big areas.
	Added plug/socket widgets for interprocess embedding.

	These widgets still, at some point, need to be
	made more pure in their use of BDK, as opposed
	to raw X.

	* btk/testbtk.c: Added test for layout widget.
	
1998-11-23  Jeff Garzik  <jgarzik@pobox.com>

	* btk/btkclist.c: (btk_clist_swap_rows):  Bugfix from
	Brandon Long <blong@fiction.net> - do the right thing with first
	and last, which are the absolute values of row arguments row1
	and row2.

Mon Nov 23 04:24:55 PST 1998 Manish Singh <yosh@gimp.org>

	* btk/btkprogress.c: (btk_progress_set_adjustment): make a saner
	default adjustment (from 0 to 100) instead. I'm not sure if this
	is the correct level for the fix, but btk_progress_bar_new()'s
	original default behavior is restored.

1998-11-23  Martin Baulig  <martin@home-of-linux.org>

	* btk/btkfeatures.h.in (BTK_HAVE_FEATURES_1_1_5): Define this so
	we can check for latest BTK features.

1998-11-23  Havoc Pennington  <hp@pobox.com>

	* btk/btktoolbar.c: (btk_toolbar_set_relief):
	(btk_toolbar_insert_element): When setting relief, also affect
	toggle buttons.

Sun Nov 22 20:37:06 PST 1998 Manish Singh <yosh@gimp.org>

	* btk/btkobject.h: remove extraneous comma

Mon Nov 23 05:21:50 1998  Tim Janik  <timj@btk.org>

	* btk/btkcontainer.c:
 	(btk_container_add_with_args): 
	(btk_container_addv): 
	(btk_container_add): removed assertements for constructed containers
	again, since this essentially breaks the "child" arg.

	* btk/btktooltips.c (btk_tooltips_force_window): fixup the draw_window
	reference count, we don't need to reference toplevels that already have
	destroy notifiers.

	* btk/btkscrolledwindow.c: check for the composites existance in
	_forall since we might not be already constructed.

Sun Nov 22 14:34:58 CST 1998 Shawn T. Amundson <amundson@btk.org>

	* Released BTK+ 1.1.5

	* configure.in: require GLib 1.1.5

Mon Nov 23 03:21:17 1998  Tim Janik  <timj@btk.org>

	* btk/btktext.c (btk_text_destroy): disconnect hadj & vadj, not
	2 * hadj.
	(btk_text_finalize): only unref the current_font if we have
	been realized.

Sat Nov 21 18:41:13 CST 1998 Shawn T. Amundson <amundson@btk.org>

	* configure.in:
	  INSTALL:
	  NEWS:
	  README:
	  btk+.spec:
	  docs/btk-config.1: Version incremented to 1.1.5

Sun Nov 22 16:21:28 1998  Tim Janik  <timj@btk.org>

	* btk/btkprogress.c: added args ::show_text, ::text_xalign,
 	::text_yalign, ::activity_mode.

	* btk/btkprogressbar.c: added construct arg ::adjustment. added args
 	::bar_style, ::orientation, ::discrete_blocks, ::activity_step,
 	::activity_blocks.
	(btk_progress_bar_new):
	(btk_progress_bar_new_with_adjustment): use btk_widget_new().
	(btk_progress_bar_construct): deprecated.

	* btk/btkvscrollbar.c:
	(btk_vscrollbar_draw_step_back): 
	(btk_vscrollbar_draw_step_forw): use "vscrollbar" as detail for
 	btk_paint_arrow, to be consistent with hscrollbar.

	* btk/btktext.c
	added construct args ::hadjustment, ::vadjustment.
	added args ::line_wrap, ::word_wrap.
	(btk_text_class_init): added scroll_adjustments signal.
	(btk_text_new): use btk_widget_new.
	(btk_text_disconnect): remove adjustement with btk_text_set_adjustments,
	so we don't screw the reference counts and don't leave signals connected.
 	(btk_text_destroy): disconnect adjustments signals.
 	(btk_text_finalize): unref adjustments.

	* btk/btkctree.c: added construct args ::n_columns and ::tree_column.
	added args ::indent, ::spacing, ::show_stub, ::reorderable,
 	::use_drag_icons, ::line_style and ::expander_style.
	(btk_ctree_set_show_stub): renamed from btk_ctree_show_stub, which is
	deprecated now.

	* btk/btkclist.h: remove BTK_CLIST_CONSTRUCT flag.
	* btk/btkclist.c:
 	removed ::vadjustment and ::hadjustment args, introduced
 	::scroll_adjustments signal.
	added ::shadow_type, ::selection_mode and ::row_height args.
	added n_columns construct arg.
	(btk_clist_construct): call btk_object_constructed().
 	(btk_clist_set_row_height): if height is passed as 0,
	revert to automatic height calculation.
	(btk_clist_destroy): before unrefing the adjustments, disconnect our
	signal handlers.

Fri Nov 21 22:34:58 1998  Tim Janik  <timj@btk.org>

	* btk/btkwidget.c (btk_widget_new): call btk_object_default_construct
	like btk_object_new.
	(btk_widget_destroy): assert that we only destroy constructed widgets.

	* btk/btkobject.h (enum BtkArgFlags): new flag BTK_ARG_CONSTRUCT_ONLY
	to identify args that may only be used for construction.
	BTK_ARG_CONSTRUCT maybe used as normal arguments besides construction
	time.
	* btk/btkobject.c (btk_object_new): invoke btk_object_default_construct
	at the end if the object is not fully constructed.
	(btk_object_newv): likewise.
	(btk_object_destroy): assert that we only destroy constructed objects.
 	(btk_object_init): setup BTK_CONSTRUCTED from the
	objects real klass.
	(btk_object_default_construct): new function to complete default
	construction of an object by applying missing construtor args with
	default values of 0, 0.0 or NULL.
	(btk_object_constructed): new function to mark an object as being
	constructed (used from within constructors).

	* btk/btkarg.c (btk_arg_type_new_static): return the args info pointer
	so it is immediatedly available for the caller.

	* btk/btktypeutils.c (btk_type_new): pass an object's real class to
	the object initilizer (BtkObjectInitFunc takes a second arg now, the
 	real klass), and asure that object initializers may temporarily alter
	the class pointer.

Fri Nov 20 08:00:30 1998  Tim Janik  <timj@btk.org>

	* btk/testbtk.c: change all occourances of btk_container_add (
	scrolled_window, widget) to btk_scrolled_window_add_with_viewport (...)
	for widget!=(clist, ctree, text, viewport).

	* btk/btkcombo.c:
 	(btk_combo_init): use btk_scrolled_window_add_with_viewport()
	to add children to the scrolled window.

	* btk/btkscrolledwindow.h:
	* btk/btkscrolledwindow.c:
	changed scrolled_window->viewport to scrolled_window->child, and use
	btk_widget_scroll_adjustements() to set the scroll adjustments for the
	widget, we do not create an additional viewport anymore.
	added ::hadjustment and ::vadjustment constructor args.
 	(btk_scrolled_window_new): use btk_widget_new() to create the widget.
	(btk_scrolled_window_set_hadjustment):
	(btk_scrolled_window_set_vadjustment): new functions that superceed
	btk_scrolled_window_construct.
	(btk_scrolled_window_construct): deprecated this function.
	
	* btk/btkhscrollbar.c:
	* btk/btkvscrollbar.c:
	* btk/btkhscale.c:
	* btk/btkvscale.c:
	support a constructor arg "::adjustment", and use btk_widget_new() for
	the widget creation.

	* btk/btkrange.c: added ::update_policy arg.
 	(btk_range_set_adjustment): if adjustment is passed in as NULL, create
 	a default adjustment so this function can be used for derived widgets
 	that depend on the adjustment's existance.
	(btk_range_destroy): disconnect the adjustment signal, so we don't
	get called after we got destroyed, we don't destroy the adjustment
	in here, because it might have been provided from another widget.

	* btk/btkviewport.c: introduced ::scroll_adjustments signal.
	(btk_viewport_destroy): same as btk_range_destroy.

	* btk/btkprogress.c (btk_progress_destroy): same as btk_range_destroy.

	* btk/btkwidget.h: 
	* btk/btkwidget.c: changed btk_widget_activate() to return a
	bboolean, indicating whether this widget supports activation.
	added btk_widget_scroll_adjustements() to set the scrolling
	adjustments of a widget.

Wed Nov 19 01:22:42 1998  Tim Janik  <timj@btk.org>

	* btk/btkoptionmenu.c:
 	(btk_option_menu_remove_contents):
	(btk_option_menu_update_contents): removed
 	btk_container_[un]block_resize() pairs.

	* btk/btknotebook.h: 
	* btk/btknotebook.c: removed the tab_border field, since it shouldn't
	be used outside of btknotebook.c anyways. made ARG_TAB_BORDER a
	wrtie-only argument.

	* *.c: made deprecated functions issue a message:
	btk_clist_set_border, btk_container_block_resize,
 	btk_container_unblock_resize, btk_container_need_resize,
 	btk_object_class_add_user_signal, btk_spin_button_construct,
	btk_scrolled_window_construct.
	removed non-functional functions:
	btk_container_disable_resize, btk_container_enable_resize,
	btk_clist_set_policy.

Wed Nov 18 22:54:36 1998  Tim Janik  <timj@btk.org>

	* btk/btkbox.c (btk_box_init): 
	* btk/btkdrawingarea.c (btk_drawing_area_init): 
	* btk/btkeventbox.c (btk_event_box_init): 
	* btk/btkfixed.c (btk_fixed_init): 
	* btk/btkframe.c (btk_frame_init): 
	* btk/btkhandlebox.c (btk_handle_box_init): 
	* btk/btkpacker.c (btk_packer_init): 
	* btk/btkmisc.c (btk_misc_init): 
	* btk/btkpreview.c (btk_preview_init): 
	* btk/btkprogress.c (btk_progress_init): 
	* btk/btkprogressbar.c (btk_progress_bar_init): 
	* btk/btkseparator.c (btk_separator_init): 
	* btk/btktable.c (btk_table_init): 
	* btk/btkviewport.c (btk_viewport_init): 
	* btk/btkalignment.c (btk_alignment_init): 
	removed setting of the BTK_BASIC flag.

	* btk/btkwidget.h:
	* btk/btkwidget.c:
	removed BTK_BASIC, BTK_WIDGET_BASIC and	btk_widget_basic.

	* miscellaneous BtkType and macro fixups.

Sat Nov 21 18:53:13 1998  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdkwindow.c (bdk_window_get_deskrelative_origin): 
	Fixed so it at least works with window managers other
	than Enlightenment, though it probably needs to be
	removed altogether.

1998-11-21  Andrew T. Veliath  <andrewtv@usa.net>

	* btk/btkhandlebox.[ch]: Add shadow_type and
	btk_handle_box_set_shadow_type function (plus a
	BtkHandleBox::shadow arg) to allow configuration of shadow in the
	bin window.

Thu Nov 19 23:47:38 CST 1998 Shawn T. Amundson <amundson@btk.org>

	* btk/btkcalendar.c: Fix for marking days from 
	  Dan Reish <dreish@izzy.net>.

Thu Nov 19 00:15:27 1998  Lars Hamann  <lars@btk.org>

	* btk/btkctree.c (btk_ctree_node_nth): return the nth BtkCTreeNode
	in row_list. (from Samuel Solon <ssolon@usa.net>)
	
	* btk/btkclist.c (btk_clist_get_column_title): return column title
	(btk_clist_get_column_widget): return column widget

Wed Nov 18 11:54:57 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkdnd.c (btk_drag_find_widget): Accept drops
	that are sent to a toplevel but are not within the
	toplevels bounds.

	* bdk/bdkdnd.c bdk/bdk.h: Added support for a
	XdndProxy atom which proxies the drag to another window.

1998-11-17  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* btk/btkpaned.h (struct _BtkPaned): Removed the cursor field, now
	that it is not needed.

Tue Nov 17 1998 The Rasterman <raster@redhat.com>
	* bdk/bdk.h, bdk/bdkwindow.c: Added bdk_window_get_deskrelative_origin
	  function to correctly determine bdk window position relative to
	  its "root window" - contains check for an Enlightenment
	  virtual root window.
	* btk/btkhandlebox.c: changed bdk_window_get_origin ->
	  bdk_window_get_deskrelative_origin to get the origin of dragged
	  handleboxes correctly. Now it works correctly with E.
	  
Tue Nov 17 1998  Tuomas Lukka <lukka@iki.fi>

	* btk/btktypeutils.c: Fix vital bug where LOOKUP was used when
 	  getting types even though we were not using real type names,
	  just the index.  This caused random crashes when more than 
	  256 types were defined.

1998-11-17  Martin Baulig  <martin@home-of-linux.org>

	* btk/genmarshal.pl: Put output files in the current directory
	and not in the $(srcdir) since the VPATH is ignored for built
	sources.

Tue Nov 17 01:37:53 PST 1998 Manish Singh <yosh@gimp.org>

	* btk/genmarshal.pl
	* btk/Makefile.am: check for unchanged autogenerated files, so
	we don't rebuild everything just for adding a new function

Mon Nov 16 19:19:00 CST 1998 Shawn T. Amundson <amundson@btk.org>

	* btk/btkpixmap.h
	  btk/btkpixmap.c: Pixmaps now grey out when insensitive,
	  code thanks to BUNNY stock by Eckehard Berns.  New function
	  btk_pixmap_set_build_insensitive to provide ability to turn 
	  this off.

Tue Nov 17 00:06:29 1998  Lars Hamann  <lars@btk.org>

	* btk/btknotebook.h (struct _BtkNotebook): new flags : homogeneous;
	new buints : tab_hborder, tab_vborder; marked tab_border deprecated
	(struct _BtkNotebookPage): new flags : expand, fill, pack

	* btk/btknotebook.h/c
	(btk_notebook_set_homogeneous_tabs): new function. set homogeneneous
 	tabs
	(btk_notebook_set_tab_border): set tab_h/vborder to tab_border
	(btk_notebook_set_tab_hborder): new function. set tab_hborder
	(btk_notebook_set_tab_vborder): new function. set tab_vborder
	(btk_notebook_query_tab_label): new function. get tab_label widget.
	(btk_notebook_set_tab_label): new function. set tab_label widget.
	(btk_notebook_set_tab_label_text): new function. set tab_label text.
	(btk_notebook_query_menu_label): new function. get tab_label widget.
	(btk_notebook_set_menu_label): new function. set tab_label widget.
	(btk_notebook_set_menu_label_text): new function. set tab_label text.
	(btk_notebook_set_tab_label_packing): new function. set tab_label
 	fill, expand, fill_type
	(btk_notebook_query_tab_label_packing): new function. get tab_label
 	fill, expand, fill_type

	(btk_notebook_real_page_position): return logic page number
	(btk_notebook_search_page) search next/prev logic page
	(btk_notebook_update_labels): set logic page number.
	(btk_notebook_page_compare): renamed btk_notebook_find_page
	(btk_notebook_set/get_child_arg): new args CHILD_ARG_TAB_EXPAND,
 	CHILD_ARG_TAB_FILL, CHILD_ARG_TAB_PACK
 	(btk_notebook_button_press) (btk_notebook_key_press)
 	(btk_notebook_focus) (btk_notebook_pages_allocate)
	(btk_notebook_calc_tabs) (btk_notebook_switch_focus_tab)
 	use btk_notebook_search_page
	(btk_notebook_page_allocate): fixed allocation bug
	(btk_notebook_set/get_arg): new args TAB_HBORDER, TAB_VBORDER.
	(btk_notebook_init): unset BTK_NO_WINDOW flag
	(btk_notebook_size_request): check whether page->child is visible.
 	changes due to tab h/vborder, homogeneous tabs
	(btk_notebook_paint): don't draw invisible tabs
	(btk_notebook_switch_page): calculate page_num if it's less than 0
 	(btk_notebook_append_*) (btk_notebook_prepend_*)
 	(btk_notebook_insert_page): removed sanity checks

	* btk/testbtk.c (create_notebook): extended Notebook sample a bit.

Mon Nov 16 15:10:33 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btktext.c: Optimizations for [advance/decrement]_mark_n.
	(btk-mailund-980718-0, Thomas Mailund Jensen <mailund@daimi.aau.dk>)

	* btk/btkfixed.c: Removed btk_fixed_umap, which was 
	broken. (BtkWidget's default unmap handler should work fine).
	Pointed out by Patrice Fortier <Patrice.Fortier@aquarel.fr>

Mon Nov 16 00:59:26 PST 1998 Manish Singh <yosh@gimp.org>

	* btk/btkmenubar.[ch]: added shadow_type setting and
	btk_menu_bar_set_shadow_type function to allow shadow
	configurability for menubars

	* btk/btkviewport.h: use BtkShadowType enum instead of generic
	buint

Mon Nov 16 00:17:53 1998  Tim Janik  <timj@btk.org>

	* btk/btktypeutils.c (btk_type_new): relookup type node after
	class creation and parent class' object initializer.

1998-11-13  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* btk/btkpaned.c (btk_paned_realize): Destroy the cursor after we
	have assigned it to the window -- there is no point in keeping it around.
	(btk_paned_unrealize): No need to destroy the cursor here.

	* btk/btkpaned.h (struct _BtkPaned): Removed the cursor field, as
	it is not needed.

Fri Nov 13 11:22:38 1998  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdkpixmap.c: New function bdk_pixmap_foreign_new().
	(btk-blizzard-981005-0. 
	 Christopher Blizzard <blizzard@applied-theory.com)

	* bdk/bdk.h bdk/bdkx.h: Moved bdk_window_foreign_new and
	bdk_pixmap_foreign_new to bdkx.h.

Fri Nov 13 16:06:48 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/Makefile.am: Added rules to generate an empty
	BTK+ theme called "Default" upon installation.
	
	* btk/btkrc.c (btk_rc_parse_style): Fix inheritance
	of fonts and fontsets. 
	(btk-matsu-980924. Takashi Matsuda matsu@arch.comp.kyutech.ac.jp)

	* btk/btkmain.c: Change test to detect bunnylibc's
	utf8 based mb* functions to be more specific.

	* btk/btkwindow.[ch] btk/btkfixed.c: Indentation 
	cleanups.

Fri Nov 13 16:43:36 1998  Lars Hamann  <lars@btk.org>

	* btk/btktogglebutton.c	(btk_toggle_button_realize): don't
	show event_window
 	(btk_toggle_button_map) (btk_toggle_button_unmap): show/hide
	event_window if draw_indicator is set
	(btk_toggle_button_set_mode):

Thu Nov 12 15:33:54 PST 1998 Manish Singh <yosh@gimp.org>

	* btk/btkitemfactory.c: cast NULL to BtkItemFactoryCallback to
	ensure proper type (SunPro cc complains)

	* btk/btklist.c: removed bogus '*' from "*BTK_CONTAINER_CLASS"

	* btk/btktogglebutton.c: use our own draw method so we get proper
	redraws on active state

Thu Nov 12 00:26:13 1998  Lars Hamann  <lars@btk.org>

	* btk/btkstyle.c (btk_default_draw_box_gap): use BtkPositionType
	defines.

	* btk/btknotebook.c (btk_notebook_draw_tab): fixed gap_side for
	GTP_POS_RIGHT

Wed Nov 11 19:54:58 1998  Lars Hamann  <lars@btk.org>

	* btk/btkscrolledwindow.c (btk_scrolled_window_class_init)
	(btk_scrolled_window_set_arg) (btk_scrolled_window_get_arg):
 	added ARG_WINDOW_PLACEMENT

	* btk/btkclist.c (size_allocate_columns): resize column if column
 	button > column width and auto_resize is set
	(real_clear) (column_auto_resize) (btk_clist_optimal_column_width):
 	consider column button width of auto resized columns
	(btk_clist_parent_set): removed 

	* btk/btkctree.c (btk_ctree_insert_node): call column_auto_resize.
	(auto_resize_columns): auto_resize all columns
	(real_tree_collapse) (btk_ctree_remove_node): call auto_resize_columns
	(column_auto_resize): respect column button width of auto resized
 	columns

1998-11-10  Martin Baulig  <baulig@merkur.uni-trier.de>

	* btk/btkfeatures.h.in (BTK_HAVE_FEATURES_1_1_4): Define this so
	we can check for latest BTK features.

Mon Nov  9 00:39:20 1998  Lars Hamann  <lars@btk.org>

	* btk/btkenums.h : new enum BtkCornerType 
	* btk/btkscrolledwindow.h (struct _BtkScrolledWindow): added
        window_placement.
	* btk/btkscrolledwindow.c (btk_scrolled_window_set_placement): 
        new method to set window_placement.
        (btk_scrolled_window_viewport_allocate)
        (btk_scrolled_window_size_allocate): few changes due to
        window_placement.
	* btk/testbtk.c (remove_selection): fixed while loop.

Sat Nov  7 21:55:00 PST 1998 Manish Singh <yosh@gimp.org>

	* btk/btkclist.c: check if column[i].button is valid before calling
	btk_widget_intersect on it in btk_clist_draw

	* btk/btkdnd.c: removed unused variable empty_bits

	* btk/btkrc.c: we should use gslist_* functions with GSLists...

	* btk/btktypeutils.[ch]: makes more send for btk_type_is_a to return
	a boolean (thanks to Elrond for noticing this)

1998-11-07  Jay Cox  <jaycox@earthlink.net>

	* btk/btkwindow.c: forward declaration for btk_window_paint
	* bdk/bdkxid.c: declare xid_ht static
	* examples/*/Makefile: get the link ordering right.

Sat Nov  7 16:31:56 1998  Stefan Jeske  <stefan@btk.org>

	* btk/btkclist.c (btk_clist_realize): Set background of
	title button window to BTK_STATE_NORMAL instead of
	BTK_STATE_SELECTED to avoid ugly flicker.

Fri Nov  6 23:29:40 1998  Lars Hamann  <lars@btk.org>

	* btk/btkclist.c (real_clear) (adjust_adjustments): resize clist
 	if adjustments are NULL and list size has changed
	(btk_clist_size_request): return real list requsition,
 	if adjustments are NULL.
	(size_allocate_columns): use button->requisition.with, if column
 	width is not set.
	(list_requisition_width): new function. return full list width.
	(btk_clist_set_hadjustment) (btk_clist_set_vadjustment): do not
	auto create adjustments.
	(btk_clist_motion) (move_vertical) (move_horizontal):
 	check adjustment != NULL.

Thu Nov  5 12:06:16 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkcheckbutton.c (btk_check_button_draw_focus): Queue
	a clear/redraw, not just a redraw, so the focus
	gets undrawn properly.

	* btk/btktogglebutton.c (btk_toggle_button_unrealize): 
	Chain to btk_widget_unrealize() instead of duplicating
	code.

Wed Nov  4 14:34:51 1998  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdk.c bdk/bdkprivate.h bdk/bdkwindow.c: Removed
	last vestiges of old DND.

Tue Nov  3 12:27:52 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkentry.c: Restored inner border to entries,
	erase cursors to background image.

Fri Oct 30 12:09:21 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkentry.c btk/btkstyle.[ch]: removed paint_entry() -
	it was identical to paint_flat_box().

	* btk/btkstyle.c: Coding style fixups.

	* btk/btkwindow.c (btk_window_move_resize): removed useless
	test.

	* btk/btkframe.c btkstyle.[ch] btknotebook.c: 
	Change 'side' for paint_[box/shadow]_gap and paint_extension
	to be BtkPositionType instead of a random int.

	* btk/btkaspectframe.c (btk_aspect_frame_paint): Use 
	"frame" as detail - an aspectframe should draw identical
	to a frame.

Tue Oct 27 09:58:11 1998  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdkwindow.c (bdk_window_merge_child_shapes): renamed
	from combine_child_shapes().

	* bdk/bdkwindow.c: Merge propagate_shapes() and
	propagate_combine_shapes() to remove code duplication.

Thu Nov  5 14:31:57 PST 1998 Manish Singh <yosh@gimp.org>

	* bdk/bdk.c: sometimes we get a KeyRelease before a KeyPress in
	bdk_event_translate, and the USE_XIM buffer isn't allocated yet.
	So allocate some mem if it's not already done.

	* clist scrollbar merges from HEAD

Tue Nov  3 13:16:36 PST 1998 Manish Singh <yosh@gimp.org>

	* btk/Makefile.am: remove explict -ldl, bmodule takes care of that

	* btk/btkdnd.c: start TARGET_MOTIF_SUCCESS from 0x40000000 instead
	of 0x80000000, so we stay within the bounds of a postive signed
	int (it broke some compilers)

	* btk/btkmenushell.c
	* btk/btkoptionmenu.c: merges from HEAD to make option menus work
	when some of the menuitems are hidden

	* btk/btkthemes.h: don't include dlfcn.h explictly, bmodule takes
	care of that

	* btk/btkwidget.c: add a dummy continue after the line label
	next_rect, since some compilers don't like label: }

Sun Nov  1 20:05:55 PST 1998 Manish Singh <yosh@gimp.org>

	* Okay, so we need the X11R6 keysyms so programs don't have to
	worry about them. They don't conflict anyway. Reverted the #ifdef
	changes to btk/*.c

	* bdk/Makefile.am: remove the BUILT_SOURCES rule, and make a
	special rule for them (X-derived-headers)

Sun Nov  1 05:30:32 PST 1998 Manish Singh <yosh@gimp.org>

	* bdk/Makefile.am: changed the awk scripts to generate bdkcursors.h
	and bdkkeysyms.h into sed scripts, since the awk scripts weren't
	portable, and we really shouldn't be using awk anyway.

	* makecursors.awk
	* makekeysyms.awk: bye bye

	* btk/btkaccelgroup.c
	* btk/btkclist.c
	* btk/btknotebook.c
	* btk/btkwindow.c: don't use X11R6 keysyms if they aren't there

Sat Oct 31 15:22:14 PST 1998 Manish Singh <yosh@gimp.org>

	* bdk/Makefile.am: do the same built sources trick for bdkcursors.h
	and bdkkeysyms.h. Remove those files from CVS.

Sat Oct 31 14:44:01 PST 1998 Manish Singh <yosh@gimp.org>

	* bdk/bdk.c: move prototype of bdk_wm_protocols_filter outside
	of the USE_XIM #ifdef

	* btk/Makefile.am: cause the built sources to be rebuild when possible,
        even with --include-deps. Slightly different from timj's fix, to avoid
	circular dependency with btkmarshal.c

	* autogen.sh
	* btk/btkclist.[ch]
	* btk/btkctree.c
	* btk/btkfontsel.[ch]
	* btk/btklist.c
	* btk/btklistitem.c
	* btk/btkobject.[ch]
	* btk/testbtk.c: merges from HEAD

	* btk/btkmenubar.c
	* btk/btkradiomenuitem.c
	* btk/btktreeitem.c: cleanups

Wed Oct 28 23:32:19 PST 1998 Manish Singh <yosh@gimp.org>

	* bdk/bdkrgb.c: Oops. s/BIGENDIAN/BIG_ENDIAN/

Wed Oct 28 19:04:49 PST 1998 Manish Singh <yosh@gimp.org>

	* configure.in: AIX has libpthreads, to make sure you can have
	more than one thread. Also add -D_THREAD_SAFE, and reorder
	configure.in so CFLAGS doesn't get clobbered when we actually
	want to modify it

	* bdk/bdkimage.c: initialize the bpp and byte_order fields properly
	in bdk_image_get

	* btk/testdnd.c: removed unused variable "buf"

Mon Oct 26 16:46:15 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkcontainer.c (btk_container_unregister_toplevel): 
	remove_link(), not remove()

Thu Oct 22 02:27:30 PDT 1998 Manish Singh <yosh@gimp.org>

	* bdk/bdkrgb.c: use bunnylib endian stuff

	* configure.in: don't need to check for endianness anymore

	* btk/btkstyle.h: removed #pragma }, causing a silly warning

Wed Oct 21 17:44:27 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkwindow.c (btk_window_read_rcfiles): Reset
	all toplevel widgets, not toplevel windows. (I.e.,
	plugs should be reset)

	* btk/btkwindow.c (btk_window_read_rcfiles): Yes, we
	_do_ need to notify the other toplevels - by the time
	the get the client messages, the RC file dates will
	have been updated.

	* btk/btkcontainer.h: Added a function call to list
	every toplevel widget.

	* bdk/bdk.c (bdk_event_send_client_message_to_all_recurse): 
	Don't send client messages to _every_ window on display!
	
Tue Oct 20 16:21:04 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkdnd.c (btk_drag_source_event_cb): Don't start drags 
	when dragging across widgets, only in drags
	starting in widget.

Tue Oct 20 15:59:49 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkdnd.c (btk_drag_source_info_destroy): 
	Emit "drag_end" signal at end of drag.

Tue Oct 20 13:07:54 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkwindow.c (btk_window_read_rcfiles): Look
	for "btk-embedded" data currently set by 
	BtkSocket, and use that to forward client message
	on to embedded windows. Only reset our own toplevel -
	the others will handle themselves. (Now that
	BtkMenus live in BtkWindows)

Mon Oct 19 16:40:40 1998  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdkdnd.c (get_client_window_at_coords_recurse): Modify
	client window finding code so that it works with
	WM's other than fvwm.
 
Sun Oct 18 22:48:27 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkdrawwindow.c (btk_draw_window_get_type): Added
	the "BtkDrawWindow" class, which is a descendent
	of the Window class which leaves its background alone.
	Essentially, a toplevel drawing area, though it does
	allow adding a child.

Sat Oct 17 00:40:51 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkrc.c (btk_rc_style_init): Duplicate bg_pixmap_name when
	merging RC styles. Report new share/themes path for
	themes directory. Deref theme engines when appropriate.

	* btk/btkclist.c: Set all backgrounds in _style_set().
	Make sure that pixel for xor_gc is never 0.

	* btk/btkctree.c: Choose colors for plus/minus more
	carefully, in a hopefully style-independent fashion.
	(Still needs a bit more work)

	* btk/btkwidget.c: Don't send expose events to widgets
	which are about to be resized and redrawn. (Needs a
	bit more thought.)

	* btk/btknotebook.c (btk_notebook_draw_tab): Avoid
	drawing on tabs for newly allocated, un-sized
	pages - we'll get the size wrong.

Thu Oct  1 17:38:07 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkwidget.c (btk_widget_redraw_queue_remove): Fixed
 	up stupidities in last commit.

Thu Oct  1 14:25:43 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkwidget.c: When handling queued resizes, account
	for handleboxes, where the widget heirarchy is different
	than the window heirarchy by just queueing a resize on
	the entire handlebox if the detached child is changed.

	- Remove widgets from the redraw queue when reparenting,
	even if not unrealizing. We queue a resize/redraw in
	any case.

Mon Sep 28 21:07:01 EDT 1998 The Rasterman <raster@redhat.com>
	* btk/btkstyle.c: added check to see if the widget has been shaped
	byt the app via btk_widget_shape_combine_mask and if it has does
	not reset the shape on theme change.
	
Tue Sep 15 11:30:03 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkfilesel.c: Keep a list of directories in which we never
	want to stat the entries (like /afs), and assume everything in
	those directories is a subdirectory.

	- When following a path, try to open components even when
	we don't find them in their parent's directory to
	support automounters.

Fri Sep 11 15:36:33 1998  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdkinputgxi.h (bdk_input_gxi_grab_pointer): Hopefully
	now at least compiles again.

	* bdk/bdk.c (bdk_event_translate): Don't pass events
	on destroyed widgets to the bdk_input layer.

Thu Sep  3 19:45:34 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkthemes.c: Use g_module instead of dlopen()

Thu Sep  3 19:30:11 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btktooltips.c (btk_tooltips_expose): Check
	if we've changed widgets since the expose event
	was queued.

Mon Aug 31 15:33:13 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkstyle.h (struct _BtkStyle): Reordered a bit
	to restore approximate bin compatibility with the
	non-themes branch. (This does break bin compat
	within the themes branch.)

Sun Aug 30 16:48:27 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btklabel.c (btk_label_set): Eliminate a 
	bdk_window_clear_area() that snuck in with the
	menu underlines merge.

Mon Aug 24 23:37:26 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btktext.c: Fixed some remaining background drawing,
	  merges from main branch, cleanups.

Mon Aug 24 10:55:51 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btknotebook.c (btk_notebook_draw_tab): Don't
	  dereference NULL focus tab.

	* btk/btkscale.c (btk_scale_[un]map): Add map/unmap
	  functions since we need to both show/hide and 
	  queue a redraw. (There's some duplication of drawing here, 
	  we probably should only be queuing a redraw on the
	  "value" portion of the scale.)

Fri Aug 21 19:02:30 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkrange.[ch] btk/btkhscale.c btk/btkvscale.[ch]: Fit scales
	  into the theme-drawing framework. We do this by making them,
	  like check/radio-buttons, no-window widgets with subwindows. We
	  then move the value by calling btk_widget_queue_clear() and only
	  redraw the value in our draw() / expose() handler.  A virtual
	  function clear_background is added which queues a clear on the
	  "background" portion of the widget.

Fri Aug 21 13:04:27 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btktext.c (mark_bg_gc): Make background colors work
	  again. (We can't always paint the background with a
	  paint() function - only do that for selected text)

Mon Aug 17 20:31:01 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btktearoffmenuitem.c btk/btkclist.[ch] btk/btkctree.[ch]
	  btk/btklabel.c btk/btkmenu.c: Merges from main branch.

	* Makefile.am (SRC_SUBDIRS): Removed themes from SRC_SUBDIRS.
	  the themes can't be built as part of the same build since
	  they depend on bdk_imlib.

Fri Aug 14 12:44:30 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkthemes.c (btk_theme_engine_get): Removed sample engine code
	  from btkthemes.c.
		
	* configure.in ltconfig.in ltmain.sh bdk/Makefile.am btk/Makefile.am
	  btk/

	  - Upgrade to libtool-1.2b + patch to add shared library dependencies
	    for Linux. (Needs to be extended to other platforms where they
	    are safe)

	 - Check for -ldl so this branch should build on all platforms, though
	   themes will work on all platforms they could work on.

	 - Use -version and -release simultaneously: sonames stay as they are
	   in the current scheme, but -lbtk-1.1 changes to -lbtk.

	 - Added in extra -l flags to library LDFLAGS so we get shared library
	   dependencies against X libs and -ldl. (But not libbtk against 
	   libbdk or libbunnylib yet, since dependencies against uninstalled
	   libraries aren't portable)

Fri Aug 21 16:10:38 EDT 1998 The Rasterman <raster@redhat.com>
	* btkrc.c - added api calls to find module and theme paths from btk.
	  nuked btk_install_prefix global.
	
Fri Aug 21 12:36:46 EDT 1998 The Rasterman <raster@redhat.com>
	* fixed btk_install_prefix global.
	  
Thu Aug 20 19:27:49 EDT 1998 The Rasterman <raster@redhat.com>
	* added btk_install_prefix global const variabel to find where btk is
	  installed.
	  
Thu Aug 20 18:27:29 EDT 1998 The Rasterman <raster@redhat.com>
	* added ~/.btk/lib/themes/engines/ to the default searchpath for
	  btk theme engines
	
Thu Aug 20 18:27:29 EDT 1998 The Rasterman <raster@redhat.com>
	* made btkrc scanner append dir that btkrc is read from to pixmap path.

Mon Aug 10 23:03:55 1998  The Rasterman <raster@redhat.com>
	* Fixed minor problem in btkhandlebox.c with drawing, and some
	  notebook stuff. Also pixmap theme is now "clean" again.
	  
Mon Aug 10 23:03:55 1998  Owen Taylor  <otaylor@redhat.com>
	* btk/btkwidget.c (btk_widget_clip_rect): Fixed up 
	  queued area resizing once more.

Mon Aug 10 23:09:30 EDT 1998
	* Added a few drawing fixes for notebook and other widgets. finished
	  pixmap theme up to the level that can be supported so far. (need to
	  add path discovery 9ie where is the rc fiel from - add to pixmap 
	  path so we can get theimages from there too). then we can package 
	  themes. After that need to add to theme seartch path stuff in users 
	  home dir.
	  
Thu Aug  6 16:49:25 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btktooltips.c (btk_tooltips_expose): Draw into a
	  drawing area, draw in an expose handler.

	* btk/btknotebook.c (btk_notebook_expose): Check for
	  empty current page.

Wed Aug  5 16:13:15 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkcolorsel.c (btk_color_selection_draw_wheel): Moved
	  creation of GC's so that they will be set before
	  they are used for map events (why are they used there?)

	* btk/btkwidget.c: Fixed mistake that caused widgets to
	  be queued in multiple times in the queue.

Wed Aug  5 14:23:52 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkstyle.c (btk_default_draw_shadow): Don't set
	  clip rects (or do anything) for shadow_none.

Wed Aug  5 13:14:57 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkbutton.c (btk_button_paint): Restored paint function.
	  Yes, it was needed. draw() and expose() are _not_
	  identical.

Sat Aug  1 17:44:31 EDT 1998 EDT 1998 The Rasterman <raster@redhat.com>
	* Wheeeeeeeeeeeeeeee fixed radiobittons to work in gimp again.

Fri Jul 31 19:45:12 EDT 1998 The Rasterman <raster@redhat.com>
	* YES YES YES YES YES clist borders work again! YES! YES YES! gimme 
	  more baby oooh yeah more more MORE YES YES.

Fri Jul 31 19:45:12 EDT 1998 The Rasterman <raster@redhat.com>
	* hopefully fixed problem wiht togglebuttons acting like
          radiobuttons in btktogglebutton.c

Thu Jul 30 23:36:46 EDT 1998 The Rasterman <raster@redhat.com>
	* fixed another drawing buglet in the frame drawing code (actually
	  in the clearing code but anyway in btkstyle.c)

Thu Jul 30 19:23:48 EDT 1998 The Rasterman <raster@redhat.com>
	* Fixed warning from colorsel widget...

Thu Jul 30 19:10:42 EDT 1998 The Rasterman <raster@redhat.com>
	* Fixed defautl drawing code to no longer clobber the original style
	  pixmap bgs as it did and added a helper funciton og btkstyle.c to
	  help with this.

Thu Jul 30 18:09:21 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkrc.c btk/btkstyle.c: More mm fixups

	* btk/btktooltips.c: Pass a widget (the window) to the
	  drawing function instead of the BtkTooltips.

Thu Jul 30 17:27:10 1998  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdkwindow.c: Abstract out checking for shape
	  extension into a function.

	* btk/btkwindow.c: Fix up btk_window_expose()/draw().
	  Remove extra callls to btk_window_draw().

Thu Jul 30 11:18:43 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkstyle.c btk/btkrc.c: Memory management fixups.

	* themes/th_main.c: Moved messages around so they are
	  printed before destroying strings.

Wed Jul 29 16:56:07 1998  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdk.c: Fairly simple implementation of expose compression.
	  (No GraphicsExpose compression yet, always compress
	  with the equivalent of XtCompressMultiple - no compression
	  of Expose events across non-Expose events)
	
	* bdk/bdk.h bdk/bdkrectangle.c: bdk_rectangle_union()
	  Find rectangle bounding two rectangles.

	* btk/btkstyle.c: Set clip rects for a few extra GC's
	  in bdk_default_draw_shadow()
	
Wed Jul 29 16:03:20 EDT 1998 The Rasterman <raster@redhat.com>
	* Fixed drawing functions to handle switching themes on the fly 
	  gracefully and look decent.
	  
Tue Jul 28 22:52:10 EDT 1998 The Rasterman <raster@redhat.com>
	* Added all the theme drawing code to all widgets, fixed up minor
          nigglies in some widgets when it comes to themes, seem to be
          running into some funky behavior with clipping rects in GC's. Too
          many files to list here. (all files that now use btk_paint_* are
	  affected).

Tue Jul 28 22:49:16 1998  Owen Taylor  <otaylor@redhat.com>

	* themes/th_main.c themes/th_draw.c btk/testbtkrc: 
	  Set up the demo theme so it is loaded from the RC file.

	* themes/th_draw.c: Alleviate the hardcoded paths a wee
	  bit. (use $HOME/themes/)

	* btk/btkthemes.[ch] btk/btkmain.c: Load engines specified in 
	  the RC file via dlopen()

Tue Jul 28 20:30:56 1998  Owen Taylor  <otaylor@redhat.com>

	Internal handling of styles and RC styles pretty much
	completely reworked for Theme work.

	* btkthemes.[ch]: 
	 - Added routines for virtualization of RcStyle and Style handling.
	 - Temporary "sample" inline theme-engine. (Does nothing
	   but print out a few messages.
	
	* btkrc.[ch]
	 - Made BtkRcStyle public, added flags to tell if particular
	   colors have been set.
	 - RC Styles are "transparent", and the final style for
	   a widget is the composition of all matching styles
	 - Added pointer to BtkThemeEngine, and bpointer engine_data
	   to RC style and style.
	 - Parse "engine" keyword, load the appropriate theme engine
	   and call the engine's parser.
	
	*  btkstyle.[ch]
	 - Keep a BtkRcStyle * in styles created from Rc Styles.
	 - Load up images from RC file at style attachment time.
         - Call ->engine->foo() at appropriate times.
	 - Don't use a GCache. All incarnations for a style are
	   just linked together in a list, depend on the RC style 
	   code to find the existing copy.

Tue Jul 28 14:41:54 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkwidget.[ch]: Added the concept of queued redraws
	  of partial areas. This can be done either relative
	  to the existing windows (btk_widget_queue_clear[_area]())
	  or relative to the future allocation of the widget
	  (btk_widget_queue_draw[_area]). 

	  The initial implementation is pretty braindead, but
	  can be improved.

	* btk/btkwidget.[ch]: Removed calls to bdk_window_clear_area()
	  in favor of btk_widget_queue_clear().
	
	* btk/btklabel.[ch] btk/btkpixmap.[ch]: Removed needs_clear
	  flags in favor of btk_widget_queue_clear()
	
Tue Aug  4 19:12:14 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkwidget.c (btk_widget_idle_draw): Fixed up
	  handling of partially clipped areas.

Thu Nov  5 18:52:35 1998  Lars Hamann  <lars@btk.org>

	* btk/btkclist.h (struct _BtkCListClass)
	* btk/btkclist.c (btk_clist_class_init): removed scrollbar_spacing.

Thu Nov  5 16:00:32 1998  Lars Hamann  <lars@btk.org>

	* btk/btkclist.h (struct _BtkCList): removed vscrollbar, hscrollbar,
 	vscrollbar_policy, hscrollbar_policy. added h/vadjustment.

	* btk/btkclist.c (btk_clist_class_init): added new args types
  	"hadjustment" & "vadjustment"
 	 (btk_clist_set_arg) (btk_clist_get_arg): new object class
  	set/get_arg functions
 	(btk_clist_construct): don't create/adjust scrollbars.
 	(btk_clist_set_hadjustment) (btk_clist_set_vadjustment): new functions
 	to set h/vadjustments
  	(btk_clist_get_vadjustment) (btk_clist_get_hadjustment): new functions
 	to query h/vadjustments
 	(create_scrollbars): removed.
 	(create_adjustments): replacement for create_scrollbars
 	(btk_clist_new): call btk_clist_new_with_titles
 	(btk_clist_new_with_titles): don't warn on titles == NULL
 	(move_horizontal): use CLAMP instead
 	(btk_clist_set_policy): deprecated method.
  	use btk_scrolled_window_set_policy instead.
 	(vadjustment_value_changed): use clist->vadj.
 	(adjust_scrollbars): renamed to adjust_adjustments
 	(adjust_adjustments): former adjust_scrollbars
 	(btk_clist_destroy): unref adjustments
 	(btk_clist_size_allocate) (btk_clist_map) (title_focus)
  	(btk_clist_unmap) (btk_clist_size_request) (btk_clist_focus)
  	(btk_clist_size_allocate) (btk_clist_forall): don't use scrollbars
 	(btk_clist_thaw) (real_insert_row) (real_remove_row)
 	(btk_clist_set_row_height) (real_resize_column):
 	call adjust_adjustments
 	(btk_clist_moveto): return if clist has no adjustments yet.
 	(btk_clist_parent_set): new BtkWidget::parent_set function.
 	Autogenerate h/vadjustments if needed.	
 	(move_horizontal) (move_vertical): some cleanups

	* btk/btkviewport.c (btk_viewport_set_arg) (btk_viewport_new):
  	call only btk_viewport_set_h/vadjustment and let these functions
  	do the work.
 	(btk_viewport_set_hadjustment) (btk_viewport_set_vadjustment):
 	generate a new adjustment if needed

	* btk/btkscrolledwindow.h ((struct _BtkScrolledWindow):
  	use a buint bitfield for h/vscrollbar_policy and h/vscrollbar_visible
	
	* btk/btkscrolledwindow.c (btk_scrolled_window_adjustment_changed):
  	queue_resize if visibility of scrollbars changes
  	(btk_scrolled_window_remove): only call container_remove with
  	scrolled_window->viewport automatically if viewport was autogenerated
 	(btk_scrolled_window_add): add widget as scrolled_window->viewport.
 	auto create a viewport only if widget does not take h/vadjustments.
 	(btk_scrolled_window_construct): don't generate a viewport
  	automatically.
 	(btk_scrolled_window_forall): call callback with viewport in any case
 	(btk_scrolled_window_set_arg): call btk_container_add in case of
  	ARG_VIEWPORT
 	(btk_scrolled_window_size_allocate) (btk_scrolled_window_size_request)
 	(btk_scrolled_window_map) (btk_scrolled_window_unmap): check
  	viewport != NULL

	* btk/testbtk.c 
 	(create_ctree) (export_ctree) (create_clist): use a scrolled_window
  	in conjunction with clists/ctrees

	* btk/btkfilesel.c (btk_file_selection_init): use a scrolled_window
 	in conjunction with clists

	* btk/btkfontsel.c (btk_font_selection_init): use a scrolled_window
 	in conjunction with clists

Wed Nov  4 21:52:57 1998  Lars Hamann  <lars@btk.org>

	* btk/btkctree.c (btk_ctree_unlink): fix focus_row adjustment
	(btk_ctree_remove_node): select focus_row if needed
	(cell_size_request): only get pixmap size if pixmap != NULL

Wed Nov  4 04:30:37 1998  Tim Janik  <timj@btk.org>

	* btk/btkwidget.c: added a bunch of checks for widget != NULL and
	BTK_IS_WIDGET (widget):

Wed Nov  4 02:02:07 1998  Lars Hamann  <lars@btk.org>

	* btk/btkclist.c (real_remove_row) (sync_selection): set correct
	focus_row after a remove_row call.

Sun Nov  1 21:00:06 GMT 1998  Austin Donnelly  <austin@greenend.org.uk>

	* btk/btkoptionmenu.c
	* btk/btkmenushell.c: make option menus work when some of the
	menuitems are hidden - previously, option menu would popup too
	high.

1998-10-31  Raja R Harinath  <harinath@cs.umn.edu>

	* btk/btkfeatures.h.in: Remove `#pragma }'.

	* bdk/bdki18n.h: Update to use new `bunnylib' widechar defines.

	* configure.in (CFLAGS): Don't use test -z "echo .. | grep".  Use
	case instead.
	(wchar.h, wctype.h, iswalnum): Duplicate widechar tests from `bunnylib'.
	(BDK_WLIBS): New variable.  Lists extra libraries needed to use
	widechar functions.
	* btk-config.in (--libs): List $BDK_WLIBS, too.

Sat Oct 31 03:11:57 CST 1998 Shawn T. Amundson <amundson@btk.org>

	* Released BTK+ 1.1.3
	
	* INSTALL:
	* NEWS:
	* README:
 	* btk+.spec:
	* docs/btk-config.1: updated for v1.1.3

	* Makefile.am
	* sanity_check
	* docs/Makefile.am: Includes new 'make release' as well as
	  'make sanity'.  Also handles html and text creation from html,
	  and puts them into the distribution

	* docs/Makefile.sgml: removed, similar functionality is now in 
	  the Makefile.am file

	* docs/.cvsignore: ignore html and text directories
	* docs/bunnylib.texi: removed (now in bunnylib dist)

Fri Oct 30 20:02:36 1998  Lars Hamann  <lars@btk.org>

	* btk/btklist.c (btk_list_remove_items_internal): 
	free undo_un/selection, unselect list_item before disconnect
	signal functions
	(btk_list_destroy): removed. btk_list_shutdown clears the list
	already
	(btk_list_signal_item_select) (btk_list_signal_item_deselect)
	(btk_list_signal_item_toggle)	(btk_list_signal_scroll_horizontal)
 	(btk_list_signal_toggle_focus_row) (btk_list_signal_select_all)
 	(btk_list_signal_unselect_all) (btk_list_signal_undo_selection)
 	(btk_list_signal_start_selection) (btk_list_signal_end_selection)
 	(btk_list_signal_toggle_add_mode) (btk_list_signal_scroll_vertical)
 	(btk_list_signal_extend_selection) (btk_list_signal_focus_lost):
 	new functions. These functions are signal connected to inserted
 	list_items, to handle key bindings and BtkItem::de/select/toggle
 	signals.

	* btk/btklistitem.c (btk_list_item_class_init): added missing
	btk_object_class_add_signals call.
	(btk_list_item_toggle_focus_row) (btk_list_item_select_all)
	(btk_list_item_unselect_all) (btk_list_item_undo_selection)
	(btk_list_item_start_selection) (btk_list_item_end_selection)
	(btk_list_item_extend_selection) (btk_list_item_scroll_horizontal)
	(btk_list_item_scroll_vertical) (btk_list_item_toggle_add_mode):
 	removed. These functions are handled via connected
 	btk_list_signal_* functions now

Fri Oct 30 05:24:43 1998  Tim Janik  <timj@btk.org>

	* btk/Makefile.am: cause the built sources to be rebuild when possible,
 	even with --include-deps:
	$(libbtk_la_SOURCES): $(BUILT_SOURCES)

Fri Oct 30 01:56:08 1998  Tim Janik  <timj@btk.org>

	* btk/btkobject.c (btk_object_remove_no_notify): renamed from
	btk_object_data_set_destroy to fit the btkobject.h API.

	* applied patch from Damon Chaplin <DAChaplin@email.msn.com>:
	* btk/btkfontsel.h:
	* btk/btkfontsel.c:
	Added support for an extra 'base' filter which an application can
 	set to restrict the fonts available to the user (e.g. a terminal
 	program only wants the user to be able to select fixed-width fonts).
	The type of font (bitmap/scalable/scaled bitmap) is now
	also a part of the filter, so that an application can
	request that only scalable fonts are shown.
	There are new functions to set the base & user filters.
	I've also stopped the up/down key press signals getting
	to the clists since the font selection widget handles
	them itself. It acted a bit strangely before.

Sun Oct 25 20:27:02 1998  Tim Janik  <timj@btk.org>

	* btk/btkmain.c (btk_init): support an environment variable
	BTK_MODULES= which takes a colon sperated list of module names
	automatically loaded at btk_init() startup.

Sun Oct 25 08:04:33 1998  Tim Janik  <timj@btk.org>

	* btk/btkwidget.c: added more g_return_if_fail() statements.

Thu Oct 22 22:40:35 1998  Lars Hamann  <lars@btk.org>

	* btk/btkctree.c (btk_ctree_destroy): removed. btk_clist_destroy
	is sufficient

Thu Oct 22 16:22:55 1998  Lars Hamann  <lars@btk.org>

	* btk/btkclist.c (COLUMN_FROM_XPIXEL): samll fix for invisible
	columns

Thu Oct 22 02:29:53 1998  Tim Janik  <timj@btk.org>

	* btk/btkfilesel.h: BtkType and macro fixups
	* btk/btkfilesel.c (btk_file_selection_complete): set a pattern
	for the file selection widget to try a completion on (set the
	initial filter).

Wed Oct 14 14:34:04 1998  Tim Janik  <timj@btk.org>

	* btk/btkmain.c: implement idle functions via GHook. this gives a
 	slight speed improvement and lessens code duplication.

Tue Oct 20 14:53:28 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkdnd.c: Always send "drag_leave" to dests
	without BTK_DEST_DEFAULT_MOTION. 

Tue Oct 20 11:55:24 1998  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdk.c (bdk_event_translate): Handle DestroyNotify
	on destroyed windows so we clear the XID table properly.
	Finish up restructure of return value handling that
	was half-done before.

Tue Oct 20 12:57:10 1998  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdk.c (bdk_send_clientmessage_to_all): Hunt
	the window tree more comprehensively, so that we find
	client windows hidden under non-toplevels.

Tue Oct 20 12:43:04 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkselection.c (btk_selection_data_set): 
	Maintain the null-termintation guarantee, even when 
	data = NULL, length = 0. (Warn on data = NULL, 
	length > 0)

Mon Oct 19 16:41:44 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkwidget.h (struct _BtkWidgetClass): Add in coordinates
	into function prototype for drag_data_received. 

Tue, 20 Oct 1998 11:33:10 +0200 Paolo Molaro <lupus@debian.org>

	* btk/btkdnd.h,btk/btkdnd.c: delete is a reserved word in c++.

Mon Oct 19 23:44:41 1998  Lars Hamann  <lars@btk.org>

	* btk/btkclist.c: rearranged some functions
	(btk_clist_set_column_auto_resize): new function. toggle auto_resize
 	flag of column
	(btk_clist_set_column_resizeable): if resizeable disable auto_resize 
	(btk_clist_set_border): deprecated function, use
 	btk_clist_set_shadow_type instead.
	(btk_clist_set_shadow_type): replacement for btk_clist_set_border
 	(adjust_scrollbars): some cleanups
	(select_row) (unselect_row): removed. replaced by equivalent
	btk_signal_emit calls
	(add_style_data): removed, use btk_clist_style_set instead
	(btk_clist_style_set): fill in size data, after style was set. 
 	(set_cell_contents) (btk_clist_set_shift) (btk_clist_set_row_style)
 	(btk_clist_set_cell_style): auto_resize columns if needed
	(column_auto_resize): resize column if needed for auto_resize 
	(real_clear): disable auto_resize while list destroy
	(resize_column): removed

	* btk/btkctree.c : (btk_ctree_remove_node)
	(btk_ctree_set_line_style) (btk_ctree_set_expander_style)
	(btk_ctree_node_set_row_style) (btk_ctree_node_set_cell_style)
 	(set_cell_contents) (btk_ctree_node_set_shift) (btk_ctree_set_spacing)
	(real_tree_move) (btk_ctree_set_indent) (btk_ctree_insert_node)
	(real_tree_collapse) (real_tree_expand) (column_auto_resize):
 	auto_resize columns if needed
	(btk_ctree_collapse_recursive) (btk_ctree_collapse_to_depth)
	(real_clear): disable auto_resize while processing the tree

	* btk/testbtk.c (create_clist) (create_ctree): set auto_resize
	for one column

Mon Oct 19 08:31:36 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkdnd.c (btk_drag_selection_received): Fixed
	typo - look for right atom on transfer failures.

Sun Oct 18 20:52:22 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btkwidget.c btkmarshal.list: Change signal 
	for drag_data_get to match the use that was being
	made of it everywhere else...

Sun Oct 18 18:16:39 1998  Owen Taylor  <otaylor@btk.org>

	* bdk/bdk.c bdkprivate.h: Added a modular client-message-filter
	mechanism, that is used for the DND messages.

	  Removed all the old DND code.

	* bdk/bdkcolormap.c bdk/bdkcolormap.h: Add a function to
	get the visual of a given colormap.
	
	* btk/btkcolorsel.c: Conversion to new DND, drag 
	a color-swatch.

	* bdk/bdk.h bdk/bdkdnd.c: The low-level
	X oriented portions of drag and drop protocols.
	Sending and receiving client messages, and navigating
	window trees.

	* bdk/bdkimage.c: added a bdk_flush() when destroying
	SHM images to hopefully make it more likely that
        X will gracefully handle the segment being destroyed.

	* bdk/bdkprivate.h btk/btkdebug.h: Add new 
	DND debugging flags.

	* btk/btkeditable.[ch]: Updates for the selection handling
	changes.
	
	* btk/btkselection.[ch]: Added BtkTargetList, a 
	refcounted data structure for keeping track of lists
	of BdkAtom + information. Removed selection_handler_add
	in favor of a "drag_data_get" signal.

	* btk/btkdnd.[ch] btk/btk.h: New files - highlevel (event loop
	dependent) parts of the DND protocols, display of drag icons,
	drag-under highlighting, and the "default handlers".

	* btk/btkinvisible.[ch]: New widget - InputOnly offscreen
	windows that are used for reliable pointer grabs and
	selection handling in the DND code.

	* btk/testdnd.c: New test program for new DND. (Old
	DND tests in testbtk still need to be converted.)

	* btk/testselection.c: Use the new selection API.
	
	* docs/dnd_internals: Start at describing how
	all the new code works inside.

	* docs/Changes-1.2.txt: New file describing source-incompatible
	changes in BTK+-1.2.

Sat Oct 17 22:50:34 1998  Owen Taylor  <otaylor@btk.org>

	* bdk/bdkwindow.c (bdk_window_remove_filter): Free
	the right list node.

	* bdk/bdkwindow.c (bdk_window_init): Add bdk_root_parent
	to the XID table so we can receive events on it.

Wed Oct 14 12:57:40 1998  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdk.c bdk/bdk.h (bdk_event_get_time): New function
	to get the timestamp from a generic event.

Fri Oct  9 13:16:04 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkwidget.c (btk_widget_add_events): Added function
	that safely adds additional events to a widget's event 
	mask, even if the widget has previously been realized.
	(We can do this, but not remove events from the event
	 mask).

Fri Oct  2 17:35:35 1998  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdkproperty.c (bdk_property_get): Allow type == 0,
	for AnyPropertyType.

Fri Oct  2 10:32:21 1998  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdkproperty.c (bdk_atom_intern): Add client-local
	hashing.

Thu Sep 24 20:33:54 1998  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdk.c (bdk_event_send_clientmessage_toall): serial
	isn't a timestamp.

Thu Sep 17 14:23:03 1998  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdk.c (bdk_event_translate): Removed printing
	of unknown window lookup warnings. (Made it
	a BDK_NOTE) - they happen in many circumstances.

Tue Sep  8 12:38:43 1998  Owen Taylor  <otaylor@redhat.com>

	* Call XFilterEvent() on events we get for unknown
        windows, since it may be the window Xlib uses to
	communicate with the IM. 
	(From Yung-Ching Hsiao <yhsiao@cae.wisc.edu>)

Tue Sep  1 10:53:52 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkprogress.c (btk_progress_finalize): Unref
	the adjustment.

Thu Aug 27 12:03:14 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btksignal.c (btk_signal_newv): Improve warning
	message for return_value + BTK_RUN_FIRST.

1998-10-18  Martin Baulig  <martin@home-of-linux.org>

	* btk/btktext.c (btk_text_set_line_wrap): new function to toggle
	line wrapping like btk_text_set_word_wrap () toggles word wrapping.

Fri Oct 16 15:59:02 1998  Lars Hamann  <lars@btk.org>

	* btk/testbtk.c (insert_row_clist) (create_clist): change a few cell
	styles of inserted row
	(change_style): change style of focus_row

	* btk/btkclist.c (btk_clist_get_row_style) (btk_clist_set_row_style)
	(btk_clist_get_cell_style) (btk_clist_set_cell_style): new functions
	to set/get row/cell styles.
	(btk_clist_realize): attach row and cell style, allocate row colors.
	(btk_clist_unrealize): detach row and cell styles.
	(get_cell_style): new function. get correct cell style.
	(draw_cell_pixmap): new function. 
	(draw_row): draw cells with row or cell styles.
	(row_new): set cell and row styles to NULL.
	(row_delete): detach & unref cell and row styles.

	* btk/btkctree.c (ctree_detach_styles) (ctree_attach_styles): 
	new functions to attach/detach styles and allocate colors.
	(btk_ctree_realize) (btk_ctree_unrealize): attach/detach cell and row
	styles of invisible nodes.
	(draw_cell_pixmap): new function. 
	(get_cell_style):  new function. get correct cell style.
	(btk_ctree_draw_expander): new function. draw tree expander.
	(btk_ctree_draw_lines): new function.draw tree lines.
	(draw_row): draw cells with row or cell styles.
	(row_new): set cell and row styles to NULL.
	(row_delete): detach & unref cell and row styles.
	(btk_ctree_node_get_row_style) (btk_ctree_node_set_row_style) 
	(btk_ctree_node_get_cell_style) (btk_ctree_node_set_cell_style): 
	Analogons of BtkCList functions	
	(btk_ctree_set_spacing): new function. set spacing between
	tree expander and cell contents
	(btk_ctree_set_expander_style): new function. set expander style
	of ctree.
	(ctree_is_hot_spot): few changes due to draw_row modifications.

Wed 14 Oct 1998 10:17:13 +0200 Paolo Molaro <lupus@debian.org>

	* btk/btkcombo.c: try completion on MOD1-TAB.
	Handle case when the combo->list is empty.

Mon Oct 12 07:51:34 1998  Tim Janik  <timj@btk.org>

	* btk/btksignal.c (btk_signal_handlers_destroy): only unref those
 	handlers that have not yet been disconnected (finally managed to
	trigger the btk_signal_handler_unref() paranoid warning).

Sat Oct 10 03:37:50 1998  Tim Janik  <timj@btk.org>

	* btk/btkwidget.c (btk_widget_get_arg): fixed default value for x, y,
	width and height which is -1 and not -2.

Sat Oct 10 00:50:53 PDT 1998 Manish Singh <yosh@gimp.org>

	* HACKING
	* autogen.sh: we need libtool 1.2b now

Sat Oct 10 03:37:50 1998  Tim Janik  <timj@btk.org>

	* btk/btktable.c (btk_table_set_child_arg): take the left, right, top
 	and bottom attach arguments as mandatory and readjust the table size
	and opposing edge accordingly if required. this way the order in which
 	the arguments are set doesn't matter.

Thu Oct  8 15:53:59 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btktypeutils.c (btk_type_class_init): Fixed warning
	message to print out parent class name correctly.

Thu Oct  8 07:07:10 1998  Tim Janik  <timj@btk.org>

	* btk/btkobject.h: 
	* btk/btkobject.c:
	removed functions btk_object_set_data_destroy and
 	btk_object_set_data_destroy_by_id.
	added functions btk_object_remove_no_notify and
 	btk_object_remove_no_notify_by_id which will remove a certain data
 	portion without invokation of its destroy notifier, this should only
 	be used in very controled circumstances.

Wed Oct  7 23:59:37 1998  Lars Hamann  <lars@btk.org>

	* btk/btkclist.c (btk_clist_set_column_resizeable): added
	size_allocate_title_buttons call
	(btk_clist_realize): changed initial column.window position

Wed Oct  7 20:27:28 1998  Lars Hamann  <lars@btk.org>

	* btk/btkctree.h (struct _BtkCTree): removed xor_gc, use clists
	xor_gc instead
	* btk/btkctree.c (create_xor_gc): removed
	(btk_ctree_button_press): set correct line_attributes for
 	clist->xor_gc on drag start
	(btk_ctree_button_release): reset clist->xor_gc

Wed Oct  7 05:15:36 1998  Tim Janik  <timj@btk.org>

	* btk/btk*.h:
	* bdk/bdk.h: removed all occourances of #pragma } and #pragma {
	which were in place to fixup emacs' cc-mode indentation.
	putting (c-set-offset 'inextern-lang 0) into ~/.emacs is the
	proper way to achive this and doesn't produce problems for
	stupid pragma-related compiler bugs. ;)

Wed Oct  7 00:59:46 1998  Lars Hamann  <lars@btk.org>

	* btk/btkclist.h: new signal BtkCList::resize_column.
	* btk/btkclist.c (draw_row): don't draw invisible columns
	(size_allocate_title_buttons) (size_allocate_columns):
	skip invisible columns
	(new_column_width): take min/max_width into account 
	(btk_clist_button_release) (btk_clist_motion):
 	changes due to changed new_column_width function
	(LIST_WIDTH): changed define to inline function.
	(real_resize_column): class function for resize_column signal
	(btk_clist_motion): fixed autoscrolling for column resizes
	(btk_clist_set_column_visibility): don't hide last visible column,
	changed visible arg to bboolean
	(btk_clist_set_column_min_width)(btk_clist_set_column_max_width):
	new functions : set min/max width of a column
	(btk_clist_set_column_resizeable): new function : enable/disable
	column resize operations by mouse

	* btk/btkctree.c (draw_row): don't draw invisible columns
	(ctree_is_hot_spot): return FALSE if tree_column is invisible
	(draw_xor_line)  (draw_xor_rect): draw full rectangle/line if
	tree_column is invisible
	(btk_ctree_find_all_by_row_data)
	(btk_ctree_find_all_by_row_data_custom):  new function from
	Ronan Bourlier <ronan@radioss.com>. Returns a GList of all
 	BtkCTreeNodes with row->data == data.

Tue Oct  6 14:05:00 1998  Tim Janik  <timj@btk.org>

	* btk/testbtk.c (cb_tree_destroy_event): use g_free to free g_malloced
	memory (Martin Pool <mbp@wistful.humbug.org.au>).

Mon Oct  5 15:26:30 1998  Raph Levien  <raph@gimp.org>

	* bdk/bdkrgb.c (bdk_rgb_convert_0888_br): Fixed a few long's that
	should have been buint32. Thanks to Tristan Colgate for finding it.

Sun Oct  4 22:47:22 CDT 1998 Shawn T. Amundson <amundson@btk.org>

	* btk/btkcalendar.h:
	  btk/btkcalendar.c: More changes:
	  - The day with focus is now seperated from the day selected
	  - The day with focus has the xor's line around it
	  - The selected day is now standard selected style
	  - The week names and week numbers are now also drawn
	    with selected style
	  - Space now selects the day which has focus

Sun Oct  4 17:55:52 CDT 1998 Shawn T. Amundson <amundson@btk.org>

	* btk/btkcalendar.h:
	  btk/btkcalendar.c: Some significant changes, including:
	  - No longer draw focus around entire widget, only around
	    the day which has focus
	  - Draw relief around entire widget like originally planned
	  - Show header and day names by default 
	  - Move data private to the widget out of BtkCalendar struct
	    and only point to it with a bpointer
	  - Remove some old unused variables from BtkCalendar struct

Sun Oct  4 17:45:43 BST 1998  Tony Gale  <gale@btk.org>

	* docs/btk_tut.sgml: update I've had sat around:
	  - Grammar patch from James R. Van Zandt <jrv@vanzandt.mv.com>
	  - Range Widget update from David Huggins-Daines <bn711@freenet.carleton.ca>
	  - New Toolbar section from Jacek Wojdel <J.C.Wojdel@cs.tudelft.nl>

1998-10-01  Martin Baulig  <martin@home-of-linux.org>

	* btk/btkclist.h (BtkCListColumn): Added `visible'.
	
	* btk/btkclist.c (btk_clist_set_column_visibility): New function.
	Makes it possible to individually show and hide columns.
	(size_allocate_columns): Adapted to keep track of hidden columns.
	(size_allocate_title_buttons): Likewise.

Sat Oct  3 17:54:48 1998  Tim Janik  <timj@btk.org>

	* btk/btkargcollector.c (BTK_ARG_COLLECT_VALUE): for unknown foreign
	fundamental types, collect an argument of the type returned from
	btk_type_get_varargs_type(). removed the first macro argument which
	was just the same as the fundamental type of the *arg passed to
	the macro.
	* btk/btkarg.c (btk_args_collect): 
	* btk/btksignal.c (btk_signal_collect_params): changed callers.

	* btk/btktypeutils.h: 
	* btk/btktypeutils.c: new functions btk_type_set_varargs_type() and
	btk_type_get_varargs_type() to set and query the varargs collect
	type used for a fundamental type, registered outside of Btk.

	* btk/btkmisc.c (btk_misc_class_init): changed object arguments
	BtkMisc::xalign and BtkMisc::yalign from BTK_TYPE_DOUBLE to
	BTK_TYPE_FLOAT.

	* btk/btkframe.c (btk_frame_class_init): changed object arguments
	BtkFrame::label_xalign and BtkFrame::label_yalign from BTK_TYPE_DOUBLE
	to BTK_TYPE_FLOAT.

Sat Oct  3 01:25:24 1998  Lars Hamann  <lars@btk.org>

	* btk/btkctree.c (btk_ctree_insert_gnode) (real_tree_collapse)
	(btk_ctree_link) (btk_ctree_unlink) (real_tree_expand): 
	fixes for assignment errors with BTK_CTREE_NODE_NEXT/PREV

	(real_tree_expand) (real_tree_collapse):
	don't expand/collapse a leaf

Fri Oct  2 16:10:36 1998  Tim Janik  <timj@btk.org>

	* btk/btktypeutils.c (btk_type_enum_find_value): make sure we don't
	segfault when looking up a non-existant value name (reported by
	Pablo <pcj+btk@primenet.com>).

Thu Oct  1 10:40:20 1998  Tim Janik  <timj@btk.org>

	* btk/btkclist.h (btk_clist_prepend):
	* btk/btkclist.c (btk_clist_prepend): new function.
	(btk_clist_insert): added g_return_val_if_fail()
	statements. accept a row parameter < 0 or > clist->rows to indicate
	append mode.
	(real_clear): first clean up all internal pointers and lists (e.g.
	clist->row_list or clist->rows), then delete the distinct rows. this
	is required because of destroy notifiers, we need to have all internal
	structures updated and be reentrant.

	* btk/btkcalendar.h: 
	* btk/btkcalendar.c: removed the `btk_calendar_' prefix from the
	BtkCalendarClass signal methods.
	BtkType and macro fixups, put `void' into () prototypes, avoid C++
	style comments, indentation fixes, fixed some g_return_if_fail()
 	statements.
	(btk_calendar_paint_header):
	(btk_calendar_paint_day_names): 
	(btk_calendar_paint_week_numbers): 
	(btk_calendar_paint_main): made these static functions.
	(btk_calendar_select_month):
	(btk_calendar_select_day):
	(btk_calendar_mark_day):
	(btk_calendar_unmark_day):
	(btk_calendar_get_date): signedness corrections, use buints
 	rather than bints.
	(btk_calendar_size_request): removed unused variables.

Wed Sep 30 13:11:09 1998  Tim Janik  <timj@btk.org>

	* btk/btkitemfactory.c (btk_item_factory_add_item): list all
	widgets in the ->widgets_by_action list that have a callback
	defined (not only those with a callback_action!=0).

Sun Sep 27 22:02:48 CDT 1998 Shawn T. Amundson <amundson@btk.org>

	* btk/btkcalendar.h:
	  btk/btkcalendar.c:
	  examples/calendar/gcalendar.c: remove HAVE_FEATURES stuff

Sun Sep 27 02:18:06 CDT 1998 Shawn T. Amundson <amundson@btk.org>

	* btk/btkcalendar.h:
	  btk/btkcalendar.c:
	  examples/calendar: Added btkcalendar widget and demo

Sat Sep 26 06:15:34 1998  Tim Janik  <timj@btk.org>

	* btk/btkclist.c (btk_clist_sort): 
	(btk_clist_clear): 
	(btk_clist_unselect_all): 
	(btk_clist_select_all): adde g_return_if_fail() statements.

Sat Sep 26 04:46:22 1998  Tim Janik  <timj@btk.org>

	* configure.in: set binary age and interface age to 0.

	* btk/btkspinbutton.h: 
	* btk/btkspinbutton.c: changed btk_spin_button_construct to
	btk_spin_button_configure. btk_spin_button_construct is still defined
	as an alias for btk_spin_button_configure for source compatibility,
 	but actuall use is deprecated.
	typeness corrections, i.e. bint->bboolean and bint->buint.
	added object arguments: BtkSpinButton::value, BtkSpinButton::wrap,
	BtkSpinButton::shadow_type, BtkSpinButton::update_policy,
	BtkSpinButton::numeric, BtkSpinButton::snap_to_ticks,
	BtkSpinButton::adjustment, BtkSpinButton::digits and
 	BtkSpinButton::climb_rate.
	BtkType and macro fixups.

Sat Sep 25 23:33:55 1998  Tim Janik  <timj@btk.org>

	* bdk/bdkwindow.c (bdk_window_get_root_origin): new function to get
	the *real* geometry position of a window, taken possible window
	manager offsets into account.
	this has been succesfully tested with fvwm, fvwm-2, bowman, olwm,
 	olvwm, twm, ctwm, mlvwm, windowmaker and enlightenment.
	it does fail though for amiwm which adds windows to a pseudo root
	window, and for icewm by a small offset because it defines the
	geometry position whithin its border.

	* btk/testbtk.c: added "saved position" test to figure how
	bdk_window_get_root_origin() interacts with window managers (repopup
	this window to figure ;).

Wed Sep 23 06:09:19 1998  Tim Janik  <timj@btk.org>

	* configure.in: update to Btk+ version 1.1.3, binary age 1,
	interface age 1.

	* btk/btkobject.c
 	(btk_object_ref): 
 	(btk_object_unref): check for ->ref_count to be greater than 0 (the
	existing code was buggy in letting ->ref_count==0 pass through and
 	then failing the living_objs_ht assertion).

	* btk/btkclist.c (draw_row): fix chopping bug for right justified
 	pixtext fields (Roman Pozlevich <roma@botik.ru>).

Mon Sep 21 23:53:18 CDT 1998 Shawn T. Amundson <amundson@btk.org>

	* Released BTK+ 1.1.2

Mon Sep 21 01:12:44 1998  Jay Cox  (jaycox@earthlink.net)

	* btk/Makefile.am: use $(PERL) instead of perl
	* btk/btkcolorsel.c: render properly in non-square aspect ratios.
	also much faster to render.

Mon Sep 21 07:44:30 1998  Tim Janik  <timj@btk.org>

	* btk/btkobject.c (btk_object_class_add_signals): reallocate
	the required memory block, rather than allocating it newly from
	scratch and doing a full-blown block copy on it.

Mon Sep 21 02:30:06 1998  Tim Janik  <timj@btk.org>

        * NEWS file update for upcoming release of Btk+ version 1.1.2,
        binary age 0, interface age 0.

       	* btk/btkmain.c (btk_init): enforce btk-modules to always be resident.

Sun Sep 20 18:21:46 1998  Owen Taylor  <otaylor@redhat.com>

	* ltmain.sh: Patch to libtool-1.2b to make --disable-static
	work.

Sun Sep 20 09:52:39 1998  Owen Taylor  <otaylor@btk.org>

	* HACKING: indent other than GNU indent should be OK
	  now.

	* btk/genmarshal.pl btk/Makefile.am: Call indent on file
	  instead of piping through indent. If indent wasn't
	  found in ./configure don't bother indenting at 
	  all.

Fri Sep 18 19:11:10 1998  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdk.h: Add names to prototype for bdk_image_new_bitmap.

Fri Sep 18 18:54:59 1998  Jay Cox  (jaycox@earthlink.net)

	* btk/Makefile.am: use $(AWK) instead of awk

1998-09-18  Raja R Harinath  <harinath@cs.umn.edu>

	* btk/Makefile.am (bdk_headers): 
	Remove references to $(top_srcdir). 
	(btk.defs, btktypebuiltins{.h,_vars.c,_ids.c,_evals.c}): Simplify.
	* btk/makeenums.pl (parse_entries): Don't look for $srcdir.

Fri Sep 18 19:58:24 1998  Tim Janik  <timj@btk.org>

	* btk/btkobject.h (struct _BtkObject): changed bpointer object_data; to
	GData*object_data to cure compiler warnings.

Thu Sep 17 19:06:47 PDT 1998 Manish Singh <yosh@gimp.org>

	* install-sh
	* missing
	* mkinstalldirs: updated to latest automake version

1998-09-17  Raja R Harinath  <harinath@cs.umn.edu>

	* btk/Makefile.am (source_headers): Move `btkfeature.h' ...
	(btkinclude_HEADERS): ... here.
	(btk.defs): Pass `g' flag to sed, to replace all occurances.

Thu Sep 17 10:49:51 1998  Raph Levien  <raph@gimp.org>

	* HACKING: added GNU indent, as it is now required to successfully
	build btk+. Should this be detected in autoconf, possibly?

Tue Sep 15 14:57:30 1998  Owen Taylor  <otaylor@redhat.com>

	* Makefile.am btk-config.in l*: Update to libtool-1.2b,
	change library versioning scheme to drop LT_RELEASE
	from the -l line, while keeping it in the soname.

Tue Sep 15 14:10:33 1998  Owen Taylor  <otaylor@redhat.com>

	* configure.in Makefile.in: define a MAINT-like variable REBUILD
	which is set if Perl and awk are found, and autogenerated sources
	can be rebuilt. Remove the auto-generated sources from
	CVS. 

	Add dependencies so that the autogenerated sources are 
	rebuilt if the files they depend on change. 
	(This unfortunately currently results in the entire
	btk/ directory being rebuilt when any header changes.
	Moving all enums to btkenums.h would fix this.)

Thu Sep 17 05:12:48 1998  Tim Janik  <timj@btk.org>

	* btk/btkobject.h: added btk_object_set_data_destroy and
	btk_object_set_data_destroy_by_id functions to set the destroy
	function pointer for an existing data portion.

	* btk/btkobject.c: removed the BtkObjectData implementation and
	made all btk_object_*data* functions use the GLib equivalents.

1998-09-16  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* btk/btktoolbar.c (btk_toolbar_insert_element): Test whether type
	is not equal to BTK_TOOLBAR_CHILD_RADIOBUTTON before checking that
	(widget != NULL), otherwise radio button insertion will not work
	-- the widget argument is NULL for the first radio button in the
	group.

Tue Sep 15 13:09:24 1998  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdkimage.c (bdk_image_new): Reverted global changes
	of g_new to malloc(), added back in the one place where
	it actually mattered. #include <stdlib.h>.

	* bdk/bdkrgb.c: g_malloc() to malloc() as above.

Tue Sep 15 11:30:03 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkfilesel.c: Keep a list of directories in which we never
	want to stat the entries (like /afs), and assume everything in
	those directories is a subdirectory.

	- When following a path, try to open components even when
	we don't find them in their parent's directory to
	support automounters.

Tue Sep 15 11:06:13 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkwindow.c (btk_window_move_resize): Don't request
	a new size from the WM if we asked for the same size
	before and our request was rejected.

	* btk/btkwindow.c (btk_window_configure_event): If
	in response to a request, we get a configure event
	with unchanged dimensions, send a synthetic expose
	since ForgetGravity won't expose our window.

Mon Sep 14 14:28:24 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btktext.c (adjust_adj): Change the way we
	set the adjustments on resize so that it tries to
	keep the beginning of the text in approximately
	the same place. 

	Removed assertion that the above change made invalid.

Thu Sep 10 22:19:35 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btktext.c: - Save first_cut_pixels when switching
	sizes, so that if we switch to the _same_ size,
	we don't move lines around.

	- Make sure that the text area always has a size of at
	least 1x1, then do all computations when realized.

        - When fetching lines in recompute_geometry, make
	sure we fetch enough lines to cover the screen.
	
Mon Sep 14 21:47:35 CDT 1998 Shawn T. Amundson <amundson@btk.org>

	* bdk/bdkimage.c: changed g_new()s to malloc()s and 
	  g_free()s to free()s to avoid mixing g_new()s with 
	  free()s.  X itself uses free() on some of the 
	  malloced memory.

Sat Sep 12 10:44:06 1998  Owen Taylor  <otaylor@redhat.com>

	* btkfilesel.c: Maintain a list of directories like
	/afs we know contain only directories, and avoid
	stat'ing files in those directories. (Because
	stat'ing all files in /afs is extremely expensive)

	To support automounters, try to open directories,
	even if we couldn't find them when reading their
	parent directory.

Thu Sep  3 10:29:03 1998  Owen Taylor  <otaylor@redhat.com>

	* btk.m4: Conditionalize check for BTK_MAJOR_VERSION,
	to allow the same btk.m4 to work for 1.0.x and
	1.1.x.

Fri Sep 11 15:25:10 1998  Lars Hamann  <lars@btk.org>

	* btk/btkclist.c (btk_clist_set_selectable): new function
	to set/unset the selectable flag of a single row.
	(btk_clist_get_selectable): new function 
	to get the state of the selectable flag

	* btk/btkctree.c (btk_ctree_node_set_selectable)
	(btk_ctree_node_get_selectable): clist analogons
	
Thu Sep 10 17:04:03 1998  Raph Levien  <raph@gimp.org>

	* btk/testrgb.c (testrgb_rgb_test): Small changes to the test
	pattern.

	* bdk/bdkrgb.c (bdk_rgb_convert_gray4_pack): Fixed some alignment
	bugs in the 4bit gray cases.

Wed Sep  9 02:48:44 PDT 1998 Manish Singh <yosh@gimp.org>

	* configure.in: added -posix check for NeXTStep

	* btk/testthreads.c: applied part of btk-joke-980907-0 to use
	a unique buffer for each thread.

	* docs/btk-config.1: clarified copyright

Tue Sep  8 05:19:51 1998  Tim Janik  <timj@btk.org>

	* bdk/bdk.c (bdk_init): use g_atexit() instead of ATEXIT.

	* btk/btkmain.c (btk_init): use g_atexit() instead of ATEXIT.

	* btk/btkobject.c (btk_object_init_type): use g_atexit() instead of
	ATEXIT.
	
	* ltconfig: use GLib's ltconfig which honours lcc.

Mon Sep  7 20:09:23 PDT 1998 Manish Singh <yosh@gimp.org>

	* configure.in: comment the -std1 check and save LIBS properly

Sun Sep  6 12:36:23 PDT 1998 Manish Singh <yosh@gimp.org>

	* btk/testrgb.c: #include <stdlib.h>

Sat Sep  5 16:01:19 1998  Owen Taylor  <otaylor@btk.org>

	* bdk/bdkinputxfree.h bdk/bdk.c bdk/bdkinputgxi.h:
	When the pointer is grabbed on an input window,
	either explicitely, or through press-grab, and
	then grabbed on a non-input window, ungrab the
	devices.

Sat Sep  5 07:13:19 1998  Tim Janik  <timj@btk.org>

	* btk/btktypeutils.h: don't include any bdk headers.
	added structure definitions for BtkTypeObject and BtkTypeClass,
	which cover the very basic fields of BtkObject and BtkObjectClass,
	which are actually used by the type system.
	
	* btk/btktypeutils.c: don't include btkobject.h or btkcontainer.h,
	we only refer to our own structures. improved class inheritance
	sanity checking a bit.

	* btk/btkobject.h: placed appropriate comments at the beginnings
	of the BtkObject and BtkObjectClass structures, which explain
	their relationship to BtkTypeObject and BtkTypeClass.

	* btk/btktypeutils.h:
	* btk/btkobject.h:
	moved BTK_STRUCT_OFFSET(), BTK_CHECK_CAST(), BTK_CHECK_CLASS_CAST(),
	BTK_CHECK_TYPE() and BTK_CHECK_CLASS_TYPE() macro definitions from
 	btkobject.h to btktypeutils.h.

	* btk/btkobject.h:
	* btk/btkobject.c:
	removed btk_object_check_cast() and btk_object_check_class_cast()
	functions. to keep source compatibility, we can provide macro aliases
 	for the corresponding btk_type_* functions. but then again, people
 	shouldn't have been using these functions anyways since they were part
 	of Btk's internal API.

	* btk/btktypeutils.h:
	* btk/btktypeutils.c:
	implemented btk_type_check_object_cast() and btk_type_check_class_cast()
	functions to check BtkTypeObject and BtkTypeClass types.

Thu Sep  3 07:16:54 1998  Tim Janik  <timj@btk.org>

	* btk/btkctree.h:
	* btk/btkctree.c: `const' fixups.

	* btk/btkclist.h:
	* btk/btkclist.c: `const' fixups and some coding style adaptions.

	* btk/btkctree.c (btk_ctree_insert_node): don't dereference *text
	if it is passed as NULL.

Wed Sep  2 22:41:40 1998  Raph Levien  <raph@gimp.org>

	* bdk/bdkrgb.c (bdk_rgb_select_conv): Fixed 32bpp image depth
	big-endian cases. Added a 4bpp packed gray mode (somewhat
	incorrectly hardwired to MSB), which should take care of
	Stric's hardware.

Thu Sep  3 04:45:57 1998  Tim Janik  <timj@btk.org>

	* btk/btkaccelgroup.c (btk_accel_group_add): plug another small
	BtkSIgnalQuery leak.

Thu Sep  3 04:22:20 1998  Tim Janik  <timj@btk.org>

	* btk/btkmenushell.c (btk_real_menu_shell_move_current):
 	BTK_MENU_DIR_CHILD: check for the existance of
 	menu_shell->active_menu_item before accessing its child.
	BTK_MENU_DIR_PREV:
	BTK_MENU_DIR_NEXT: if we haven't had an active item and still
	don't, make a default selection.

Wed Sep  2 00:28:58 1998  Tim Janik  <timj@btk.org>

	* btk/btkwidget.c (btk_widget_propagate_state): iterate
	the children with _forall for sensitivity changes and with
	_foreach on pure state changes. this fixes a lot of the
	old inclusions of internal widgets into _foreach calls.

	* btk/btktree.c: removed btk_tree_foreach, let btk_tree_forall
	do the work. don't walk the subtrees of first level children.

	* btk/btktreeitem.c: provide a _forall implementation,
	which walks the subtrees as well for include_internals.

	* btk/btkmenuitem.c: provide a _forall implementation, which walks
	the submenus as well for include_internals.

	* btk/btkscrolledwindow.c: removed btk_scrolled_window_foreach and
	implemented btk_scrolled_window_forall, which will iterate over
	the viewport and the scrollbars for btk_container_forall or
	iterate over the viewports children for btk_container_foreach.

	* btk/btktoolbar.c: 
	* btk/btktable.c: 
	* btk/btkpaned.c:
	* btk/btkpacker.c:
	* btk/btkmenushell.c: 
	* btk/btklist.c: 
	* btk/btkfixed.c:
	* btk/btkclist.c:
	* btk/btkbox.c: 
	* btk/btkbin.c: 
	* btk/btknotebook.c:
	removed the old btk_*_foreach functions and provided btk_*_forall.

	* btk/btknotebook.c:
 	(btk_notebook_real_switch_page): expose tabs.
	(btk_notebook_page_num): new function to return the page number
	of a distinct child.
	(btk_notebook_focus): minor fixups. foxus handling is still screwed
 	under some circumstances.

	* btk/btktreeitem.c:
 	(btk_real_tree_item_select):
	(btk_real_tree_item_deselect): major fixes.
	some general fixups wrt queue_redraw, and tree items not being
 	NO_WINDOW widgets.

	* btk/btklistitem.c:
 	(btk_real_list_item_select): 
	(btk_real_list_item_deselect): 
	(btk_real_list_item_toggle): 
	removed unneccessary queue_redraw calls.

Wed Aug 30 09:42:07 1998  Tim Janik  <timj@btk.org>

	* btk/btkoptionmenu.c: allow optionmenus to have the focus and
	automatically popup the menu on space bar.

Wed Aug 26 06:40:34 1998  Tim Janik  <timj@btk.org>

	* btk/btkcontainer.h:
	* btk/btkcontainer.c: implemented btk_container_forall() (as a class
	method), which acts similar to btk_container_foreach(), but iterates
	over internal children. the BtkContainer::foreach signal vanished in
 	favour of a new class method ->forall() that optionally includes
 	internal widgets.

	* btk/btkclist.c (btk_clist_init): provide no _foreach implementation
	but a _forall implementation, since all child widgets we have are
	internal ones.
	(column_button_create): set the	parent window prior
 	to btk_widget_set_parent().

	* btk/btkwidget.c:
	exchanged all calls to btk_container_foreach() with
 	btk_container_forall().

	* btk/btkwidget.h: 
	* btk/btkwidget.c: added the BTK_COMPOSITE_CHILD, exported through
	the BtkWidget::composite_child argument. to have a widget created
	with the flag initially, two new functions got added to wrap a widgets
	creation:
 	btk_widget_push_composite_flag() and btk_widget_pop_composite_flag().

Wed Aug 25 23:37:39 1998  Tim Janik  <timj@btk.org>

	* btk/btktooltips.h:
	* btk/btktooltips.c: exported btk_tooltips_create_window() as
	btk_tooltips_force_window(), so tooltips->tip_window can be accessed
	prior to the first tip being set.
	don't put an extra reference on the window, since it is a toplevel,
 	it wont get destroyed from anywhere else.

	* overall macro and BtkType fixups.

1998-09-02  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* btk/btkcolorsel.c: Replaced "foo == TRUE" and "foo == FALSE"
	constructs by more forgiving ones.  (Does anyone else feel like
	the color selector need rewriting?).

Tue Sep  1 10:53:52 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkprogress.c (btk_progress_finalize): Unref
	the adjustment.

	* btk/btkmenu.c: Modified reference counting so
	that the reference count from the toplevel that
	the menu creates to the menu is invisible to the
	application.

Mon Aug 31 21:36:31 1998  Raph Levien  <raph@gimp.org>

	* bdk/bdkrgb.c (bdk_rgb_select_conv): Improved the 24bpp
	conversion selection logic, so Suns and other big-endian
	machines should get faster conv routines. This is also the
	point where 4bpp gray and 1bpp are checked in, although I
	wouldn't be surprised if 1bpp is a little buggy. This is
	synchronized with the 0.0.7 release of BdkRgb.

	* btk/Makefile.am: 
	* btk/testrgb.c: Checked in testrgb.c to CVS, and made the
	appropriate change to the Makefile.am

Mon Aug 31 15:18:19 1998  Raph Levien  <raph@gimp.org>

	* bdk/bdkrgb.[ch]: Added a bdk_draw_rgb_image_dithalign function,
	which is good for images that scroll (makes the dither patterns
	align correctly)

Sat Aug 29 14:50:56 PDT 1998 Manish Singh <yosh@gimp.org>

	* bdk/bdkcolor.c:
	(bdk_colormap_new) (bdk_colormap_get_system):
	quell some warnings with g_hash_table_new

	* btk/btkaccelgroup.c (btk_accel_group_add): free the BtkSignalQuery
	when we're done with it

	* btk/itemfactory.c:
	(btk_item_factory_from_path):
	(btk_item_factory_create_item): free some strings

	* btk/btklabel.c:
	(btk_label_finalize): free label->pattern when done
	(btk_label_parse_uline): null terminate pattern string, delete
	some duplicated code

	* btk/testthreads.c: add #include <unistd.h> for sleep()

Tue Aug 25 16:52:47 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btktext.c (recompute_geometry): Make sure the
	mark we pass to line start is the beginning of a 
	real line, not a wrapped one.

Mon Aug 24 18:37:15 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btktext.c: Reference count the fonts used in
	the text widget.

	* bdk/bdk.h bdk/bdkcolor.c: Rename the color allocation
	freeing functions to be more consistent, and more 
	convenient; leave the old names in for backwards compatibility.

	* bdk/bdkcolor.c bdk/bdkprivate.h: Reference count the
	allocations in pseudo-color colormaps to greatly reduce
	calls to XAllocColor. Keep a per-colormap hashtable to
	speed up finding if there is an already-allocated matching
	color.

	* bdk/bdkcolor.c: Don't just match read the system colormap
	when the colormap is created, but synchronize our copy
	with the system colormap periodically.
	
	* bdk/bdk.c bdk/bdktypes.h btk/btkentry.c btk/btktext.c: 
	Change XIM constants names to match BDK conventions

	* btk/testinput.c: Allow the drawing area to get the focus.

	* btk/testbtk.c: Change around the Text test to demonstrates
	multiple fonts, use more colors.

	* btk/btkwidget.c: Improve btk_widget_get_colormap()/visual()
	so they work after a widget is unrealized.

	* btk/btktext.[ch]: Remove the requirement that the text
	widget be realized before adding text (!) Allocate colors
	ourself, instead of requiring the caller allocate them.
	Allow changing styles to work properly by keeping track
	of the values for a certain property are default or
	set explicitely.

	* btk/btkmenu.h: Added some comments.

	* btk/btkentry.c: Changes to match XIM constants.

	* btk/bdk.h bdk/bdkwindow.c: Add bdk_drawable_set_data(),
	for adding keyed data to drawables. (Uses g_dataset
	internally)

	* bdk/bdkpixmap.c: Keep track of the colors we allocate,
	when creating an XPM - store them as user data for the BdkPixmap,
	so we don't leak colors when we create pixmaps from XPM's.

	Allocate memory for color information in large blocks instead of 
	as many little pieces.
	
Mon Aug 24 11:09:32 PDT 1998 Manish Singh <yosh@gimp.org>

	* bdk/bdkrgb.c: removed some unused variables

	* btk/btkclist.c
	* btk/btkmain.c: #if 0'd out some unused code

	* btk/btkobject.c: check for NULL object hash table in btk_object_debug

Mon Aug 24 02:36:53 1998  Tim Janik  <timj@btk.org>

	* btk/btkarg.h:
	* btk/btkarg.c:
	* btk/btkwidget.h: 
	* btk/btkwidget.c: 
	* btk/btkobject.h:
	* btk/btkobject.c:
	* btk/btkcontainer.h: 
	* btk/btkcontainer.c: 
	(btk_object_new):
	(btk_object_set):
	(btk_widget_new):
	(btk_widget_set): 
	(btk_container_add_with_args):
	(btk_container_child_set):
	begin the parameter elipsis (...) after the first argument name. this
	change is source compatible, since it was always required, even as NULL.
 	(btk_args_collect): 
	(btk_object_args_collect): 
	(btk_container_child_args_collect):
 	changed prototypes to pass first_arg_name, also, pass va_list variable
	by value (portability concerns). callers changed.

	* btk/btkargcollector.c: implemented btk_arg_collect_value() as
	a huge macro BTK_ARG_COLLECT_VALUE() <shrug>. this is needed because we
 	can't pass va_list variables by reference for portability reasons.

Fri Aug 21 22:40:00  Raph Levien  <raph@btk.org>

	* bdk/bdkrgb.c: added calls to bdk_rgb_init in the get_cmap and
	get_visual calls, so that it gets implicitly initialized.

Fri Aug 21 13:06:04 1998  Stuart Parmenter  <pavlov@gimp.org>
	* btk/btkfeatures.h.in:  added BTK_HAVE_FEATURES_1_1_2 for changes
	such as BtkCTree function name changes
	
Fri Aug 21 02:31:26 1998  Tim Janik  <timj@btk.org>

	* btk/btkmain.h:
	* btk/btkmain.c (btk_check_version): added a function to perform a
	binary version check, returning a static string for error descriptions,
	or NULL on success.

Thu Aug 20 20:08:15 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btktext.c ([un]draw_cursor): Check to see if we've
	computed our geometry yet, and if not, ignore the request.

	* btk/btktext.c (correct_cache_insert): Fiddled around
	some more. All the bug-test codes seem to work at once
	now. (fingers crossed...)

Thu Aug 20 13:04:08 PDT 1998 Manish Singh <yosh@gimp.org>

	* bdk/bdkrgb.c: silly visual fixes

	* btk/testbtk.c: call bdk_rgb_init so color preview test actually
	works

1998-08-20  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* btk/btkhandlebox.c (btk_handle_box_button_changed): Do not do
	anything if the event's window is not the bin window.
	(btk_handle_box_motion): Likewise.

1998-08-19  Raph Levien  <raph@gimp.org>

	* btk/testbtk.c (create_color_preview): pushed the colormap and
	visual so it would work better with BdkRgb.

1998-08-19  Raph Levien  <raph@gimp.org>

	* bdk/bdkrgb.c: fixed some bugs in the 565_d mode, and added a
	4bpp static_color mode (for vga displays). Also fixed a '64' value
	in the dither matrix, which was causing one pixel out of 16k to be
	dithered wrong.

	* btk/btkpreview.{c,h}: Changed it to work with BdkRgb, gutting
	most of the contents. This is an API change - any apps that relied
	on the internal structure of BtkPreview will need some change -
	most notably in the use of reserved colors. The Gimp needed
	changes in this regard.

Wed Aug 19 00:11:14 1998  Tim Janik  <timj@btk.org>

	* btk/btkmain.c (btk_init): allow argument parsing in btk without
	G_ENABLE_DEBUG being defined (specifically --btk-module= and
	--g-fatal-warnings), noticed by miguel.

Tue Aug 18 17:54:40 1998  Tim Janik  <timj@btk.org>

	* btk/btkrc.c (btk_rc_parse_file): use g_get_current_dir() instead of
	getcwd().

 	* bdk/bdkprivate.h:
	* bdk/bdkglobals.c:
 	* bdk/bdkwindow.c:
	* bdk/bdk.c:
	* btk/btkwindow.c: 
	* btk/btkitemfactory.c: 
	dropped bdk_progname, use g_get_prgname()/g_set_prgname() instead.

	* btk/btkselection.c:
	* btk/btkpreview.c:
	* btk/btkobject.c: 
	* btk/btkmain.c: 
	* btk/btktypeutils.c: indentation fixes due to g_message() use.

	* bdk/bdkrgb.c: exchanged occourances of g_print with g_message.

Tue Aug 18 17:22:22 1998  Lars Hamann  <lars@btk.org>

	* btk/btknotebook.c (btk_notebook_switch_focus_tab): 
	* btk/btknotebook.c (btk_notebook_update_labels): fix for sigsegv
	in case of show_tabs == NULL

Tue Aug 18 03:54:43 1998  Tim Janik  <timj@btk.org>

	* btk/btkmain.c	(btk_init): restricted the --g*fatal-* arguments
	to --g-fatal-warnings again. this option now causes log levels of
	WARNING and CRITICAL to abort().

	* bdk/bdk.c: 
	* bdk/bdkdnd.c: 
	* bdk/bdkcc.c: 
	* bdk/bdkfont.c: 
	* bdk/bdkwindow.c:
	* bdk/bdkvisual.c:
	* btk/btkwidget.c:
	* btk/btktypeutils.c:
	* btk/btktree.c:
	* btk/btkfontsel.c:
	* btk/btkmain.c:
	* btk/btkobject.c:
	* btk/btkpreview.c:
	* btk/btkselection.c:
	* btk/btktext.c:
	* btk/btktree.c:
	* btk/btktreeitem.c:
	did a global search&replace to substitute g_print() calls with
 	g_message(). libraries shouldn't use printf(), g_print() or
	g_printerr() at all.
	a bunch of the replacements should probably be wrapped into the
	G{D|T}K_NOTE() macros, so they are special cased for debugging
	purposes in a sane way, avoiding all the nasty #ifdef DEBUG_MY_TEDDY
	things.

	* bdk/bdkdnd.c: added copyright notice.

Mon Aug 17 17:28:00  Raph Levien  <raph@btk.org>

	* bdk/bdkrgb.c: Further speedups of the 565_d case. It's
	impressively fast now - about 4.65 Mpix/s on an IBM TP 600
	running a PII 233. It's synced with the 0.0.5 release of
	BdkRgb.

Tue Aug 18 00:29:13 1998  Lars Hamann  <lars@btk.org>

        * btk/btkclist.h:
        (struct _BtkCListClass): new class methods:
        (sort_list) (insert_row) (remove_row) (set_cell_contents)

        * btk/btkclist.c :
        (cell_empty) (cell_set_text) (cell_set_pixmap) (cell_set_pixtext):
        removed and replaced by (set_cell_contents)
        (set_cell_contents): function for class method set_cell_contents
        (real_insert_row): function for class method insert_row
        (real_remoce_row): function for class method remove_row
        (real_sort_list): function for class method sort_list
        (default_compare): fix to avoid problems with cell types != CELL_TEXT

        * btk/btkctree.h :
        (btk_ctree_export_to_gnode): new function to export a ctree as gnode 
        (btk_ctree_node_is_visible): new function to return visibility state
        of a node
	(btk_ctree_show_stub): new function to set visibility of root stub

        renamed functions :
        (btk_ctree_insert) -> (btk_ctree_insert_node)
        (btk_ctree_remove) -> (btk_ctree_remove_node)
        (btk_ctree_find_glist_ptr) -> (btk_ctree_find_node_ptr)
        (btk_ctree_set_text) -> (btk_ctree_node_set_text)
        (btk_ctree_set_pixmap) -> (btk_ctree_node_set_pixmap)
        (btk_ctree_set_pixtext) -> (btk_ctree_node_set_pixtext)
        (btk_ctree_set_shift) -> (btk_ctree_node_set_shift)
        (btk_ctree_get_cell_type) -> (btk_ctree_node_get_cell_type)
        (btk_ctree_get_text) -> (btk_ctree_node_get_text)
        (btk_ctree_get_pixmap) -> (btk_ctree_node_get_pixmap)
        (btk_ctree_get_pixtext) -> (btk_ctree_node_get_pixtext)
        (btk_ctree_set_foreground) -> (btk_ctree_node_set_foreground)
        (btk_ctree_set_background) -> (btk_ctree_node_set_background)
        (btk_ctree_set_row_data) -> (btk_ctree_node_set_row_data)
        (btk_ctree_set_row_data_full) -> (btk_ctree_node_set_row_data_full)
        (btk_ctree_get_row_data) -> (btk_ctree_node_get_row_data)
        (btk_ctree_moveto) -> (btk_ctree_node_moveto)
        (btk_ctree_sort) -> (btk_ctree_sort_node)
	(btk_ctree_is_visibe) -> (btk_ctree_is_viewable)

        * btk/btkctree.c :
        (cell_empty) (cell_set_text) (cell_set_pixmap) (cell_set_pixtext):
        removed and replaced by (set_cell_contents)
        (set_cell_contents): function for class method set_cell_contents
        (real_insert_row): function for class method insert_row
        (real_remoce_row): function for class method remove_row
        (real_sort_list): function for class method sort_list
        (default_compare): removed. CTree now also compares two BtkCTreeRows
        instead of two BtkCTreeNodes.
        (btk_ctree_unlink): call btk_ctree_collapse if parent is empty after
        unlinking the node
        (real_tree_expand) (real_tree_collapse): fix for refcounting of
        node pixmaps
        (set_node_info): call btk_ctree_node_set_pixtext instead of
        manipulating the row itself
        
        * btk/testbtk.c: use renamed functions of BtkCTree.
        new sample to show btk_ctree_export_to_gnode and btk_ctree_insert_gnode
        at work.

Mon Aug 17 15:31:38 1998  Tim Janik  <timj@btk.org>

	* btk/btkmain.c: removed btk_input_add_interp.

	* btk/btkeditable.c (btk_editable_set_position): fixed bogus "return"
	keyword.
	(btk_editable_get_event_time): fix default: case.

	* btk/btkclist.c (btk_clist_swap_rows): fixes for lvalue casts.

	* bdk/bdkpixmap.c: made a bunch of unexported functions static.

	* bdk/bdkcolor.c:
	* bdk/bdkvisual.c: include "bdkx.h", since it exports prototypes
	of our functions.

	* various minor compilation cleanups, such as bogus commas in
	enums and similar things.

Mon Aug 17 07:47:43 1998  Tim Janik  <timj@btk.org>

	* btk/btkmain.c (btk_init): NULL terminate the arg list to g_strconcat()
	(thanx raph).

Sun Aug 16 23:14:20 CDT 1998 Shawn T. Amundson <amundson@btk.org>

	* NEWS: updated for 1.1.2
	* btk+.spec: version = 1.1.2

Mon Aug 17 05:10:29 1998  Tim Janik  <timj@btk.org>

	* btk/btkmain.c (btk_init): don't call module initializers multiple
	times. changed --btk-with-module to --btk-module at owen's request.

Mon Aug 17 03:47:55 1998  Tim Janik  <timj@btk.org>

	* btk/btkmain.c (btk_init): feature a new commandline option
	--btk-with-module=<module> that allows additional loading and
	initialization of modules (e.g. GLE).

Mon Aug 17 01:40:00 1998  Tim Janik  <timj@btk.org>

	* configure.in: version bump to 1.1.2, binary age 0, interface age 0.
	pass "bmodule" to AM_PATH_BUNNYLIB, with that we require libbmodule.so now.

	* btk/btkmain.c (btk_init): since bunnylib's g_return*_if_fail macros log
	with G_LOG_LEVEL_CRITICAL now, i added "--g-fatal-checks",
	"--bdk-fatal-checks" and "--btk-fatal-checks". that makes up six
	different *-fatal-* arguments now. this needs to be revised and
 	compressed to a reasonable amount of arguments.

Sun Aug 16 20:51:59 1998  Tim Janik  <timj@btk.org>

	* btk/btkmain.c (btk_init): fatal warning option is split up now,
	"--g-fatal-warnings" causes fatal warnings in GLib,
 	"--bdk-fatal-warnings" causes fatal warnings in Bdk,
 	"--btk-fatal-warnings" causes fatal warnings in Btk.

	* btk/Makefile.am: define G_LOG_DOMAIN for btk.
	* bdk/Makefile.am: define G_LOG_DOMAIN for bdk.

	* btk/testbtk.c: 
	* bdk/gxid.c:
 	we need ugly #undef G_LOG_DOMAIN at the start of these files currently,
 	since automake doesn't support per target _CFLAGS yet.

	* configure.in: require GLib 1.1.3.

Sat Aug 15 03:19:30 1998  John Ellis  <johne@bellatlantic.net>

	* btk/btkctree.[ch] (btk_ctree_set_drag_compare_func): New function
	to set a callback to test if a node in drag can be dropped onto
	it's currrent location.
	* btk/btkctree.c (set_mouse_cursor),(check_cursor): New functions
	to change the pointer when a drag destination is not allowed.

Thu Aug 13 21:06:00 1998  Raph Levien  <raph@btk.org>

	* bdk/bdkrgb.c: committing a patch by Ray Lehtiniemi that
	speeds up the 565_d case by about 25% total. Thanks Ray!

Thu Aug 13 16:47:44 1998  Owen Taylor  <otaylor@redhat.com>

	* Changed BtkSignalFunc back to () from (void). (again!)

	* Added file README.cvs-commits
	
Thu Aug 13 09:11:11 BST 1998  Tony Gale  <gale@btk.org>

        * docs/btk_tut.sgml:
          - Tidy up of the menufactory example from
            Andy Kahn <kahn@zk3.dec.com>
          - New section on Range Widgets from
            David Huggins-Daines <bn711@freenet.carleton.ca>
          - Started a new section on 'Advanced Event and Signal
            Handling' - used an email from Owen.
          - New appendix on Bdk Event Types
          - Added the tictactoe full example code to the
            'Code Examples' appendix

Tue Jul 21 12:42:01 1998  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdk.h bdk/bdkfont.c: Added bdk_text/string_extents() - 
	  to calculate all the metrics at once of a string, including
	  things which weren't calculated before.

	* btk/Makefile.am btk/btk.h btk/btktearoffmenu.[ch]: New
	  MenuItem type, that when put as the first thing in a
	  menu, makes the menu tearoff. Currently drawn as a
	  dashed line.

	* btk/btkmenuitem.h btk/btkcheckmenuitem.c: Added a flag
	  "hide_on_activate" to the MenuItem class structure to allow
	  check and radio buttons to be changed with <Space> without
	  hiding the menu.

	* btk/btkitemfactory.c: 
	  - Create a AccelGroup for each MenuShell we create.
	  - If an '_' appears before a  character 'c' in the path,
	    then make 'c' an accelerator in the menu's accel group,
	    and if the menuitem is menubar <alt>C an accelerator 
	    in the itemfactory's accel group. Double '__' inserts
	    a literal '_'

	* btk/btklabel.[ch]: Add support for a pattern arg - 
          which is a string. If an '_' appears in this string,
	  the corresponding position in the label is underlined.

          Add btk_label_parse_uline() convenience function which
	  takes a string with embedded underlines, sets the
	  pattern and label, and returns the accelerator keyval.

	* btk/btkmenu.[ch]: Make menus no longer a toplevel widget.
	  Instead, they create a BtkWindow and add themselves
	  to that. (When torn off, another new feature, they
	  create another BtkWindow to hold the torn off menu)

	  New function btk_menu_set_tearoff_state()
	
	* btk/btkenums.h btk/btkmenushell.[ch] btk/btkenums.h: 
	  Added action signals  for keyboard navigation of menus.

	* btk/btkmenushell.c: Key press handler which activates
          bindings for navigation, and accelerators, for handling
	  underline accelerators. Exported functions to select 
	  and activate menu items in a menushell.

	* btk/testbtk.c: Added a new "Item Factory" test which
	  tests BtkItemFactory and the new keyboard navigation
	  of menus.

Tue Aug 11 20:52:58 1998  Tim Janik  <timj@btk.org>

	* btk/btktypeutils.c (btk_type_class_init): relookup nodes after
	external functions have been called. also relookup nodes after
	this function has been invoked.

Tue Aug 11 15:04:52 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btktext.[ch]: Removed has_cursor, set the cursor
	  beginning of Text when creating the Text widget.

	* btk/testbtk.c: Grab the focus on the text widget so
	  as to test out the above.

Tue Aug 11 14:55:00 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkeditable.c: Reverted part of timj's change of Jul 16. 
	  ::changed is a notification signal and should have no default
	  handler. A complete redraw of the Text widget does _not_ need to
	  be done on every text insertion.

Tue Aug 11 13:07:29 1998  Owen Taylor  <otaylor@redhat.com>
	(btk-abilleira-072198-patch)

	* btk/btkwindow.[ch]: 
	  Add btk_window_set_modal() which sets a flag; when
	  set the window does a btk_grab_add() when the window
	  is shown, and a btk_grab_remove() when the window
	  is hidden. 

	* btk/btkfilesel.[ch]: Test if it is running in modal form and in
	  that case will run "Create Dir","Delete File" and "Rename File" 
	  dialogs as modal too.

	* btk/testbtk.c: Added a button with an example of creating modal 
	  dialog boxes. Including file selection and color selection standard
	  dialogs.
	
Tue Aug 11 00:44:47 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkhscrollbar.c btk/btkvscrollbar.c btk/btktoolbar.c:
	  Removed CAN_FOCUS by default from scrollbars, button
	  children of toolbar. (But not BTK_TOOLBAR_CHILD_WIDGET children)
	  (Scrollbar definitely good change, toolbar bit more questionable)

Tue Aug 11 17:49:33 1998  Tim Janik  <timj@btk.org>

	* examples/packbox/packbox.c: #include fixes (reported by Asbjoern
 	Pettersen).

Tue Aug 11 00:35:56 1998  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdkgc.c bdk/bdktypes.h: Applied btk-pedersen-980727-0; 
	  added all logical operations to gc->function.

Sun Aug  9 23:31:59 1998  Lars Hamann  <lars@btk.org>

	* btk/btkclist.c (adjust_scrollbars): Fix for resize bug. Call
 	btk_widget_size_allocate instead of btk_widget_queue_resize
	if the visibility state of a scrollbar changes.

Mon Aug 10 12:49:54 1998  Tim Janik  <timj@btk.org>

	* btk/btkhbbox.h: fixed an #include statement (reported by Eric Kidd).

Thu Aug  6 22:37:21 1998  Stefan Jeske  <stefan@btk.org>

	* btk/btkclist.c: Renamed my_merge and my_mergesort to
 	btk_clist_merge and btk_clist_mergesort. :)

1998-08-06  Martin Baulig  <martin@home-of-linux.org>

	* btk/btkclist.c: Renamed `merge' -> `my_merge' and
	`mergesort' -> `my_mergesort'.

Wed Aug  5 21:12:37 1998  Stefan Jeske  <stefan@btk.org>

	* btk/btkenums.h: new enum BtkSortType.
 	
	* btk/btkclist.h:
	* btk/btkclist.c:
	Added sorting capabilities to BtkCList. New APIs :
	btk_clist_set_compare_func, btk_clist_set_sort_column,
	btk_clist_set_sort_type, btk_clist_sort, btk_clist_set_auto_sort. 
	New internal functions : default_compare, merge, mergesort.

	(btk_clist_append): This is just a wrapper for btk_clist_insert now.
	
	(btk_clist_insert): Modified to handle btk_clist_append and the
	auto sort flag. Changed the return value from void to bint to
	return the row number where the element was actually inserted.

	(btk_clist_swap_rows): Return immediately if auto sort flag is set.
	
	* btk/btkctree.h:
	* btk/btkctree.c:
	Removed the auto_sort flag, replaced ctree->node_compare with
	clist->compare all over the place, modified default_compare to
	match clist's needs. Removed APIs : btk_ctree_set_auto_sort,
	btk_ctree_set_compare_func. Removed BtkCTreeCompareFunc typedef.

	* btk/testbtk.c: Modified clist/ctree samples to demonstrate
	sorting. The lists can be sorted by a column by clicking the 
	corresponding title button.
	
Tue Aug  4 22:02:49 PDT 1998 Shawn T. Amundson <amundson@btk.org>

	* Released BTK+ 1.1.1

Wed Aug  5 02:57:20 1998  Lars Hamann  <lars@btk.org>

	* btk/btkctree.h:
	* btk/btkctree.c:
 	(btk_ctree_find): changed to return a bboolean
	(btk_ctree_insert_gnode): new function for recursive insertion of a
	GNode tree.
	(btk_ctree_real_select_recursive): fix for extended selection
	(btk_ctree_sort_recursive): in case node == NULL, sort root nodes too.
	(btk_ctree_set_node_info) (set_node_info): few fixes for expanded flag

Tue Aug  4 16:18:26 1998  Tim Janik  <timj@btk.org>

	* configure.in: version bump to 1.1.1, binary age 0, interface age 0.
	GLib version 1.1.1 is now required at minimum.

	* docs/Makefile.am: added btk_tut_fr.sgml to EXTRA_DIST (french version
	of the Btk+ tutorial, contributed by Eric Jacoboni <jaco@dotcom.fr>.

Mon Aug  3 19:24:48 1998  Owen Taylor  <otaylor@redhat.com>
 
 	* btk/btktext.c (btk_text_forward_delete): Undraw the
 	  cursor before (possibly) deleting the cursor's text
 	  property.
 
 	* btk/btktext.c (correct_cache_delete): More attempts
 	  to clean the line-start cache up after inserting
 	  a property. Among other things, make sure to
 	  fix up text->current_line, since it is used to 
 	  refetch the changed lines.
 
Tue Aug  4 10:59:19 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btktable.[ch]: Empty rows/columns of the table
        should not have been marked as being able to shrink.
	(Fixes problem with shrinking scrollbarless GIMP canvases)

1998-08-03  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* btk/btkctree.c (btk_ctree_find_by_row_data_custom): New public
	function to find a row by its data pointer using a custom
	comparison function.

Sun Aug 02 22:58:00 1998  George Lebl  <jirka@5z.com>

	* btk/btkclist.c: draw the buttons during a "draw" as well,
	  this fixes a bug when the whole widget is made non-sesitive
	  the buttons weren't redrawn

Mon Aug  3 00:04:09 1998  Lars Hamann  <lars@btk.org>

	* btk/btkclist.c (abort_column_resize): reset drag_pos after abort
	* btk/btkclist.c (btk_clist_key_press): removed a few unneeded lines
	* btk/btkcombo.c (btk_combo_list_key_press): fixed compiler warning

Sun Aug  2 03:08:07 1998  Owen Taylor  <otaylor@btk.org>

	* bdk/bdkwindow.c (bdk_window_reparent): Change 
	  window_private->parent pointer when reparenting.

Sat Aug  1 22:17:00 1998  Raph Levien  <raph@acm.org>

	* bdk/bdkrgb.c: made some minor config changes to unify BdkRgb
	with the standalone release.

Fri Jul 31 20:45:07 1998  Lars Hamann  <lars@btk.org>

	* btk/btkclist.c (btk_clist_button_press) (btk_clist_motion)
	(btk_clist_button_release) (new_column_width): Few fixes for
	column resize. Store resize column in clist->drag_pos.

Thu Jul 31 15:18:36 1998  Lars Hamann  <lars@btk.org>

	* btk/btkctree.h 
	* btk/btkctree.c 
	* btk/testbtk.c : New typedef BtkCTreeNode, changed all GList *node
	to BtkCTreeNode *node.

	* btk/btklist.h : added extended selection mode and auto scrolling.
	(struct _BtkList): removed unneeded variables timer, button,
	selection_start_pos, selection_end_pos, scroll_direction, have_grab.
 	Added new variables undo_selection, undo_unselection, last_focus_child,
 	undo_focus_child, htimer, vtimer, anchor, drag_pos, anchor_state,
 	drag_selection, add_mode.
 
 	New functions :
 	(btk_list_extend_selection), (btk_list_start_selection),
 	(btk_list_end_selection), (btk_list_select_all),
 	(btk_list_unselect_all), (btk_list_scroll_horizontal),
 	(btk_list_scroll_vertical), (btk_list_toggle_add_mode),
 	(btk_list_toggle_focus_row), (btk_list_toggle_row),
 	(btk_list_undo_selection), (btk_list_end_drag_selection)
        
	* btk/btklist.c : 
 	(btk_list_enter_notify): removed, because auto scrolling now works
 	with btk_list_motion_notify
 
 	New functions, needed for auto scrolling :
 	(btk_list_motion_notify) (btk_list_move_focus_child)
 
 	New functions for extended selection support :
 	(btk_list_set_anchor), (btk_list_fake_unselect_all),
 	(btk_list_fake_toggle_row), (btk_list_update_extended_selection),
 	(btk_list_focus_lost)
 	
 	(btk_list_set_focus_child): modified btk_container_set_focus_child
 	function to support auto scrolling, and avoid out-of-sync errors in
 	case auf BTK_SELECTION_BROWSE
 	(btk_list_focus): modified btk_container_focus function to avoid out
 	off sync errors	in case auf BTK_SELECTION_EXTENDED

	* btk/btklistitem.h 
	* btk/btklistitem.c :
 	New signal functions for key binding support :
 	(toggle_focus_row), (select_all), (list_item), (unselect_all)
 	(list_item), (undo_selection), (start_selection), (end_selection)
 	(extend_selection), (scroll_horizontal), (scroll_vertical),
 	(toggle_add_mode)
 	(btk_list_item_realize): added	BDK_KEY_PRESS_MASK |
 	BDK_KEY_RELEASE_MASK
 	(btk_list_item_draw_focus): modify gc if parent has add_mode set.
 
 	* btk/btkcombo.c :
 	(btk_combo_popup_button_press):  grab pointer for combo->list
 	(btk_combo_button_release): ungrab only if combo->popwin HAS_GRAB
 	(btk_combo_list_key_press): take care of which child HAS_GRAB
 	(btk_comb_init): don't connect combo->button with button_release_event

Thu Jul 30 12:39:36 1998  Lars Hamann  <lars@btk.org>

	* btk/btkclist.c (btk_clist_motion): removed a few unneeded lines

Wed Jul 29 23:31:50 1998  Lars Hamann  <lars@btk.org>

	* btk/btkclist.c (btk_clist_motion): column resize now works with
	horizontal autoscrolling, BtkCTree's 'reorder ability' now works
	with horizontal and vertical autoscrolling.

Tue Jul 28 20:32:03 CDT 1998 Shawn T. Amundson <amundson@btk.org>

	* btk/docs/man: new directory
	* btk/docs/man/btk_button.pod: new file, initial btk_button man page

Tue Jul 28 00:03:20 1998  Lars Hamann  <lars@btk.org>

	* btk/btknotebook.c (btk_notebook_paint): small fix for border drawing
	bug

Mon Jul 27 09:18:13 BST 1998  Tony Gale  <gale@btk.org>

	* docs/btk_tut.sgml: BtkTree section from
	  David Huggins-Daines <bn711@freenet.carleton.ca>,
	  add a BtkText widget example
	* examples/text/* example/tree/* : new examples for the
	  BtkTree and BtkText widgets
	* docs/btk_tut.sgml: added an appendix to hold complete code
	  examples that aren't in a full form elsewhere in the
	  tutorial (e.g. scribble)

Mon Jul 27 00:46:21 CDT 1998 Shawn T. Amundson <amundson@btk.org>

	* Released BTK+ 1.1.0

Mon Jul 27 04:18:26 1998  Tim Janik  <timj@btk.org>

	* btkfeatures.h.in: revamped the definitions for 1-1-0, so that all
	the new API stuff is reflected in one #define BTK_HAVE_FEATURES_1_1_0.

Mon Jul 27 03:11:20 1998  Tim Janik  <timj@btk.org>

	* btk/btkbindings.c (binding_compose_params): fixup, so that enum
	values are looked up.

	* btk/btktypeutils.h:
	* btk/btktypeutils.c: new functions btk_type_flags_find_value and
	btk_type_enums_find_value to lookup enum values.

	* btk/btkctree.h: 
	* btk/btkctree.c: change enum name from BtkCTreeExpansion to
 	BtkCTreeExpansionType. fixed signal creations to pass the enum
	types not just the base type BTK_TYPE_ENUM.

	* btk/btkclist.h: 
	* btk/btkclist.c: fixed signal creations to pass the real enum
	types not just the base type BTK_TYPE_ENUM.

Sun Jul 26 14:50:07 1998  Stefan Jeske  <stefan@btk.org>

	* btk/testbtk.c : 
	Began cleanup, e.g. use btk_widget_show_all instead of many 
	btk_widget_show's. Completely rewrote the button box sample
 	(only one window now). Removed "miscellaneous" button.

Sun Jul 26 14:48:14 1998  Stefan Jeske  <stefan@btk.org>

	* btk/btkvbbox.c (btk_vbutton_box_size_allocate): 
	Fixed wrong allocation for BTK_BUTTONBOX_END.
 	(allocation->x  =>  allocation->y)

Sun Jul 26 14:06:37 1998  Lars Hamann  <lars@btk.org>

	* btk/btkclist.c (btk_clist_button_press) (btk_clist_button_release)
	(abort_column_resize) (btk_clist_key_press): fix for pointer grab
	
	* btk/btkctree.c (real_tree_select): added check to avoid double
	selected rows
	(btk_ctree_button_press)
 	(btk_ctree_button_release): fix for pointer grab

Sat Jul 25 13:16:00 1998 Damon Chaplin  <DAChaplin@msn.com>

	* btk/btkfontsel.c (btk_font_selection_get_fonts): 
	Fixed initialization problem - dirty memory could cause problems.
	Also checked that bitmapped fonts can be scaled when showing the
	available sizes.

Sat Jul 25 02:25:03 1998  Lars Hamann  <lars@btk.org>

	* btk/btkctree.c (btk_ctree_sort_recursive)
	(btk_ctree_sort_recursive): test for node != NULL
	(btk_ctree_is_visible) (btk_ctree_realize) (btk_ctree_unrealize)
	(btk_ctree_last) : added sanity checks
	* btk/btkclist.c (btk_clist_button_press): removed "no_focus_row"

Fri Jul 24 18:15:49 1998  Lars Hamann  <lars@btk.org>

	* btk/btkclist.c (toggle_focus_row): mini code cleanup

Fri, 24 Jul 1998 10:56:22 +0200 Paolo Molaro <lupus@debian.org>

	* btk/btkfeatures.h.in: added BTK_HAVE_ENUM_VALUE_STRUCT.

Thu Jul 23 00:11:39 1998  Tim Janik  <timj@btk.org>

	* btk/testbtkrc: introduce testbindings on C-1 for buttons,
 	to check out binding priorities. someone should really write
	btkrc-mode for emacs.

	* btk/btkwidget.c (btk_widget_class_init): remove ugly bindings test.
	* btk/testbtk.c (main): and move it here ;). this test says something
	on release of C-9. (this works only if the mouse pointer is on a
	spinbutton and there is no focus widget).

	* btk/btkrc.h:
	* btk/btkrc.c:
	export btk_rc_parse_color, btk_rc_parse_state and a new function
	btk_rc_parse_priority to parse path priority types.
	export rc tokens.
	feature binding parsing.

Wed Jul 22 23:41:17 1998  Tim Janik  <timj@btk.org>

	* btk/btkbindings.h: 
	* btk/btkbindings.c: new function btk_binding_parse_binding() to
	feature binding parsing in rc files.
	* btk/btkbindings.c (btk_binding_set_new): bug fix.
	* btk/btkbindings.c (btk_binding_pattern_compare): bug fix, we used to
	order the bindings with lowest priority first.

Wed Jul 22 15:21:08 PDT 1998 Manish Singh <yosh@gimp.org>

	* bdk/bdkrgb.c: actually builds and runs properly on big
	endian machines now, because we #include config.h. Also
	fixed up a compile error in the WORDS_BIGENDIAN case in
	bdk_rgb_convert_565_gray. I made the fix by looking at
	patterns in the other code; Raph can you verify this?

	* bdk/bdkthreads.c: #include <unistd.h> to quell compiler
	warnings

Wed Jul 22 23:00:44 1998  Lars Hamann  <lars@btk.org>

	* btk/btkctree.c (tree_select/unselect) (tree_expand/collapse) 
	(tree_toggle_expansion) (real_select/unselect_row)
	(btk_ctree_select/unselect) : few fixes for btk_signal_emits

Wed Jul 15 17:44:47 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btktext.c (new_text_property): We free things from
	the text property MemChunk, so it needs to be G_ALLOC_AND_FREE.

	* Fix up line start cache when splitting a property
	during an insert.

Wed Jul 15 21:15:52 1998  Owen Taylor  <otaylor@redhat.com>

	* btk/btkwidget.c: restauration => restoration

Thu Jul 16 20:11:36 1998  Owen Taylor  <otaylor@redhat.com>

	* bdk/bdkxid.c (bdk_xid_table_lookup): If xid_ht
	hasn't been created yet, don't do the lookup.

1998-07-20  Raph Levien  <raph@acm.org>

	* bdk/bdkrgb.c: More cleanups in the config process.

1998-07-20  Raph Levien  <raph@acm.org>

	* bdkrgb.c: Fixed minor config bug preventing big-endian
	architectures from working.

Tue Jul 21 06:32:43 1998  Stefan Jeske  <stefan@btk.org>

	* btk/btkprogressbar.{c,h} btk/testbtk.c: Fixed wrong size of
 	activity indicator. It is settable now as a fraction of the
	total width/height using btk_progress_bar_set_activity_blocks.
	Renamed btk_progress_bar_set_number_of_blocks to
	btk_progress_bar_set_discrete_blocks.

Mon Jul 20 21:28:18 1998  Lars Hamann  <lars@btk.org>

	* btk/btkctree.c (btk_ctree_post_recursive_to_depth)
 	(btk_ctree_pre_recursive_to_depth): new functions, recursive process
	tree to specified depth
	(btk_ctree_expand_to_depth): expand tree to specified depth
 	(btk_ctree_collapse_to_depth): collapse all nodes with level >= depth

Sun Jul 19 23:51:05 1998  Lars Hamann  <lars@btk.org>

	* btk/btkclist.c (scroll_vertical): fix for vertical scrolling in case
	of BTK_CLIST_ADD_MOD
	* btk/testbtk.c (add1000_clist): changed pixmap

Sat Jul 18 22:59:04 1998  Tim Janik  <timj@btk.org>

	* btk/btkmain.h: 
	* btk/btkmain.c: export btk_binary_age and btk_interface_age.

	* btk/btktypeutils.h:
	* btk/btkitemfactory.h: remove "void" from prototypes again.

Sat Jul 18 00:54:01 1998  Lars Hamann  <lars@btk.org>

	* btk/btknotebook.c (btk_notebook_set_child_arg): added support for
  	CHILD_ARG_MENU_LABEL, CHILD_ARG_TAB_LABEL
	(btk_notebook_get_child_arg): added support for CHILD_ARG_MENU_LABEL,
	CHILD_ARG_POSITION
	(btk_notebook_reorder_child): new funktion to change position of a
	notebook page
	(btk_notebook_draw_arrow): draw left/right arrow with
	BTK_SHADOW_ETCHED_IN if focus_tab is first/last tab.

	* btk/btkstyle.c (btk_default_draw_arrow):
	added BTK_SHADOW_ETCHED_IN/OUT

Sun Jul 19 12:19:16 1998  Stefan Jeske  <stefan@btk.org>

	* btk/btkprogress.c btk/btkprogress.h btk/btkprogressbar.c
	  btk/btkprogressbar.h btk/Makefile.am btk/btk.h btk/testbtk.c:
	Introduced generic BtkProgress widget. Derived BtkProgressBar from
	BtkProgress. Made BtkProgressBar much more flexible (see testbtk).

Fri Jul 17 23:49:28 PDT 1998 Manish Singh <yosh@gimp.org>

	* btk/btktypeutils.h
	* btk/btkitemfactory.h: explicitly specify void in prototype

Fri Jul 17 17:54:02 1998  Lars Hamann  <lars@btk.org>

	* btk/btkclist.c (scroll_vertical): fix to avoid flicker at begin/end
	of list

Fri Jul 17 05:30:47 1998  Tim Janik  <timj@btk.org>

	* btk/btksignal.c (btk_handlers_run) (btk_signal_real_emit):
	sropped the approach of copying all signal specific data into a
 	BtkHandlerInfo structure. we rather keep the signal data on the stack
	in btk_signal_real_emit and pass that over to btk_handlers_run. this
	avoids multiple lookups of the signal pointer and works savely together
	with destroy notifiers of handlers.

	* btk/btkentry.c (btk_entry_key_press): care for the posssibility that
	someone destroys the entry on the ::activate signal.

Fri Jul 17 01:21:32 1998  Tim Janik  <timj@btk.org>

	* btk/btkarrow.c (btk_arrow_expose): use misc->xpad for x calculation
	instead of ypad (typo).
	(btk_arrow_set): clear all of the arrow's allocation (left a 1 pixel
 	border around the allocation).
	(btk_arrow_init): the static requisition needs to be setup in this
	function rather than btk_widget_new(), so arrow creation works without
	the btk_arrow_new() constructing.
	(btk_arrow_expose): return TRUE, since we actually handled the expose.

	* btk/btkwidget.c (btk_widget_real_size_request): provide a default
 	implementation for BtkWidget::size_request, so size requisition for
 	simple statically sized widgets like BtkArrow works.

Thu Jul 16 14:16:16 PDT 1998 Manish Singh <yosh@gimp.org>

	* btk-config.in: minor changes to btk-config: --cflags doesn't
	prepend -I@libdir@/bunnylib/include anymore, since bunnylib-config handles
	it; --libs strips out redundant -L<path>'s properly (there was
	code in there to do it before, but it didn't work)

Thu Jul 16 18:24:41 1998  Tim Janik  <timj@btk.org>

	* btk/btknotebook.h: 
	* btk/btknotebook.c: signdness corrections all ove the place.
	implementation of object arguments: BtkNotebook::enable_popup,
 	BtkNotebook::tab_pos, BtkNotebook::tab_border, BtkNotebook::show_tabs,
	BtkNotebook::show_border, BtkNotebook::scrollable and BtkNotebook::page.
	begun implementation of child args, we have BtkNotebook::tab_label, but
	BtkNotebook::menu_label and BtkNotebook::position still lack the
	implementation.
	(btk_notebook_remove_page):
	(btk_notebook_current_page): allow negative indices (-1) as alias for
	the last page.

	* btk/btkentry.h:
	* btk/btkentry.c: BtkType and macro fixups. implementation of object
	arguments BtkEntry::max_length and BtkEntry::visibility.
	(btk_entry_adjust_scroll): queue a redraw.

	* btk/btkeditable.h:
	* btk/btkeditable.c: BtkType und macro fixups. implementation of
	object arguments BtkEditable::text_position and BtkEditable::editable.
 	new (action) signal BtkEditable::set_editable.
	provide a default handler for BtkEditable::changed that queues a redraw.

	* btk/btktext.h: 
	* btk/btktext.c: BtkType und macro fixups. override BtkEditable::
	set_editable.

Thu Jul 16 14:42:11 1998  Lars Hamann  <lars@btk.org>

	* btk/btkctree.c (btk_ctree_button_release): fix for sigsegv in
	case of drag_target == NULL
	* btk/btkclist.c (btk_clist_button_press): fix for BTK_2/3BUTTON_PRESS.
	Clist did not emit an select_row signal in case of BTK_2/3BUTTON_PRESS.
	* btk/btkfilesel.c (btk_file_selection_file_button,
	btk_dir_selection_file_button): fix due to changes in clist's
	select_row signal.

Thu Jul 16 01:27:15 1998  Tim Janik  <timj@btk.org>

	* btk/btkwidget.h:
	* btk/btkwidget.c (btk_widget_set_usize): handle negative values
	similar to btk_widget_set_uposition(). that is: -1=unspecified,
	-2=leave untouched. changed the width/height field of BtkWidgetAuxInfo
	to be bint16s rather than buint16s, since that's what the code expected
	(for a long time actually).

	* btk/btkviewport.c:
	added support for object arguments: BtkViewport::shadow_type,
 	BtkViewport::vadjustment and BtkViewport::hadjustment.
 	(btk_viewport_add): chain btk_bin_add.

	* btk/btkscrolledwindow.c: 
	added support for object argument: BtkScrolledWindow::hscrollbar_policy,
	BtkScrolledWindow::vscrollbar_policy and BtkScrolledWindow::viewport.

	* btk/btkadjustment.h: 
	* btk/btkadjustment.c: 
	* btk/btkctree.h: 
	* btk/btkclist.h: 
	* btk/btkctree.c: 
	* btk/btkclist.c:
	* btk/btkscrolledwindow.h:
	* btk/btkscrolledwindow.c:
	* btk/btkviewport.h:
	* btk/btkviewport.c:
	BtkType and macro fixups.

Thu Jul 16 01:10:02 1998  Lars Hamann  <lars@btk.org>

	* btk/btkctree.h :
	* btk/btkctree.c :
	Added focus handling, horizontal and vertical autoscrolling,
	extended Selection Mode, key bindings
	Added btk_ctree_toggle_expansion & btk_ctree_toggle_expansion_recursive
	Changed btk_ctree_scroll_to to btk_ctree_moveto.
	Removed btk_ctree_clear.
	
	* btk/btkclist.h :
	* btk/btkclist.c : 
	Added focus handling, horizontal and vertical autoscrolling,
	extended Selection Mode, key bindings

Wed Jul 15 12:39:27 1998  Raph Levien  <raph@acm.org>

	* This checkin integrates BdkRgb version 0.0.3 into the Btk 1.1
	source tree. For more information on BdkRgb, please see:
	http://www.levien.com/bdkrgb/

	* btk/btkfeatures.h.in (BTK_HAVE_BDK_RGB): added this feature. It
	bothers me slightly that the feature is in bdk, and this file is
	in btk, but it's probably ok.

	* bdk/bdk.h: Added an #include of <bdk/bdkrgb.h>

	* bdk/bdkrgb.c:
	* bdk/bdkrgb.h: Added this module.

	* Makefile.am (EXTRA_DIST): Added bdkrgb.c and bdkrgb.h files.

	* configure.in: added AC_C_BIGENDIAN test (needed by BdkRgb).

Wed Jul 15 14:20:10 1998  Tim Janik  <timj@btk.org>

	* btk/btksignal.c (btk_signal_real_emit): pass only the signal_id
	to this function. it needs to relookup the signal multiple times.
	this fixes spurious segfaults that could show up with signal intensive
	code, when classes are created during a pending emission (which is
	normal case).

Tue Jul 14 19:12:12 1998  Tim Janik  <timj@btk.org>

	* btk/btkbutton.c (btk_button_set_arg): don't destroy a buttons
	child if it isn't a label.

Tue Jul 14 11:41:38 1998  Tim Janik  <timj@btk.org>

	* btk/btkdialog.h: 
	* btk/btkseparator.h: 
	* btk/btkhseparator.h: 
	* btk/btkvseparator.h: macro and BtkType fixups.

Tue Jul 14 06:25:46 1998  Tim Janik  <timj@btk.org>

	* btk/testbtk.c (create_cursors): display the current cursor name.

	* btk/btktypeutils.h: 
	* btk/btktypeutils.c (btk_type_init_builtin_types): cleanups to
	the fundamental type definition. the BtkArg union now only covers
	the required storage types for argument values. adapted the BTK_VALUE_*
	macro set. handle BTK_TYPE_UCHAR. definiton of type set bounds macros.

	* btk/btkargcollector.c (btk_arg_collect_value): clean ups of the
	code, fixed int/float collection. fixed a bug in the sanity checking
	code for BtkObjects.

	* btk/btkbindings.c (btk_binding_entry_add_signal): fixups of the
	argument collection code.

	* btk/btksignal.c (btk_signal_collect_params): use the type set bounds
	macros when distinguishing the return type.

Mon Jul 13 12:42:51 1998  George Lebl  <jirka@5z.com>

	* bdk/bdkwindow.h: (bdk_window_reparent) check if old_parent_private
	  is not NULL before trying to g_list_remove the child. A patch
	  from Michael Lausch.

Sun Jul 12 16:40:06 1998  Tim Janik  <timj@btk.org>

	* btk/btkargcollector.c (btk_arg_collect_value): fix float argument
	collection (always casted to doubles upon argument passing).

Sun Jul 12 05:59:26 1998  Tim Janik  <timj@btk.org>

	* btk/btktypeutils.c (btk_type_new): call the base classes'
 	object_init_func for derived objects with the object's ->klass field
 	still pointing to the corresponding base class, otherwise overridden
 	class functions could get called with partly-initialized objects.
	(change from Tero Pulkkinen <terop@modeemi.cs.tut.fi>).

Sun Jul 12 02:47:35 1998  Tim Janik  <timj@btk.org>

	* btk/btkobject.h:
	* btk/btkobject.c:
 	(btk_object_arg_get_info): new functions which wraps btk_arg_get_info().

	* btk/btkcontainer.h:
	* btk/btkcontainer.c:
 	(btk_container_child_arg_get_info): new function which wraps
 	btk_arg_get_info().

Fri Jul 10 13:29:53 1998  Tim Janik  <timj@btk.org>

	* btk/btkcontainer.c:
	(btk_container_arg_get): 
	(btk_container_arg_set): 
	* btk/btkobject.c:
	(btk_object_arg_set): 
	(btk_object_arg_get):
	strictly check for the associated get/set arg functions. if an
	arg is readable or writable, the associated class functions *must*
	be provided.

Fri Jul 10 09:37:50 1998  Tim Janik  <timj@btk.org>

	* btk/btkaccellabel.c (btk_accel_label_accelerator_width): only take the
 	padding into account if there is an accelerator.

Fri Jul 10 05:51:44 1998  Tim Janik  <timj@btk.org>

	* btk/btkcontainer.c:
 	(btk_container_add_with_args): collect the arguments with
 	btk_container_child_args_collect, not through btk_object_args_collect.
	(btk_container_child_set): likewise.

Fri Jul 10 04:20:35 1998  Tim Janik  <timj@btk.org>

	* btk/btktypeutils.h: 
	* btk/btktypeutils.c: added a new internal type BTK_TYPE_IDENTIFIER
	which is derived from BTK_TYPE_STRING.

	* btk/btkbindings.c: reworked the argument type handling.

Thu Jul  9 21:03:19 CDT 1998 Shawn T. Amundson <amundson@btk.org>

	* btk/btkpreview.c: add in just enough support for 1 or 4 bits
	  so that it seems to allow normal operation in those modes,
	  although you will only see black  (GIMP toolbar now pops up,
	  just don't create a new image and GIMP now works in 4 bit.)

Thu Jul  9 20:20:04 CDT 1998 Shawn T. Amundson <amundson@btk.org>

	* bdk/bdkvisuals.c: 4 bit support, increased available_depths
	  array, which was too low (?)

Fri Jul 10 00:02:04 1998  Tim Janik  <timj@btk.org>

	* btk/btkcontainer.h: 
	* btk/btkcontainer.c: deleted most of the argument handling code, since
	that is now implemented in btkarg.c. similar to btk_object_args_collect,
	we now export a new function btk_container_child_args_collect().
	for consistency with the object arguments, a few functions got renamed:
	btk_container_child_arg_get -> btk_container_child_get,
	btk_container_child_arg_set -> btk_container_child_set,
	btk_container_child_arg_getv -> btk_container_child_getv,
	btk_container_child_arg_setv -> btk_container_child_setv,
	btk_container_add_with_argv -> btk_container_addv.
	note, btk_container_add_with_args() remained, because its equivalent
	would be btk_container_add(,, ...) which would break all existing code.
	(btk_container_add_child_arg_type): similar to btk_object_add_arg_type,
	we expect the `arg_name' argument to be a const static string now.
	(btk_container_get_child_arg_type): function removed.

Thu Jul  9 07:03:04 1998  Tim Janik  <timj@btk.org>

	* btk/btkargcollector.c: new file which holds btk_arg_collect_value().
	this is a static inline function that collects command line arguments
	from a va_list. this file can just be included in all places that
	need this functionality.

	* btk/btkarg.h: 
	* btk/btkarg.c: new files which implement most of the argument
	handling stuff from btkobject.c. also collected a few more
	btk_arg_* utility functions from else places.

	* btk/btkobject.h: 
	* btk/btkobject.c: moved most of the argument handling code into
 	btkarg.c. we now export btk_object_args_collect() as a non-public
	method with a blind va_list pointer.
	(btk_object_add_arg_type): the `arg_name' argument is required to be a
	const static string now.
	(btk_object_get_arg_type): function got removed.

	* btk/btkwidget.c: 
	(btk_widget_set): 
	(btk_widget_new): adaptions for btk_object_args_collect().

	* btk/btktypeutils.c (btk_type_init_builtin_types): changed the internal
 	fundamental type name so as to have a valid prefix, e.g. "bool"->
	"bboolean", "string"->"BtkString" and somesuch, left "void" as is,
	though that should probably be something like BtkNone since the
	type itself is called BTK_TYPE_NONE.
	even the internal type names need to avoid name clashes and must live
	in their own namespace, several code portions rely on that.
	we should relly have typedefs such as typedef bchar* BtkString; so the
	fundamental type names can be used for code dumpers just like with all
	the Btk/Bdk types.

Wed Jul  8 15:31:28 1998  Tim Janik  <timj@btk.org>

	* btk/btkbutton.c: handle BTK_RELIEF_HALF, which was introduced to
	keep either BTK_STATE_NORMAL for relief buttons (BTK_RELIEF_NONE) or
	to still honour BTK_WIDGET_STATE(), e.g. for coloured buttons
	(BTK_RELIEF_HALF).
	(btk_button_paint): set the background for prelighted buttons with
	BTK_STATE_NORMAL only if BTK_RELIEF_NONE.
 	(btk_button_draw_focus): if BTK_RELIEF_NONE, use BTK_STATE_NORMAL for
	the shadow type (otherwise we get strange shadows for coloured buttons).
	(btk_button_set_relief): queue a redraw after changing
	the relief.
	(btk_button_class_init): 
	(btk_button_set_arg): 
	(btk_button_get_arg): added object argument "BtkButton::relief".

	* btk/btkenums.h (enum): added BTK_RELIEF_HALF.

Mon Jul  6 18:30:48 1998  Tim Janik  <timj@btk.org>

	* btk/btkbutton.h:
	* btk/btkbutton.c: BtkButtons are now derived from BtkBin. we mirror
	BTK_BIN (button)->child to button->child to keep source compatibility.

	* btk/btkoptionmenu.c:
	* btk/btkclist.c:
	* btkcheckbutton.c: don't refer to button->child, but
 	BTK_BIN (button)->child instead.

Mon Jul  6 12:06:23 BST 1998  Tony Gale  <gale@btk.org>

	* docs/btkfaq.sgml: update anon CVS info

Sat Jul  4 13:16:24 1998  Tim Janik  <timj@btk.org>

	* btk/*.c: changed reversed_[12] to reserved_[12] in btk_*_get_type
 	functions.

	* bdk/bdkwindow.c:
	* bdk/bdkvisual.c: check for some pointer values to be != NULL, prior
	to XFree() calls.

1998-07-03  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* btk/btkfeatures.h.in: Added BDK_HAVE_FULL_CROSSING_EVENT, since
	I seem to have erroneously added it to btkfeatures.h (not .h.in).

Fri Jul  3 14:55:31 PDT 1998 Manish Singh <yosh@gimp.org>

	* btk/btkfeatures.h.in: added BTK_HAVE_RELIEF_STYLE

Wed Jul  1 20:58:46 1998  Tim Janik  <timj@btk.org>

	* btk/btkwidget.h:
	* btk/btkwidget.c: temporary implementation of action signal "debug_msg"

	* btk/btkbindings.c (btk_binding_entry_add_signal): fixed an off-by-one
	error that prevented signal to entry addition for signals with
 	parameters.

Wed Jul  1 10:05:36 PDT 1998 Manish Singh <yosh@gimp.org>

	* ltconfig: fix for properly detecting shared lib support on
	SunPro cc (taken from libtool 1.2.a)

Wed Jul  1 03:33:30 1998  Tim Janik  <timj@btk.org>

	* btk/btkrc.c: implementation of the "class" keyword for styles.

Tue Jun 30 14:30:37 1998  Tim Janik  <timj@btk.org>

	* btk/btkrc.c: fixed lookup order for rc styles. the latest defined
	rc set pattern is favoured, this is needed for overriding of style
	patterns with subsequently parsed rc files.

Tue Jun 30 12:45:19 1998  Tim Janik  <timj@btk.org>

	* btk/btkrc.c: code overhaul for simplicity and more descriptive
	error messages.

Tue Jun 30 09:24:40 1998  Tim Janik  <timj@btk.org>

	* btk/btkaccelgroup.c (btk_accelerator_parse): parse "<Release>"
	modifier as well.
	(btk_accelerator_name): add "<Release>" to the accelerator name if
	neccessary.

	* btk/btkbindings.c (BINDING_MOD_MASK): take BINDING_MOD_MASK into
 	account.

	* btk/btkwidget.c (btk_widget_real_key_release_event): implemented
	default handler for key-release events, which checks for activation
	of BDK_RELEASE_MASK key bindings.

	* bdk/bdktypes.h (enum): added BDK_RELEASE_MASK to BdkModifierType.

Mon Jun 29 13:39:45 1998  Tim Janik  <timj@btk.org>

	* btk/btkarrow.h: BtkType and macro fixups.
	* btk/btkarrow.c: widget argument implementation: "BtkArrow::arrow_type",
	"BtkArrow::shadow_type".

Sun Jun 28 11:39:17 1998  Tim Janik  <timj@btk.org>

	* btk/btkalignment.h:
	* btk/btkbin.h: BtkType and macro fixups.
	
	* btk/btkalignment.c (btk_alignment_class_init): widget argument
	implementation: BtkAlignment::xalign, BtkAlignment::yalign,
	BtkAlignment::xscale, BtkAlignment::yscale.

Sun Jun 28 04:29:10 1998  Tim Janik  <timj@btk.org>

	* btk/btktypeutils.c (btk_type_class_init): call the base class init
	fucntions from all parent types upon class initialization.

	* btk/btkcontainer.c:
 	(btk_container_get_type): announce btk_container_base_class_init to
 	the type system.
	(btk_container_base_class_init): new function to feature base class
	initialization.
	(btk_container_get_child_arg): 
	(btk_container_set_child_arg): call the BtkContainerClass get_child_arg
	and set_child_arg methods of the class indicated through the argument
	name.

	* btk/btkobject.c:
	(btk_object_base_class_init): new function to feature base class
 	initialization.
	(btk_object_init_type): announce btk_object_base_class_init to the type
	system.
	(btk_object_class_init): setup the get_arg and set_arg pointers for
	BtkObjectClass.
	(btk_object_setv): 
 	(btk_object_getv): call the BtkObjectClass get_arg and set_arg methods,
 	instead of bothering the type system with this.

	* btk/btkaccellabel.c: 
	* btk/btkbutton.c: 
	* btk/btkradiobutton.c: 
	* btk/btktable.c:
	* btk/btktogglebutton.c: 
	* btk/btktipsquery.c: 
	* btk/btkbox.c: 
	* btk/btkpacker.c: 
	* btk/btkwidget.c: 
	* btk/btkwindow.c: 
	* btk/btkframe.c: 
	* btk/btkmisc.c:
	* btk/btklabel.c: set the object_class->{g|s}et_arg pointers to the
	corresponding btk_*_{g|s]et_arg functions and updated the btk_*_get_type
	functions wrt BtkTypeInfo initialization. changed a lot of the set/get
	arg functions to take a BtkObject argument.

	btk/btkadjustment.c:
	btk/btkalignment.c:
	btk/btkarrow.c:
	btk/btkaspectframe.c:
	btk/btkbbox.c:
	btk/btkbin.c:
	btk/btkcheckbutton.c:
	btk/btkcheckmenuitem.c:
	btk/btkclist.c:
	btk/btkcolorsel.c:
	btk/btkcombo.c:
	btk/btkctree.c:
	btk/btkcurve.c:
	btk/btkdata.c:
	btk/btkdialog.c:
	btk/btkdrawingarea.c:
	btk/btkeditable.c:
	btk/btkentry.c:
	btk/btkeventbox.c:
	btk/btkfilesel.c:
	btk/btkfixed.c:
	btk/btkfontsel.c:
	btk/btkgamma.c:
	btk/btkhandlebox.c:
	btk/btkhbbox.c:
	btk/btkhbox.c:
	btk/btkhpaned.c:
	btk/btkhruler.c:
	btk/btkhscale.c:
	btk/btkhscrollbar.c:
	btk/btkhseparator.c:
	btk/btkimage.c:
	btk/btkinputdialog.c:
	btk/btkitem.c:
	btk/btkitemfactory.c:
	btk/btklist.c:
	btk/btklistitem.c:
	btk/btkmenu.c:
	btk/btkmenubar.c:
	btk/btkmenuitem.c:
	btk/btkmenushell.c:
	btk/btknotebook.c:
	btk/btkoptionmenu.c:
	btk/btkpaned.c:
	btk/btkpixmap.c:
	btk/btkpreview.c:
	btk/btkprogressbar.c:
	btk/btkradiomenuitem.c:
	btk/btkrange.c:
	btk/btkruler.c:
	btk/btkscale.c:
	btk/btkscrollbar.c:
	btk/btkscrolledwindow.c:
	btk/btkseparator.c:
	btk/btkspinbutton.c:
	btk/btkstatusbar.c:
	btk/btktext.c:
	btk/btktoolbar.c:
	btk/btktooltips.c:
	btk/btktree.c:
	btk/btktreeitem.c:
	btk/btkvbbox.c:
	btk/btkvbox.c:
	btk/btkviewport.c:
	btk/btkvpaned.c:
	btk/btkvruler.c:
	btk/btkvscale.c:
	btk/btkvscrollbar.c:
	btk/btkvseparator.c: updated the BtkTypeInfo initialization code to
	match the modified BtkTypeInfo structure.

Sat Jun 27 23:23:27 PDT 1998 Manish Singh <yosh@gimp.org>

	* btk/testbtk.c: use rand() instead of random() for portability

Sat Jun 27 22:42:28 PDT 1998 Manish Singh <yosh@gimp.org>

	* configure.in
	* acconfig.h
	* bdk/bdk.c: use native Xlib XConvertCase if it's available

Sat Jun 27 15:44:46 1998  Tim Janik  <timj@btk.org>

	* bdk/bdk.c (bdkx_XConvertCase): compatibility function to provide
	XConvertCase() functionality from X11R6 on X11R5 systems.

Thu Jun 25 10:50:34 1998  Stefan Jeske  <stefan@btk.org>

	* bdk/bdk.h bdk/bdkfont.c: Added functions bdk_text_height,
 	bdk_string_height, bdk_char_height to retrieve the exact
	height of a text.

Thu Jun 25 07:53:51 BST 1998  Tony Gale  <gale@btk.org>

	* docs/btk_tut.sgml: add section on BtkCList widget, contributed
	  by Stefan Mars <mars@lysator.liu.se>
	* examples/clist/clist.c examples/clist/Makefile: example code
	  for BtkCList widget from the Tutorial

Wed Jun 24 16:38:02 1998  Tim Janik  <timj@btk.org>

	* btk/btkbin.c (btk_bin_remove): do not avoid to queue for a resize
	if the container is not visible, we might be a toplevel! this holds
	for all other base container implementations as well, that are
 	candidates to derive toplevels from. in general the resizing code will
	care about visibility itself.
	* btk/btkmenushell.c (btk_menu_shell_remove): likewise.
	* btk/btkbox.c (btk_box_remove): likewise.

	* btk/btkwindow.c (btk_window_move_resize): save ->use_uposition around
	btk_window_set_hints(), since we haven't calculated the new position
	yet.

	* bdk/bdkwindow.c (bdk_window_get_pointer): take care that *x, *y and
	*mask are alway initialized in a sane way, regardless of the return
 	value.

Wed Jun 24 14:14:32 1998  Tim Janik  <timj@btk.org>

	* btk/btkcontainer.c: new function btk_container_child_arg_set, similar
	to btk_container_child_arg_setv, but takes a variable argument list.
	new function btk_container_get_child_arg_type, which is needed by
	btk_object_collect_args.

	* btk/btkobject.c: changed prototype for btk_object_collect_args, to
	take a function pointer to figure the argument type.
	adapted callers to pass btk_object_get_arg_type.
	* btk/btkwidget.c: adapted btk_object_collect_args callers to pass
	btk_object_get_arg_type..

	* btk/btkpacker.h: 
	* btk/btkpacker.c:
 	(btk_packer_reorder_child): new function to change the packing order
	of a child.
	(btk_packer_size_request): 
	(btk_packer_size_allocate): take container->border_width into acount.

	* btk/btkpacker.c: implemented widget arguments:
	"BtkPacker::spacing", "BtkPacker::border_width", "BtkPacker::pad_x",
	"BtkPacker::pad_y", "BtkPacker::ipad_x", "BtkPacker::ipad_y".
	implemented child arguments:
	"BtkPacker::side", "BtkPacker::anchor", "BtkPacker::expand",
	"BtkPacker::fill_x", "BtkPacker::fill_y", "BtkPacker::use_default",
	"BtkPacker::border_width", "BtkPacker::pad_x", "BtkPacker::pad_y",
	"BtkPacker::ipad_x", "BtkPacker::ipad_y", "BtkPacker::position".

	* btk/btkmisc.c (btk_misc_set_arg): for padding args, set the padding,
	not the alignment.

	* btk/btkeventbox.h:
	* btk/btkeventbox.c: BtkType and macro fixups.

	* btk/testbtk.c (entry_toggle_sensitive): new function to toggle
	sensitivity of an entry.

	* btk/btkstyle.c (btk_style_new): support normal grey as default color
	for insensitive base and text.

	* btk/btkentry.c (btk_entry_realize): set the window backgrounds
	widget state dependent.
	(btk_entry_style_set): likewise.
	(btk_entry_state_changed): set background color on state changes.
	(btk_entry_draw_text): for non selected text, use state dependent
	colors.

	* btk/btktogglebutton.c: support for widget arguments
 	"BtkToggleButton::active" and "BtkToggleButton::draw_indicator".

Wed Jun 24 08:35:45 1998  Stefan Jeske  <stefan@btk.org>

	* btk/btkspinbutton.c (btk_spin_button_spin): Added compatibility 
	code for 1.0.x-like parameters. Changed internal interface of
	btk_spin_button_real_spin. Several fixes to avoid emission of
	"value_changed" where possible.

Tue Jun 23 22:21:33 PDT 1998 Manish Singh <yosh@gimp.org>

	* btk-boxed.defs: s/GkWidget/BtkWidget/

Wed Jun 24 07:47:29 1998  Tim Janik  <timj@btk.org>

	* btk/testbtk.c (create_idle_test): added a frame with radio buttons
	to select the resize_mode for the idle-labels container.

	* btk/btkframe.h: 
	* btk/btkframe.c: BtkType and macro corrections.

	* btk/btkradiobutton.c (btk_radio_button_set_arg): new function to
 	support widget argument "BtkRadioButton::group".

Tue Jun 23 08:01:09 1998  Tim Janik  <timj@btk.org>

	* btk/btkcontainer.c (btk_container_set_resize_mode): queue a resize
	unconditionally if resize_mode has changed.

	* btk/btkscrolledwindow.c (btk_scrolled_window_init): set
 	BTK_RESIZE_QUEUE on the scrolled window.
	(btk_scrolled_window_construct): set BTK_RESIZE_PARENT for the vieport.

Tue Jun 23 04:20:30 1998  Tim Janik  <timj@btk.org>

	* btk/btkcontainer.h:
	* btk/btkcontainer.c:
 	(BTK_IS_RESIZE_CONTAINER): new macro to find out if
	a given btkobject is a container with resize_mode==BTK_RESIZE_PARENT.
	(btk_container_queue_resize): new function to queue a container for
	a *size* reallocation (doesn't affect its position, and thus its
	parent is left untouched usually).
	(btk_container_get_resize_container): new function to retrive the next
	most resize container which is not itself queued for a resize.
	(btk_container_idle_sizer): new function to carefully process the
 	container_resize_queue since it can change during invokation of
 	btk_container_check_resize().
	(btk_container_resize_children): total rework of this function to
	properly handle resize containers. makes a lot of assumptions whitch
	are stated in the comments.

	* btk/btkcontainer.c:
 	(btk_container_real_check_resize): only requeue ourselves if we are not
 	a resize container.
	(btk_container_clear_resize_widgets): care for automatic deletion of our
	resize_widgets list on size_allocate through a handler connection.

	* btk/btkwindow.c (btk_window_shutdown): new functionm to reset the
 	focus and default widget of a window, so to take the burden from
	btk_widget_unparent.

	* btk/btkviewport.c: removed btk_viewport_check_resize, which tried
	to be clever, but actually messed up the resize_children logic and
	caused unneccessary allocations on its whole branch. besides this,
	it messed up the display by not invoking a redraw after the allocation.

	* btk/btktable.c (btk_table_set_child_arg): reverted recent change, so
 	that it is the child again that is queued for a resize.
	(btk_table_attach): likewise.
	(btk_table_remove): likewise.

1998-06-22  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* btk/btkentry.h, btk/btkentry.c: Export the
	btk_entry_adjust_scroll.  Required if you change the cursor
	position and want to sync it up with your code (Midnight Commander
	btk front end needs this).

	* btk/btktable.c: Deal with tables that have size 0, 0.

Tue Jun 23 12:12:19 BST 1998  Tony Gale  <gale@btk.org>

	* examples/README.1ST: new file to explain how the
	  code examples should be extracted from the tutorial.

Mon Jun 22 18:43:11 1998  Lars Hamann  <lars@btk.org>

	* btk/btkctree.c (draw_row): added new "line style"
	BTK_CTREE_LINES_TABBED 
	* btk/btkctree.c/h (btk_ctree_find_glist_ptr): new function to
	search the glist pointer of an BtkCTreeRow

1998-06-21  Raja R Harinath  <harinath@cs.umn.edu>
 
	* btk/Makefile.am (btk.defs,btktypebuiltins*): Remove $(srcdir)
	from, and clean up, the dependencies.  Generate to intermediate
	files to prevent problems with Ctrl-C.

	* btk/genmarshal.pl: Generate `btkmarshal.[ch]' in $srcdir.

Fri Jun 19 14:46:56 1998  Stefan Jeske  <stefan@btk.org>

	* btk/btkspinbutton.h btk/btkspinbutton.c btk/testbtk.c:
        - Bug fix for precision problem causing occasional double emission 
	  of "value_changed" signal (hopefully works now).
        - API change (should be binary compatible) : 
	  new enum BtkSpinType; modified btk_spin_button_spin to use it.
	  Modified cursor example appropriately.
	  To spin by something other than step_/page_increment, use
	  btk_spin_button_spin (spin, BTK_SPIN_USER_DEFINED, increment).
	- Made BTK_SHADOW_NONE the default. ;)
	- Fixed casting of BtkAdjustment* to BtkWidget* in
	  btk_spin_button_value_changed.

Fri Jun 19 06:18:19 1998  Tim Janik  <timj@btk.org>

	* btk/btkcontainer.c (btk_container_set_resize_mode): fail silently
	for toplevels. if resize_mode changes to BTK_RESIZE_PARENT, clear the
 	resize widget list before queuing the container for a new reize.
	(btk_container_need_resize): changed return value to FALSE, since this
	used to indicate that no further resizes are needed.
	(btk_container_set_arg): 
	(btk_container_get_arg): 
	(btk_container_class_init): implemented BtkContainer::resize_mode
 	argument.

	(btk_container_resize_children): when we walk up the tree of a resize
	widget we need to stop if we are the current parent.

	* btk/btkwidget.c (btk_widget_queue_resize): flag the resize child with
	BTK_RESIZE_NEEDED for container->resize_mode==BTK_RESIZE_IMMEDIATE.
	(btk_widget_hide_all): retrive the toplevel widget from via
	btk_widget_get_resize_container().

Thu Jun 18 23:08:36 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btklist.c (btk_list_button_press): Only respond
	  to selection with button 1. This allows context-sensitive
	  menus to work correctly.

Fri Jun 19 03:29:04 1998  Tim Janik  <timj@btk.org>

	* btk/btkaccelgroup.c: 
	* btk/btkbindings.c: 
	* btk/btkcontainer.c:
	* btk/btkitemfactory.c:
	* btk/btkobject.c: 
	* btk/btksignal.c:
	* btk/btkwidget.c: replaced some btk_object_data_force_id with
	g_quark_from_static_string calls to save memory.

	* btk/btkobject.c (btk_object_set_data_by_id_full): invoke the destroy
 	function _after_ the new data has been setup.
	minor changes to object data functions to feature the GQuark type.

Thu Jun 18 21:13:54 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btkmain.c (btk_init): Remove --g-fatal-warnings flag
	  from argv.

Thu Jun 18 20:22:28 1998  Owen Taylor  <otaylor@btk.org>

	* btk/genmarshal.pl: Modified to be more idiomatic Perl,
	  to be more readable perl, to spit out stuff that looks
	  more like readable C, and to pipe output through indent
	  so output looks a lot like readable C. No functional
	  changes.

Thu Jun 18 17:43:31 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btkpixmap.[ch] (btk_pixmap_set): Clear the background if
	  necessary when switching to a masked pixmap. (Based on a patch
	  from Ullrich Hafner <hafner@informatik.uni-wuerzburg.de>)

Thu Jun 18 16:18:10 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btkeditable.[ch]: Added action signals for keyboard
   	  bindings. (move_cursor, kill_word, etc, etc, etc). 

          removed the time argument from
	  btk_editable_cut/copy/paste_clipboard (source but not
          binary incompatible...) Instead get time from
	  btk_get_current_event ().
	
	* btk/btktext.c btk/btkentry.c: Support the new editable
	  signals.

Thu Jun 18 02:52:09 1998  Owen Taylor  <otaylor@btk.org>

	Patches from Damon Chaplin <DAChaplin@email.msn.com>:

        btk/btkfontsel.h: Fixed BtkFontSelectionClass - I forgot to change
	     parent class to BtkNotebookClass when splitting the widget in
	     two.  Also updated some comments.

        btk/btkfontsel.c: Fixed bug when toggling 'Allow scaled bitmaps'
               button without a font selected.

             Fixed bug in set_font_name - I hadn't updated the code to
               search for the style in the font_style clist - it was
               still assuming the style row was equal to its index,
               but it isn't any more.
	
             Changed 'Reset' button on filter page to 'Clear Filter'.
             Deleted old code relating to the old 'Filter Fonts' toggle
             Updated some comments.
             Cleared 'Actual Fontname' if no font is set.

        btk/testbtk.c: Fixed problem when 'OK' button is pressed - it was
	     destroying the BtkFontSelection instead of the
             BtkFontSelectionDialog.

Thu Jun 18 02:15:31 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btkmain.c (btk_init): Added --g-fatal-warnings
	  flag to make all warnings fatal errors.

	* btk/testthreads.c: moved <pthreads.h> include inside 
	  #ifdef USE_PTHREADS

Thu Jun 18 01:37:31 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btkenums.h btk/btkcontainer.[ch] btk/btkwidget.c 
	  btk/btkmenu.c btk/btkviewport.c btk/btkwindow.c:

	- Added new function btk_container_set_resize_mode() for
	  fine-grained control of where resize-queueing is done.

	- Removed BtkContainer::need_resize and BtkWindow::move_resize
	- Added BtkContainer::check_resize to replace need_resize.

	- Added function btk_container_check_resize() to trigger
	  queued resizes, and btk_container_resize_children() to
	  Figure which children need to be size-allocated. (logic
	  moved from btkwindow.c)

	- Reorganized code in btkwindow.c
	
	- Set the resize-mode for viewports so that resizes within
	  a viewport don't propagate out of it. 
	
1998-06-18  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* btk/btkfontsel.c: Use pointer<->int conversion macros to avoid warnings.

	* btk/btkaccellabel.c (btk_accel_label_accelerator_width): Use
	g_return_val_if_fail, because the function *does* return a value.

Thu Jun 18 03:30:06 1998  Tim Janik  <timj@btk.org>

	* btk/btkaccellabel.h:
	* btk/btkaccellabel.c: new function btk_accel_label_accelerator_width to
	request the size of the accelerator portion of an accel label.
	(btk_accel_label_size_request): don't request for the accelerators size.
	(btk_accel_label_expose_event): only draw the accelerator if we got
 	enough extra space.

	* btk/btkmenuitem.c (btk_menu_item_size_request): request accelerator
	width from children.

	* btk/btkmenu.c (btk_menu_key_press): when adding an accelerator to an
	object (after removal has been requested) check if there is still an
	accelerator remaining to avoid adding two accelerators on an object.
	this can happen for locked accelerators (or accelerator-frozen widgets).
	(btk_menu_size_request): feature childrens accelerator width in size
 	requests.

	* btk/btknotebook.c (btk_notebook_menu_item_create): use
	btk_widget_freeze_accelerators() for dynamically created menu items.

	* btk/btksignal.h: 
	* btk/btksignal.c: new function btk_signal_handler_pending_by_func()
	which will return a handler_id > 0 if the specified function is pending
	for `signal_id'.

	* btk/btkwidget.h:
	* btk/btkwidget.c: remove btk_widget_stop_accelerator, which was just
	a signal handler function to stop accelerator addition.
	added btk_widget_freeze_accelerators and btk_widget_thaw_accelerators
	which will prevent (undo) any accelerators from being added to or
 	removed from a widget.

Wed Jun 17 21:59:09 1998  Stefan Jeske  <stefan@btk.org>

	* btkspinbutton.h btkspinbutton.c testbtk.c:
 	Changed BtkSpinButtonUpdatePolicy enum, added keyboard
	acceleration, new API btk_spin_button_set_snap_to_ticks.

Wed Jun 17 03:47:40 1998  Tim Janik  <timj@btk.org>

	* bdk/bdk.h:
	* bdk/bdkwindow.c: new function bdk_window_at_pointer() to retrive
	the current BdkWindow the pointer is on if there is any.
	
	* btk/btktable.c (btk_table_init): preallocate a table with one row
	and one column, so we don't construction logic at all. changed a few
	(x < y - 1) to (x + 1 < y), to avoid failing evaluations due to
	unsigned int wraps.

	* btk/btkwidget.c (btk_widget_set_parent): removed left over code
 	portion, added an additional check for parent != widget.

	* more BtkType and macro fixups.

1998-06-16  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* btk/btkhandlebox.c (draw_textured_frame): Now accepts an extra
	"clip" parameter, which is the clipping rectangle to use.  This
	eliminates the extremely annoying flicker when exposing parts of
	the handlebox.

Tue Jun 16 14:08:08 PDT 1998 Manish Singh <yosh@gimp.org>

	* btk/btktable.c: fix from TimJ for off-by-one error in table
	resizing

Tue Jun 16 06:29:57 1998  Tim Janik  <timj@btk.org>

	* btk/btkcheckmenuitem.c (btk_check_menu_item_set_state): check for
	!= 0 on the argument.

	* btk/btktable.h: 
	* btk/btktable.c: new function btk_table_resize() which allowes
 	shrinking and expanding of tables. implementation of widget arguments
	and child arguments. many signedness corrections.

Mon Jun 15 04:15:03 1998  Tim Janik  <timj@btk.org>

	* btk/btkbox.c (btk_box_set_child_packing): queue the resize for the box
	not only the child, otherwise we might end up taking away other
 	childrens space after the resize.

	* btk/btkitemfactory.c (btk_item_factory_parse_menu_path): if we parse
	an unknown menu path from any source, that path must always be flagged
 	as "modified", since we don't really know whether it has its default
	value or not.

	* btk/btktree.c:
	* btk/btkpacker.c:
	* btk/btknotebook.c:
	* btk/btkmenushell.c:
	* btk/btklist.c:
	* btk/btkpaned.c:
	* btk/btkfixed.c: 
	* btk/btkbutton.c: implement btk_*_child_type functions.

	* btk/btkbox.h: 
	* btk/btkbox.c: type corrections for expand, fill, padding and pack_type
	arguments. implemented child arguments.

	* more BtkType and macro fixups.

Sun Jun 14 16:30:02 1998  Tim Janik  <timj@btk.org>

	* btk/btkcheckbutton.h: BtkType and macro fixups.

	* btk/btkclist.h: exported the prototypes for btk_clist_get_vadjustment
	and btk_clist_get_hadjustment.

	* btk/btkcontainer.c:
 	implementation of children arguments, new class member functions
	(child_type), (get_child_arg) and (set_child_arg) plus a new field
	n_child_args.
	(btk_container_child_type): new function which returns the type of a
 	child that the container expects for its next addition.
	(btk_container_add_child_arg_type): new function to introduce a new
 	child argument at class creation time.
	(btk_container_query_child_args): new function to query all child
 	arguments that are supported by a container class.
	(btk_container_child_arg_getv): new fucntion to retrive the value of a
 	child argument.
	(btk_container_child_arg_setv): new function to set a child argument for
	a certain container and child combination.
	(btk_container_add_with_args):
	(btk_container_add_with_argv): new functions to feature addition of a
 	new child in combination with the setting of certain child arguments.

	* btk/btktypeuitils.c (btk_type_class_init): feature initialization of
 	BtkContainerClass.n_child_args, similar to the BtkObjectClass members.
	this should really be done through class cretion hooks some day.

	* btk/btkcontainer.c: changed type of border_width from bint16 to
 	buint : 16.

	* btk/btkpacker.h:
	* btk/btkpacker.c: renamed all PadX and PadY to pad_x and pad_y to
 	follow the btk convention for lower case variable names (important
	for language wrappers and widget arguments), and made them buint : 16.

	* examples/packer/pack.c: adaptions for the case converted BtkPacker
 	fields.

Fri Jun 12 16:33:23 1998  Tim Janik  <timj@btk.org>

	* btk/btkitemfactory.c (btk_item_factory_parse_rc_scanner): do not
	change the character pair for single line comments.
	(btk_item_factory_parse_rc): use the cpair_comment_signle specified in
	BtkItemFactoryClass.
	(btk_item_factory_parse_rc_string): likewise.

Mon Jun 15 23:39:44 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btkfontsel.[ch] (btk_font_selection_dialog_init): Moved font
	lists from the klass structure to a static structure
	in btkfontsel.c; cleans up global the namespace.

Mon Jun 15 22:16:10 1998  Owen Taylor  <otaylor@btk.org>

	* btk/makeenums.pl (parse_entries): Fix (untriggered)
	bug with /*< skip >*/ and remove warning.
	
Mon Jun 15 20:14:09 1998  Owen Taylor  <otaylor@btk.org>

	* btk/Makefile.am: Made the btkmarshal.* generation
	rules maintainer-only.

Mon Jun 15 16:29:45 1998  Owen Taylor  <otaylor@btk.org>

	* bdk/bdktypes.h bdk/bdkprivate.h btk/btk*.h 
	  btk/Makefile.am btk/makenums.pl 

	Removed out the G_ENUM/FLAGS mechanism in favor
	of a perl script that parses the standard headers
	(with occasional /*< nick=foo >*/ style overrides)
	and extracts the enumerations.

	  btk/maketypes.awk: Small improvments to the
	  translation of names. (Avoid splitting gc into
	  g_c_.)
	
Mon Jun 15 16:25:44 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btk.h btk/btkfontsel.[ch]: 
	Damon Chaplin's <DAChaplin@email.msn.com> Font selection widget.
	
Mon Jun 15 15:58:34 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btkentry.c:
	- Restored btk_entry_adjust_scroll to static 
	- Changed text positioning code so that we always
	  display as large a portion of the text as possible.

Mon Jun 15 15:42:12 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btktext.c (btk_text_finalize): Free internal
	structures of text widget. Also, unreference pixmaps
	when unrealizing.
	
Sat Jun 13 19:14:39 1998  Owen Taylor  <otaylor@btk.org>

	* bdk/bdkinputcommon.h (bdk_input_device_new): Change
	3.3.1 bug workaround to number keys starting at 1.

Sat Jun 13 11:56:57 1998  Owen Taylor  <otaylor@btk.org>

	* docs/btk_tut.sgml: Fixed urls for complete example
	source for scribble+widget-writing examples.

Sat Jun 13 11:48:26 1998  Owen Taylor  <otaylor@btk.org>

	* bdk/bdkpixmap.c (bdk_pixmap_extract_color): 
	Patch from Tom Bech <tomb@ii.uib.no>, to handle color
	specs of the form c #abcdef [ more keys ] properly.

Sat Jun 13 10:51:56 1998  Stefan Jeske  <stefan@btk.org>

	* btkspinbutton.h btkspinbutton.c testbtk.c 
	(btk_spin_button_set_shadow_type):
	New API to set the shadow type of the arrow panel.

Fri Jun 12 21:20:42 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btkoptionmenu.c (btk_option_menu_expose): Removed
	code for drawing the child in two places at once. Unfortunately,
	not only does it not work anymore (because reparenting has
	been fixed), but it also triggers reparent/expose loops
	in some cases.

	* btk/btkoptionmenu.c (btk_option_menu_remove_contents): Removed
	an unecessary unrealize.

Fri Jun 12 21:18:56 1998  Owen Taylor  <otaylor@btk.org>

	* bdk/bdkwindow.c (bdk_window_reparent): Update the
	  old and new parents' child window lists properly.

Fri Jun 12 09:24:47 1998  Tim Janik  <timj@btk.org>

	* btk/btkpacker.h:
	* btk/btkpacker.c: renamed enum BtkAnchor and BtkSide to BtkAnchorType
 	and BtkSideType, to be consistent with the rest of Btk's enum
 	definitions. wrapped the enum definitions with the G_ eunm wrappers.
	spelled out the BTK_ANCHOR_* enum values, since single letters don't
	work out corectly as nick-names (left the old values as aliases).
	some signdness corrections (border-width, spacing), could stand more.

Thu Jun 11 14:38:33 CDT 1998 Shawn T. Amundson <amundson@btk.org>

	* btk/btkpacker.c, btk/btkpacker.h, btk/btk.h, btk/Makefile.am: 
	  Added btkpacker

	* examples/packer/pack.c, examples/packer/Makefile: Added
	  btkpacker example

Thu Jun 11 13:09:00 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btktext.c (remove_cache_line): Fixed broken
	list-removal code.

	* btk/btktext.c: (btk_text_delete_(forward/backward)_cahr)
	Check bounds before deleting.

Wed Jun 10 23:21:33 1998  Owen Taylor  <otaylor@btk.org>

	* autogen.sh: Support ACLOCAL_FLAGS

Wed Jun 10 20:54:37 1998  Owen Taylor  <otaylor@btk.org>

	* btk-config.in: Added missing quotes.

Wed Jun 10 18:44:22 PDT 1998 Manish Singh <yosh@gimp.org>

	* btk/btkfeatures.in: #define BTK_HAVE_ACCEL_GROUP

1998-06-10  Raja R Harinath  <harinath@cs.umn.edu>

	* acconfig.h (BTK_COMPILED_WITH_DEBUGGING): Renamed from
	G_COMPILED_WITH_DEBUGGING.

	* configure.in (fd_set): Explain check better.

	* acinclude.m4: New file.  Contains `libtool.m4' from libtool-1.2,
        the version from which btk+'s libtool forked.  Needed for people
        who use post-1.2 alphas of libtool.

Wed Jun 10 19:36:35 1998  Owen Taylor  <otaylor@btk.org>

	* bunnylib/* Moved to bunnylib module

	* INSTALL Makefile.am acconfig.h autogen.sh configure.in
	  btk-config.in btk.m4 bdk/Makefile.am btk/Makefile.am

	  configuration changes for the above:
	 
	  - Use AM_PATH_BUNNYLIB by default to find bunnylib; also accept
	    a --with-bunnylib option for using an uninstalled bunnylib.
	 
	  - Put --enable-debug information into config.h so
	    that we rebuild when it changes. (was in bunnylibconfig.h)

Wed Jun 10 22:23:27 1998  Lars Hamann  <lars@btk.org>

	* btk/btkctree.c (draw_row): adapted clist pixmap clipping

	* btk/btknotebook.h (struct _BtkNotebookClass):
	* btk/btknotebook.c (btk_real_notebook_switch_page): 
	added missing argument (according to Joseph Coleman's bug report)

	* btk/btknotebook.c (btk_notebook_set_focus_child): new class
	function to fix notebook focus handling
	
Wed Jun 10 12:57:03 1998  Owen Taylor  <otaylor@btk.org>

	* bdk/bdkcc.c bunnylib/ghash.c bunnylib/bunnylib.h bunnylib/gstring.c
          bunnylib/gutils.c bunnylib/testbunnylib.c bunnylib/gdataset.c
          btk/btkaccelgroup.c btk/btkmain.c btk/btksignal.c
          btk/btktext.c btk/btkbindings.c:

	 renamed g_const_pointer => gconstpointer

Wed Jun 10 06:25:17 1998  Tim Janik  <timj@btk.org>

	* bdk/bdk.c (bdk_init): prevent bdk_init() from segfaulting when
	invoked with (NULL, NULL); (this worked sometime ago).

	* btk/btktypeutils.h: 
	* btk/btktypeutils.c: enum and flags type creation can now be done
	through btk_type_register_enum() and btk_type_register_flags(),
	which allow to specify the enum value arrays directly.
	the NULL terminated value arrays can be retrived through
	btk_type_enum_get_values() and btk_type_flags_get_values();
	(btk_type_children_types): new function to query derived types.

1998-06-09  Raja R Harinath  <harinath@cs.umn.edu>

	* btk/Makefile.am (btkmarshal.c btkmarshal.h): Pass $srcdir in
	environment to genmarshal.pl.
	(btk.defs,btktypebuiltins*): Add $(srcdir) where needed (in the
	rule), and removed it where not needed (in the dependencies).

	* btk/genmarshal.pl: Look for `btkmarshal.list' in $srcdir.

Tue Jun  9 18:44:57 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btkobject.c: Removed g_object_pointer_hash, which
	was just g_direct_hash.

Mon May 25 19:54:20 1998  Owen Taylor  <otaylor@btk.org>

	* configure.in: x_libs=, not $x_libs=. Enough said.
          (Case only hit for --disable-xshm)
	
Mon May 25 12:08:14 1998  Owen Taylor  <otaylor@btk.org>

	* configure.in (LDFLAGS): Add to $CFLAGS and $LDFLAGS
	  when testing for X libraries, don't replace them. Because
	  the user might have specified the path to the X libraries
	  themself before running configure.

	* examples/**.c: Changed all bpointer * to bpointer
	
1998-06-09  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* btk/btkhandlebox.h (struct _BtkHandleBox): Removed the
	fleur_cursor field.  Now the cursor is created/destroyed on demand
	by the routines that need it.

	* btk/btkhandlebox.c (btk_handle_box_button_changed): 
	(btk_handle_box_motion): The fleur cursor is created and destroyed
	only when needed.

Tue Jun  9 09:57:09 1998  Tim Janik  <timj@btk.org>

	* btk/btktypeutils.h: 
	* btk/btktypeutils.c: renamed the newly created btk_enum_get_values and
	btk_enum_set_values to btk_type_enum_get_values and
 	btk_type_enum_set_values respectively, since they are actually type
 	system features.

	* btk/btktypebuiltins_evals.c: oops, screwed the NULL termination with
	my last commit. ;)

Tue Jun  9 01:57:23 1998  Tim Janik  <timj@btk.org>

	* btk/btkselection.h: 
	* btk/btkselection.c: new functions btk_selection_data_copy and
	btk_selection_data_free.

	* btk/btkwidget.c (btk_widget_class_init): fixed btk_signal_new() call
	for "selection_received", which was completely bogus.
	* other fixups to btk_signal_new() calls all over the place.

	* btk/btktypebuiltins.h: types as variables (formerly macros).
	* btk/btktypebuiltins_vars.c: type variable implementations.
	* btk/btktypebuiltins_ids.c: array entries for builtin type
 	declarations.
	* btk/btktypebuiltins_evals.c: enum value arrays.
	* btk/btk-boxed.defs: btk and bdk structure definitions, used to build
	btk.defs.
	* btk/btk.defs: generated file with scheme syntax for type definitions
	of btk and bdk structures and enums.
	* btk/btktypeutils.h: 
	* btk/btktypeutils.c: reworked type ids, so they are variables not
 	macros anymore (this fixes binary incompatibility with new enum
 	definitions).

	* btk/btkwidget.c (btk_widget_real_key_press_event): proccess possible
	key bindings for this widget.
	* btk/btkwindow.c (btk_window_key_press_event): chain parent class'
 	handler.

	* btk/btkobject.h:
	* btk/btkobject.c: removed btk_object_class_new_user_signal_no_recurse()
	again. new functions btk_object_class_user_signal_new () and
	btk_object_class_user_signal_newv (), to feature the BtkSignalRunType
 	flag on the signal creation.

Mon Jun  8 20:52:21 1998  Tim Janik  <timj@btk.org>

	* btk/btkcontainer.h: new signal BtkContainer::set_focus_child.

Mon Jun  8 02:52:37 1998  Tim Janik  <timj@btk.org>

	* bdk/bdkprivate.h: 
	* bdk/bdktypes.h: 
	* btk/btkprivate.h: 
	* btk/btkwidget.h: 
	* btk/btkobject.h: wrapped enum definitions with bunnylib macros.

	* reworked enum value array generation code. btk.defs is a generated
	file now.

Sun Jun  7 14:34:31 1998  Tim Janik  <timj@btk.org>

	* btk/btkitemfactory.c (btk_item_factory_create_menu_entries): feature
	check menu items in the compatibility code (this required me to remove
	the "<check>" part from the menu item name, grrr).

1998-06-07  Marius Vollmer  <mvo@zagadka.ping.de>

	* bdk/bdk.h (bdk_color_copy, bdk_color_free): New prototypes.
	* bdk/bdk.c (bdk_color_copy, bdk_color_free): New functions.
	
Sun Jun  7 10:53:02 1998  Tim Janik  <timj@btk.org>

	* btk/btkitemfactory.h: 
	* btk/btkitemfactory.c: further additions to fit the gimp's code.
	additions to the dumping code to feature BtkPatternSpec.
	even found a bug to fix in the original code ;)
	
Sun Jun  7 09:36:04 1998  Tim Janik  <timj@btk.org>

	* btk/btkitemfactory.c: support different types of callbacks, to
	maintain existing code.

Sat Jun  6 06:01:24 1998  Tim Janik  <timj@btk.org>

	* btk/btksignal.c (btk_signal_emitv): fixed an assertment.

	* btk/makeenums.awk: a script to generate the BtkEnumValue arrays from,
	this should eventually be done by gentypeinfo.el somewhen.
	* btk/btkenumvalues.c: new generated file to hold BtkEnumValue arrays.

	* btk/btktypeutils.h: new function btk_enum_values() to retrive all the
	enum values of an enum type.

	* btk/btk.defs:
	* btk/btkcurve.h: 
	* btk/btkobject.h: 
	* btk/btkprivate.h: 
	* btk/btkwidget.h:
	* btk/btkenums.h: 
	brought enum/flags definitions in sync, added a few more enum
 	definitions for bindings and pattern matching.

	* some more macro and BtkType fixups in various places.

	* bdk/bdktypes.h (enum): added a new value BDK_AFTER_MASK, which is used
	as a key-release modifier for the binding system.

Fri Jun  5 06:06:06 1998  Tim Janik  <timj@btk.org>

	* btk/btkmenu.h (struct _BtkMenu): removed GList*children, since it
	was a stale list pointer that is already present in BtkMenuShell.

	* btk/btkmenushell.h (struct _BtkMenuShellClass): added a signal
	BtkMenuShell::selection_done which is emitted after the menu shell
 	poped down again and all possible menu items have been activated.

Thu Jun  4 02:20:42 1998  Tim Janik  <timj@btk.org>

	* btk/btkmenushell.c (btk_menu_shell_button_release): flush the x-queue
	before activation of the menuitem, so the menu is actually taken off the
	screen prior to any menu item activation.

	* btk/btkctree.c (btk_ctree_get_row_data): allow function invokation
	for NULL nodes.

	* btk/btkwidget.h:
	* btk/btkwidget.c: new function btk_widget_stop_accelerator to stop
	the emission of the "add-accelerator" signal on a widget. this is
	useful to prevent accelerator installation on certain widgets.

	* btk/btknotebook.c (btk_notebook_menu_item_create): keep the menu
	labels left justified, by setting their alignment. stop accelerator
	installation for the menu items, since we use dynamic menus.

Wed Jun  3 06:41:22 1998  Tim Janik  <timj@btk.org>

	* btk/btkmenufactory.c: adaptions to use the new accel groups. people
	should *really* use BtkItemFactory. this is only for preserving source
	compatibility where possible, use of BtkMenuFactory is deprecated as of
 	now.

	* btk/btkobject.h (btk_object_class_add_user_signal): new function
	to create user signals of type BTK_RUN_NO_RECURSE. don't know why i
	missed this possibility when i added btk_object_class_add_user_signal
	in late january.

	* btk/btkmain.c (btk_init): ignore subsequent function calls.

Sun May 31 07:31:09 1998  Tim Janik  <timj@btk.org>

	* btk/btkaccelgroup.h: 
	* btk/btkaccelgroup.c: new implementation of the accelerator concept.

	* btk/btkaccellabel.h: 
	* btk/btkaccellabel.c: new widget derived from BtkLabel whitch features
	display of the accelerators associated with a certain widget.

	* btk/btkitemfactory.h: 
	* btk/btkitemfactory.c: new widget, item factory with automatic rc
 	parsing and accelerator handling.

	* btk/btkmenu.c (btk_menu_reposition): new function to care for
	positioning a menu.
	(btk_menu_map): removed the allocation code.
	(btk_menu_size_allocate): care for redrawing of children and resize
	our widget->window correctly.
	(btk_menu_key_press): feature the new accelerator groups.

	* btk/btkmenuitem.c (btk_menu_item_size_allocate): reposition the
 	submenu if neccessary.

	* btk/btkmenuitem.c:
	* btk/btkcheckmenuitem.c:
	* btk/btkradiomenuitem.c: use BtkAccelLabel in the *_new_with_label()
 	function variants.

	* bdk/bdk.c:
 	(bdk_keyval_from_name): 
	(bdk_keyval_name): new functions for keyval<->key-name associations.
	(bdk_keyval_to_upper): 
	(bdk_keyval_to_lower): 
	(bdk_keyval_is_upper): 
	(bdk_keyval_is_lower): new functions to check/translate keyvalues with
 	regards to their cases.

Wed May 27 00:48:10 1998  Tim Janik  <timj@btk.org>

	* btk/btkwidget.c (btk_widget_class_path): new function to calculate a
	widget's class path.
	(btk_widget_path): new function to calculate a widget's name path.

	* btk/btkrc.c: newly introduced BtkPatternSpec structures to speed up
	pattern matching, features reversed pattern matches.

Thu Jun  4 12:12:11 BST 1998  Tony Gale  <gale@btk.org>

	* examples/extract.sh, examples/extract.awk:
	  New files to automagically extract code examples from the
	  tutorial.

Tue Jun  2 20:04:45 1998  Lars Hamann  <lars@btk.org>

	* btk/btknotebook.c (btk_notebook_page_select) (btk_notebook_focus)
	* btk/btkcontainer.c (btk_container_focus_move):
	reversed test sequence for BTK_WIDGET_CAN_FOCUS and BTK_IS_CONTAINER

Tue Jun  2 13:04:06 BST 1998  Tony Gale  <gale@btk.org>

	* docs/btk_tut.sgml: minor changes to support auto
	  extraction of example code

Mon Jun  1 12:47:56 BST 1998  Tony Gale  <gale@btk.org>

	* docs/btk_tut_it.sgml: Update of Italian Tutorial
	  to Tutorial of 24th May, from Daniele Canazza <dcanazz@tin.it>

Fri May 29 13:53:57 BST 1998  Tony Gale  <gale@btk.org>

	* docs/btk_tut.sgml:
	  - new section on Events
	  - change all delete_event callbacks to include
	    a BdkEvent parameter
	  - clean up the formatting

	* examples - helloworld.c, helloworld2.c, notebook.c,
	  packbox.c, pixmap.c, progressbar.c, radiobuttons.c,
	  rulers.c, table.c, wheelbarrow.c: change all delete_event
	   callbacks to include a BdkEvent parameter.

1998-05-26  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* bdk/bdktypes.h (BdkCrossingMode): New enumeration for the "mode"
	field of crossing events.
	(struct _BdkEventCrossing): Added the following fields: time, x,
	y, x_root, y_root, mode, focus, state.

	* bdk/bdk.c (bdk_event_translate): Fill in the new fields of the
	crossing event structure.

	* btk/btkfeatures.h (BDK_HAVE_FULL_CROSSING_EVENT): Annotate
	changes to the crossing event structure.

Tue May 26 15:51:28 1998  Radek Doulik  <gis@academy.cas.cz>

	* bdk/bdk.c: include bdkx.h always (for BDK_ROOT_WINDOW)

Sun May 24 12:11:38 BST 1998  Tony Gale  <gale@btk.org>

        * docs/btk_tut.sgml:
           - BtkTooltips, update to current API
           - change all 'bpointer *data' to 'bpointer data'
           - other minor changes

Sat May 23 21:54:05 1998  Owen Taylor  <otaylor@btk.org>

	* configure.in (LDFLAGS): Bomb out with a moderately
	  helpful message if detection of X libraries fails.

Sat May 23 18:57:06 1998  Owen Taylor  <otaylor@btk.org>

  [ Combination of:
     btk-rrh-980412-0.patch (Raja R Harinath <harinath@cs.umn.edu>)
     btk-jbuhler-980516-0 (Jeremy Buhler <jbuhler@cs.washington.edu>) ]

	* bdk/bdk.h bdk/bdkcc.c bdk/bdkfont.c btk/btkmain.c
	  btk/btksignal.c btk/btktext.c: 

	  Fixups for warnings from adding const to type of GHashFunc,
	  GCompareFunc
	
	* btk/btkcombo.c (btk_combo_entry_key_press): Minor style/
	  ansi-warnings fixups.

Sat May 23 17:48:58 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btkeventbox.c (btk_event_box_size_allocate): 
        Locate child at (border_width,border_width), not
	(2*border_width,2*border_width). [ The border is _outside_
	widget->window ]
	
	* bdk/bdk.[ch]: added bdk_screen_width_mm/bdk_screen_height_mm
	  functions. [From: Alexander Larsson <alla@lysator.liu.se> ]

1998-05-22  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* btk/btkfeatures.h.in: Define BTK_HAVE_RC_SET_IMAGE_LOADER, to be
	used in bunny-libs

1998-05-22    <sopwith@redhat.com>

	* btk/btkeventbox.c: Pass size_allocate on to the child
	regardless of whether it is visible or not. Also
        locate child at (border_width,border_width), not (0,0)

Fri May 22 03:02:40 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btkhandlebox.c: Added style_set handler.

Fri May 22 02:55:57 1998  Owen Taylor  <otaylor@btk.org>
 [ From: Chris Lahey  <clahey@umich.edu> ]
	
	* btk/btkeditable.c, btk/btkeditable.h,
	  btk/btktext.c, btk/btkentry.c: Added get_position,
	  and set_position functions to get and set the cursor position.

        * btk/btkeditable.c: Restored "insert_text" and "delete_text" to
	  signal status. Make BtkText do user-controlled insertion
	  and deletion through the Editable widget so that these
	  signals are properly emitted.

	* btk/btkentry.c: Changed btk_entry_set_visibility to 
	  display asterisks instead of empty space when visible = FALSE)

Fri May 22 08:51:10 CEST 1998  Paolo Molaro <lupus@debian.org>

	* btk/btkclist.c: use BTK_TYPE_BDK_EVENT in (un)?select_row
	signal.

1998-05-21    <sopwith@redhat.com>

	* btk/btkrc.[ch]: btk_rc_set_image_loader() - allow apps to set a
	custom routine for loading images specified in btkrc's.

Tue May 19 23:41:04 1998  Owen Taylor  <otaylor@btk.org>

	* configure.in: Use pthread_attr_init() as a test function,
	since most of the rest of -lpthread is macros on DU4.

Tue, 19 May 1998 09:03:03 +0200  Paolo Molaro <lupus@debian.org>

	* btk/btkcombo.c: implemented completion in the entry.

1998-05-18    <sopwith@moebuis.labs.redhat.com>

	* btk/btk{debug.h,signal.c,main.c}: Allow BTK_DEBUG=signals

Mon May 18 04:01:41 1998  Tim Janik  <timj@btk.org>

        * btk/btkwidget.c (btk_widget_class_init): changed "proximity-in-event",
        "drop-data-available-event", "drop-enter-event" and "drop-leave-event"
        to be of runtype BTK_RUN_LAST.

        * btk/btkcontainer.c (btk_container_class_init): likewise for
        "need-resize".

        * btk/btktipsquery.c (btk_tips_query_class_init): likewise for
        "widget-selected".

Sat May 16 09:04:32 1998  Tim Janik  <timj@btk.org>

	* btk/btkfilesel.c (btk_file_selection_key_press): g_strdup() the
	text retrived from BtkEntry. only intercept the Tab key if there
	was some text to complete.

Fri May 15 21:16:54 1998  Owen Taylor  <otaylor@btk.org>

	Basic thread-awareness:

	* acconfig.h configure.in: New option --with-threads=[yes/posix/no]

	* bdk/Makefile.am bdk/bdkthreads.c: Added new functions 
	bdk_threads_[init/enter/leave] for applications, plus
	bdk_threads_wake to wake the mainloop thread out of
	the select().

	* btk/Makefile.am: btk/testthreads.c: Test program for threads

Fri May 15 12:08:48 1998  Owen Taylor  <otaylor@btk.org>

	* btk/testbtk.c (list_clear): Account for the fact
	that btk_list_clear_items is not inclusive. (Clears
	[start, end))

Fri May 15 12:31:27 1998  rodo  <doulik@karlin.mff.cuni.cz>

	* bdk/bdk.c: include bdkkeysyms.h always
	

Fri May 15 09:44:10 1998  Tim Janik  <timj@btk.org>

	* btk/btkwidget.h (struct _BtkWidgetClass): corrected returntype of
	the visibility_notify_event method and changed method order.

1998-05-14    <sopwith@moebuis.labs.redhat.com>

	* btk/btkwidget.[ch] Added visibility_notify_event to BtkWidget

Thu May 14 03:04:43 1998  Tim Janik  <timj@btk.org>

	* btk/btk.defs: added BtkButtonBoxStyle and BtkOrientation definitions
	from Olli Helenius <ollhel@batman.jytol.fi>.

	* btk/btktypeutils.c (btk_type_free): new function to take care about
	freeing types.
	(btk_type_set_chunk_alloc): new function to allow allocation of new
 	types from a mem_chunk of certain size (n_chunks==0 indicates allocation
	thorugh g_malloc).

	* btk/btkobject.c (btk_object_finalize): free an object through
 	btk_type_free().

	* btk/btkbutton.c (btk_button_get_type): set chunk preallocation for
	BtkButtons to 16.
	* btk/btkmenuitem.c (btk_menu_item_get_type): likewise (16).
	* btk/btklabel.c (btk_label_get_type): likewise (32).

Wed May 13 00:53:52 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btktypeutils.c btk/btksignal.c bdk/bdkdnd.c: A few more 
	  BPOINTER_TO_UINT fixes.

	* btk/btksignal.c: Include <string.h> for memset.

Tue May 12 23:10:53 1998  Owen Taylor  <otaylor@btk.org>
	(Maximilian Bisani <bisani@kawo2.rwth-aachen.de>: btk-bisani-980320-0)

	* btk/btkvruler.c btk/btkhruler.c btk/btkruler.h: 
	Cleanups, comments and the ability to have rulers with 
	a reversed direction.

Tue May 12 19:37:55 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btkrc.c (btk_rc_parse_file): Fixed up a stat()
	that Sopwith missed when changing stat => lstat.

Tue May 12 19:19:29 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btkinputdialog.c btk/btkgamma.c btk/btkrc.c
	  btk/btkcolorsel.c btk/btkclist.c btk/testbtk.c: Use
	BPOINTER_TO_INT/BINT_TO_POINTER macros where appropriate.

	* bdk/bdk.c: Print sizeof() results
	as g_print("%ld", (blong)sizeof(foo)), to deal with
	sizeof() being long on Alpha's.

	* btk/testbtk.c: include <string.h> for strlen

Tue May 12 16:56:35 1998  Owen Taylor  <otaylor@btk.org>
	(James A <jamesa@demon.net> : btk-jamesa-980511-4.patch)
	
	* btk/btkbbox.h btk/btkcolorsel.h btk/btkvbbox.h:
	Changed #include "btkfoo.h" to #include <btk/btkfoo.h>

	* btk/btkwindow.[ch]: Added const to btk_window_set_wmclass

Tue May 12 15:16:10 1998  Owen Taylor  <otaylor@btk.org>
	(From: Christopher James Lahey <clahey@umich.edu>)
	
	* btk/btkbutton.[ch] btk/btkenums.h btk/btktoolbar.[ch]
	  btk/testbtk.c:

	Added 'relief' for buttons - they can be either BTK_RELIEF_NORMAL
	(old style), or BTK_RELIEF_NONE - no relief in the NORMAL
	state. Added btk_toolbar_{set,get}_button_relief, which set/get
	the default relief for the toolbars buttons. Added an
	toggle for the toolbar test in testbtk.c.

Tue May 12 00:24:59 1998  Owen Taylor  <otaylor@btk.org>

	* docs/btk-config.1: Rewritten and hopefully improved.

Mon May 11 20:26:39 PDT 1998 Manish Singh <yosh@gimp.org>

	* docs/Makefile.am
	* docs/btk-config.1: added man page for btk-config by Ben Gertzfield

1998-05-11  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* btk/btkpreview.c (btk_preview_realize): Create the window using
	BtkPreview's visual and colormap, otherwise things can BadMatch.

	* btk/testbtk.c (create_color_preview): 
	(create_gray_preview): Removed pushing/popping of visual/colormap
	now that BtkPreview does things correctly.

	* btk/btkcolorsel.c (btk_color_selection_draw_wheel_frame): 
	(btk_color_selection_draw_wheel): Pick the style from the correct
	place (the colorsel->wheel_area widget) so that the GCs will match
	with where we are going to paint to.

	* btk/testbtk.c (create_color_selection): Removed pushing/popping
	of visual/colormap now that BtkColorSelection does things the
	right way.

Mon May 11 21:04:51 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btkwindow.c (btk_real_window_move_resize): Use the
	previously unused window->need_resize flag to mark if a window's
	descendents changed size while the window was not visible. In this
	case, when the window becomes visible, we reallocate everything,
	since we didn't keep track of what actually changed.

	(Fixes bug where changing the popdown strings of a
	combo to something of the same length caused them to
	blank out, as reported by Todd Dukes <tdukes@ibmoto.com>)

Tue May 12 02:31:57 1998  Tim Janik  <timj@btk.org>

	[security audit by Alan Cox]

	* btk/btkobject.c (btk_object_get_arg_type): check for arg_name to not
	exceed maximum assumed size.

	* btk/btkmenufactory.c (btk_menu_factory_create): check that `path' does
	not exceed maximum assumed size.
	(btk_menu_factory_remove): likewise.
	(btk_menu_factory_find_recurse): likewise.

Mon May 11 23:53:38 1998  Tim Janik  <timj@btk.org>

	* btk/btkwidget.c (btk_widget_queue_resize): queue the idle_sizer with
	BTK_PRIORITY_INTERNAL - 1, so widgets get first resized and then
	redrawn if that is still neccessary. don't allow queueing of already
	destructed objects.
	(btk_widget_idle_sizer): proccess the resize queue in a save manner, so
	widgets which are in the queue can be destroyed safely, handle
	requeueing properly.
	(btk_widget_idle_draw): proccess the redraw queue in a save manner, so
	widgets which are in the queue can be destroyed/unrealized safely.

Mon May 11 17:54:44 BST 1998 Tony Gale	<gale@btk.org>

	* btkfaq.sgml: add question on multi-threading,
	  minor URL cleanups.

Mon May 11 09:56:45 1998  Tim Janik  <timj@btk.org>

	* configure.in (cflags_set): preserve automake CFLAGS.

	* Makefile.am: fully rename the created libraries to libbtk-1.1.la
	and libbdk-1.1.la. this means we need to change certain portions of
	the Makefile.am on major/minor version bumps.

	* ltmain.sh: the -release option is not required anymore.
	
	* btk/btkobject.h (btk_trace_referencing): compile time check the type
	of the first argument to be of type BtkObject. unconditionally compile
	this function. removed __GNUC__ dependancy of the btk_object_ref and
	btk_object_unref macro wrappers for this function.

Mon May 11 02:31:19 1998  Tim Janik  <timj@btk.org>

	* btk/btkobject.h:
	* btk/btkobject.c:
	(btk_object_data_try_key):
	(btk_object_data_force_id): these are now macros substituting the old
	functions. we just use the corresponding g_dataset_* functions for
	key->id associations. (this is to assure unique key<->id associations).

1998-05-10  Stefan Jeske  <stefan@btk.org>

	* btk/btkctree.c (btk_ctree_is_visible): Changed return value
	to bboolean.

	* docs/btk.texi (BtkCTree): Started documentation of BtkCTree.

Sat May	 9 20:11:20 1998  Owen Taylor  <otaylor@btk.org>

	* configure.in (LIBS): Try to figure out if this
	is Digital Unix and we need -std1 to get the
	right prototypes.

Sat May	 9 16:30:33 BST 1998 Tony Gale	<gale@btk.org>

	* docs/btk_tut_it.sgml: update of Italian tutorial
	  translation from Daniele Canazza <dcanazz@tin.it>

Sat May	 9 02:34:41 1998  Tim Janik  <timj@btk.org>

	* btk/btkfeatures.h.in: new file used as template for
	* btk/btkfeatures.h: new file to define macros indicating newly
	introduced features, such as BTK_HAVE_SIGNAL_INIT.

	* btk/btksignal.c:
	(btk_signal_emitv_by_name):
	(btk_signal_emitv):
	new functions to emit signals with an already provided parameter set.
	(provided by Kenneth Albanowski <kjahds@kjahds.com>).
	(btk_signal_real_emit): prototype changes, so this functions always
	gets its parameters and signal structure as arguments.
	(btk_signal_emit): provide the signal structure and parameter list for
	btk_signal_real_emit.
	(btk_signal_emit_by_name): likewise.

Sat May	 9 00:03:12 1998  Tim Janik  <timj@btk.org>

	* btk/btksignal.c (btk_signal_handler_unref): reflect the presence of
	signal connections through unsetting BTK_CONNECTED.
	(btk_signal_handler_insert): reflect the presence of signal connections
	through setting BTK_CONNECTED.
	(btk_signal_real_emit): only check for handler emissions if the object
	has the BTK_CONNECTED flag set.
	(btk_signal_handler_pending): don't check for pending handlers if the
	BTK_CONNECTED flag is not set for this object.

	* btk/btkobject.h (enum): new flag BTK_CONNECTED to indicate whether
	a BtkObject has signal handler connections.

	* btk/btkobject.c (btk_object_real_destroy): only if BTK_CONNECTED is
	set for this object call btk_signal_handlers_destroy().
	
	* btk/btktypeutils.h (BTK_TYPE_IS_A): deprecated macro, since it caused
	multiple processing of macro args.

	* btk/btktypeutils.c:
	* btk/btkobject.c:
	* btk/btkwidget.c:
	* btk/btksignal.c: reverted BTK_TYPE_IS_A back to btk_type_is_a.

Fri May  8 21:31:50 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btkwidget.c (btk_widget_queue_draw): Free the
	draw-queue when we are done. 

	(btk_widget_queue_draw/_queu_resize): Always return
	FALSE and avoid having two idles at the same time.
	
Fri May  8 21:04:00 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btktext.c: Various fixes to make sure cache
	lines are freed if line_start_cache doesn't point to the
	beginning of the cache.

Thu May  7 09:44:22 1998  Owen Taylor  <otaylor@btk.org>

	* style_set improvements for BtkText and BtkEntry

Thu May  7 19:03:50 1998  Tim Janik  <timj@btk.org>

	* btk/btktypeutils.c (btk_type_unique): asure that the type system has
	been initialized.

Thu May  7 12:52:45 1998  Tim Janik  <timj@btk.org>

	* btk/btkobject.c (btk_object_set_data_by_id_full): allocate object
	data chunks through a global object data structure list. unlink
	object data before invoking its destroy function.
	(btk_object_finalize): slight modification to allow usage of object
	data during object finalization.

Thu May  7 10:29:24 1998  Tim Janik  <timj@btk.org>

	* btk/btksignal.c (btk_signal_newv): suport middle dashes ('-') in
	signal names, e.g. "signal-name" is now an alias for "signal_name".
	(btk_signal_handler_new): allocate handlers through a global handler
	structure list, that's faster than memchunks.
	(btk_emission_new): allocate emissions through a global emission
	structure list, that's faster than memchunks.

Thu May  7 05:14:19 1998  Tim Janik  <timj@btk.org>

	* btk-config.in (--libs): postfix -lg* libraries with LT_RELEASE.

	* ltmain.sh: added a new commandline flag -postfix similar to -release,
 	but will immediately change the library name.

	* bdk/Makefile.am:
	* btk/Makefile.am: specify -postfix and -version-info

	* configure.in: version bump to 1.1.0. added BTK_INTERFACE_AGE and
	BTK_BINARY_AGE. calculate LT_* variables for libtool.

1998-05-06  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* btk/btkclist.c (draw_row): Fixed incorrect painting of row
	background (fg_set -> bg_set confusion).

1998-05-06  Stefan Jeske  <stefan@btk.org>

	* btk/testbtk.c (unselect_all): Removed code that caused an
	endless loop.

Wed May  6 02:16:34 1998  Tim Janik  <timj@btk.org>

	* btk/btksignal.c: reimplemented the signal storage system to use a
	linear array rather than a hash table.
 	be carefull *not* to keep any BtkSignal pointers across invokations
 	of btk_signal_next_and_invalidate() and therefore btk_signal_new[v]().
	general code cleanups, made all allocations through memchunks.
	(btk_signal_lookup): we now do the lookup of signals through a key_id
	for the signal names to avoid multiple hashing of the signal name on
	lookups for the several hirarchy levels of an object.

Tue May  5 19:49:27 1998  Owen Taylor  <otaylor@btk.org>

	* bdk/bdkpixmap.c: Patches from Gordon Matzigkeit
	to speed things up and remove code duplication.

	Reintegrated buffer overflow patches, and added
	some extra paranoia.
	
Tue May  5 17:04:14 1998  Owen Taylor  <otaylor@btk.org>

	* bdk/bdk.c (bdk_event_translate): A buint * was
	being passed where X expected a Keysym *, and
	keysyms are long's on Alpha Linux. This was causing
	segfaults in Xlib, apparently because of alignment.
	(Bug located by Juergen Haas <haas@forwiss.uni-passau.de>)
	
Tue May  5 19:11:27 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btkdrawingarea.c (btk_drawing_area_realize): Always
	set BDK_EXPOSURE_MASK for DrawingAreas

Tue May  5 14:32:37 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btkwidget.[ch]: removed btk_widge_propagate_default_style
	(superceded by RC file reparsing capabilities)

	* btk/btkwindow.c: Add handling for _BDK_READ_RFCILES client
	events. (Shouldn't be sent to the InputOnly leader, which
	it is now by bdk_event_send_clientmessage_toall

	* btk/testbtk.c: Added extra button to rcfiles test
	to send out _BDK_READ_RCFILES events.
	
Tue May  5 11:03:00 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btkselection.c (btk_selection_clear): Fixed
	reversed conditionals that caused segfault on some
	platforms.

Tue May  5 00:44:47 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btkcontainer.c (btk_container_set_focus_[hv]adjustment):
	cast to BTK_OBJECT for btk_object_ref.

Tue May  5 15:33:27 1998  Tim Janik  <timj@btk.org>

	* btk/btkmain.c (btk_init): added btk_signal_init() to avoid repeatedly
	checking for signal initialization in btksignal.c.

	* btk/btktypeutils.c (TYPE_NODES_BLOCK_SIZE): reseted this to 200 after
	a long debugging period ;)

1998-05-05  Stefan Jeske  <stefan@btk.org>

	* bdk/bdkgc.c bdk/bdk.h btk/btkctree.c (bdk_gc_set_dashes):
	New function to wrap XSetDashes; modified btkctree.c to use it.

1998-05-04  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* configure.in: Added $x_libs in the other_libraries field in the
	check for XShapeCombineMask.

Mon May  4 00:30:11 1998  Tim Janik  <timj@btk.org>

	* btk/btktypeutils.h (BTK_TYPE_IS_A): new macro to speedup
 	btk_type_is_a().
 	* btk/btktypeutils.c: reimplemented the type storage system to use a
	linear array rather than a hash table. it actually speeded up testbtk
	for a *considerable* amount. be carefull *not* to keep any BtkTypeNode
 	pointers across invokations of btk_type_node_next_and_invalidate() and
 	therefore btk_type_unique()!

	* btk/btkobject.h (BTK_IS_OBJECT_CLASS): new macro to test for the
	inheritance of a class pointer.
	(BTK_OBJECT): modifications for speedups.
	(BTK_IS_OBJECT): likewise.
	(BTK_OBJECT_CLASS): likewise.
	(suggested by owen).

	* btk/btkcontainer.h (BTK_IS_CONTAINER_CLASS): new macro.

	* btk/btkwidget.h (BTK_IS_WIDGET_CLASS): new macro.

	* btk/btk.defs (BtkTooltips): define BtkTooltips as object not as boxed,
	since its derivation changed 4 month ago ;(. showed up with the unique
	type name checking code in btk_type_unique().

	* random buint->BtkType and macro fixups.

Sat May  2 23:14:34 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btkcurve.c (btk_curve_graph_events): Ignore
	Configure events that would result in a negative
	size.

Sun May  3 14:55:34 1998  Owen Taylor  <otaylor@btk.org>

	* docs/btkfaq.sgml (CPPFLAGS): Added a FAQ entry about
	"bunnylibconfig.h" and another about writing another IRC
	client.

Sat May  2 00:14:05 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btkpreview.c (btk_trim_cmap): Make sure the
	parameters to log are doubles. Digital Unix apparently
	is missing the argument in its prototype.

Sun May  3 19:04:46 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btklabel.c (btk_label_state_changed): Don't
	force a clear until the widget is actually on
	screen.

Sun May  3 21:32:35 1998  Owen Taylor  <otaylor@btk.org>

	* bdk/bdk.c (bdk_event_translate): Grab with OwnerEvents = False
	to make this consistent with the btk-1-0 tree.

Sun May  3 13:38:22 1998  Owen Taylor  <otaylor@btk.org>

	* configure.in acheader.h bdk/bdkwindow.c 
	Check for Shape extension both on the client and server
	side. (And, more importantly, check for the shape extension
	so we may include -lXext even when compiling with --disable-xshm)

	Don't set override_redirect on all shaped windows. It isn't
	necessary.

	* bdk/bdkwindow.c: Set ->colormap to NULL for root 
	and foreign windows. Use this to check if we
	need to get the colormap from X.

Fri May  1 22:32:47 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btkbutton.c (btk_button_paint): Draw the areas
	between the default and the button always in BTK_STATE_NORMAL.

	* btk/btkrange.c (btk_range_style_set): Added a style_set
	callback.

Fri May  1 16:40:57 1998  Owen Taylor  <otaylor@btk.org>

	* bdk/bdkpixmap.c (bdk_pixmap_colormap_create_from_xpmp[_d]):
	  Fix a buffer overflow on pixmaps that claim to have
	  more than 31 characters per pixel.

	  (bdk_pixmap_read_string): Don't wrap around strings longer
 	  than half of address space ;-)

	* btk/btk[vh]ruler.c btk/btkinputdialog.c: Expand some buffers
	that were used for printing integers.

	* */* (almost):

	Style: All 
	  int foo () { ... }
	changed to
	  int foo (void) { ... }

	Even where there were proper prototypes elsewhere.

	* bdk/gxid.c (handle_claim_device): Some extra checks.
	It isn't safe against being fed bad X id's, but at
	least it should be safe against deleting all your
	files.

Sun May  3 19:45:09 1998  Tim Janik  <timj@btk.org>

	* btk/btkadjustment.c (btk_adjustment_assimilate_value): new function
	to set the adjustments value when there is no current emission.
	[ Removed by mutual agreement owt 5/3/1998 ]

	* btk/btksignal.c: added new functions to retrive the number of
	existing emissions for a certain signal.
 	(btk_signal_n_emissions): new function.
	(btk_signal_n_emissions_by_name): new function.

Sun May  3 16:55:43 1998  Tim Janik  <timj@btk.org>

	* btk/btkcontainer.c (btk_container_set_focus_child): new function to
	set the current focus_child of a container, does proper referencing and
	adjusts the vadjustment/hadjustment associated with the focus widget.

	* btk/btkwidget.c (btk_widget_grab_focus): set the focused child on
	containers via btk_container_set_focus_child.

	* btk/btknotebook.c: modifications to use btk_container_set_focus_child
 	where appropriate.

	* btk/btkcontainer.c (btk_container_remove): removed unsetting of focus
 	child since not every child removal goes through this function (this
	showed up after btk_container_set_focus_child() started to reference the
 	focus_child of a container).

	* btk/btkwidget.c (btk_widget_unparent): moved unsetting the focus_child
	of a container from btk_container_remove into this place.

Sat May  2 22:33:45 1998  Tim Janik  <timj@btk.org>

	* btk/btksignal.c: added new functions to operate on intermediate
 	function pointers. implemented incremental blocking.
	(btk_signal_disconnect_by_func): new function.
	(btk_signal_handler_block_by_func): new function.
	(btk_signal_handler_unblock_by_func): new function

Fri May  1 22:45:55 1998  Owen Taylor  <otaylor@btk.org>

        * btk/btkscrolledwindow.c (btk_scrolled_window_size_allocate):
        Always show the scrollbars when the policy is
        BTK_POLICY_ALWAYS...

Sat May  2 20:19:03 1998  Tim Janik  <timj@btk.org>

	* btk/btkadjustment.c (btk_adjustment_set_value): only emit
 	"value_changed" if we really passed a new value.
	(btk_adjustment_changed): new function to emit the "changed" signal.
	(btk_adjustment_set_value): new function to emit the "value_changed"
	signal.

Fri May  1 12:28:35 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btkcombo.c: Further changes to the way the window
	is popped up so that it will be compatible with 
	auto-scrolling in the future.

Fri May  1 20:25:29 1998  Tim Janik  <timj@btk.org>

	* btk/btkcombo.c (btk_combo_popup_list): do not just return if
	the combo-list is empty since that will cause the combo to operate
	on a non existing BtkList window.
	(btk_combo_get_pos): provide the combo list with a usfull default
 	height if empty.
	(btk_combo_popup_button_press): grab the focus.
	(btk_combo_activate): grab the focus.

Fri May  1 12:06:43 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btkwindow.[ch] (btk_widget_reset_rc_styles): New
	function to reset the RC styles for a heirarchy

        Clear the window background if necessary in
	btk_window_style_set.

	* btk/btkrc.[ch]: New function btk_rc_reparse_all() which
	rereads all previously read RC files.

	* bdk/bdkwindow.c bdk/bdk.h: New function bdk_window_get_toplevels().
	(Should it just be called bdk_get_toplevels?)

	* btk/testbtk.c: New test to reload RC files.

Fri May  1 13:57:36 1998  Tim Janik  <timj@btk.org>

	* btk/btkclist.h:
	* btk/btkclist.c: prefixed all clist flags with BTK_ to avoid name
 	clashes. redefined BTK_CLIST_SET_FLAGS and BTK_CLIST_UNSET_FLAGS as
	BTK_CLIST_SET_FLAG and BTK_CLIST_UNSET_FLAG to automatically add
	the BTK_ prefix (this solution involved less changes in the
 	btkclist.c code). added a BTK_CLIST_CONSTRUCTED flag to substitute
	the mem_chunk==NULL test in btk_clist_construct. merged in changes
	from lars & stefan to support the derivation of BtkCtree.

	* btkctree.h:
	* btkctree.c:
	initial import of a tree widget derived from btkclist, courtesy
	of Lars Hamann <lars@btk.org> and Stefan Jeske <jeske@btk.org>,
	it just damn rocks!

Fri May  1 10:05:44 1998  Tim Janik  <timj@btk.org>

	* btk/btklist.c (btk_list_add): let btk_list_append_items do the work
	for us.
	(btk_list_insert_items):
	(btk_list_remove_items_internal): 
	(btk_list_clear_items): 
 	remove a possible pointer grab, we might get thrown into a loop
	otherwise.
	(btk_list_button_press): grab the pointer *before* selecting the child,
	because selection of items may cause the lists children to change,
 	resulting in a grab release.
	(btk_list_clear_items): use btk_list_unselect_child() for unselection of
	children.
	(btk_list_shutdown): remove all children from the list.
	(btk_real_list_unselect_child): 
	(btk_real_list_select_child): *always* put our internal structures into
 	sane state *before* signal emisions (i.e. list->selection updates prior
 	to btk_list_item_[de]select() calls).

	* btk/btkcombo.c (btk_combo_init): adjust the scrollbar if the lists
	focused child walks out of the window.
	removed CAN_FOCUS for the combo arrow's button since it doesn't react
	to keyboard events ("clicked" connection is missing).

Fri May  1 00:42:25 1998  Owen Taylor  <otaylor@btk.org>

	* bdk/bdkwindow.c (bdk_window_get_colormap): Fix up
	getting colormap for FOREIGN windows to go along with
	Raster's fix for visuals.

Merges from btk-1-0
===================
	
Thu Apr 30 23:32:51 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btkscrolledwindow.c (btk_scrolled_window_size_allocate):
	Check to catch the case when the viewport fits in either
 	direction or both, instead of flip-flopping infinitely.

	Only show/hide the scrollbars once at the end.

Thu Apr 30 21:56:07 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btkscrolledwindow.c (btk_scrolled_window_foreach): 
	Include the scrollbars in the foreach call.
	(btk-fortier-980405-0.patch; 
 	 Patrice Fortier <Patrice.Fortier@aquarel.fr>). 

	The notebook widget
	really should also include its tabs, but that might cause
	problems for programs if they

Thu Apr 30 21:51:52 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btkpixmap.c (btk_pixmap_set): Only request a
	resize if the size actually changed. 
	(btk-johannes-980414-0.patch ;	
	 johannes@nada.kth.se (Johannes Keukelaar) )

Thu Apr 30 10:22:59 1998  Owen Taylor  <otaylor@btk.org>

	* bunnylib/ltmain.sh bunnylib/ltconfig bunnylib/config.sub bunnylib/config.guess:
	  ltmain.sh ltconfig config.sub config.guess:

	Reverted back to libtool-1.2 (plus minor patches) so as not to
	force the issue for everyone else.

Thu Apr 30 10:22:59 1998  Owen Taylor  <otaylor@btk.org>

	* bunnylib/ltmain.sh bunnylib/ltconfig bunnylib/config.sub bunnylib/config.guess:
	Updated to libtool 1.2a.

	* btk/btkclist.c: Draw the in-between lines with style->base
	instead of style->white.
	
Wed Apr 29 15:46:13 1998  Owen Taylor  <otaylor@btk.org>

	* bdk/bdkprivate.h bdk/bdkwindow.c bdk/bdkpixmap.c: 
	Cache the colormap and children of a window locally
	instead of fetching them from the server when needed.
	Huge performance difference for creating/destroying
	windows.

	* btk/btkstyle.c: Find the depth from the cached
	visual, instead of asking the server.

	* btk.m4: Distribute the new version which tries to
	figure out what went wrong and give helpful error
	messages.

	* ltmain.sh ltconfig config.sub config.sh: 
	Updated to libtool 1.2a

	* btk/btktext.c: Fixed a bug where the drawn level
	was being messed up when the text was scrolled
	during a deletion.
	
Thu Apr 30 02:42:11 PDT 1998 Manish Singh <yosh@gimp.org>

	* btk/btkfilesel.c: don't die when naughty people remove parts of
	the filesystem under you (fix from Josh)

Thu Apr 30 09:49:14 1998  Tim Janik  <timj@btk.org>

	* btk/btkscrolledwindow.c (btk_scrolled_window_foreach): check
	if the viewport already exists before iterating over it, maybe we
	haven't been constructed yet.

Thu Apr 30 01:51:00 1998  Tim Janik  <timj@btk.org>

	* btk/btkbin.c (btk_bin_add): made this function issue a warning if
	the BtkBin widget already has a child.

	* btk/btkbox.c (btk_box_pack_{start|end}):
 	check that child->parent == NULL;

Tue Apr 28 22:13:54 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btkselection.c (btk_selection_clear): Only return
	FALSE when the clear event is been rejected, not when
	widget has already lost the selection. (Which should
	only happen when we are setting the selection to another
	widget ourself.)
	
Fri Apr 24 19:07:32 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btkfixed.c btk/btkpaned.c btk/btktable.c:

	Removed the "check visibility after btk_widget_unparent" bug 
	in hopefully the last three places.

Tue Apr 28 15:46:41 1998  Tim Janik  <timj@btk.org>

	* btk/btkrc.c (btk_rc_parse_statement): allow the inclusion of other
	rc-files.

Mon Apr 27 15:11:52 1998  Tim Janik  <timj@btk.org>

	* btk/btkwidget.c (btk_widget_grab_focus): only allow grabbing of focus
	for CAN_FOCUS widgets.

	* btk/testbtk.c (create_scrolled_windows): feature h/v focus
	adjustments for the table.
	(create_list): feature automatic adjustment of the scrolled window to
	always contain the focused child.
	(create_main_window): keep the focussed button always inside of the
	scrolled windoww.

	* btk/btkcontainer.c (btk_real_container_focus): set the h/v focus
	adjustments, to contain the allocation of the currently focused child.
	(btk_container_set_focus_hadjustment): new functin to set the
 	horizontal focus adjustment.
	(btk_container_set_focus_vadjustment): new functin to set the vertical
 	focus adjustment.

	* btk/btkadjustment.c (btk_adjustment_clamp_page): new fucntion to
 	clamp the currents adjustment page into a specific range.

	* random BtkType fixups for btk_*_get_type() functions.

Fri Apr 24 18:37:16 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btktreeitem.c (btk_tree_item_remove_subtree): 
	Account for the fact that btk_tree_item_remove_subtree
	will be called recursively. 

	Handle removing a collapsed subtree.

	(From Andy Dustman <adustman@comstar.net>)
	
	* btk/btktree.c (btk_tree_remove_items): Look for the
	root tree when removing items from a non-previously
	mapped tree.

	* btk/testbtk.c: Added a remove_subtree button.
	
Thu Apr 23 23:44:17 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btkobject.c (btk_object_finalize): Notify all weak references
	before object removing data. This change fixes a bug where 
	removing the last weak references would cause it to be 
	triggered.

Wed Apr 15 20:42:46 1998  Owen Taylor  <otaylor@btk.org>

	* bdk/Makefile.am: Removed mostly useless dependency that
	was causing problems for SGI's make, when used with
	the 'make dist' form of BTK+. (Dependency caused dependencies
        to be redone when BUILT_SOURCES changed)

Thu Apr 30 11:18:00 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btkcombo.[ch]: Allow the user to use the popup list
	like a menu.
	
	* btk/btkmenuitem.c btk/btkitem.c: Moved enter/leave handlers
	to btkitem.c so dragging can also work in lists.

	* btk/btklist.[ch]: Track child enter events and use
	those to allow dragging the selection. 

Thu Apr 30 11:16:06 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btktext.c: Try enabling background pixmaps for editable text
	widgets.  There is a bit of flashing, but not too bad. If you
	don't want the flashing, you can always not set a background
	pixmap.

Wed Apr 29 15:46:13 1998  Owen Taylor  <otaylor@btk.org>

	* btk/btktext.c: Fixed a bug where the drawn level
	was being messed up when the text was scrolled
	during a deletion.
	
1998-04-28  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* bdk/bdk.c (bdk_event_translate): Random debugging fixed this
	bug:  There is no need to set the ExposureMask in the XGrabPointer
	(this caused DnD programs to crash).

Fri Apr 24 01:29:04 1998  Tim Janik  <timj@btk.org>

	* btk/btkaccelerator.h (struct _BtkAcceleratorTable): changed ref_count
	field to be of type buint.
	* btk/btkaccelerator.c (btk_accelerator_table_unref): added check for
	ref_count>0;
	(btk_accelerator_table_install): keep a per object list of accelerator
	tables that refer to this object.
	(btk_accelerator_table_remove): remove the accelerator table from the
	per object list.
	(btk_accelerator_table_clean): warn if there are any object references
 	left in an accelerator table upon destruction.
	(btk_accelerator_tables_delete): new function to delete object
	references from the accelerator tables associated with this object.

	* btk/btkwidget.c (btk_widget_class_init): changed emission of
	BtkWidget::install_accelerator to BTK_RUN_LAST so the installation
	of an accelerator can be prevented by btk_signal_emit_stop().
	(btk_widget_real_destroy): call btk_accelerator_tables_delete (),
	so there are no stale pointers in accelerator tables left.

1998-04-22  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* btk/btkbin.c (btk_bin_remove): Remember whether the widget was
	visible before we unparent it.

Wed Apr 22 04:15:26 1998  Tim Janik  <timj@btk.org>

	* btk/btkmain.c (btk_handle_current_timeouts): prepend the
 	running_timeouts list with the tmp_list link itself, not with a new
	GList structure pointing to our link. that would fill up memory and
	causes the GList.data fields of the running_timeouts list to point to
	GList structures and not BtkTimeoutFunction structures which is a
 	*really* bad thing.
	(btk_handle_current_idles): likewise (exchange "timout" with "idle" in
	the above entry ;).

Sat Apr 18 22:18:12 1998  Tim Janik  <timj@btk.org>

	* btk/btkradiomenuitem.h: 
	* btk/btkradiomenuitem.c (btk_radio_menu_item_set_group): new function
	ala btk_radio_button_set_group.
	(btk_radio_menu_item_init): assure that we always have at least a group
	that points to self.

	* btk/btkradiobutton.c (btk_radio_button_set_group): few cleanups and
 	added g_return_if_fail() statements.
	(btk_radio_button_init): assure that we always have at least a group
	that points to self.

Fri Apr 17 03:05:05 1998  Tim Janik  <timj@btk.org>

	* ChangeLog split up into ChangeLog.pre-1-0 and ChangeLog.

Wed Apr 15 05:13:09 1998  Tim Janik  <timj@btk.org>

	* btk/btklabel.c (btk_label_size_request): corrected a brace position
	(Damon Chaplin), which i got wrong when applying Damon's patch the last
 	time.

Wed Apr 15 20:42:46 1998  Owen Taylor  <otaylor@btk.org>

        * btk/btkpreview.c (btk_preview_get_visuals): Make sure
        that when we are running with a non-installed colormap,
        in 8-bit pseudo-color, we actually are using the system
        visual. (Fixes *Bad Match* errors on Digital Unix machines
        with multiple 8-bit pseudo-color visuals)

1998-04-14  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* bdk/bdkwindow.c (bdk_window_xid_at): Fix the problem introduced
	by whoever thought that randomly changing ints to unsigned int
	without reviewing the code was a good idea.  It is, btw not
	mentioned in the ChangeLog as usual, but I know it was not Elliot
	the culprit this time. 

Mon Apr 13 19:16:22 PDT 1998 Shawn T. Amundson <amundson@btk.org>

	* Released BTK+ 1.0.0

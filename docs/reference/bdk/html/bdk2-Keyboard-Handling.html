<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Keyboard Handling: BDK 2 Reference Manual</title>
<meta name="generator" content="DocBook XSL Stylesheets Vsnapshot">
<link rel="home" href="index.html" title="BDK 2 Reference Manual">
<link rel="up" href="reference.html" title="API Reference">
<link rel="prev" href="bdk2-Event-Structures.html" title="Event Structures">
<link rel="next" href="bdk2-Selections.html" title="Selections">
<meta name="generator" content="BTK-Doc V1.33.0 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="5"><tr valign="middle">
<td width="100%" align="left" class="shortcuts">
<a href="#" class="shortcut">Top</a><span id="nav_description">  <span class="dim">|</span> 
                  <a href="#bdk2-Keyboard-Handling.description" class="shortcut">Description</a></span><span id="nav_hierarchy">  <span class="dim">|</span> 
                  <a href="#bdk2-Keyboard-Handling.object-hierarchy" class="shortcut">Object Hierarchy</a></span><span id="nav_signals">  <span class="dim">|</span> 
                  <a href="#bdk2-Keyboard-Handling.signals" class="shortcut">Signals</a></span>
</td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="16" height="16" border="0" alt="Home"></a></td>
<td><a accesskey="u" href="reference.html"><img src="up.png" width="16" height="16" border="0" alt="Up"></a></td>
<td><a accesskey="p" href="bdk2-Event-Structures.html"><img src="left.png" width="16" height="16" border="0" alt="Prev"></a></td>
<td><a accesskey="n" href="bdk2-Selections.html"><img src="right.png" width="16" height="16" border="0" alt="Next"></a></td>
</tr></table>
<div class="refentry">
<a name="bdk2-Keyboard-Handling"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle"><a name="bdk2-Keyboard-Handling.top_of_page"></a>Keyboard Handling</span></h2>
<p>Keyboard Handling</p>
</td>
<td class="gallery_image" valign="top" align="right"></td>
</tr></table></div>
<div class="refsect1">
<a name="bdk2-Keyboard-Handling.functions"></a><h2>Functions</h2>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="functions_proto_type">
<col class="functions_proto_name">
</colgroup>
<tbody>
<tr>
<td class="function_type">
<a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymap"><span class="returnvalue">BdkKeymap</span></a> *
</td>
<td class="function_name">
<a class="link" href="bdk2-Keyboard-Handling.html#bdk-keymap-get-default" title="bdk_keymap_get_default ()">bdk_keymap_get_default</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymap"><span class="returnvalue">BdkKeymap</span></a> *
</td>
<td class="function_name">
<a class="link" href="bdk2-Keyboard-Handling.html#bdk-keymap-get-for-display" title="bdk_keymap_get_for_display ()">bdk_keymap_get_for_display</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">guint</span>
</td>
<td class="function_name">
<a class="link" href="bdk2-Keyboard-Handling.html#bdk-keymap-lookup-key" title="bdk_keymap_lookup_key ()">bdk_keymap_lookup_key</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">gboolean</span>
</td>
<td class="function_name">
<a class="link" href="bdk2-Keyboard-Handling.html#bdk-keymap-translate-keyboard-state" title="bdk_keymap_translate_keyboard_state ()">bdk_keymap_translate_keyboard_state</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">gboolean</span>
</td>
<td class="function_name">
<a class="link" href="bdk2-Keyboard-Handling.html#bdk-keymap-get-entries-for-keyval" title="bdk_keymap_get_entries_for_keyval ()">bdk_keymap_get_entries_for_keyval</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">gboolean</span>
</td>
<td class="function_name">
<a class="link" href="bdk2-Keyboard-Handling.html#bdk-keymap-get-entries-for-keycode" title="bdk_keymap_get_entries_for_keycode ()">bdk_keymap_get_entries_for_keycode</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a href="https://developer.bunny.org/bango/bango-Bidirectional-Text.html#BangoDirection"><span class="returnvalue">BangoDirection</span></a>
</td>
<td class="function_name">
<a class="link" href="bdk2-Keyboard-Handling.html#bdk-keymap-get-direction" title="bdk_keymap_get_direction ()">bdk_keymap_get_direction</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">gboolean</span>
</td>
<td class="function_name">
<a class="link" href="bdk2-Keyboard-Handling.html#bdk-keymap-have-bidi-layouts" title="bdk_keymap_have_bidi_layouts ()">bdk_keymap_have_bidi_layouts</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">gboolean</span>
</td>
<td class="function_name">
<a class="link" href="bdk2-Keyboard-Handling.html#bdk-keymap-get-caps-lock-state" title="bdk_keymap_get_caps_lock_state ()">bdk_keymap_get_caps_lock_state</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="bdk2-Keyboard-Handling.html#bdk-keymap-add-virtual-modifiers" title="bdk_keymap_add_virtual_modifiers ()">bdk_keymap_add_virtual_modifiers</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">gboolean</span>
</td>
<td class="function_name">
<a class="link" href="bdk2-Keyboard-Handling.html#bdk-keymap-map-virtual-modifiers" title="bdk_keymap_map_virtual_modifiers ()">bdk_keymap_map_virtual_modifiers</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">gchar</span> *
</td>
<td class="function_name">
<a class="link" href="bdk2-Keyboard-Handling.html#bdk-keyval-name" title="bdk_keyval_name ()">bdk_keyval_name</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">guint</span>
</td>
<td class="function_name">
<a class="link" href="bdk2-Keyboard-Handling.html#bdk-keyval-from-name" title="bdk_keyval_from_name ()">bdk_keyval_from_name</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="bdk2-Keyboard-Handling.html#bdk-keyval-convert-case" title="bdk_keyval_convert_case ()">bdk_keyval_convert_case</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">guint</span>
</td>
<td class="function_name">
<a class="link" href="bdk2-Keyboard-Handling.html#bdk-keyval-to-upper" title="bdk_keyval_to_upper ()">bdk_keyval_to_upper</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">guint</span>
</td>
<td class="function_name">
<a class="link" href="bdk2-Keyboard-Handling.html#bdk-keyval-to-lower" title="bdk_keyval_to_lower ()">bdk_keyval_to_lower</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">gboolean</span>
</td>
<td class="function_name">
<a class="link" href="bdk2-Keyboard-Handling.html#bdk-keyval-is-upper" title="bdk_keyval_is_upper ()">bdk_keyval_is_upper</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">gboolean</span>
</td>
<td class="function_name">
<a class="link" href="bdk2-Keyboard-Handling.html#bdk-keyval-is-lower" title="bdk_keyval_is_lower ()">bdk_keyval_is_lower</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">guint32</span>
</td>
<td class="function_name">
<a class="link" href="bdk2-Keyboard-Handling.html#bdk-keyval-to-unicode" title="bdk_keyval_to_unicode ()">bdk_keyval_to_unicode</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">guint</span>
</td>
<td class="function_name">
<a class="link" href="bdk2-Keyboard-Handling.html#bdk-unicode-to-keyval" title="bdk_unicode_to_keyval ()">bdk_unicode_to_keyval</a> <span class="c_punctuation">()</span>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect1">
<a name="bdk2-Keyboard-Handling.signals"></a><h2>Signals</h2>
<div class="informaltable"><table class="informaltable" border="0">
<colgroup>
<col width="150px" class="signal_proto_type">
<col width="300px" class="signal_proto_name">
<col width="200px" class="signal_proto_flags">
</colgroup>
<tbody>
<tr>
<td class="signal_type"><span class="returnvalue">void</span></td>
<td class="signal_name"><a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymap-direction-changed" title="The “direction-changed” signal">direction-changed</a></td>
<td class="signal_flags">Run Last</td>
</tr>
<tr>
<td class="signal_type"><span class="returnvalue">void</span></td>
<td class="signal_name"><a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymap-keys-changed" title="The “keys-changed” signal">keys-changed</a></td>
<td class="signal_flags">Run Last</td>
</tr>
<tr>
<td class="signal_type"><span class="returnvalue">void</span></td>
<td class="signal_name"><a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymap-state-changed" title="The “state-changed” signal">state-changed</a></td>
<td class="signal_flags">Run Last</td>
</tr>
</tbody>
</table></div>
</div>
<a name="BdkKeymap"></a><div class="refsect1">
<a name="bdk2-Keyboard-Handling.other"></a><h2>Types and Values</h2>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="other_proto_type">
<col class="other_proto_name">
</colgroup>
<tbody>
<tr>
<td class="datatype_keyword">struct</td>
<td class="function_name"><a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymap-struct" title="struct BdkKeymap">BdkKeymap</a></td>
</tr>
<tr>
<td class="datatype_keyword">struct</td>
<td class="function_name"><a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymapKey" title="struct BdkKeymapKey">BdkKeymapKey</a></td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect1">
<a name="bdk2-Keyboard-Handling.object-hierarchy"></a><h2>Object Hierarchy</h2>
<pre class="screen">    GObject
    <span class="lineart">╰──</span> BdkKeymap
</pre>
</div>
<div class="refsect1">
<a name="bdk2-Keyboard-Handling.includes"></a><h2>Includes</h2>
<pre class="synopsis">#include &lt;bdk/bdk.h&gt;
</pre>
</div>
<div class="refsect1">
<a name="bdk2-Keyboard-Handling.description"></a><h2>Description</h2>
</div>
<div class="refsect1">
<a name="bdk2-Keyboard-Handling.functions_details"></a><h2>Functions</h2>
<div class="refsect2">
<a name="bdk-keymap-get-default"></a><h3>bdk_keymap_get_default ()</h3>
<pre class="programlisting"><a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymap"><span class="returnvalue">BdkKeymap</span></a> *
bdk_keymap_get_default (<em class="parameter"><code><span class="type">void</span></code></em>);</pre>
<p>Returns the <a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymap"><span class="type">BdkKeymap</span></a> attached to the default display.</p>
<div class="refsect3">
<a name="bdk-keymap-get-default.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>returns</p></td>
<td class="parameter_description"><p>the <a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymap"><span class="type">BdkKeymap</span></a> attached to the default display.</p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
</div>
<hr>
<div class="refsect2">
<a name="bdk-keymap-get-for-display"></a><h3>bdk_keymap_get_for_display ()</h3>
<pre class="programlisting"><a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymap"><span class="returnvalue">BdkKeymap</span></a> *
bdk_keymap_get_for_display (<em class="parameter"><code><a class="link" href="BdkDisplay.html" title="BdkDisplay"><span class="type">BdkDisplay</span></a> *display</code></em>);</pre>
<p>Returns the <a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymap"><span class="type">BdkKeymap</span></a> attached to <em class="parameter"><code>display</code></em>
.</p>
<div class="refsect3">
<a name="bdk-keymap-get-for-display.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>display</p></td>
<td class="parameter_description"><p>the <a class="link" href="BdkDisplay.html" title="BdkDisplay"><span class="type">BdkDisplay</span></a>.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>returns</p></td>
<td class="parameter_description"><p>the <a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymap"><span class="type">BdkKeymap</span></a> attached to <em class="parameter"><code>display</code></em>
.</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<p class="since">Since: <a class="link" href="api-index-2-2.html#api-index-2.2">2.2</a></p>
</div>
<hr>
<div class="refsect2">
<a name="bdk-keymap-lookup-key"></a><h3>bdk_keymap_lookup_key ()</h3>
<pre class="programlisting"><span class="returnvalue">guint</span>
bdk_keymap_lookup_key (<em class="parameter"><code><a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymap"><span class="type">BdkKeymap</span></a> *keymap</code></em>,
                       <em class="parameter"><code>const <a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymapKey" title="struct BdkKeymapKey"><span class="type">BdkKeymapKey</span></a> *key</code></em>);</pre>
<p>Looks up the keyval mapped to a keycode/group/level triplet.
If no keyval is bound to <em class="parameter"><code>key</code></em>
, returns 0. For normal user input,
you want to use <a class="link" href="bdk2-Keyboard-Handling.html#bdk-keymap-translate-keyboard-state" title="bdk_keymap_translate_keyboard_state ()"><code class="function">bdk_keymap_translate_keyboard_state()</code></a> instead of
this function, since the effective group/level may not be
the same as the current keyboard state.</p>
<p>Note that passing <code class="literal">NULL</code> for <em class="parameter"><code>keymap</code></em>
 is deprecated and will stop
to work in BTK+ 3.0. Use <a class="link" href="bdk2-Keyboard-Handling.html#bdk-keymap-get-for-display" title="bdk_keymap_get_for_display ()"><code class="function">bdk_keymap_get_for_display()</code></a> instead.</p>
<div class="refsect3">
<a name="bdk-keymap-lookup-key.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>keymap</p></td>
<td class="parameter_description"><p>a <a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymap"><span class="type">BdkKeymap</span></a> or <code class="literal">NULL</code> to use the default keymap</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>key</p></td>
<td class="parameter_description"><p>a <a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymapKey" title="struct BdkKeymapKey"><span class="type">BdkKeymapKey</span></a> with keycode, group, and level initialized</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="bdk-keymap-lookup-key.returns"></a><h4>Returns</h4>
<p> a keyval, or 0 if none was mapped to the given <em class="parameter"><code>key</code></em>
</p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="bdk-keymap-translate-keyboard-state"></a><h3>bdk_keymap_translate_keyboard_state ()</h3>
<pre class="programlisting"><span class="returnvalue">gboolean</span>
bdk_keymap_translate_keyboard_state (<em class="parameter"><code><a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymap"><span class="type">BdkKeymap</span></a> *keymap</code></em>,
                                     <em class="parameter"><code><span class="type">guint</span> hardware_keycode</code></em>,
                                     <em class="parameter"><code><a class="link" href="bdk2-Windows.html#BdkModifierType" title="enum BdkModifierType"><span class="type">BdkModifierType</span></a> state</code></em>,
                                     <em class="parameter"><code><span class="type">gint</span> group</code></em>,
                                     <em class="parameter"><code><span class="type">guint</span> *keyval</code></em>,
                                     <em class="parameter"><code><span class="type">gint</span> *effective_group</code></em>,
                                     <em class="parameter"><code><span class="type">gint</span> *level</code></em>,
                                     <em class="parameter"><code><a class="link" href="bdk2-Windows.html#BdkModifierType" title="enum BdkModifierType"><span class="type">BdkModifierType</span></a> *consumed_modifiers</code></em>);</pre>
<p>Translates the contents of a <a class="link" href="bdk2-Event-Structures.html#BdkEventKey" title="struct BdkEventKey"><span class="type">BdkEventKey</span></a> into a keyval, effective
group, and level. Modifiers that affected the translation and
are thus unavailable for application use are returned in
<em class="parameter"><code>consumed_modifiers</code></em>
.  See <a class="xref" href="">???</a> for an explanation of
groups and levels.  The <em class="parameter"><code>effective_group</code></em>
 is the group that was
actually used for the translation; some keys such as Enter are not
affected by the active keyboard group. The <em class="parameter"><code>level</code></em>
 is derived from
<em class="parameter"><code>state</code></em>
. For convenience, <a class="link" href="bdk2-Event-Structures.html#BdkEventKey" title="struct BdkEventKey"><span class="type">BdkEventKey</span></a> already contains the translated
keyval, so this function isn't as useful as you might think.</p>
<div class="note">
<p>
<em class="parameter"><code>consumed_modifiers</code></em> gives modifiers that should be masked out
from <em class="parameter"><code>state</code></em> when comparing this key press to a hot key. For
instance, on a US keyboard, the <code class="literal">plus</code>
symbol is shifted, so when comparing a key press to a
<code class="literal">&lt;Control&gt;plus</code> accelerator &lt;Shift&gt; should
be masked out.
</p>
<div class="informalexample">
  <table class="listing_frame" border="0" cellpadding="0" cellspacing="0">
    <tbody>
      <tr>
        <td class="listing_lines" align="right"><pre>1
2
3
4
5
6
7
8</pre></td>
        <td class="listing_code"><pre class="programlisting"><span class="cm">/* We want to ignore irrelevant modifiers like ScrollLock */</span>
<span class="cp">#define ALL_ACCELS_MASK (BDK_CONTROL_MASK | BDK_SHIFT_MASK | BDK_MOD1_MASK)</span>
<span class="n">bdk_keymap_translate_keyboard_state</span> <span class="p">(</span><span class="n">keymap</span><span class="p">,</span> <span class="n">event</span><span class="o">-&gt;</span><span class="n">hardware_keycode</span><span class="p">,</span>
                                     <span class="n">event</span><span class="o">-&gt;</span><span class="n">state</span><span class="p">,</span> <span class="n">event</span><span class="o">-&gt;</span><span class="n">group</span><span class="p">,</span>
                                     <span class="o">&amp;</span><span class="n">keyval</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">consumed</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">keyval</span> <span class="o">==</span> <span class="n">BDK_PLUS</span> <span class="o">&amp;&amp;</span>
    <span class="p">(</span><span class="n">event</span><span class="o">-&gt;</span><span class="n">state</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">consumed</span> <span class="o">&amp;</span> <span class="n">ALL_ACCELS_MASK</span><span class="p">)</span> <span class="o">==</span> <span class="n">BDK_CONTROL_MASK</span><span class="p">)</span>
  <span class="cm">/* Control was pressed */</span></pre></td>
      </tr>
    </tbody>
  </table>
</div>

<p>
An older interpretation <em class="parameter"><code>consumed_modifiers</code></em> was that it contained
all modifiers that might affect the translation of the key;
this allowed accelerators to be stored with irrelevant consumed
modifiers, by doing:</p>
<div class="informalexample">
  <table class="listing_frame" border="0" cellpadding="0" cellspacing="0">
    <tbody>
      <tr>
        <td class="listing_lines" align="right"><pre>1
2
3
4</pre></td>
        <td class="listing_code"><pre class="programlisting"><span class="cm">/* XXX Don&#39;t do this XXX */</span>
<span class="k">if</span> <span class="p">(</span><span class="n">keyval</span> <span class="o">==</span> <span class="n">accel_keyval</span> <span class="o">&amp;&amp;</span>
    <span class="p">(</span><span class="n">event</span><span class="o">-&gt;</span><span class="n">state</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">consumed</span> <span class="o">&amp;</span> <span class="n">ALL_ACCELS_MASK</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="n">accel_mods</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">consumed</span><span class="p">))</span>
  <span class="cm">/* Accelerator was pressed */</span></pre></td>
      </tr>
    </tbody>
  </table>
</div>

<p>
However, this did not work if multi-modifier combinations were
used in the keymap, since, for instance, <code class="literal">&lt;Control&gt;</code>
would be masked out even if only <code class="literal">&lt;Control&gt;&lt;Alt&gt;</code>
was used in the keymap. To support this usage as well as well as
possible, all <span class="emphasis"><em>single modifier</em></span> combinations
that could affect the key for any combination of modifiers will
be returned in <em class="parameter"><code>consumed_modifiers</code></em>; multi-modifier combinations
are returned only when actually found in <em class="parameter"><code>state</code></em>. When you store
accelerators, you should always store them with consumed modifiers
removed. Store <code class="literal">&lt;Control&gt;plus</code>,
not <code class="literal">&lt;Control&gt;&lt;Shift&gt;plus</code>,
</p>
</div>
<p>Note that passing <code class="literal">NULL</code> for <em class="parameter"><code>keymap</code></em>
 is deprecated and will stop
to work in BTK+ 3.0. Use <a class="link" href="bdk2-Keyboard-Handling.html#bdk-keymap-get-for-display" title="bdk_keymap_get_for_display ()"><code class="function">bdk_keymap_get_for_display()</code></a> instead.</p>
<div class="refsect3">
<a name="bdk-keymap-translate-keyboard-state.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>keymap</p></td>
<td class="parameter_description"><p>a <a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymap"><span class="type">BdkKeymap</span></a>, or <code class="literal">NULL</code> to use the default. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>hardware_keycode</p></td>
<td class="parameter_description"><p>a keycode</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>state</p></td>
<td class="parameter_description"><p>a modifier state</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>group</p></td>
<td class="parameter_description"><p>active keyboard group</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>keyval</p></td>
<td class="parameter_description"><p>return location for keyval, or <code class="literal">NULL</code>. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="Parameter for returning results. Default is transfer full."><span class="acronym">out</span></acronym>][<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>effective_group</p></td>
<td class="parameter_description"><p>return location for effective group, or <code class="literal">NULL</code>. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="Parameter for returning results. Default is transfer full."><span class="acronym">out</span></acronym>][<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>level</p></td>
<td class="parameter_description"><p>return location for level, or <code class="literal">NULL</code>. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="Parameter for returning results. Default is transfer full."><span class="acronym">out</span></acronym>][<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>consumed_modifiers</p></td>
<td class="parameter_description"><p>return location for modifiers that were used to
determine the group or level, or <code class="literal">NULL</code>. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="Parameter for returning results. Default is transfer full."><span class="acronym">out</span></acronym>][<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="bdk-keymap-translate-keyboard-state.returns"></a><h4>Returns</h4>
<p> <code class="literal">TRUE</code> if there was a keyval bound to the keycode/state/group</p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="bdk-keymap-get-entries-for-keyval"></a><h3>bdk_keymap_get_entries_for_keyval ()</h3>
<pre class="programlisting"><span class="returnvalue">gboolean</span>
bdk_keymap_get_entries_for_keyval (<em class="parameter"><code><a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymap"><span class="type">BdkKeymap</span></a> *keymap</code></em>,
                                   <em class="parameter"><code><span class="type">guint</span> keyval</code></em>,
                                   <em class="parameter"><code><a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymapKey" title="struct BdkKeymapKey"><span class="type">BdkKeymapKey</span></a> **keys</code></em>,
                                   <em class="parameter"><code><span class="type">gint</span> *n_keys</code></em>);</pre>
<p>Obtains a list of keycode/group/level combinations that will
generate <em class="parameter"><code>keyval</code></em>
. Groups and levels are two kinds of keyboard mode;
in general, the level determines whether the top or bottom symbol
on a key is used, and the group determines whether the left or
right symbol is used. On US keyboards, the shift key changes the
keyboard level, and there are no groups. A group switch key might
convert a keyboard between Hebrew to English modes, for example.
<a class="link" href="bdk2-Event-Structures.html#BdkEventKey" title="struct BdkEventKey"><span class="type">BdkEventKey</span></a> contains a <code class="literal">group</code> field that indicates the active
keyboard group. The level is computed from the modifier mask.
The returned array should be freed
with <code class="function">g_free()</code>.</p>
<p>Note that passing <code class="literal">NULL</code> for <em class="parameter"><code>keymap</code></em>
 is deprecated and will stop
to work in BTK+ 3.0. Use <a class="link" href="bdk2-Keyboard-Handling.html#bdk-keymap-get-for-display" title="bdk_keymap_get_for_display ()"><code class="function">bdk_keymap_get_for_display()</code></a> instead.</p>
<div class="refsect3">
<a name="bdk-keymap-get-entries-for-keyval.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>keymap</p></td>
<td class="parameter_description"><p>a <a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymap"><span class="type">BdkKeymap</span></a>, or <code class="literal">NULL</code> to use the default keymap. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>keyval</p></td>
<td class="parameter_description"><p>a keyval, such as <code class="literal">BDK_a</code>, <code class="literal">BDK_Up</code>, <code class="literal">BDK_Return</code>, etc.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>keys</p></td>
<td class="parameter_description"><p>return location for an array of <a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymapKey" title="struct BdkKeymapKey"><span class="type">BdkKeymapKey</span></a>. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="Parameter for returning results. Default is transfer full."><span class="acronym">out</span></acronym>]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>n_keys</p></td>
<td class="parameter_description"><p>return location for number of elements in returned array. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="Parameter for returning results. Default is transfer full."><span class="acronym">out</span></acronym>]</span></td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="bdk-keymap-get-entries-for-keyval.returns"></a><h4>Returns</h4>
<p> <code class="literal">TRUE</code> if keys were found and returned</p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="bdk-keymap-get-entries-for-keycode"></a><h3>bdk_keymap_get_entries_for_keycode ()</h3>
<pre class="programlisting"><span class="returnvalue">gboolean</span>
bdk_keymap_get_entries_for_keycode (<em class="parameter"><code><a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymap"><span class="type">BdkKeymap</span></a> *keymap</code></em>,
                                    <em class="parameter"><code><span class="type">guint</span> hardware_keycode</code></em>,
                                    <em class="parameter"><code><a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymapKey" title="struct BdkKeymapKey"><span class="type">BdkKeymapKey</span></a> **keys</code></em>,
                                    <em class="parameter"><code><span class="type">guint</span> **keyvals</code></em>,
                                    <em class="parameter"><code><span class="type">gint</span> *n_entries</code></em>);</pre>
<p>Returns the keyvals bound to <em class="parameter"><code>hardware_keycode</code></em>
.
The Nth <a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymapKey" title="struct BdkKeymapKey"><span class="type">BdkKeymapKey</span></a> in <em class="parameter"><code>keys</code></em>
 is bound to the Nth
keyval in <em class="parameter"><code>keyvals</code></em>
. Free the returned arrays with <code class="function">g_free()</code>.
When a keycode is pressed by the user, the keyval from
this list of entries is selected by considering the effective
keyboard group and level. See <a class="link" href="bdk2-Keyboard-Handling.html#bdk-keymap-translate-keyboard-state" title="bdk_keymap_translate_keyboard_state ()"><code class="function">bdk_keymap_translate_keyboard_state()</code></a>.</p>
<p>Note that passing <code class="literal">NULL</code> for <em class="parameter"><code>keymap</code></em>
 is deprecated and will stop
to work in BTK+ 3.0. Use <a class="link" href="bdk2-Keyboard-Handling.html#bdk-keymap-get-for-display" title="bdk_keymap_get_for_display ()"><code class="function">bdk_keymap_get_for_display()</code></a> instead.</p>
<div class="refsect3">
<a name="bdk-keymap-get-entries-for-keycode.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>keymap</p></td>
<td class="parameter_description"><p>a <a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymap"><span class="type">BdkKeymap</span></a> or <code class="literal">NULL</code> to use the default keymap. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>hardware_keycode</p></td>
<td class="parameter_description"><p>a keycode</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>keys</p></td>
<td class="parameter_description"><p>return location for array of <a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymapKey" title="struct BdkKeymapKey"><span class="type">BdkKeymapKey</span></a>, or <code class="literal">NULL</code>. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="Parameter for returning results. Default is transfer full."><span class="acronym">out</span></acronym>]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>keyvals</p></td>
<td class="parameter_description"><p>return location for array of keyvals, or <code class="literal">NULL</code>. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="Parameter for returning results. Default is transfer full."><span class="acronym">out</span></acronym>]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>n_entries</p></td>
<td class="parameter_description"><p>length of <em class="parameter"><code>keys</code></em>
and <em class="parameter"><code>keyvals</code></em>
</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="bdk-keymap-get-entries-for-keycode.returns"></a><h4>Returns</h4>
<p> <code class="literal">TRUE</code> if there were any entries</p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="bdk-keymap-get-direction"></a><h3>bdk_keymap_get_direction ()</h3>
<pre class="programlisting"><a href="https://developer.bunny.org/bango/bango-Bidirectional-Text.html#BangoDirection"><span class="returnvalue">BangoDirection</span></a>
bdk_keymap_get_direction (<em class="parameter"><code><a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymap"><span class="type">BdkKeymap</span></a> *keymap</code></em>);</pre>
<p>Returns the direction of effective layout of the keymap.</p>
<p>Note that passing <code class="literal">NULL</code> for <em class="parameter"><code>keymap</code></em>
 is deprecated and will stop
to work in BTK+ 3.0. Use <a class="link" href="bdk2-Keyboard-Handling.html#bdk-keymap-get-for-display" title="bdk_keymap_get_for_display ()"><code class="function">bdk_keymap_get_for_display()</code></a> instead.</p>
<div class="refsect3">
<a name="bdk-keymap-get-direction.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>keymap</p></td>
<td class="parameter_description"><p>a <a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymap"><span class="type">BdkKeymap</span></a> or <code class="literal">NULL</code> to use the default keymap</p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="bdk-keymap-get-direction.returns"></a><h4>Returns</h4>
<p> <a href="https://developer.bunny.org/bango/bango-Bidirectional-Text.html#BANGO-DIRECTION-LTR:CAPS"><code class="literal">BANGO_DIRECTION_LTR</code></a> or <a href="https://developer.bunny.org/bango/bango-Bidirectional-Text.html#BANGO-DIRECTION-RTL:CAPS"><code class="literal">BANGO_DIRECTION_RTL</code></a>
if it can determine the direction. <a href="https://developer.bunny.org/bango/bango-Bidirectional-Text.html#BANGO-DIRECTION-NEUTRAL:CAPS"><code class="literal">BANGO_DIRECTION_NEUTRAL</code></a>
otherwise.</p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="bdk-keymap-have-bidi-layouts"></a><h3>bdk_keymap_have_bidi_layouts ()</h3>
<pre class="programlisting"><span class="returnvalue">gboolean</span>
bdk_keymap_have_bidi_layouts (<em class="parameter"><code><a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymap"><span class="type">BdkKeymap</span></a> *keymap</code></em>);</pre>
<p>Determines if keyboard layouts for both right-to-left and left-to-right
languages are in use.</p>
<p>Note that passing <code class="literal">NULL</code> for <em class="parameter"><code>keymap</code></em>
 is deprecated and will stop
to work in BTK+ 3.0. Use <a class="link" href="bdk2-Keyboard-Handling.html#bdk-keymap-get-for-display" title="bdk_keymap_get_for_display ()"><code class="function">bdk_keymap_get_for_display()</code></a> instead.</p>
<div class="refsect3">
<a name="bdk-keymap-have-bidi-layouts.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>keymap</p></td>
<td class="parameter_description"><p>a <a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymap"><span class="type">BdkKeymap</span></a> or <code class="literal">NULL</code> to use the default keymap</p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="bdk-keymap-have-bidi-layouts.returns"></a><h4>Returns</h4>
<p> <code class="literal">TRUE</code> if there are layouts in both directions, <code class="literal">FALSE</code> otherwise</p>
</div>
<p class="since">Since: <a class="link" href="api-index-2-12.html#api-index-2.12">2.12</a></p>
</div>
<hr>
<div class="refsect2">
<a name="bdk-keymap-get-caps-lock-state"></a><h3>bdk_keymap_get_caps_lock_state ()</h3>
<pre class="programlisting"><span class="returnvalue">gboolean</span>
bdk_keymap_get_caps_lock_state (<em class="parameter"><code><a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymap"><span class="type">BdkKeymap</span></a> *keymap</code></em>);</pre>
<p>Returns whether the Caps Lock modifer is locked.</p>
<div class="refsect3">
<a name="bdk-keymap-get-caps-lock-state.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>keymap</p></td>
<td class="parameter_description"><p>a <a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymap"><span class="type">BdkKeymap</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="bdk-keymap-get-caps-lock-state.returns"></a><h4>Returns</h4>
<p> <code class="literal">TRUE</code> if Caps Lock is on</p>
</div>
<p class="since">Since: <a class="link" href="api-index-2-16.html#api-index-2.16">2.16</a></p>
</div>
<hr>
<div class="refsect2">
<a name="bdk-keymap-add-virtual-modifiers"></a><h3>bdk_keymap_add_virtual_modifiers ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
bdk_keymap_add_virtual_modifiers (<em class="parameter"><code><a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymap"><span class="type">BdkKeymap</span></a> *keymap</code></em>,
                                  <em class="parameter"><code><a class="link" href="bdk2-Windows.html#BdkModifierType" title="enum BdkModifierType"><span class="type">BdkModifierType</span></a> *state</code></em>);</pre>
<p>Adds virtual modifiers (i.e. Super, Hyper and Meta) which correspond
to the real modifiers (i.e Mod2, Mod3, ...) in <em class="parameter"><code>modifiers</code></em>
.
are set in <em class="parameter"><code>state</code></em>
 to their non-virtual counterparts (i.e. Mod2,
Mod3,...) and set the corresponding bits in <em class="parameter"><code>state</code></em>
.</p>
<p>BDK already does this before delivering key events, but for
compatibility reasons, it only sets the first virtual modifier
it finds, whereas this function sets all matching virtual modifiers.</p>
<p>This function is useful when matching key events against
accelerators.</p>
<div class="refsect3">
<a name="bdk-keymap-add-virtual-modifiers.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>keymap</p></td>
<td class="parameter_description"><p>a <a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymap"><span class="type">BdkKeymap</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>state</p></td>
<td class="parameter_description"><p>pointer to the modifier mask to change</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<p class="since">Since: <a class="link" href="api-index-2-20.html#api-index-2.20">2.20</a></p>
</div>
<hr>
<div class="refsect2">
<a name="bdk-keymap-map-virtual-modifiers"></a><h3>bdk_keymap_map_virtual_modifiers ()</h3>
<pre class="programlisting"><span class="returnvalue">gboolean</span>
bdk_keymap_map_virtual_modifiers (<em class="parameter"><code><a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymap"><span class="type">BdkKeymap</span></a> *keymap</code></em>,
                                  <em class="parameter"><code><a class="link" href="bdk2-Windows.html#BdkModifierType" title="enum BdkModifierType"><span class="type">BdkModifierType</span></a> *state</code></em>);</pre>
<p>Maps the virtual modifiers (i.e. Super, Hyper and Meta) which
are set in <em class="parameter"><code>state</code></em>
 to their non-virtual counterparts (i.e. Mod2,
Mod3,...) and set the corresponding bits in <em class="parameter"><code>state</code></em>
.</p>
<p>This function is useful when matching key events against
accelerators.</p>
<div class="refsect3">
<a name="bdk-keymap-map-virtual-modifiers.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>keymap</p></td>
<td class="parameter_description"><p>a <a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymap"><span class="type">BdkKeymap</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>state</p></td>
<td class="parameter_description"><p>pointer to the modifier state to map</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="bdk-keymap-map-virtual-modifiers.returns"></a><h4>Returns</h4>
<p> <code class="literal">TRUE</code> if no virtual modifiers were mapped to the
same non-virtual modifier. Note that <code class="literal">FALSE</code> is also returned
if a virtual modifier is mapped to a non-virtual modifier that
was already set in <em class="parameter"><code>state</code></em>
.</p>
</div>
<p class="since">Since: <a class="link" href="api-index-2-20.html#api-index-2.20">2.20</a></p>
</div>
<hr>
<div class="refsect2">
<a name="bdk-keyval-name"></a><h3>bdk_keyval_name ()</h3>
<pre class="programlisting"><span class="returnvalue">gchar</span> *
bdk_keyval_name (<em class="parameter"><code><span class="type">guint</span> keyval</code></em>);</pre>
<p>Converts a key value into a symbolic name.</p>
<p>The names are the same as those in the
<code class="filename">&lt;bdk/bdkkeysyms.h&gt;</code> header file
but without the leading "BDK_KEY_".</p>
<div class="refsect3">
<a name="bdk-keyval-name.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>keyval</p></td>
<td class="parameter_description"><p>a key value</p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="bdk-keyval-name.returns"></a><h4>Returns</h4>
<p>a string containing the name of the key,
or <code class="literal">NULL</code> if <em class="parameter"><code>keyval</code></em>
is not a valid key. The string should not be
modified. </p>
<p><span class="annotation">[<acronym title="Don't free data after the code is done."><span class="acronym">transfer none</span></acronym>]</span></p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="bdk-keyval-from-name"></a><h3>bdk_keyval_from_name ()</h3>
<pre class="programlisting"><span class="returnvalue">guint</span>
bdk_keyval_from_name (<em class="parameter"><code>const <span class="type">gchar</span> *keyval_name</code></em>);</pre>
<p>Converts a key name to a key value.</p>
<p>The names are the same as those in the
<code class="filename">&lt;bdk/bdkkeysyms.h&gt;</code> header file
but without the leading "BDK_KEY_".</p>
<div class="refsect3">
<a name="bdk-keyval-from-name.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>keyval_name</p></td>
<td class="parameter_description"><p>a key name</p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="bdk-keyval-from-name.returns"></a><h4>Returns</h4>
<p> the corresponding key value, or <code class="literal">BDK_KEY_VoidSymbol</code>
if the key name is not a valid key</p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="bdk-keyval-convert-case"></a><h3>bdk_keyval_convert_case ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
bdk_keyval_convert_case (<em class="parameter"><code><span class="type">guint</span> symbol</code></em>,
                         <em class="parameter"><code><span class="type">guint</span> *lower</code></em>,
                         <em class="parameter"><code><span class="type">guint</span> *upper</code></em>);</pre>
<p>Obtains the upper- and lower-case versions of the keyval <em class="parameter"><code>symbol</code></em>
.
Examples of keyvals are <span class="type">BDK_a</span>, <span class="type">BDK_Enter</span>, <span class="type">BDK_F1</span>, etc.</p>
<div class="refsect3">
<a name="bdk-keyval-convert-case.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>symbol</p></td>
<td class="parameter_description"><p>a keyval</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>lower</p></td>
<td class="parameter_description"><p>return location for lowercase version of <em class="parameter"><code>symbol</code></em>
. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="Parameter for returning results. Default is transfer full."><span class="acronym">out</span></acronym>]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>upper</p></td>
<td class="parameter_description"><p>return location for uppercase version of <em class="parameter"><code>symbol</code></em>
. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="Parameter for returning results. Default is transfer full."><span class="acronym">out</span></acronym>]</span></td>
</tr>
</tbody>
</table></div>
</div>
</div>
<hr>
<div class="refsect2">
<a name="bdk-keyval-to-upper"></a><h3>bdk_keyval_to_upper ()</h3>
<pre class="programlisting"><span class="returnvalue">guint</span>
bdk_keyval_to_upper (<em class="parameter"><code><span class="type">guint</span> keyval</code></em>);</pre>
</div>
<hr>
<div class="refsect2">
<a name="bdk-keyval-to-lower"></a><h3>bdk_keyval_to_lower ()</h3>
<pre class="programlisting"><span class="returnvalue">guint</span>
bdk_keyval_to_lower (<em class="parameter"><code><span class="type">guint</span> keyval</code></em>);</pre>
</div>
<hr>
<div class="refsect2">
<a name="bdk-keyval-is-upper"></a><h3>bdk_keyval_is_upper ()</h3>
<pre class="programlisting"><span class="returnvalue">gboolean</span>
bdk_keyval_is_upper (<em class="parameter"><code><span class="type">guint</span> keyval</code></em>);</pre>
</div>
<hr>
<div class="refsect2">
<a name="bdk-keyval-is-lower"></a><h3>bdk_keyval_is_lower ()</h3>
<pre class="programlisting"><span class="returnvalue">gboolean</span>
bdk_keyval_is_lower (<em class="parameter"><code><span class="type">guint</span> keyval</code></em>);</pre>
</div>
<hr>
<div class="refsect2">
<a name="bdk-keyval-to-unicode"></a><h3>bdk_keyval_to_unicode ()</h3>
<pre class="programlisting"><span class="returnvalue">guint32</span>
bdk_keyval_to_unicode (<em class="parameter"><code><span class="type">guint</span> keyval</code></em>);</pre>
<p>Convert from a BDK key symbol to the corresponding ISO10646 (Unicode)
character.</p>
<div class="refsect3">
<a name="bdk-keyval-to-unicode.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>keyval</p></td>
<td class="parameter_description"><p>a BDK key symbol </p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="bdk-keyval-to-unicode.returns"></a><h4>Returns</h4>
<p> the corresponding unicode character, or 0 if there
is no corresponding character.</p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="bdk-unicode-to-keyval"></a><h3>bdk_unicode_to_keyval ()</h3>
<pre class="programlisting"><span class="returnvalue">guint</span>
bdk_unicode_to_keyval (<em class="parameter"><code><span class="type">guint32</span> wc</code></em>);</pre>
<p>Convert from a ISO10646 character to a key symbol.</p>
<div class="refsect3">
<a name="bdk-unicode-to-keyval.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>wc</p></td>
<td class="parameter_description"><p>a ISO10646 encoded character</p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="bdk-unicode-to-keyval.returns"></a><h4>Returns</h4>
<p> the corresponding BDK key symbol, if one exists.
or, if there is no corresponding symbol,
wc | 0x01000000</p>
</div>
</div>
</div>
<div class="refsect1">
<a name="bdk2-Keyboard-Handling.other_details"></a><h2>Types and Values</h2>
<div class="refsect2">
<a name="BdkKeymap-struct"></a><h3>struct BdkKeymap</h3>
<pre class="programlisting">struct BdkKeymap;</pre>
</div>
<hr>
<div class="refsect2">
<a name="BdkKeymapKey"></a><h3>struct BdkKeymapKey</h3>
<pre class="programlisting">struct BdkKeymapKey {
  guint keycode;
  gint  group;
  gint  level;
};
</pre>
</div>
</div>
<div class="refsect1">
<a name="bdk2-Keyboard-Handling.signal-details"></a><h2>Signal Details</h2>
<div class="refsect2">
<a name="BdkKeymap-direction-changed"></a><h3>The <code class="literal">“direction-changed”</code> signal</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
user_function (<a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymap"><span class="type">BdkKeymap</span></a> *keymap,
               <span class="type">gpointer</span>   user_data)</pre>
<p>The ::direction-changed signal gets emitted when the direction of
the keymap changes.</p>
<div class="refsect3">
<a name="BdkKeymap-direction-changed.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>keymap</p></td>
<td class="parameter_description"><p>the object on which the signal is emitted</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>user_data</p></td>
<td class="parameter_description"><p>user data set when the signal handler was connected.</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<p>Flags: Run Last</p>
<p class="since">Since: 2.0</p>
</div>
<hr>
<div class="refsect2">
<a name="BdkKeymap-keys-changed"></a><h3>The <code class="literal">“keys-changed”</code> signal</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
user_function (<a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymap"><span class="type">BdkKeymap</span></a> *keymap,
               <span class="type">gpointer</span>   user_data)</pre>
<p>The ::keys-changed signal is emitted when the mapping represented by
<em class="parameter"><code>keymap</code></em>
 changes.</p>
<div class="refsect3">
<a name="BdkKeymap-keys-changed.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>keymap</p></td>
<td class="parameter_description"><p>the object on which the signal is emitted</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>user_data</p></td>
<td class="parameter_description"><p>user data set when the signal handler was connected.</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<p>Flags: Run Last</p>
<p class="since">Since: <a class="link" href="api-index-2-2.html#api-index-2.2">2.2</a></p>
</div>
<hr>
<div class="refsect2">
<a name="BdkKeymap-state-changed"></a><h3>The <code class="literal">“state-changed”</code> signal</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
user_function (<a class="link" href="bdk2-Keyboard-Handling.html#BdkKeymap"><span class="type">BdkKeymap</span></a> *keymap,
               <span class="type">gpointer</span>   user_data)</pre>
<p>The ::state-changed signal is emitted when the state of the
keyboard changes, e.g when Caps Lock is turned on or off.
See <a class="link" href="bdk2-Keyboard-Handling.html#bdk-keymap-get-caps-lock-state" title="bdk_keymap_get_caps_lock_state ()"><code class="function">bdk_keymap_get_caps_lock_state()</code></a>.</p>
<div class="refsect3">
<a name="BdkKeymap-state-changed.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>keymap</p></td>
<td class="parameter_description"><p>the object on which the signal is emitted</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>user_data</p></td>
<td class="parameter_description"><p>user data set when the signal handler was connected.</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<p>Flags: Run Last</p>
<p class="since">Since: <a class="link" href="api-index-2-16.html#api-index-2.16">2.16</a></p>
</div>
</div>
</div>
<div class="footer">
<hr>Generated by BTK-Doc V1.33.0</div>
</body>
</html>